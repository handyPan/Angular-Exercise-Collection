var IN=Object.defineProperty,DN=Object.defineProperties,TN=Object.getOwnPropertyDescriptors,G1=Object.getOwnPropertySymbols,CN=Object.prototype.hasOwnProperty,AN=Object.prototype.propertyIsEnumerable,z1=(ht,ge,M)=>ge in ht?IN(ht,ge,{enumerable:!0,configurable:!0,writable:!0,value:M}):ht[ge]=M,W1=(ht,ge)=>{for(var M in ge||(ge={}))CN.call(ge,M)&&z1(ht,M,ge[M]);if(G1)for(var M of G1(ge))AN.call(ge,M)&&z1(ht,M,ge[M]);return ht},Z1=(ht,ge)=>DN(ht,TN(ge));(self.webpackChunkproject_angular=self.webpackChunkproject_angular||[]).push([[179],{2011:(ht,ge,M)=>{"use strict";M.d(ge,{hO:()=>k,xv:()=>E,Dh:()=>S,GT:()=>q,cc:()=>A,on:()=>_,pX:()=>j});var c=M(5e3),ee=M(127),F=M(5813);ht=M.hmd(ht);const K=["ngOnDestroy"],j=(L,re,J,Z={})=>new Proxy(L,{get:(X,$)=>J.runOutsideAngular(()=>{var H;if(L[$])return(null===(H=null==Z?void 0:Z.spy)||void 0===H?void 0:H.get)&&Z.spy.get($,L[$]),L[$];if(K.indexOf($)>-1)return()=>{};const W=re.toPromise().then(B=>{const te=B&&B[$];return"function"==typeof te?te.bind(B):te&&te.then?te.then(Y=>J.run(()=>Y)):J.run(()=>te)});return new Proxy(()=>{},{get:(B,te)=>W[te],apply:(B,te,Y)=>W.then(de=>{var ue;const be=de&&de(...Y);return(null===(ue=null==Z?void 0:Z.spy)||void 0===ue?void 0:ue.apply)&&Z.spy.apply($,Y,be),be})})})}),q=(L,re)=>{re.forEach(J=>{Object.getOwnPropertyNames(J.prototype||J).forEach(Z=>{Object.defineProperty(L.prototype,Z,Object.getOwnPropertyDescriptor(J.prototype||J,Z))})})};class R{constructor(re){return re}}const S=new c.OlP("angularfire2.app.options"),E=new c.OlP("angularfire2.app.name");function _(L,re,J){const X="object"==typeof J&&J||{};X.name=X.name||"string"==typeof J&&J||"[DEFAULT]";const H=ee.Z.apps.filter(W=>W&&W.name===X.name)[0]||re.runOutsideAngular(()=>ee.Z.initializeApp(L,X));try{JSON.stringify(L)!==JSON.stringify(H.options)&&T("error",`${H.name} Firebase App already initialized with different options${ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(W){}return new R(H)}const T=(L,...re)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[L](...re)},C={provide:R,useFactory:_,deps:[S,c.R0b,[new c.FiY,E]]};let k=(()=>{class L{constructor(J){ee.Z.registerVersion("angularfire",F.q4.full,"core"),ee.Z.registerVersion("angularfire",F.q4.full,"app-compat"),ee.Z.registerVersion("angular",c.q4F.full,J.toString())}static initializeApp(J,Z){return{ngModule:L,providers:[{provide:S,useValue:J},{provide:E,useValue:Z}]}}}return L.\u0275fac=function(J){return new(J||L)(c.LFG(c.Lbi))},L.\u0275mod=c.oAB({type:L}),L.\u0275inj=c.cJS({providers:[C]}),L})();function A(L,re,J,Z,X){const[,$,H]=globalThis.\u0275AngularfireInstanceCache.find(W=>W[0]===L)||[];if($)return function x(L,re){try{return L.toString()===re.toString()}catch(J){return L===re}}(X,H)||(D("error",`${re} was already initialized on the ${J} Firebase App with different settings.${V?" You may need to reload as Firebase is not HMR aware.":""}`),D("warn",{is:X,was:H})),$;{const W=Z();return globalThis.\u0275AngularfireInstanceCache.push([L,W,X]),W}}const V=!!ht.hot,D=(L,...re)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[L](...re)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ht,ge,M)=>{"use strict";M.d(ge,{q4:()=>Xt,iC:()=>Ua,HU:()=>Va,vb:()=>$l,JM:()=>Fu});var c=M(5e3),ee=M(5867),F=M(5861),K=M(9681),j=M(2090),q=M(4859),R=M(1877),S=M(8766);const E="@firebase/installations",_="0.5.12",C=`w:${_}`,k="FIS_v2",re=new j.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function J(O){return O instanceof j.ZR&&O.code.includes("request-failed")}function Z({projectId:O}){return`https://firebaseinstallations.googleapis.com/v1/projects/${O}/installations`}function X(O){return{token:O.token,requestStatus:2,expiresIn:de(O.expiresIn),creationTime:Date.now()}}function $(O,U){return H.apply(this,arguments)}function H(){return(H=(0,F.Z)(function*(O,U){const ye=(yield U.json()).error;return re.create("request-failed",{requestName:O,serverCode:ye.code,serverMessage:ye.message,serverStatus:ye.status})})).apply(this,arguments)}function W({apiKey:O}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O})}function B(O,{refreshToken:U}){const oe=W(O);return oe.append("Authorization",function ue(O){return`${k} ${O}`}(U)),oe}function te(O){return Y.apply(this,arguments)}function Y(){return(Y=(0,F.Z)(function*(O){const U=yield O();return U.status>=500&&U.status<600?O():U})).apply(this,arguments)}function de(O){return Number(O.replace("s","000"))}function be(O,U){return ce.apply(this,arguments)}function ce(){return(ce=(0,F.Z)(function*({appConfig:O,heartbeatServiceProvider:U},{fid:oe}){const ye=Z(O),Oe=W(O),Pe=U.getImmediate({optional:!0});if(Pe){const xt=yield Pe.getHeartbeatsHeader();xt&&Oe.append("x-firebase-client",xt)}const ot={method:"POST",headers:Oe,body:JSON.stringify({fid:oe,authVersion:k,appId:O.appId,sdkVersion:C})},_t=yield te(()=>fetch(ye,ot));if(_t.ok){const xt=yield _t.json();return{fid:xt.fid||oe,registrationStatus:2,refreshToken:xt.refreshToken,authToken:X(xt.authToken)}}throw yield $("Create Installation",_t)})).apply(this,arguments)}function le(O){return new Promise(U=>{setTimeout(U,O)})}const fe=/^[cdef][\w-]{21}$/;function _e(){try{const O=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(O),O[0]=112+O[0]%16;const oe=function xe(O){return function ie(O){return btoa(String.fromCharCode(...O)).replace(/\+/g,"-").replace(/\//g,"_")}(O).substr(0,22)}(O);return fe.test(oe)?oe:""}catch(O){return""}}function he(O){return`${O.appName}!${O.appId}`}const Ie=new Map;function ke(O,U){const oe=he(O);Qe(oe,U),function Et(O,U){const oe=function Mt(){return!wt&&"BroadcastChannel"in self&&(wt=new BroadcastChannel("[Firebase] FID Change"),wt.onmessage=O=>{Qe(O.data.key,O.data.fid)}),wt}();oe&&oe.postMessage({key:O,fid:U}),function Bt(){0===Ie.size&&wt&&(wt.close(),wt=null)}()}(oe,U)}function Qe(O,U){const oe=Ie.get(O);if(oe)for(const ye of oe)ye(U)}let wt=null;const Be="firebase-installations-store";let qe=null;function He(){return qe||(qe=(0,S.X3)("firebase-installations-database",1,{upgrade:(O,U)=>{0===U&&O.createObjectStore(Be)}})),qe}function it(O,U){return ze.apply(this,arguments)}function ze(){return(ze=(0,F.Z)(function*(O,U){const oe=he(O),Oe=(yield He()).transaction(Be,"readwrite"),Pe=Oe.objectStore(Be),Ke=yield Pe.get(oe);return yield Pe.put(U,oe),yield Oe.done,(!Ke||Ke.fid!==U.fid)&&ke(O,U.fid),U})).apply(this,arguments)}function vt(O){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,F.Z)(function*(O){const U=he(O),ye=(yield He()).transaction(Be,"readwrite");yield ye.objectStore(Be).delete(U),yield ye.done})).apply(this,arguments)}function Lt(O,U){return on.apply(this,arguments)}function on(){return(on=(0,F.Z)(function*(O,U){const oe=he(O),Oe=(yield He()).transaction(Be,"readwrite"),Pe=Oe.objectStore(Be),Ke=yield Pe.get(oe),ot=U(Ke);return void 0===ot?yield Pe.delete(oe):yield Pe.put(ot,oe),yield Oe.done,ot&&(!Ke||Ke.fid!==ot.fid)&&ke(O,ot.fid),ot})).apply(this,arguments)}function fn(O){return en.apply(this,arguments)}function en(){return(en=(0,F.Z)(function*(O){let U;const oe=yield Lt(O.appConfig,ye=>{const Oe=Do(ye),Pe=At(O,Oe);return U=Pe.registrationPromise,Pe.installationEntry});return""===oe.fid?{installationEntry:yield U}:{installationEntry:oe,registrationPromise:U}})).apply(this,arguments)}function Do(O){return To(O||{fid:_e(),registrationStatus:0})}function At(O,U){if(0===U.registrationStatus){if(!navigator.onLine)return{installationEntry:U,registrationPromise:Promise.reject(re.create("app-offline"))};const oe={fid:U.fid,registrationStatus:1,registrationTime:Date.now()},ye=function ft(O,U){return Ft.apply(this,arguments)}(O,oe);return{installationEntry:oe,registrationPromise:ye}}return 1===U.registrationStatus?{installationEntry:U,registrationPromise:_r(O)}:{installationEntry:U}}function Ft(){return(Ft=(0,F.Z)(function*(O,U){try{const oe=yield be(O,U);return it(O.appConfig,oe)}catch(oe){throw J(oe)&&409===oe.customData.serverCode?yield vt(O.appConfig):yield it(O.appConfig,{fid:U.fid,registrationStatus:0}),oe}})).apply(this,arguments)}function _r(O){return ni.apply(this,arguments)}function ni(){return(ni=(0,F.Z)(function*(O){let U=yield tn(O.appConfig);for(;1===U.registrationStatus;)yield le(100),U=yield tn(O.appConfig);if(0===U.registrationStatus){const{installationEntry:oe,registrationPromise:ye}=yield fn(O);return ye||oe}return U})).apply(this,arguments)}function tn(O){return Lt(O,U=>{if(!U)throw re.create("installation-not-found");return To(U)})}function To(O){return function br(O){return 1===O.registrationStatus&&O.registrationTime+1e4<Date.now()}(O)?{fid:O.fid,registrationStatus:0}:O}function Or(O,U){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,F.Z)(function*({appConfig:O,heartbeatServiceProvider:U},oe){const ye=Co(O,oe),Oe=B(O,oe),Pe=U.getImmediate({optional:!0});if(Pe){const xt=yield Pe.getHeartbeatsHeader();xt&&Oe.append("x-firebase-client",xt)}const ot={method:"POST",headers:Oe,body:JSON.stringify({installation:{sdkVersion:C,appId:O.appId}})},_t=yield te(()=>fetch(ye,ot));if(_t.ok)return X(yield _t.json());throw yield $("Generate Auth Token",_t)})).apply(this,arguments)}function Co(O,{fid:U}){return`${Z(O)}/${U}/authTokens:generate`}function Ee(O){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,F.Z)(function*(O,U=!1){let oe;const ye=yield Lt(O.appConfig,Pe=>{if(!It(Pe))throw re.create("not-registered");const Ke=Pe.authToken;if(!U&&yn(Ke))return Pe;if(1===Ke.requestStatus)return oe=ve(O,U),Pe;{if(!navigator.onLine)throw re.create("app-offline");const ot=sr(Pe);return oe=Ze(O,ot),ot}});return oe?yield oe:ye.authToken})).apply(this,arguments)}function ve(O,U){return De.apply(this,arguments)}function De(){return(De=(0,F.Z)(function*(O,U){let oe=yield Ce(O.appConfig);for(;1===oe.authToken.requestStatus;)yield le(100),oe=yield Ce(O.appConfig);const ye=oe.authToken;return 0===ye.requestStatus?Ee(O,U):ye})).apply(this,arguments)}function Ce(O){return Lt(O,U=>{if(!It(U))throw re.create("not-registered");return function Qt(O){return 1===O.requestStatus&&O.requestTime+1e4<Date.now()}(U.authToken)?Object.assign(Object.assign({},U),{authToken:{requestStatus:0}}):U})}function Ze(O,U){return rt.apply(this,arguments)}function rt(){return(rt=(0,F.Z)(function*(O,U){try{const oe=yield Or(O,U),ye=Object.assign(Object.assign({},U),{authToken:oe});return yield it(O.appConfig,ye),oe}catch(oe){if(!J(oe)||401!==oe.customData.serverCode&&404!==oe.customData.serverCode){const ye=Object.assign(Object.assign({},U),{authToken:{requestStatus:0}});yield it(O.appConfig,ye)}else yield vt(O.appConfig);throw oe}})).apply(this,arguments)}function It(O){return void 0!==O&&2===O.registrationStatus}function yn(O){return 2===O.requestStatus&&!function un(O){const U=Date.now();return U<O.creationTime||O.creationTime+O.expiresIn<U+36e5}(O)}function sr(O){const U={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},O),{authToken:U})}function Oi(){return(Oi=(0,F.Z)(function*(O){const U=O,{installationEntry:oe,registrationPromise:ye}=yield fn(U);return ye?ye.catch(console.error):Ee(U).catch(console.error),oe.fid})).apply(this,arguments)}function ca(){return(ca=(0,F.Z)(function*(O,U=!1){const oe=O;return yield Jn(oe),(yield Ee(oe,U)).token})).apply(this,arguments)}function Jn(O){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,F.Z)(function*(O){const{registrationPromise:U}=yield fn(O);U&&(yield U)})).apply(this,arguments)}function Ms(O){return re.create("missing-app-config-values",{valueName:O})}const $r="installations",Dt=O=>{const U=O.getProvider("app").getImmediate(),oe=function dr(O){if(!O||!O.options)throw Ms("App Configuration");if(!O.name)throw Ms("App Name");const U=["projectId","apiKey","appId"];for(const oe of U)if(!O.options[oe])throw Ms(oe);return{appName:O.name,projectId:O.options.projectId,apiKey:O.options.apiKey,appId:O.options.appId}}(U);return{app:U,appConfig:oe,heartbeatServiceProvider:(0,K._getProvider)(U,"heartbeat"),_delete:()=>Promise.resolve()}},vn=O=>{const U=O.getProvider("app").getImmediate(),oe=(0,K._getProvider)(U,$r).getImmediate();return{getId:()=>function qr(O){return Oi.apply(this,arguments)}(oe),getToken:Oe=>function Os(O){return ca.apply(this,arguments)}(oe,Oe)}};(function Gr(){(0,K._registerComponent)(new q.wA($r,Dt,"PUBLIC")),(0,K._registerComponent)(new q.wA("installations-internal",vn,"PRIVATE"))})(),(0,K.registerVersion)(E,_),(0,K.registerVersion)(E,_,"esm2017");const Mi="@firebase/remote-config",Un=new j.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class wp{constructor(U,oe,ye,Oe){this.client=U,this.storage=oe,this.storageCache=ye,this.logger=Oe}isCachedDataFresh(U,oe){if(!oe)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ye=Date.now()-oe,Oe=ye<=U;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ye}. Cache max age millis (minimumFetchIntervalMillis setting): ${U}. Is cache hit: ${Oe}.`),Oe}fetch(U){var oe=this;return(0,F.Z)(function*(){const[ye,Oe]=yield Promise.all([oe.storage.getLastSuccessfulFetchTimestampMillis(),oe.storage.getLastSuccessfulFetchResponse()]);if(Oe&&oe.isCachedDataFresh(U.cacheMaxAgeMillis,ye))return Oe;U.eTag=Oe&&Oe.eTag;const Pe=yield oe.client.fetch(U),Ke=[oe.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Pe.status&&Ke.push(oe.storage.setLastSuccessfulFetchResponse(Pe)),yield Promise.all(Ke),Pe})()}}function Gc(O=navigator){return O.languages&&O.languages[0]||O.language}class Er{constructor(U,oe,ye,Oe,Pe,Ke){this.firebaseInstallations=U,this.sdkVersion=oe,this.namespace=ye,this.projectId=Oe,this.apiKey=Pe,this.appId=Ke}fetch(U){var oe=this;return(0,F.Z)(function*(){var ye,Oe,Pe;const[Ke,ot]=yield Promise.all([oe.firebaseInstallations.getId(),oe.firebaseInstallations.getToken()]),xt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${oe.projectId}/namespaces/${oe.namespace}:fetch?key=${oe.apiKey}`,Vt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":U.eTag||"*"},bt={sdk_version:oe.sdkVersion,app_instance_id:Ke,app_instance_id_token:ot,app_id:oe.appId,language_code:Gc()},Mn={method:"POST",headers:Vt,body:JSON.stringify(bt)},Dr=fetch(xt,Mn),lo=new Promise((Tr,Gi)=>{U.signal.addEventListener(()=>{const pd=new Error("The operation was aborted.");pd.name="AbortError",Gi(pd)})});let co;try{yield Promise.race([Dr,lo]),co=yield Dr}catch(Tr){let Gi="fetch-client-network";throw"AbortError"===(null===(ye=Tr)||void 0===ye?void 0:ye.name)&&(Gi="fetch-timeout"),Un.create(Gi,{originalErrorMessage:null===(Oe=Tr)||void 0===Oe?void 0:Oe.message})}let Ti=co.status;const fd=co.headers.get("ETag")||void 0;let Vu,gs;if(200===co.status){let Tr;try{Tr=yield co.json()}catch(Gi){throw Un.create("fetch-client-parse",{originalErrorMessage:null===(Pe=Gi)||void 0===Pe?void 0:Pe.message})}Vu=Tr.entries,gs=Tr.state}if("INSTANCE_STATE_UNSPECIFIED"===gs?Ti=500:"NO_CHANGE"===gs?Ti=304:("NO_TEMPLATE"===gs||"EMPTY_CONFIG"===gs)&&(Vu={}),304!==Ti&&200!==Ti)throw Un.create("fetch-status",{httpStatus:Ti});return{status:Ti,eTag:fd,config:Vu}})()}}class Ip{constructor(U,oe){this.client=U,this.storage=oe}fetch(U){var oe=this;return(0,F.Z)(function*(){const ye=(yield oe.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return oe.attemptFetch(U,ye)})()}attemptFetch(U,{throttleEndTimeMillis:oe,backoffCount:ye}){var Oe=this;return(0,F.Z)(function*(){yield function Mo(O,U){return new Promise((oe,ye)=>{const Oe=Math.max(U-Date.now(),0),Pe=setTimeout(oe,Oe);O.addEventListener(()=>{clearTimeout(Pe),ye(Un.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}(U.signal,oe);try{const Pe=yield Oe.client.fetch(U);return yield Oe.storage.deleteThrottleMetadata(),Pe}catch(Pe){if(!function zc(O){if(!(O instanceof j.ZR&&O.customData))return!1;const U=Number(O.customData.httpStatus);return 429===U||500===U||503===U||504===U}(Pe))throw Pe;const Ke={throttleEndTimeMillis:Date.now()+(0,j.$s)(ye),backoffCount:ye+1};return yield Oe.storage.setThrottleMetadata(Ke),Oe.attemptFetch(U,Ke)}})()}}class Wc{constructor(U,oe,ye,Oe,Pe){this.app=U,this._client=oe,this._storageCache=ye,this._storage=Oe,this._logger=Pe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Dl(O,U){var oe;const ye=O.target.error||void 0;return Un.create(U,{originalErrorMessage:ye&&(null===(oe=ye)||void 0===oe?void 0:oe.message)})}const No="app_namespace_store";class Ap{constructor(U,oe,ye,Oe=function Cp(){return new Promise((O,U)=>{var oe;try{const ye=indexedDB.open("firebase_remote_config",1);ye.onerror=Oe=>{U(Dl(Oe,"storage-open"))},ye.onsuccess=Oe=>{O(Oe.target.result)},ye.onupgradeneeded=Oe=>{0===Oe.oldVersion&&Oe.target.result.createObjectStore(No,{keyPath:"compositeKey"})}}catch(ye){U(Un.create("storage-open",{originalErrorMessage:null===(oe=ye)||void 0===oe?void 0:oe.message}))}})}()){this.appId=U,this.appName=oe,this.namespace=ye,this.openDbPromise=Oe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(U){return this.set("last_fetch_status",U)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(U){return this.set("last_successful_fetch_timestamp_millis",U)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(U){return this.set("last_successful_fetch_response",U)}getActiveConfig(){return this.get("active_config")}setActiveConfig(U){return this.set("active_config",U)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(U){return this.set("active_config_etag",U)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(U){return this.set("throttle_metadata",U)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(U){var oe=this;return(0,F.Z)(function*(){const ye=yield oe.openDbPromise;return new Promise((Oe,Pe)=>{var Ke;const _t=ye.transaction([No],"readonly").objectStore(No),xt=oe.createCompositeKey(U);try{const Vt=_t.get(xt);Vt.onerror=bt=>{Pe(Dl(bt,"storage-get"))},Vt.onsuccess=bt=>{const Mn=bt.target.result;Oe(Mn?Mn.value:void 0)}}catch(Vt){Pe(Un.create("storage-get",{originalErrorMessage:null===(Ke=Vt)||void 0===Ke?void 0:Ke.message}))}})})()}set(U,oe){var ye=this;return(0,F.Z)(function*(){const Oe=yield ye.openDbPromise;return new Promise((Pe,Ke)=>{var ot;const xt=Oe.transaction([No],"readwrite").objectStore(No),Vt=ye.createCompositeKey(U);try{const bt=xt.put({compositeKey:Vt,value:oe});bt.onerror=Mn=>{Ke(Dl(Mn,"storage-set"))},bt.onsuccess=()=>{Pe()}}catch(bt){Ke(Un.create("storage-set",{originalErrorMessage:null===(ot=bt)||void 0===ot?void 0:ot.message}))}})})()}delete(U){var oe=this;return(0,F.Z)(function*(){const ye=yield oe.openDbPromise;return new Promise((Oe,Pe)=>{var Ke;const _t=ye.transaction([No],"readwrite").objectStore(No),xt=oe.createCompositeKey(U);try{const Vt=_t.delete(xt);Vt.onerror=bt=>{Pe(Dl(bt,"storage-delete"))},Vt.onsuccess=()=>{Oe()}}catch(Vt){Pe(Un.create("storage-delete",{originalErrorMessage:null===(Ke=Vt)||void 0===Ke?void 0:Ke.message}))}})})()}createCompositeKey(U){return[this.appId,this.appName,this.namespace,U].join()}}class Kc{constructor(U){this.storage=U}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var U=this;return(0,F.Z)(function*(){const oe=U.storage.getLastFetchStatus(),ye=U.storage.getLastSuccessfulFetchTimestampMillis(),Oe=U.storage.getActiveConfig(),Pe=yield oe;Pe&&(U.lastFetchStatus=Pe);const Ke=yield ye;Ke&&(U.lastSuccessfulFetchTimestampMillis=Ke);const ot=yield Oe;ot&&(U.activeConfig=ot)})()}setLastFetchStatus(U){return this.lastFetchStatus=U,this.storage.setLastFetchStatus(U)}setLastSuccessfulFetchTimestampMillis(U){return this.lastSuccessfulFetchTimestampMillis=U,this.storage.setLastSuccessfulFetchTimestampMillis(U)}setActiveConfig(U){return this.activeConfig=U,this.storage.setActiveConfig(U)}}function vu(){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,F.Z)(function*(){if(!(0,j.hl)())return!1;try{return yield(0,j.eu)()}catch(O){return!1}})).apply(this,arguments)}!function Ns(){(0,K._registerComponent)(new q.wA("remote-config",function O(U,{instanceIdentifier:oe}){const ye=U.getProvider("app").getImmediate(),Oe=U.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Un.create("registration-window");if(!(0,j.hl)())throw Un.create("indexed-db-unavailable");const{projectId:Pe,apiKey:Ke,appId:ot}=ye.options;if(!Pe)throw Un.create("registration-project-id");if(!Ke)throw Un.create("registration-api-key");if(!ot)throw Un.create("registration-app-id");const _t=new Ap(ot,ye.name,oe=oe||"firebase"),xt=new Kc(_t),Vt=new R.Yd(Mi);Vt.logLevel=R.in.ERROR;const bt=new Er(Oe,K.SDK_VERSION,oe,Pe,Ke,ot),Mn=new Ip(bt,_t),Dr=new wp(Mn,_t,xt,Vt),lo=new Wc(ye,Dr,xt,_t,Vt);return function _n(O){const U=(0,j.m9)(O);U._initializePromise||(U._initializePromise=U._storageCache.loadFromStorage().then(()=>{U._isInitializationComplete=!0}))}(lo),lo},"PUBLIC").setMultipleInstances(!0)),(0,K.registerVersion)(Mi,"0.3.11"),(0,K.registerVersion)(Mi,"0.3.11","esm2017")}();const Qc="/firebase-messaging-sw.js",wr="/firebase-cloud-messaging-push-scope",Jo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ks="google.c.a.c_id",Jc="google.c.a.c_l",Eh="google.c.a.ts",Xc="google.c.a.e";var Rs=(()=>{return(O=Rs||(Rs={})).PUSH_RECEIVED="push-received",O.NOTIFICATION_CLICKED="notification-clicked",Rs;var O})();function Nr(O){const U=new Uint8Array(O);return btoa(String.fromCharCode(...U)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ed(O){const oe=(O+"=".repeat((4-O.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ye=atob(oe),Oe=new Uint8Array(ye.length);for(let Pe=0;Pe<ye.length;++Pe)Oe[Pe]=ye.charCodeAt(Pe);return Oe}const kr="fcm_token_details_db",ri="fcm_token_object_Store";function Tl(O){return td.apply(this,arguments)}function td(){return td=(0,F.Z)(function*(O){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Pe=>Pe.name).includes(kr))return null;let U=null;return(yield(0,S.X3)(kr,5,{upgrade:(ye=(0,F.Z)(function*(Oe,Pe,Ke,ot){var _t;if(Pe<2||!Oe.objectStoreNames.contains(ri))return;const xt=ot.objectStore(ri),Vt=yield xt.index("fcmSenderId").get(O);if(yield xt.clear(),Vt)if(2===Pe){const bt=Vt;if(!bt.auth||!bt.p256dh||!bt.endpoint)return;U={token:bt.fcmToken,createTime:null!==(_t=bt.createTime)&&void 0!==_t?_t:Date.now(),subscriptionOptions:{auth:bt.auth,p256dh:bt.p256dh,endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:"string"==typeof bt.vapidKey?bt.vapidKey:Nr(bt.vapidKey)}}}else if(3===Pe){const bt=Vt;U={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:Nr(bt.auth),p256dh:Nr(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:Nr(bt.vapidKey)}}}else if(4===Pe){const bt=Vt;U={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:Nr(bt.auth),p256dh:Nr(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:Nr(bt.vapidKey)}}}}),function(Pe,Ke,ot,_t){return ye.apply(this,arguments)})})).close(),yield(0,S.Lj)(kr),yield(0,S.Lj)("fcm_vapid_details_db"),yield(0,S.Lj)("undefined"),Cl(U)?U:null;var ye}),td.apply(this,arguments)}function Cl(O){if(!O||!O.subscriptionOptions)return!1;const{subscriptionOptions:U}=O;return"number"==typeof O.createTime&&O.createTime>0&&"string"==typeof O.token&&O.token.length>0&&"string"==typeof U.auth&&U.auth.length>0&&"string"==typeof U.p256dh&&U.p256dh.length>0&&"string"==typeof U.endpoint&&U.endpoint.length>0&&"string"==typeof U.swScope&&U.swScope.length>0&&"string"==typeof U.vapidKey&&U.vapidKey.length>0}const Fi="firebase-messaging-store";let wh=null;function bn(){return wh||(wh=(0,S.X3)("firebase-messaging-database",1,{upgrade:(O,U)=>{0===U&&O.createObjectStore(Fi)}})),wh}function ga(O){return ts.apply(this,arguments)}function ts(){return(ts=(0,F.Z)(function*(O){const U=fr(O),ye=yield(yield bn()).transaction(Fi).objectStore(Fi).get(U);if(ye)return ye;{const Oe=yield Tl(O.appConfig.senderId);if(Oe)return yield pn(O,Oe),Oe}})).apply(this,arguments)}function pn(O,U){return ma.apply(this,arguments)}function ma(){return(ma=(0,F.Z)(function*(O,U){const oe=fr(O),Oe=(yield bn()).transaction(Fi,"readwrite");return yield Oe.objectStore(Fi).put(U,oe),yield Oe.done,U})).apply(this,arguments)}function _u(O){return ko.apply(this,arguments)}function ko(){return(ko=(0,F.Z)(function*(O){const U=fr(O),ye=(yield bn()).transaction(Fi,"readwrite");yield ye.objectStore(Fi).delete(U),yield ye.done})).apply(this,arguments)}function fr({appConfig:O}){return O.appId}const On=new j.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Vi(O,U){return pr.apply(this,arguments)}function pr(){return(pr=(0,F.Z)(function*(O,U){var oe;const ye=yield Ls(O),Oe=Fs(U),Pe={method:"POST",headers:ye,body:JSON.stringify(Oe)};let Ke;try{Ke=yield(yield fetch(Ui(O.appConfig),Pe)).json()}catch(ot){throw On.create("token-subscribe-failed",{errorInfo:null===(oe=ot)||void 0===oe?void 0:oe.toString()})}if(Ke.error)throw On.create("token-subscribe-failed",{errorInfo:Ke.error.message});if(!Ke.token)throw On.create("token-subscribe-no-token");return Ke.token})).apply(this,arguments)}function ns(O,U){return io.apply(this,arguments)}function io(){return(io=(0,F.Z)(function*(O,U){var oe;const ye=yield Ls(O),Oe=Fs(U.subscriptionOptions),Pe={method:"PATCH",headers:ye,body:JSON.stringify(Oe)};let Ke;try{Ke=yield(yield fetch(`${Ui(O.appConfig)}/${U.token}`,Pe)).json()}catch(ot){throw On.create("token-update-failed",{errorInfo:null===(oe=ot)||void 0===oe?void 0:oe.toString()})}if(Ke.error)throw On.create("token-update-failed",{errorInfo:Ke.error.message});if(!Ke.token)throw On.create("token-update-no-token");return Ke.token})).apply(this,arguments)}function ya(O,U){return _i.apply(this,arguments)}function _i(){return(_i=(0,F.Z)(function*(O,U){var oe;const Oe={method:"DELETE",headers:yield Ls(O)};try{const Ke=yield(yield fetch(`${Ui(O.appConfig)}/${U}`,Oe)).json();if(Ke.error)throw On.create("token-unsubscribe-failed",{errorInfo:Ke.error.message})}catch(Pe){throw On.create("token-unsubscribe-failed",{errorInfo:null===(oe=Pe)||void 0===oe?void 0:oe.toString()})}})).apply(this,arguments)}function Ui({projectId:O}){return`https://fcmregistrations.googleapis.com/v1/projects/${O}/registrations`}function Ls(O){return St.apply(this,arguments)}function St(){return(St=(0,F.Z)(function*({appConfig:O,installations:U}){const oe=yield U.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O.apiKey,"x-goog-firebase-installations-auth":`FIS ${oe}`})})).apply(this,arguments)}function Fs({p256dh:O,auth:U,endpoint:oe,vapidKey:ye}){const Oe={web:{endpoint:oe,auth:U,p256dh:O}};return ye!==Jo&&(Oe.web.applicationPubKey=ye),Oe}const bu=6048e5;function va(O){return xl.apply(this,arguments)}function xl(){return(xl=(0,F.Z)(function*(O){const U=yield An(O.swRegistration,O.vapidKey),oe={vapidKey:O.vapidKey,swScope:O.swRegistration.scope,endpoint:U.endpoint,auth:Nr(U.getKey("auth")),p256dh:Nr(U.getKey("p256dh"))},ye=yield ga(O.firebaseDependencies);if(ye){if(rs(ye.subscriptionOptions,oe))return Date.now()>=ye.createTime+bu?Ml(O,{token:ye.token,createTime:Date.now(),subscriptionOptions:oe}):ye.token;try{yield ya(O.firebaseDependencies,ye.token)}catch(Oe){console.warn(Oe)}return Jt(O.firebaseDependencies,oe)}return Jt(O.firebaseDependencies,oe)})).apply(this,arguments)}function _a(O){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,F.Z)(function*(O){const U=yield ga(O.firebaseDependencies);U&&(yield ya(O.firebaseDependencies,U.token),yield _u(O.firebaseDependencies));const oe=yield O.swRegistration.pushManager.getSubscription();return!oe||oe.unsubscribe()})).apply(this,arguments)}function Ml(O,U){return We.apply(this,arguments)}function We(){return(We=(0,F.Z)(function*(O,U){try{const oe=yield ns(O.firebaseDependencies,U),ye=Object.assign(Object.assign({},U),{token:oe,createTime:Date.now()});return yield pn(O.firebaseDependencies,ye),oe}catch(oe){throw yield _a(O),oe}})).apply(this,arguments)}function Jt(O,U){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,F.Z)(function*(O,U){const ye={token:yield Vi(O,U),createTime:Date.now(),subscriptionOptions:U};return yield pn(O,ye),ye.token})).apply(this,arguments)}function An(O,U){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,F.Z)(function*(O,U){return(yield O.pushManager.getSubscription())||O.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ed(U)})})).apply(this,arguments)}function rs(O,U){return U.vapidKey===O.vapidKey&&U.endpoint===O.endpoint&&U.auth===O.auth&&U.p256dh===O.p256dh}function ii(O){const U={from:O.from,collapseKey:O.collapse_key,messageId:O.fcmMessageId};return function ba(O,U){if(!U.notification)return;O.notification={};const oe=U.notification.title;oe&&(O.notification.title=oe);const ye=U.notification.body;ye&&(O.notification.body=ye);const Oe=U.notification.image;Oe&&(O.notification.image=Oe)}(U,O),function Nl(O,U){!U.data||(O.data=U.data)}(U,O),function Sp(O,U){var oe,ye,Oe,Pe,Ke;if(!U.fcmOptions&&!(null===(oe=U.notification)||void 0===oe?void 0:oe.click_action))return;O.fcmOptions={};const ot=null!==(Oe=null===(ye=U.fcmOptions)||void 0===ye?void 0:ye.link)&&void 0!==Oe?Oe:null===(Pe=U.notification)||void 0===Pe?void 0:Pe.click_action;ot&&(O.fcmOptions.link=ot);const _t=null===(Ke=U.fcmOptions)||void 0===Ke?void 0:Ke.analytics_label;_t&&(O.fcmOptions.analyticsLabel=_t)}(U,O),U}function wu(O){return"object"==typeof O&&!!O&&ks in O}function Ea(O,U){const oe=[];for(let ye=0;ye<O.length;ye++)oe.push(O.charAt(ye)),ye<U.length&&oe.push(U.charAt(ye));return oe.join("")}function Bn(O){return On.create("missing-app-config-values",{valueName:O})}Ea("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ea("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class oo{constructor(U,oe,ye){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Oe=function Iu(O){if(!O||!O.options)throw Bn("App Configuration Object");if(!O.name)throw Bn("App Name");const U=["projectId","apiKey","appId","messagingSenderId"],{options:oe}=O;for(const ye of U)if(!oe[ye])throw Bn(ye);return{appName:O.name,projectId:oe.projectId,apiKey:oe.apiKey,appId:oe.appId,senderId:oe.messagingSenderId}}(U);this.firebaseDependencies={app:U,appConfig:Oe,installations:oe,analyticsProvider:ye}}_delete(){return Promise.resolve()}}function wa(O){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,F.Z)(function*(O){var U;try{O.swRegistration=yield navigator.serviceWorker.register(Qc,{scope:wr}),O.swRegistration.update().catch(()=>{})}catch(oe){throw On.create("failed-service-worker-registration",{browserErrorMessage:null===(U=oe)||void 0===U?void 0:U.message})}})).apply(this,arguments)}function bi(O,U){return kl.apply(this,arguments)}function kl(){return(kl=(0,F.Z)(function*(O,U){if(!U&&!O.swRegistration&&(yield wa(O)),U||!O.swRegistration){if(!(U instanceof ServiceWorkerRegistration))throw On.create("invalid-sw-registration");O.swRegistration=U}})).apply(this,arguments)}function Du(O,U){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,F.Z)(function*(O,U){U?O.vapidKey=U:O.vapidKey||(O.vapidKey=Jo)})).apply(this,arguments)}function Ia(){return(Ia=(0,F.Z)(function*(O,U){if(!navigator)throw On.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw On.create("permission-blocked");return yield Du(O,null==U?void 0:U.vapidKey),yield bi(O,null==U?void 0:U.serviceWorkerRegistration),va(O)})).apply(this,arguments)}function Da(O,U,oe){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,F.Z)(function*(O,U,oe){const ye=Ta(U);(yield O.firebaseDependencies.analyticsProvider.get()).logEvent(ye,{message_id:oe[ks],message_name:oe[Jc],message_time:oe[Eh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ta(O){switch(O){case Rs.NOTIFICATION_CLICKED:return"notification_open";case Rs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ll(){return(Ll=(0,F.Z)(function*(O,U){const oe=U.data;if(!oe.isFirebaseMessaging)return;O.onMessageHandler&&oe.messageType===Rs.PUSH_RECEIVED&&("function"==typeof O.onMessageHandler?O.onMessageHandler(ii(oe)):O.onMessageHandler.next(ii(oe)));const ye=oe.data;wu(ye)&&"1"===ye[Xc]&&(yield Da(O,oe.messageType,ye))})).apply(this,arguments)}const Us="@firebase/messaging",nd=O=>{const U=new oo(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),O.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",oe=>function xp(O,U){return Ll.apply(this,arguments)}(U,oe)),U},Bs=O=>{const U=O.getProvider("messaging").getImmediate();return{getToken:ye=>function Tu(O,U){return Ia.apply(this,arguments)}(U,ye)}};function js(){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,F.Z)(function*(){try{yield(0,j.eu)()}catch(O){return!1}return"undefined"!=typeof window&&(0,j.hl)()&&(0,j.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function rd(){(0,K._registerComponent)(new q.wA("messaging",nd,"PUBLIC")),(0,K._registerComponent)(new q.wA("messaging-internal",Bs,"PRIVATE")),(0,K.registerVersion)(Us,"0.9.16"),(0,K.registerVersion)(Us,"0.9.16","esm2017")}();const id="analytics",Op="firebase_id",so="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qs="https://www.googletagmanager.com/gtag/js",ur=new R.Yd("@firebase/analytics");function Th(O){return Promise.all(O.map(U=>U.catch(oe=>oe)))}function is(O,U){const oe=document.createElement("script");oe.src=`${qs}?l=${O}&id=${U}`,oe.async=!0,document.head.appendChild(oe)}function sd(O,U,oe,ye,Oe,Pe){return Au.apply(this,arguments)}function Au(){return(Au=(0,F.Z)(function*(O,U,oe,ye,Oe,Pe){const Ke=ye[Oe];try{if(Ke)yield U[Ke];else{const _t=(yield Th(oe)).find(xt=>xt.measurementId===Oe);_t&&(yield U[_t.appId])}}catch(ot){ur.error(ot)}O("config",Oe,Pe)})).apply(this,arguments)}function os(O,U,oe,ye,Oe){return Po.apply(this,arguments)}function Po(){return(Po=(0,F.Z)(function*(O,U,oe,ye,Oe){try{let Pe=[];if(Oe&&Oe.send_to){let Ke=Oe.send_to;Array.isArray(Ke)||(Ke=[Ke]);const ot=yield Th(oe);for(const _t of Ke){const xt=ot.find(bt=>bt.measurementId===_t),Vt=xt&&U[xt.appId];if(!Vt){Pe=[];break}Pe.push(Vt)}}0===Pe.length&&(Pe=Object.values(U)),yield Promise.all(Pe),O("event",ye,Oe||{})}catch(Pe){ur.error(Pe)}})).apply(this,arguments)}function kn(){const O=window.document.getElementsByTagName("script");for(const U of Object.values(O))if(U.src&&U.src.includes(qs))return U;return null}const mt=new j.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Vl=new class Zn{constructor(U={},oe=1e3){this.throttleMetadata=U,this.intervalMillis=oe}getThrottleMetadata(U){return this.throttleMetadata[U]}setThrottleMetadata(U,oe){this.throttleMetadata[U]=oe}deleteThrottleMetadata(U){delete this.throttleMetadata[U]}};function ad(O){return new Headers({Accept:"application/json","x-goog-api-key":O})}function qi(O){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,F.Z)(function*(O){var U;const{appId:oe,apiKey:ye}=O,Oe={method:"GET",headers:ad(ye)},Pe=so.replace("{app-id}",oe),Ke=yield fetch(Pe,Oe);if(200!==Ke.status&&304!==Ke.status){let ot="";try{const _t=yield Ke.json();(null===(U=_t.error)||void 0===U?void 0:U.message)&&(ot=_t.error.message)}catch(_t){}throw mt.create("config-fetch-failed",{httpStatus:Ke.status,responseMessage:ot})}return Ke.json()})).apply(this,arguments)}function In(O){return xa.apply(this,arguments)}function xa(){return(xa=(0,F.Z)(function*(O,U=Vl,oe){const{appId:ye,apiKey:Oe,measurementId:Pe}=O.options;if(!ye)throw mt.create("no-app-id");if(!Oe){if(Pe)return{measurementId:Pe,appId:ye};throw mt.create("no-api-key")}const Ke=U.getThrottleMetadata(ye)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ot=new ld;return setTimeout((0,F.Z)(function*(){ot.abort()}),void 0!==oe?oe:6e4),Ei({appId:ye,apiKey:Oe,measurementId:Pe},Ke,ot,U)})).apply(this,arguments)}function Ei(O,U,oe){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,F.Z)(function*(O,{throttleEndTimeMillis:U,backoffCount:oe},ye,Oe=Vl){var Pe,Ke;const{appId:ot,measurementId:_t}=O;try{yield Su(ye,U)}catch(xt){if(_t)return ur.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_t} provided in the "measurementId" field in the local Firebase config. [${null===(Pe=xt)||void 0===Pe?void 0:Pe.message}]`),{appId:ot,measurementId:_t};throw xt}try{const xt=yield qi(O);return Oe.deleteThrottleMetadata(ot),xt}catch(xt){const Vt=xt;if(!ud(Vt)){if(Oe.deleteThrottleMetadata(ot),_t)return ur.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_t} provided in the "measurementId" field in the local Firebase config. [${null==Vt?void 0:Vt.message}]`),{appId:ot,measurementId:_t};throw xt}const bt=503===Number(null===(Ke=null==Vt?void 0:Vt.customData)||void 0===Ke?void 0:Ke.httpStatus)?(0,j.$s)(oe,Oe.intervalMillis,30):(0,j.$s)(oe,Oe.intervalMillis),Mn={throttleEndTimeMillis:Date.now()+bt,backoffCount:oe+1};return Oe.setThrottleMetadata(ot,Mn),ur.debug(`Calling attemptFetch again in ${bt} millis`),Ei(O,Mn,ye,Oe)}})).apply(this,arguments)}function Su(O,U){return new Promise((oe,ye)=>{const Oe=Math.max(U-Date.now(),0),Pe=setTimeout(oe,Oe);O.addEventListener(()=>{clearTimeout(Pe),ye(mt.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}function ud(O){if(!(O instanceof j.ZR&&O.customData))return!1;const U=Number(O.customData.httpStatus);return 429===U||500===U||503===U||504===U}class ld{constructor(){this.listeners=[]}addEventListener(U){this.listeners.push(U)}abort(){this.listeners.forEach(U=>U())}}let Oa,ka;function Lo(){return(Lo=(0,F.Z)(function*(O,U,oe,ye,Oe){if(Oe&&Oe.global)O("event",oe,ye);else{const Pe=yield U;O("event",oe,Object.assign(Object.assign({},ye),{send_to:Pe}))}})).apply(this,arguments)}function Ra(O){ka=O}function Vo(O){Oa=O}function Hs(){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,F.Z)(function*(){var O;if(!(0,j.hl)())return ur.warn(mt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,j.eu)()}catch(U){return ur.warn(mt.create("indexeddb-unavailable",{errorInfo:null===(O=U)||void 0===O?void 0:O.toString()}).message),!1}return!0})).apply(this,arguments)}function lr(){return(lr=(0,F.Z)(function*(O,U,oe,ye,Oe,Pe,Ke){var ot;const _t=In(O);_t.then(Dr=>{oe[Dr.measurementId]=Dr.appId,O.options.measurementId&&Dr.measurementId!==O.options.measurementId&&ur.warn(`The measurement ID in the local Firebase config (${O.options.measurementId}) does not match the measurement ID fetched from the server (${Dr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Dr=>ur.error(Dr)),U.push(_t);const xt=Hs().then(Dr=>{if(Dr)return ye.getId()}),[Vt,bt]=yield Promise.all([_t,xt]);kn()||is(Pe,Vt.measurementId),ka&&(Oe("consent","default",ka),Ra(void 0)),Oe("js",new Date);const Mn=null!==(ot=null==Ke?void 0:Ke.config)&&void 0!==ot?ot:{};return Mn.origin="firebase",Mn.update=!0,null!=bt&&(Mn[Op]=bt),Oe("config",Vt.measurementId,Mn),Oa&&(Oe("set",Oa),Vo(void 0)),Vt.measurementId})).apply(this,arguments)}class ls{constructor(U){this.app=U}_delete(){return delete $i[this.app.options.appId],Promise.resolve()}}let $i={},jn=[];const $s={};let wi,tr,Wr="dataLayer",Ir=!1;function Bl(O,U,oe){!function Ou(){const O=[];if((0,j.ru)()&&O.push("This is a browser extension environment."),(0,j.zI)()||O.push("Cookies are not available."),O.length>0){const U=O.map((ye,Oe)=>`(${Oe+1}) ${ye}`).join(" "),oe=mt.create("invalid-analytics-context",{errorInfo:U});ur.warn(oe.message)}}();const ye=O.options.appId;if(!ye)throw mt.create("no-app-id");if(!O.options.apiKey){if(!O.options.measurementId)throw mt.create("no-api-key");ur.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${O.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$i[ye])throw mt.create("already-exists",{id:ye});if(!Ir){!function Cu(O){let U=[];Array.isArray(window[O])?U=window[O]:window[O]=U}(Wr);const{wrappedGtag:Pe,gtagCore:Ke}=function Mp(O,U,oe,ye,Oe){let Pe=function(...Ke){window[ye].push(arguments)};return window[Oe]&&"function"==typeof window[Oe]&&(Pe=window[Oe]),window[Oe]=function Fl(O,U,oe,ye){function Pe(){return(Pe=(0,F.Z)(function*(Ke,ot,_t){try{"event"===Ke?yield os(O,U,oe,ot,_t):"config"===Ke?yield sd(O,U,oe,ye,ot,_t):"consent"===Ke?O("consent","update",_t):O("set",ot)}catch(xt){ur.error(xt)}})).apply(this,arguments)}return function Oe(Ke,ot,_t){return Pe.apply(this,arguments)}}(Pe,O,U,oe),{gtagCore:Pe,wrappedGtag:window[Oe]}}($i,jn,$s,Wr,"gtag");tr=Pe,wi=Ke,Ir=!0}return $i[ye]=function Bo(O,U,oe,ye,Oe,Pe,Ke){return lr.apply(this,arguments)}(O,jn,$s,U,wi,Wr,oe),new ls(O)}function Ah(){return cd.apply(this,arguments)}function cd(){return(cd=(0,F.Z)(function*(){if((0,j.ru)()||!(0,j.zI)()||!(0,j.hl)())return!1;try{return yield(0,j.eu)()}catch(O){return!1}})).apply(this,arguments)}const Nu="@firebase/analytics";!function kp(){(0,K._registerComponent)(new q.wA(id,(U,{options:oe})=>Bl(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),oe),"PUBLIC")),(0,K._registerComponent)(new q.wA("analytics-internal",function O(U){try{const oe=U.getProvider(id).getImmediate();return{logEvent:(ye,Oe,Pe)=>function Mu(O,U,oe,ye){O=(0,j.m9)(O),function Kn(O,U,oe,ye,Oe){return Lo.apply(this,arguments)}(tr,$i[O.app.options.appId],U,oe,ye).catch(Oe=>ur.error(Oe))}(oe,ye,Oe,Pe)}}catch(oe){throw mt.create("interop-component-reg-failed",{reason:oe})}},"PRIVATE")),(0,K.registerVersion)(Nu,"0.8.0"),(0,K.registerVersion)(Nu,"0.8.0","esm2017")}();var jl=M(4408),ui=M(7565);const ds=new class zs extends ui.v{}(class ai extends jl.o{constructor(U,oe){super(U,oe),this.scheduler=U,this.work=oe}schedule(U,oe=0){return oe>0?super.schedule(U,oe):(this.delay=oe,this.state=U,this.scheduler.flush(this),this)}execute(U,oe){return oe>0||this.closed?super.execute(U,oe):this._execute(U,oe)}requestAsyncId(U,oe,ye=0){return null!=ye&&ye>0||null==ye&&this.delay>0?super.requestAsyncId(U,oe,ye):U.flush(this)}});var Ru=M(4986),La=M(8505),hs=M(9468),ql=M(5363);const Xt=new c.GfV("7.4.1"),Pu="__angularfire_symbol__analyticsIsSupportedValue",Hn="__angularfire_symbol__analyticsIsSupported",Ho="__angularfire_symbol__remoteConfigIsSupportedValue",Di="__angularfire_symbol__remoteConfigIsSupported",dd="__angularfire_symbol__messagingIsSupportedValue",Lu="__angularfire_symbol__messagingIsSupported";function Fu(O,U,oe){if(U){if(1===U.length)return U[0];const Pe=U.filter(Ke=>Ke.app===oe);if(1===Pe.length)return Pe[0]}return oe.container.getProvider(O).getImmediate({optional:!0})}globalThis[Hn]||(globalThis[Hn]=Ah().then(O=>globalThis[Pu]=O).catch(()=>globalThis[Pu]=!1)),globalThis[Lu]||(globalThis[Lu]=js().then(O=>globalThis[dd]=O).catch(()=>globalThis[dd]=!1)),globalThis[Di]||(globalThis[Di]=vu().then(O=>globalThis[Ho]=O).catch(()=>globalThis[Ho]=!1));const $l=(O,U)=>{const oe=U?[U]:(0,ee.C6)(),ye=[];return oe.forEach(Oe=>{Oe.container.getProvider(O).instances.forEach(Ke=>{ye.includes(Ke)||ye.push(Ke)})}),ye};function Tn(){}class nr{constructor(U,oe=ds){this.zone=U,this.delegate=oe}now(){return this.delegate.now()}schedule(U,oe,ye){const Oe=this.zone;return this.delegate.schedule(function(Ke){Oe.runGuarded(()=>{U.apply(this,[Ke])})},oe,ye)}}class Rp{constructor(U){this.zone=U,this.task=null}call(U,oe){const ye=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Tn,{},Tn,Tn)),oe.pipe((0,La.b)({next:ye,complete:ye,error:ye})).subscribe(U).add(ye)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Va=(()=>{class O{constructor(oe){this.ngZone=oe,this.outsideAngular=oe.runOutsideAngular(()=>new nr(Zone.current)),this.insideAngular=oe.run(()=>new nr(Zone.current,Ru.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return O.\u0275fac=function(oe){return new(oe||O)(c.LFG(c.R0b))},O.\u0275prov=c.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function li(){const O=globalThis.\u0275AngularFireScheduler;if(!O)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return O}function Ua(O){return li(),function Gl(O){return function(oe){return(oe=oe.lift(new Rp(O.ngZone))).pipe((0,hs.R)(O.outsideAngular),(0,ql.Q)(O.insideAngular))}}(li())(O)}},2090:(ht,ge,M)=>{"use strict";M.d(ge,{BH:()=>k,LL:()=>ce,ZR:()=>be,zI:()=>Y,US:()=>q,tV:()=>E,L:()=>S,$s:()=>br,r3:()=>Re,Sg:()=>A,ne:()=>He,vZ:()=>wt,ZB:()=>T,pd:()=>Be,m9:()=>Co,z$:()=>x,jU:()=>L,ru:()=>re,d:()=>Z,xb:()=>Qe,w1:()=>X,hl:()=>B,uI:()=>V,UG:()=>D,b$:()=>J,G6:()=>W,Mn:()=>$,xO:()=>wn,zd:()=>mn,eu:()=>te});const K=function(Ee){const Ae=[];let ve=0;for(let De=0;De<Ee.length;De++){let Ce=Ee.charCodeAt(De);Ce<128?Ae[ve++]=Ce:Ce<2048?(Ae[ve++]=Ce>>6|192,Ae[ve++]=63&Ce|128):55296==(64512&Ce)&&De+1<Ee.length&&56320==(64512&Ee.charCodeAt(De+1))?(Ce=65536+((1023&Ce)<<10)+(1023&Ee.charCodeAt(++De)),Ae[ve++]=Ce>>18|240,Ae[ve++]=Ce>>12&63|128,Ae[ve++]=Ce>>6&63|128,Ae[ve++]=63&Ce|128):(Ae[ve++]=Ce>>12|224,Ae[ve++]=Ce>>6&63|128,Ae[ve++]=63&Ce|128)}return Ae},q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ee,Ae){if(!Array.isArray(Ee))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ve=Ae?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let Ce=0;Ce<Ee.length;Ce+=3){const Ze=Ee[Ce],rt=Ce+1<Ee.length,It=rt?Ee[Ce+1]:0,yn=Ce+2<Ee.length,un=yn?Ee[Ce+2]:0;let qr=(15&It)<<2|un>>6,Oi=63&un;yn||(Oi=64,rt||(qr=64)),De.push(ve[Ze>>2],ve[(3&Ze)<<4|It>>4],ve[qr],ve[Oi])}return De.join("")},encodeString(Ee,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?btoa(Ee):this.encodeByteArray(K(Ee),Ae)},decodeString(Ee,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?atob(Ee):function(Ee){const Ae=[];let ve=0,De=0;for(;ve<Ee.length;){const Ce=Ee[ve++];if(Ce<128)Ae[De++]=String.fromCharCode(Ce);else if(Ce>191&&Ce<224){const Ze=Ee[ve++];Ae[De++]=String.fromCharCode((31&Ce)<<6|63&Ze)}else if(Ce>239&&Ce<365){const yn=((7&Ce)<<18|(63&Ee[ve++])<<12|(63&Ee[ve++])<<6|63&Ee[ve++])-65536;Ae[De++]=String.fromCharCode(55296+(yn>>10)),Ae[De++]=String.fromCharCode(56320+(1023&yn))}else{const Ze=Ee[ve++],rt=Ee[ve++];Ae[De++]=String.fromCharCode((15&Ce)<<12|(63&Ze)<<6|63&rt)}}return Ae.join("")}(this.decodeStringToByteArray(Ee,Ae))},decodeStringToByteArray(Ee,Ae){this.init_();const ve=Ae?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let Ce=0;Ce<Ee.length;){const Ze=ve[Ee.charAt(Ce++)],It=Ce<Ee.length?ve[Ee.charAt(Ce)]:0;++Ce;const un=Ce<Ee.length?ve[Ee.charAt(Ce)]:64;++Ce;const Qt=Ce<Ee.length?ve[Ee.charAt(Ce)]:64;if(++Ce,null==Ze||null==It||null==un||null==Qt)throw Error();De.push(Ze<<2|It>>4),64!==un&&(De.push(It<<4&240|un>>2),64!==Qt&&De.push(un<<6&192|Qt))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ee=0;Ee<this.ENCODED_VALS.length;Ee++)this.byteToCharMap_[Ee]=this.ENCODED_VALS.charAt(Ee),this.charToByteMap_[this.byteToCharMap_[Ee]]=Ee,this.byteToCharMapWebSafe_[Ee]=this.ENCODED_VALS_WEBSAFE.charAt(Ee),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ee]]=Ee,Ee>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ee)]=Ee,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ee)]=Ee)}}},S=function(Ee){return function(Ee){const Ae=K(Ee);return q.encodeByteArray(Ae,!0)}(Ee).replace(/\./g,"")},E=function(Ee){try{return q.decodeString(Ee,!0)}catch(Ae){console.error("base64Decode failed: ",Ae)}return null};function T(Ee,Ae){if(!(Ae instanceof Object))return Ae;switch(Ae.constructor){case Date:return new Date(Ae.getTime());case Object:void 0===Ee&&(Ee={});break;case Array:Ee=[];break;default:return Ae}for(const ve in Ae)!Ae.hasOwnProperty(ve)||!C(ve)||(Ee[ve]=T(Ee[ve],Ae[ve]));return Ee}function C(Ee){return"__proto__"!==Ee}class k{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ae,ve)=>{this.resolve=Ae,this.reject=ve})}wrapCallback(Ae){return(ve,De)=>{ve?this.reject(ve):this.resolve(De),"function"==typeof Ae&&(this.promise.catch(()=>{}),1===Ae.length?Ae(ve):Ae(ve,De))}}}function A(Ee,Ae){if(Ee.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=Ae||"demo-project",Ce=Ee.iat||0,Ze=Ee.sub||Ee.user_id;if(!Ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const rt=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:Ce,exp:Ce+3600,auth_time:Ce,sub:Ze,user_id:Ze,firebase:{sign_in_provider:"custom",identities:{}}},Ee);return[S(JSON.stringify({alg:"none",type:"JWT"})),S(JSON.stringify(rt)),""].join(".")}function x(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function V(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())}function D(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Ee){return!1}}function L(){return"object"==typeof self&&self.self===self}function re(){const Ee="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ee&&void 0!==Ee.id}function J(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Z(){return x().indexOf("Electron/")>=0}function X(){const Ee=x();return Ee.indexOf("MSIE ")>=0||Ee.indexOf("Trident/")>=0}function $(){return x().indexOf("MSAppHost/")>=0}function W(){return!D()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B(){return"object"==typeof indexedDB}function te(){return new Promise((Ee,Ae)=>{try{let ve=!0;const De="validate-browser-context-for-indexeddb-analytics-module",Ce=self.indexedDB.open(De);Ce.onsuccess=()=>{Ce.result.close(),ve||self.indexedDB.deleteDatabase(De),Ee(!0)},Ce.onupgradeneeded=()=>{ve=!1},Ce.onerror=()=>{var Ze;Ae((null===(Ze=Ce.error)||void 0===Ze?void 0:Ze.message)||"")}}catch(ve){Ae(ve)}})}function Y(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class be extends Error{constructor(Ae,ve,De){super(ve),this.code=Ae,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,be.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ce.prototype.create)}}class ce{constructor(Ae,ve,De){this.service=Ae,this.serviceName=ve,this.errors=De}create(Ae,...ve){const De=ve[0]||{},Ce=`${this.service}/${Ae}`,Ze=this.errors[Ae],rt=Ze?function le(Ee,Ae){return Ee.replace(ie,(ve,De)=>{const Ce=Ae[De];return null!=Ce?String(Ce):`<${De}?>`})}(Ze,De):"Error";return new be(Ce,`${this.serviceName}: ${rt} (${Ce}).`,De)}}const ie=/\{\$([^}]+)}/g;function Re(Ee,Ae){return Object.prototype.hasOwnProperty.call(Ee,Ae)}function Qe(Ee){for(const Ae in Ee)if(Object.prototype.hasOwnProperty.call(Ee,Ae))return!1;return!0}function wt(Ee,Ae){if(Ee===Ae)return!0;const ve=Object.keys(Ee),De=Object.keys(Ae);for(const Ce of ve){if(!De.includes(Ce))return!1;const Ze=Ee[Ce],rt=Ae[Ce];if(Mt(Ze)&&Mt(rt)){if(!wt(Ze,rt))return!1}else if(Ze!==rt)return!1}for(const Ce of De)if(!ve.includes(Ce))return!1;return!0}function Mt(Ee){return null!==Ee&&"object"==typeof Ee}function wn(Ee){const Ae=[];for(const[ve,De]of Object.entries(Ee))Array.isArray(De)?De.forEach(Ce=>{Ae.push(encodeURIComponent(ve)+"="+encodeURIComponent(Ce))}):Ae.push(encodeURIComponent(ve)+"="+encodeURIComponent(De));return Ae.length?"&"+Ae.join("&"):""}function mn(Ee){const Ae={};return Ee.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[Ce,Ze]=De.split("=");Ae[decodeURIComponent(Ce)]=decodeURIComponent(Ze)}}),Ae}function Be(Ee){const Ae=Ee.indexOf("?");if(!Ae)return"";const ve=Ee.indexOf("#",Ae);return Ee.substring(Ae,ve>0?ve:void 0)}function He(Ee,Ae){const ve=new it(Ee,Ae);return ve.subscribe.bind(ve)}class it{constructor(Ae,ve){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ve,this.task.then(()=>{Ae(this)}).catch(De=>{this.error(De)})}next(Ae){this.forEachObserver(ve=>{ve.next(Ae)})}error(Ae){this.forEachObserver(ve=>{ve.error(Ae)}),this.close(Ae)}complete(){this.forEachObserver(Ae=>{Ae.complete()}),this.close()}subscribe(Ae,ve,De){let Ce;if(void 0===Ae&&void 0===ve&&void 0===De)throw new Error("Missing Observer.");Ce=function vt(Ee,Ae){if("object"!=typeof Ee||null===Ee)return!1;for(const ve of Ae)if(ve in Ee&&"function"==typeof Ee[ve])return!0;return!1}(Ae,["next","error","complete"])?Ae:{next:Ae,error:ve,complete:De},void 0===Ce.next&&(Ce.next=Rt),void 0===Ce.error&&(Ce.error=Rt),void 0===Ce.complete&&(Ce.complete=Rt);const Ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ce.error(this.finalError):Ce.complete()}catch(rt){}}),this.observers.push(Ce),Ze}unsubscribeOne(Ae){void 0===this.observers||void 0===this.observers[Ae]||(delete this.observers[Ae],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ae){if(!this.finalized)for(let ve=0;ve<this.observers.length;ve++)this.sendOne(ve,Ae)}sendOne(Ae,ve){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ae])try{ve(this.observers[Ae])}catch(De){"undefined"!=typeof console&&console.error&&console.error(De)}})}close(Ae){this.finalized||(this.finalized=!0,void 0!==Ae&&(this.finalError=Ae),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rt(){}function br(Ee,Ae=1e3,ve=2){const De=Ae*Math.pow(ve,Ee),Ce=Math.round(.5*De*(Math.random()-.5)*2);return Math.min(144e5,De+Ce)}function Co(Ee){return Ee&&Ee._delegate?Ee._delegate:Ee}},6085:(ht,ge,M)=>{"use strict";var c=M(5e3);let ee=null;function F(){return ee}const R=new c.OlP("DocumentToken");let S=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function E(){return(0,c.LFG)(T)}()},providedIn:"platform"}),n})();const _=new c.OlP("Location Initialized");let T=(()=>{class n extends S{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){C()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){C()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(R))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function k(){return new T((0,c.LFG)(R))}()},providedIn:"platform"}),n})();function C(){return!!window.history.pushState}function A(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function x(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function V(n){return n&&"?"!==n[0]?"?"+n:n}let D=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function L(n){const e=(0,c.LFG)(R).location;return new J((0,c.LFG)(S),e&&e.origin||"")}()},providedIn:"root"}),n})();const re=new c.OlP("appBaseHref");let J=(()=>{class n extends D{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return A(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+V(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const h=this.prepareExternalUrl(s+V(u));this._platformLocation.pushState(t,r,h)}replaceState(t,r,s,u){const h=this.prepareExternalUrl(s+V(u));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(S),c.LFG(re,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Z=(()=>{class n extends D{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=A(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let h=this.prepareExternalUrl(s+V(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,s,u){let h=this.prepareExternalUrl(s+V(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(S),c.LFG(re,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),X=(()=>{class n{constructor(t,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const s=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=x(W(s)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+V(r))}normalize(t){return n.stripTrailingSlash(function H(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,W(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._platformStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+V(r)),s)}replaceState(t,r="",s=null){this._platformStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+V(r)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformStrategy).historyGo)||void 0===s||s.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=V,n.joinWithSlash=A,n.stripTrailingSlash=x,n.\u0275fac=function(t){return new(t||n)(c.LFG(D),c.LFG(S))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function $(){return new X((0,c.LFG)(D),(0,c.LFG)(S))}()},providedIn:"root"}),n})();function W(n){return n.replace(/\/index.html$/,"")}class xo{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let er=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,h)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new xo(s.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,h),Qo(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Qo(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Qo(n,e){n.context.$implicit=e.item}let hr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new _n,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){mu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){mu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class _n{constructor(){this.$implicit=null,this.ngIf=null}}function mu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}let Xc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function es(n){return"server"===n}let Cl=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new Ps((0,c.LFG)(R),window)}),n})();class Ps{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Fi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const h=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(h)return h}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Al(this.window.history)||Al(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Al(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ts extends class ga extends class q{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function j(n){ee||(ee=n)}(new ts)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ma(){return pn=pn||document.querySelector("base"),pn?pn.getAttribute("href"):null}();return null==t?null:function ko(n){_u=_u||document.createElement("a"),_u.setAttribute("href",n);const e=_u.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){pn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ha(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let _u,pn=null;const fr=new c.OlP("TRANSITION_ID"),On=[{provide:c.ip1,useFactory:function Sl(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=F(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[fr,R,c.zs3],multi:!0}];class Vi{static init(){(0,c.VLi)(new Vi)}addToWindow(e){c.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const s=c.dqk.getAllAngularTestabilities();let u=s.length,h=!1;const m=function(w){h=h||w,u--,0==u&&r(h)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const s=e.getTestability(t);return null!=s?s:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let pr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const ns=new c.OlP("EventManagerPlugins");let io=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const h=s[u];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ns),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class ya{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=F().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let _i=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ui=(()=>{class n extends _i{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const h=this._doc.createElement("style");h.textContent=u,s.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ls),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ls))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(R))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Ls(n){F().remove(n)}const St={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Fs=/%COMP%/g;function We(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?We(n,s,t):(s=s.replace(Fs,n),t.push(s))}return t}function Jt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let An=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Vs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new ba(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case c.ifc.ShadowDom:return new Nl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=We(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(io),c.LFG(Ui),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Vs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(St[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=St[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=St[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,s&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Jt(r)):this.eventManager.addEventListener(e,t,Jt(r))}}class ba extends Vs{constructor(e,t,r,s){super(e),this.component=r;const u=We(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Ol(n){return"_ngcontent-%COMP%".replace(Fs,n)}(s+"-"+r.id),this.hostAttr=function Ml(n){return"_nghost-%COMP%".replace(Fs,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Nl extends Vs{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=We(s.id,s.styles,[]);for(let h=0;h<u.length;h++){const m=document.createElement("style");m.textContent=u[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Sp=(()=>{class n extends ya{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(R))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const wu=["alt","control","meta","shift"],Iu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},oo={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wa=(()=>{class n extends ya{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),h=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,u.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let h="";if(wu.forEach(w=>{const P=r.indexOf(w);P>-1&&(r.splice(P,1),h+=w+".")}),h+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=s,m.fullKey=h,m}static getEventFullKey(t){let r="",s=function Ro(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Bn.hasOwnProperty(e)&&(e=Bn[e]))}return Iu[e]||e}(t);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),wu.forEach(u=>{u!=s&&oo[u](t)&&(r+=u+".")}),r+=s,r}static eventCallback(t,r,s){return u=>{n.getEventFullKey(u)===t&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(R))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Tu=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function bi(){ts.makeCurrent(),Vi.init()},multi:!0},{provide:R,useFactory:function Du(){return(0,c.RDi)(document),document},deps:[]}]),Ia=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function kl(){return new c.qLn},deps:[]},{provide:ns,useClass:Sp,multi:!0,deps:[R,c.R0b,c.Lbi]},{provide:ns,useClass:wa,multi:!0,deps:[R]},{provide:An,useClass:An,deps:[io,Ui,c.AFp]},{provide:c.FYo,useExisting:An},{provide:_i,useExisting:Ui},{provide:Ui,useClass:Ui,deps:[R]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:io,useClass:io,deps:[ns,c.R0b]},{provide:class bn{},useClass:pr,deps:[]}];let Da=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:fr,useExisting:c.AFp},On]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:Ia,imports:[Xc,c.hGG]}),n})();"undefined"!=typeof window&&window;let os=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):c.LFG(Fl),r},providedIn:"root"}),n})(),Fl=(()=>{class n extends os{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case c.q3G.NONE:return r;case c.q3G.HTML:return(0,c.qzn)(r,"HTML")?(0,c.z3N)(r):(0,c.EiD)(this._doc,String(r)).toString();case c.q3G.STYLE:return(0,c.qzn)(r,"Style")?(0,c.z3N)(r):r;case c.q3G.SCRIPT:if((0,c.qzn)(r,"Script"))return(0,c.z3N)(r);throw new Error("unsafe value used in a script context");case c.q3G.URL:return(0,c.yhl)(r),(0,c.qzn)(r,"URL")?(0,c.z3N)(r):(0,c.mCW)(String(r));case c.q3G.RESOURCE_URL:if((0,c.qzn)(r,"ResourceURL"))return(0,c.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,c.JVY)(t)}bypassSecurityTrustStyle(t){return(0,c.L6k)(t)}bypassSecurityTrustScript(t){return(0,c.eBb)(t)}bypassSecurityTrustUrl(t){return(0,c.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,c.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(R))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Po(n){return new Fl(n.get(R))}(c.LFG(c.zs3)),r},providedIn:"root"}),n})();var kn=M(8996),Sa=M(7669);function mt(...n){const e=(0,Sa.yG)(n);return(0,kn.D)(n,e)}var oi=M(7579);class si extends oi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Zn=M(8306);const{isArray:Vl}=Array,{getPrototypeOf:ad,prototype:qi,keys:Ul}=Object;function In(n){if(1===n.length){const e=n[0];if(Vl(e))return{args:e,keys:null};if(function xa(n){return n&&"object"==typeof n&&ad(n)===qi}(e)){const t=Ul(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ei=M(4671),Wt=M(4004);const{isArray:Su}=Array;function ld(n){return(0,Wt.U)(e=>function ud(n,e){return Su(e)?n(...e):n(e)}(n,e))}function Oa(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var Kn=M(5403),Lo=M(9672);function Fo(n,e,t){n?(0,Lo.f)(t,n,e):e()}var Ma=M(576);function ss(n,e){const t=(0,Ma.m)(n)?n:()=>n,r=s=>s.error(t());return new Zn.y(e?s=>e.schedule(r,0,s):r)}const as=(0,M(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var us=M(8189);function Ra(...n){return function ka(){return(0,us.J)(1)}()((0,kn.D)(n,(0,Sa.yG)(n)))}var Vo=M(8421);function Hs(n){return new Zn.y(e=>{(0,Vo.Xf)(n()).subscribe(e)})}var Uo=M(515),Bo=M(727),lr=M(4482);function ls(){return(0,lr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Kn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class $i extends Zn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,lr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Bo.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Kn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Bo.w0.EMPTY)}return e}refCount(){return ls()(this)}}function jn(n,e){return(0,lr.e)((t,r)=>{let s=null,u=0,h=!1;const m=()=>h&&!s&&r.complete();t.subscribe((0,Kn.x)(r,w=>{null==s||s.unsubscribe();let P=0;const Q=u++;(0,Vo.Xf)(n(w,Q)).subscribe(s=(0,Kn.x)(r,se=>r.next(e?e(w,se,Q,P++):se),()=>{s=null,m()}))},()=>{h=!0,m()}))})}function $s(n){return n<=0?()=>Uo.E:(0,lr.e)((e,t)=>{let r=0;e.subscribe((0,Kn.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Wr(...n){const e=(0,Sa.yG)(n);return(0,lr.e)((t,r)=>{(e?Ra(n,t,e):Ra(n,t)).subscribe(r)})}function jo(n,e,t,r,s){return(u,h)=>{let m=t,w=e,P=0;u.subscribe((0,Kn.x)(h,Q=>{const se=P++;w=m?n(w,Q,se):(m=!0,Q),r&&h.next(w)},s&&(()=>{m&&h.next(w),h.complete()})))}}function wi(n,e){return(0,lr.e)(jo(n,e,arguments.length>=2,!0))}function tr(n,e){return(0,lr.e)((t,r)=>{let s=0;t.subscribe((0,Kn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}function Ir(n){return(0,lr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Kn.x)(t,void 0,void 0,h=>{u=(0,Vo.Xf)(n(h,Ir(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}var qn=M(5577);function Ou(n,e){return(0,Ma.m)(e)?(0,qn.z)(n,e,1):(0,qn.z)(n,1)}function Bl(n){return n<=0?()=>Uo.E:(0,lr.e)((e,t)=>{let r=[];e.subscribe((0,Kn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Sn(n=Ch){return(0,lr.e)((e,t)=>{let r=!1;e.subscribe((0,Kn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Ch(){return new as}function Ah(n){return(0,lr.e)((e,t)=>{let r=!1;e.subscribe((0,Kn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Pa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?tr((s,u)=>n(s,u,r)):Ei.y,$s(1),t?Ah(e):Sn(()=>new as))}var Ii=M(8505);class cs{constructor(e,t){this.id=e,this.url=t}}class Gs extends cs{constructor(e,t,r="imperative",s=null){super(e,t),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Mu extends cs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Rn extends cs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Nu extends cs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qo extends cs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kp extends cs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jl extends cs{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ai extends cs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ui extends cs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zs{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ds{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ku{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ru{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class La{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hs{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ql{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Xt="primary";class Pu{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Hn(n){return new Pu(n)}const Ho="ngNavigationCancelingError";function Di(n){const e=Error("NavigationCancelingError: "+n);return e[Ho]=!0,e}function Lu(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const h=r[u],m=n[u];if(h.startsWith(":"))s[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function ao(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Hl(n[s],e[s]))return!1;return!0}function Hl(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function Sh(n){return Array.prototype.concat.apply([],n)}function Fu(n){return n.length>0?n[n.length-1]:null}function Tn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function nr(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,kn.D)(Promise.resolve(n)):mt(n)}const Va={exact:function xh(n,e,t){if(!ye(n.segments,e.segments)||!$o(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!xh(n.children[r],e.children[r],t))return!1;return!0},subset:Ua},li={exact:function uo(n,e){return ao(n,e)},subset:function hd(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Hl(n[t],e[t]))},ignored:()=>!0};function fs(n,e,t){return Va[t.paths](n.root,e.root,t.matrixParams)&&li[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ua(n,e,t){return Gl(n,e,e.segments,t)}function Gl(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!ye(s,t)||e.hasChildren()||!$o(s,t,r))}if(n.segments.length===t.length){if(!ye(n.segments,t)||!$o(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Ua(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ye(n.segments,s)&&$o(n.segments,s,r)&&n.children[Xt])&&Gl(n.children[Xt],e,u,r)}}function $o(n,e,t){return e.every((r,s)=>li[t](n[s].parameters,r.parameters))}class ps{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return ot.serialize(this)}}class O{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Tn(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _t(this)}}class U{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Hn(this.parameters)),this._parameterMap}toString(){return Ti(this)}}function ye(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Pe{}class Ke{parse(e){const t=new oy(e);return new ps(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${xt(e.root,!0)}`,r=function Vu(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${bt(t)}=${bt(s)}`).join("&"):`${bt(t)}=${bt(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Mn(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ot=new Ke;function _t(n){return n.segments.map(e=>Ti(e)).join("/")}function xt(n,e){if(!n.hasChildren())return _t(n);if(e){const t=n.children[Xt]?xt(n.children[Xt],!1):"",r=[];return Tn(n.children,(s,u)=>{u!==Xt&&r.push(`${u}:${xt(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Oe(n,e){let t=[];return Tn(n.children,(r,s)=>{s===Xt&&(t=t.concat(e(r,s)))}),Tn(n.children,(r,s)=>{s!==Xt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Xt?[xt(n.children[Xt],!1)]:[`${s}:${xt(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Xt]?`${_t(n)}/${t[0]}`:`${_t(n)}/(${t.join("//")})`}}function Vt(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bt(n){return Vt(n).replace(/%3B/gi,";")}function Dr(n){return Vt(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lo(n){return decodeURIComponent(n)}function co(n){return lo(n.replace(/\+/g,"%20"))}function Ti(n){return`${Dr(n.path)}${function fd(n){return Object.keys(n).map(e=>`;${Dr(e)}=${Dr(n[e])}`).join("")}(n.parameters)}`}const gs=/^[^\/()?;=#]+/;function Tr(n){const e=n.match(gs);return e?e[0]:""}const Gi=/^[^=?&#]+/,Pp=/^[^&#]+/;class oy{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new O([],{}):new O([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Xt]=new O(e,t)),r}parseSegment(){const e=Tr(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new U(lo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Tr(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Tr(this.remaining);s&&(r=s,this.capture(r))}e[lo(t)]=lo(r)}parseQueryParam(e){const t=function pd(n){const e=n.match(Gi);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function Lp(n){const e=n.match(Pp);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const s=co(t),u=co(r);if(e.hasOwnProperty(s)){let h=e[s];Array.isArray(h)||(h=[h],e[s]=h),h.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Tr(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Xt);const h=this.parseChildren();t[u]=1===Object.keys(h).length?h[Xt]:new O([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Fp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Oh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Oh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Uu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Uu(e,this._root).map(t=>t.value)}}function Oh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Oh(n,t);if(r)return r}return null}function Uu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Uu(n,t);if(r.length)return r.unshift(e),r}return[]}class ms{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ys(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class gd extends Fp{constructor(e,t){super(e),this.snapshot=t,yd(this,e)}toString(){return this.snapshot.toString()}}function Ba(n,e){const t=function sy(n,e){const h=new Ws([],{},{},"",{},Xt,e,null,n.root,-1,{});return new Mh("",new ms(h,[]))}(n,e),r=new si([new U("",{})]),s=new si({}),u=new si({}),h=new si({}),m=new si(""),w=new ja(r,s,h,m,u,Xt,e,t.root);return w.snapshot=t.root,new gd(new ms(w,[]),t)}class ja{constructor(e,t,r,s,u,h,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=h,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Wt.U)(e=>Hn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Wt.U)(e=>Hn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ay(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function md(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ws{constructor(e,t,r,s,u,h,m,w,P,Q,se){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=h,this.component=m,this.routeConfig=w,this._urlSegment=P,this._lastPathIndex=Q,this._resolve=se}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Hn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Hn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Mh extends Fp{constructor(e,t){super(t),this.url=e,yd(this,t)}toString(){return Nh(this._root)}}function yd(n,e){e.value._routerState=n,e.children.forEach(t=>yd(n,t))}function Nh(n){const e=n.children.length>0?` { ${n.children.map(Nh).join(", ")} } `:"";return`${n.value}${e}`}function vs(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ao(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ao(e.params,t.params)||n.params.next(t.params),function Fa(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ao(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ao(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function kh(n,e){const t=ao(n.params,e.params)&&function oe(n,e){return ye(n,e)&&n.every((t,r)=>ao(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||kh(n.parent,e.parent))}function zl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function uy(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return zl(n,r,s);return zl(n,r)})}(n,e,t);return new ms(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const h=u.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(m=>zl(n,m)),h}}const r=function ly(n){return new ja(new si(n.url),new si(n.params),new si(n.queryParams),new si(n.fragment),new si(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>zl(n,u));return new ms(r,s)}}function ho(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Bu(n){return"object"==typeof n&&null!=n&&n.outlets}function Wl(n,e,t,r,s){let u={};if(r&&Tn(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(P=>`${P}`):`${m}`}),n===e)return new ps(t,u,s);const h=Up(n,e,t);return new ps(h,u,s)}function Up(n,e,t){const r={};return Tn(n.children,(s,u)=>{r[u]=s===e?t:Up(s,e,t)}),new O(n.segments,r)}class Rh{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ho(r[0]))throw new Error("Root segment cannot have matrix parameters");const s=r.find(Bu);if(s&&s!==Fu(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Hp(n,e,t){if(n||(n=new O([],{})),0===n.segments.length&&n.hasChildren())return vd(n,e,t);const r=function g0(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const h=n.segments[s],m=t[r];if(Bu(m))break;const w=`${m}`,P=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&P&&"object"==typeof P&&void 0===P.outlets){if(!po(w,P,h))return u;r+=2}else{if(!po(w,{},h))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new O(n.segments.slice(0,r.pathIndex),{});return u.children[Xt]=new O(n.segments.slice(r.pathIndex),n.children),vd(u,0,s)}return r.match&&0===s.length?new O(n.segments,{}):r.match&&!n.hasChildren()?$p(n,e,t):r.match?vd(n,0,s):$p(n,e,t)}function vd(n,e,t){if(0===t.length)return new O(n.segments,{});{const r=function qp(n){return Bu(n[0])?n[0].outlets:{[Xt]:n}}(t),s={};return Tn(r,(u,h)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[h]=Hp(n.children[h],e,u))}),Tn(n.children,(u,h)=>{void 0===r[h]&&(s[h]=u)}),new O(n.segments,s)}}function $p(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Bu(u)){const w=fo(u.outlets);return new O(r,w)}if(0===s&&ho(t[0])){r.push(new U(n.segments[e].path,Ph(t[0]))),s++;continue}const h=Bu(u)?u.outlets[Xt]:`${u}`,m=s<t.length-1?t[s+1]:null;h&&m&&ho(m)?(r.push(new U(h,Ph(m))),s+=2):(r.push(new U(h,{})),s++)}return new O(r,{})}function fo(n){const e={};return Tn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=$p(new O([],{}),0,t))}),e}function Ph(n){const e={};return Tn(n,(t,r)=>e[r]=`${t}`),e}function po(n,e,t){return n==t.path&&ao(e,t.parameters)}class Gp{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),vs(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=ys(t);e.children.forEach(u=>{const h=u.value.outlet;this.deactivateRoutes(u,s[h],r),delete s[h]}),Tn(s,(u,h)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const h=r.getContext(s.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=ys(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],s);if(r&&r.outlet){const h=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=ys(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=ys(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new hs(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Ru(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(vs(s),s===u)if(s.component){const h=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const h=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),vs(m.route.value),this.activateChildRoutes(e,null,h.children)}else{const m=function _d(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),w=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=s,h.resolver=w,h.outlet&&h.outlet.activateWith(s,w),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class bd{constructor(e,t){this.routes=e,this.module=t}}function Ha(n){return"function"==typeof n}function ju(n){return n instanceof ps}const Ed=Symbol("INITIAL_VALUE");function qu(){return jn(n=>function xu(...n){const e=(0,Sa.yG)(n),t=(0,Sa.jO)(n),{args:r,keys:s}=In(n);if(0===r.length)return(0,kn.D)([],e);const u=new Zn.y(function Hi(n,e,t=Ei.y){return r=>{Fo(e,()=>{const{length:s}=n,u=new Array(s);let h=s,m=s;for(let w=0;w<s;w++)Fo(e,()=>{const P=(0,kn.D)(n[w],e);let Q=!1;P.subscribe((0,Kn.x)(r,se=>{u[w]=se,Q||(Q=!0,m--),m||r.next(t(u.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,s?h=>Oa(s,h):Ei.y));return t?u.pipe(ld(t)):u}(n.map(e=>e.pipe($s(1),Wr(Ed)))).pipe(wi((e,t)=>{let r=!1;return t.reduce((s,u,h)=>s!==Ed?s:(u===Ed&&(r=!0),r||!1!==u&&h!==t.length-1&&!ju(u)?s:u),e)},Ed),tr(e=>e!==Ed),(0,Wt.U)(e=>ju(e)?e:!0===e),$s(1)))}class dy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Hu,this.attachRef=null}}class Hu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new dy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Yl=(()=>{class n{constructor(t,r,s,u,h){this.parentContexts=t,this.location=r,this.resolver=s,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=u||Xt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new hy(t,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Hu),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class hy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ja?this.route:e===Hu?this.childContexts:this.parent.get(e,t)}}let Vh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[Yl],encapsulation:2}),n})();function $a(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];wd(r,Uh(e,r))}}function wd(n,e){n.children&&$a(n.children,e)}function Uh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Bh(n){const e=n.children&&n.children.map(Bh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Xt&&(t.component=Vh),t}function sn(n){return n.outlet||Xt}function jh(n,e){const t=n.filter(r=>sn(r)===e);return t.push(...n.filter(r=>sn(r)!==e)),t}const Wp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $u(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Wp):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Lu)(t,n,e);if(!u)return Object.assign({},Wp);const h={};Tn(u.posParams,(w,P)=>{h[P]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},h),u.consumed[u.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Ga(n,e,t,r,s="corrected"){if(t.length>0&&function gy(n,e,t){return t.some(r=>Zs(n,e,r)&&sn(r)!==Xt)}(n,t,r)){const h=new O(e,function py(n,e,t,r){const s={};s[Xt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&sn(u)!==Xt){const h=new O([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,s[sn(u)]=h}return s}(n,e,r,new O(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function my(n,e,t){return t.some(r=>Zs(n,e,r))}(n,t,r)){const h=new O(n.segments,function fy(n,e,t,r,s,u){const h={};for(const m of r)if(Zs(n,t,m)&&!s[sn(m)]){const w=new O([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,h[sn(m)]=w}return Object.assign(Object.assign({},s),h)}(n,e,t,r,n.children,s));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const u=new O(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Zs(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function yy(n,e,t,r){return!!(sn(n)===r||r!==Xt&&Zs(e,t,n))&&("**"===n.path||$u(e,n,t).matched)}function Zp(n,e,t){return 0===e.length&&!n.children[t]}class Ks{constructor(e){this.segmentGroup=e||null}}class Rr{constructor(e){this.urlTree=e}}function za(n){return ss(new Ks(n))}function qh(n){return ss(new Rr(n))}class Id{constructor(e,t,r,s,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=Ga(this.urlTree.root,[],[],this.config).segmentGroup,t=new O(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Xt).pipe((0,Wt.U)(u=>this.createUrlTree(Ql(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ir(u=>{if(u instanceof Rr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Ks?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Xt).pipe((0,Wt.U)(s=>this.createUrlTree(Ql(s),e.queryParams,e.fragment))).pipe(Ir(s=>{throw s instanceof Ks?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const s=e.segments.length>0?new O([],{[Xt]:e}):e;return new ps(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Wt.U)(u=>new O([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,kn.D)(s).pipe(Ou(u=>{const h=r.children[u],m=jh(t,u);return this.expandSegmentGroup(e,m,h,u).pipe((0,Wt.U)(w=>({segment:w,outlet:u})))}),wi((u,h)=>(u[h.outlet]=h.segment,u),{}),function cd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?tr((s,u)=>n(s,u,r)):Ei.y,Bl(1),t?Ah(e):Sn(()=>new as))}())}expandSegment(e,t,r,s,u,h){return(0,kn.D)(r).pipe(Ou(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,h).pipe(Ir(P=>{if(P instanceof Ks)return mt(null);throw P}))),Pa(m=>!!m),Ir((m,w)=>{if(m instanceof as||"EmptyError"===m.name)return Zp(t,s,u)?mt(new O([],{})):za(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,h,m){return yy(s,t,u,h)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,h):za(t):za(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,h){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?qh(u):this.lineralizeSegments(r,u).pipe((0,qn.z)(h=>{const m=new O(h,{});return this.expandSegment(e,m,t,h,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,h){const{matched:m,consumedSegments:w,remainingSegments:P,positionalParamSegments:Q}=$u(t,s,u);if(!m)return za(t);const se=this.applyRedirectCommands(w,s.redirectTo,Q);return s.redirectTo.startsWith("/")?qh(se):this.lineralizeSegments(s,se).pipe((0,qn.z)(we=>this.expandSegment(e,t,r,we.concat(P),h,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?mt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Wt.U)(se=>(r._loadedConfig=se,new O(s,{})))):mt(new O(s,{}));const{matched:h,consumedSegments:m,remainingSegments:w}=$u(t,r,s);return h?this.getChildConfig(e,r,s).pipe((0,qn.z)(Q=>{const se=Q.module,we=Q.routes,{segmentGroup:Me,slicedSegments:Le}=Ga(t,m,w,we),Xe=new O(Me.segments,Me.children);if(0===Le.length&&Xe.hasChildren())return this.expandChildren(se,we,Xe).pipe((0,Wt.U)(rn=>new O(m,rn)));if(0===we.length&&0===Le.length)return mt(new O(m,{}));const ut=sn(r)===u;return this.expandSegment(se,Xe,we,Le,ut?Xt:u,!0).pipe((0,Wt.U)(Kt=>new O(m.concat(Kt.segments),Kt.children)))})):za(t)}getChildConfig(e,t,r){return t.children?mt(new bd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?mt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,qn.z)(s=>s?this.configLoader.load(e.injector,t).pipe((0,Wt.U)(u=>(t._loadedConfig=u,u))):function gr(n){return ss(Di(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):mt(new bd([],e))}runCanLoadGuards(e,t,r){const s=t.canLoad;return s&&0!==s.length?mt(s.map(h=>{const m=e.get(h);let w;if(function Lh(n){return n&&Ha(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!Ha(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return nr(w)})).pipe(qu(),(0,Ii.b)(h=>{if(!ju(h))return;const m=Di(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,Wt.U)(h=>!0===h)):mt(!0)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return mt(r);if(s.numberOfChildren>1||!s.children[Xt])return ss(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));s=s.children[Xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new ps(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Tn(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let h={};return Tn(t.children,(m,w)=>{h[w]=this.createSegmentGroup(e,m,r,s)}),new O(u,h)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}function Ql(n){const e={};for(const r of Object.keys(n.children)){const u=Ql(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function vy(n){if(1===n.numberOfChildren&&n.children[Xt]){const e=n.children[Xt];return new O(n.segments.concat(e.segments),e.children)}return n}(new O(n.segments,e))}class ci{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class bs{constructor(e,t){this.component=e,this.route=t}}function Yp(n,e,t){const r=n._root;return Za(r,e?e._root:null,t,[r.value])}function Gu(n,e,t){const r=function $h(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Za(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=ys(e);return n.children.forEach(h=>{(function Jp(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,h=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(h&&u.routeConfig===h.routeConfig){const w=function _y(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ye(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ye(n.url,e.url)||!ao(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kh(n,e)||!ao(n.queryParams,e.queryParams);default:return!kh(n,e)}}(h,u,u.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new ci(r)):(u.data=h.data,u._resolvedData=h._resolvedData),Za(n,e,u.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new bs(m.outlet.component,h))}else h&&di(e,m,s),s.canActivateChecks.push(new ci(r)),Za(n,null,u.component?m?m.children:null:t,r,s)})(h,u[h.value.outlet],t,r.concat([h.value]),s),delete u[h.value.outlet]}),Tn(u,(h,m)=>di(h,t.getContext(m),s)),s}function di(n,e,t){const r=ys(n),s=n.value;Tn(r,(u,h)=>{di(u,s.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new bs(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class tg{}function Go(n){return new Zn.y(e=>e.error(n))}class ng{constructor(e,t,r,s,u,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h}recognize(){const e=Ga(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Xt);if(null===t)return null;const r=new Ws([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Xt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new ms(r,t),u=new Mh(this.url,s);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=ay(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const h=t.children[u],m=jh(e,u),w=this.processSegmentGroup(m,h,u);if(null===w)return null;r.push(...w)}const s=ig(r);return function rg(n){n.sort((e,t)=>e.value.outlet===Xt?-1:t.value.outlet===Xt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}processSegment(e,t,r,s){for(const u of e){const h=this.processSegmentAgainstRoute(u,t,r,s);if(null!==h)return h}return Zp(t,r,s)?[]:null}processSegmentAgainstRoute(e,t,r,s){if(e.redirectTo||!yy(e,t,r,s))return null;let u,h=[],m=[];if("**"===e.path){const Me=r.length>0?Fu(r).parameters:{};u=new Ws(r,Me,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),sn(e),e.component,e,Ka(t),go(t)+r.length,f(e))}else{const Me=$u(t,e,r);if(!Me.matched)return null;h=Me.consumedSegments,m=Me.remainingSegments,u=new Ws(h,Me.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),sn(e),e.component,e,Ka(t),go(t)+h.length,f(e))}const w=function wy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:P,slicedSegments:Q}=Ga(t,h,m,w.filter(Me=>void 0===Me.redirectTo),this.relativeLinkResolution);if(0===Q.length&&P.hasChildren()){const Me=this.processChildren(w,P);return null===Me?null:[new ms(u,Me)]}if(0===w.length&&0===Q.length)return[new ms(u,[])];const se=sn(e)===s,we=this.processSegment(w,P,Q,se?Xt:s);return null===we?null:[new ms(u,we)]}}function Wh(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ig(n){const e=[],t=new Set;for(const r of n){if(!Wh(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=ig(r.children);e.push(new ms(r.value,s))}return e.filter(r=>!t.has(r))}function Ka(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function go(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y(n){return n.data||{}}function f(n){return n.resolve||{}}function Se(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function tt(n){return jn(e=>{const t=n(e);return t?(0,kn.D)(t).pipe((0,Wt.U)(()=>e)):mt(e)})}class Ct extends class Nt{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Pn=new c.OlP("ROUTES");class fi{constructor(e,t,r,s){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=s}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const s=this.loadModuleFactory(t.loadChildren).pipe((0,Wt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=u.create(e);return new bd(Sh(h.injector.get(Pn,void 0,c.XFs.Self|c.XFs.Optional)).map(Bh),h)}),Ir(u=>{throw t._loader$=void 0,u}));return t._loader$=new $i(s,()=>new oi.x).pipe(ls()),t._loader$}loadModuleFactory(e){return nr(e()).pipe((0,qn.z)(t=>t instanceof c.YKP?mt(t):(0,kn.D)(this.compiler.compileModuleAsync(t))))}}class Iy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Ys(n){throw n}function Td(n,e,t){return e.parse("/")}function Cd(n,e){return mt(null)}const Zh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ad={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Cr=(()=>{class n{constructor(t,r,s,u,h,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new oi.x,this.errorHandler=Ys,this.malformedUriErrorHandler=Td,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Cd,afterPreactivation:Cd},this.urlHandlingStrategy=new Iy,this.routeReuseStrategy=new Ct,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(c.h0i),this.console=h.get(c.c2e);const se=h.get(c.R0b);this.isNgZoneEnabled=se instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function Rp(){return new ps(new O([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new fi(h,m,we=>this.triggerEvent(new zs(we)),we=>this.triggerEvent(new ds(we))),this.routerState=Ba(this.currentUrlTree,this.rootComponentType),this.transitions=new si({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(tr(s=>0!==s.id),(0,Wt.U)(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),jn(s=>{let u=!1,h=!1;return mt(s).pipe((0,Ii.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),jn(m=>{const w=this.browserUrlTree.toString(),P=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||P)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Yh(m.source)&&(this.browserUrlTree=m.extractedUrl),mt(m).pipe(jn(se=>{const we=this.transitions.getValue();return r.next(new Gs(se.id,this.serializeUrl(se.extractedUrl),se.source,se.restoredState)),we!==this.transitions.getValue()?Uo.E:Promise.resolve(se)}),function Kp(n,e,t,r){return jn(s=>function Wa(n,e,t,r,s){return new Id(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,Wt.U)(u=>Object.assign(Object.assign({},s),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ii.b)(se=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:se.urlAfterRedirects})}),function g(n,e,t,r,s){return(0,qn.z)(u=>function Jl(n,e,t,r,s="emptyOnly",u="legacy"){try{const h=new ng(n,e,t,r,s,u).recognize();return null===h?Go(new tg):mt(h)}catch(h){return Go(h)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,s).pipe((0,Wt.U)(h=>Object.assign(Object.assign({},u),{targetSnapshot:h}))))}(this.rootComponentType,this.config,se=>this.serializeUrl(se),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ii.b)(se=>{if("eager"===this.urlUpdateStrategy){if(!se.extras.skipLocationChange){const Me=this.urlHandlingStrategy.merge(se.urlAfterRedirects,se.rawUrl);this.setBrowserUrl(Me,se)}this.browserUrlTree=se.urlAfterRedirects}const we=new qo(se.id,this.serializeUrl(se.extractedUrl),this.serializeUrl(se.urlAfterRedirects),se.targetSnapshot);r.next(we)}));if(P&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:we,extractedUrl:Me,source:Le,restoredState:Xe,extras:ut}=m,Gt=new Gs(we,this.serializeUrl(Me),Le,Xe);r.next(Gt);const Kt=Ba(Me,this.rootComponentType).snapshot;return mt(Object.assign(Object.assign({},m),{targetSnapshot:Kt,urlAfterRedirects:Me,extras:Object.assign(Object.assign({},ut),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Uo.E}),tt(m=>{const{targetSnapshot:w,id:P,extractedUrl:Q,rawUrl:se,extras:{skipLocationChange:we,replaceUrl:Me}}=m;return this.hooks.beforePreactivation(w,{navigationId:P,appliedUrlTree:Q,rawUrlTree:se,skipLocationChange:!!we,replaceUrl:!!Me})}),(0,Ii.b)(m=>{const w=new kp(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,Wt.U)(m=>Object.assign(Object.assign({},m),{guards:Yp(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function Xp(n,e){return(0,qn.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:h}}=t;return 0===h.length&&0===u.length?mt(Object.assign(Object.assign({},t),{guardsResult:!0})):function by(n,e,t,r){return(0,kn.D)(n).pipe((0,qn.z)(s=>function zh(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?mt(u.map(m=>{const w=Gu(m,e,s);let P;if(function m0(n){return n&&Ha(n.canDeactivate)}(w))P=nr(w.canDeactivate(n,e,t,r));else{if(!Ha(w))throw new Error("Invalid CanDeactivate guard");P=nr(w(n,e,t,r))}return P.pipe(Pa())})).pipe(qu()):mt(!0)}(s.component,s.route,t,e,r)),Pa(s=>!0!==s,!0))}(h,r,s,n).pipe((0,qn.z)(m=>m&&function zp(n){return"boolean"==typeof n}(m)?function Dd(n,e,t,r){return(0,kn.D)(e).pipe(Ou(s=>Ra(function eg(n,e){return null!==n&&e&&e(new ku(n)),mt(!0)}(s.route.parent,r),function Ey(n,e){return null!==n&&e&&e(new La(n)),mt(!0)}(s.route,r),function Gh(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(h=>function Qp(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>Hs(()=>mt(h.guards.map(w=>{const P=Gu(w,h.node,t);let Q;if(function Fh(n){return n&&Ha(n.canActivateChild)}(P))Q=nr(P.canActivateChild(r,n));else{if(!Ha(P))throw new Error("Invalid CanActivateChild guard");Q=nr(P(r,n))}return Q.pipe(Pa())})).pipe(qu())));return mt(u).pipe(qu())}(n,s.path,t),function hi(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return mt(!0);const s=r.map(u=>Hs(()=>{const h=Gu(u,e,t);let m;if(function Kl(n){return n&&Ha(n.canActivate)}(h))m=nr(h.canActivate(e,n));else{if(!Ha(h))throw new Error("Invalid CanActivate guard");m=nr(h(e,n))}return m.pipe(Pa())}));return mt(s).pipe(qu())}(n,s.route,t))),Pa(s=>!0!==s,!0))}(r,u,n,e):mt(m)),(0,Wt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Ii.b)(m=>{if(ju(m.guardsResult)){const P=Di(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw P.url=m.guardsResult,P}const w=new jl(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),tr(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),tt(m=>{if(m.guards.canActivateChecks.length)return mt(m).pipe((0,Ii.b)(w=>{const P=new ai(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(P)}),jn(w=>{let P=!1;return mt(w).pipe(function b(n,e){return(0,qn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return mt(t);let u=0;return(0,kn.D)(s).pipe(Ou(h=>function G(n,e,t,r){return function ae(n,e,t,r){const s=Se(n);if(0===s.length)return mt({});const u={};return(0,kn.D)(s).pipe((0,qn.z)(h=>function Ve(n,e,t,r){const s=Gu(n,e,r);return nr(s.resolve?s.resolve(e,t):s(e,t))}(n[h],e,t,r).pipe((0,Ii.b)(m=>{u[h]=m}))),Bl(1),(0,qn.z)(()=>Se(u).length===s.length?mt(u):Uo.E))}(n._resolve,n,e,r).pipe((0,Wt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),ay(n,t).resolve),null)))}(h.route,r,n,e)),(0,Ii.b)(()=>u++),Bl(1),(0,qn.z)(h=>u===s.length?mt(t):Uo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ii.b)({next:()=>P=!0,complete:()=>{P||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Ii.b)(w=>{const P=new ui(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(P)}))}),tt(m=>{const{targetSnapshot:w,id:P,extractedUrl:Q,rawUrl:se,extras:{skipLocationChange:we,replaceUrl:Me}}=m;return this.hooks.afterPreactivation(w,{navigationId:P,appliedUrlTree:Q,rawUrlTree:se,skipLocationChange:!!we,replaceUrl:!!Me})}),(0,Wt.U)(m=>{const w=function Vp(n,e,t){const r=zl(n,e._root,t?t._root:void 0);return new gd(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,Ii.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Wt.U)(r=>(new Gp(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Ii.b)({next(){u=!0},complete(){u=!0}}),function Np(n){return(0,lr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||h||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===s.id&&(this.currentNavigation=null)}),Ir(m=>{if(h=!0,function dd(n){return n&&n[Ho]}(m)){const w=ju(m.url);w||(this.navigated=!0,this.restoreHistory(s,!0));const P=new Rn(s.id,this.serializeUrl(s.extractedUrl),m.message);r.next(P),w?setTimeout(()=>{const Q=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),se={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Yh(s.source)};this.scheduleNavigation(Q,"imperative",null,se,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const w=new Nu(s.id,this.serializeUrl(s.extractedUrl),m);r.next(w);try{s.resolve(this.errorHandler(m))}catch(P){s.reject(P)}}return Uo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var s;const u={replaceUrl:!0},h=(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null;if(h){const w=Object.assign({},h);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,h,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){$a(t),this.config=t.map(Bh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:h,queryParamsHandling:m,preserveFragment:w}=r,P=s||this.routerState.root,Q=w?this.currentUrlTree.fragment:h;let se=null;switch(m){case"merge":se=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":se=this.currentUrlTree.queryParams;break;default:se=u||null}return null!==se&&(se=this.removeEmptyProps(se)),function _s(n,e,t,r,s){if(0===t.length)return Wl(e.root,e.root,e.root,r,s);const u=function cy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Rh(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,h)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Tn(u.outlets,(w,P)=>{m[P]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===h?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new Rh(t,e,r)}(t);if(u.toRoot())return Wl(e.root,e.root,new O([],{}),r,s);const h=function Bp(n,e,t){if(n.isAbsolute)return new Zl(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Zl(u,u===e.root,0)}const r=ho(n.commands[0])?0:1;return function jp(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new Zl(r,!1,s-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=h.processChildren?vd(h.segmentGroup,h.index,u.commands):Hp(h.segmentGroup,h.index,u.commands);return Wl(e.root,h.segmentGroup,m,r,s)}(P,this.currentUrlTree,t,se,null!=Q?Q:null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=ju(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Kh(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?Object.assign({},Zh):!1===r?Object.assign({},Ad):r,ju(t))return fs(this.currentUrlTree,t,s);const u=this.parseUrl(t);return fs(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Mu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,h){var m,w;if(this.disposed)return Promise.resolve(!1);let P,Q,se;h?(P=h.resolve,Q=h.reject,se=h.promise):se=new Promise((Le,Xe)=>{P=Le,Q=Xe});const we=++this.navigationId;let Me;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),Me=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):Me=0,this.setTransition({id:we,targetPageId:Me,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:P,reject:Q,promise:se,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),se.catch(Le=>Promise.reject(Le))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){var s,u;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===h?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const s=new Rn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Yh(n){return"imperative"!==n}let Sd=(()=>{class n{constructor(t,r,s,u,h){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=h,this.commands=null,this.onChanges=new oi.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,s=this.el.nativeElement;null!==t?r.setAttribute(s,"tabindex",t):r.removeAttribute(s,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Wu(this.skipLocationChange),replaceUrl:Wu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Wu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Cr),c.Y36(ja),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})(),zu=(()=>{class n{constructor(t,r,s){this.router=t,this.route=r,this.locationStrategy=s,this.commands=null,this.href=null,this.onChanges=new oi.x,this.subscription=t.events.subscribe(u=>{u instanceof Mu&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,s,u,h){if(0!==t||r||s||u||h||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:Wu(this.skipLocationChange),replaceUrl:Wu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Wu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Cr),c.Y36(ja),c.Y36(D))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})();function Wu(n){return""===n||!!n}let Dy=(()=>{class n{constructor(t,r,s,u,h,m){this.router=t,this.element=r,this.renderer=s,this.cdr=u,this.link=h,this.linkWithHref=m,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new c.vpe,this.routerEventsSubscription=t.events.subscribe(w=>{w instanceof Mu&&this.update()})}ngAfterContentInit(){mt(this.links.changes,this.linksWithHrefs.changes,mt(null)).pipe((0,us.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(s=>!!s).map(s=>s.onChanges);this.linkInputChangesSubscription=(0,kn.D)(r).pipe((0,us.J)()).subscribe(s=>{this.isActive!==this.isLinkActive(this.router)(s)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(s=>!!s)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Ty(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>!!s.urlTree&&t.isActive(s.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Cr),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.sBO),c.Y36(Sd,8),c.Y36(zu,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,s){if(1&t&&(c.Suo(s,Sd,5),c.Suo(s,zu,5)),2&t){let u;c.iGM(u=c.CRH())&&(r.links=u),c.iGM(u=c.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[c.TTD]}),n})();class Cy{}class v0{preload(e,t){return mt(null)}}let _0=(()=>{class n{constructor(t,r,s,u){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=new fi(s,r,w=>t.triggerEvent(new zs(w)),w=>t.triggerEvent(new ds(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(tr(t=>t instanceof Mu),Ou(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const h=u._loadedConfig;s.push(this.processRoutes(h.module,h.routes))}else u.loadChildren&&!u.canLoad?s.push(this.preloadConfig(t,u)):u.children&&s.push(this.processRoutes(t,u.children));return(0,kn.D)(s).pipe((0,us.J)(),(0,Wt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?mt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,qn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Cr),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(Cy))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),og=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Gs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Mu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ql&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ql(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const mo=new c.OlP("ROUTER_CONFIGURATION"),Sy=new c.OlP("ROUTER_FORROOT_GUARD"),b0=[X,{provide:Pe,useClass:Ke},{provide:Cr,useFactory:function Oy(n,e,t,r,s,u,h={},m,w){const P=new Cr(null,n,e,t,r,s,Sh(u));return m&&(P.urlHandlingStrategy=m),w&&(P.routeReuseStrategy=w),function I0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,P),h.enableTracing&&P.events.subscribe(Q=>{var se,we;null===(se=console.group)||void 0===se||se.call(console,`Router Event: ${Q.constructor.name}`),console.log(Q.toString()),console.log(Q),null===(we=console.groupEnd)||void 0===we||we.call(console)}),P},deps:[Pe,Hu,X,c.zs3,c.Sil,Pn,mo,[class Xl{},new c.FiY],[class dt{},new c.FiY]]},Hu,{provide:ja,useFactory:function sg(n){return n.routerState.root},deps:[Cr]},_0,v0,class Ay{preload(e,t){return t().pipe(Ir(()=>mt(null)))}},{provide:mo,useValue:{enableTracing:!1}}];function fI(){return new c.PXZ("Router",Cr)}let Qh=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[b0,xy(t),{provide:Sy,useFactory:w0,deps:[[Cr,new c.FiY,new c.tp0]]},{provide:mo,useValue:r||{}},{provide:D,useFactory:E0,deps:[S,[new c.tBr(re),new c.FiY],mo]},{provide:og,useFactory:pI,deps:[Cr,Cl,mo]},{provide:Cy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:v0},{provide:c.PXZ,multi:!0,useFactory:fI},[xd,{provide:c.ip1,multi:!0,useFactory:D0,deps:[xd]},{provide:Ny,useFactory:My,deps:[xd]},{provide:c.tb,multi:!0,useExisting:Ny}]]}}static forChild(t){return{ngModule:n,providers:[xy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Sy,8),c.LFG(Cr,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function pI(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new og(n,e,t)}function E0(n,e,t={}){return t.useHash?new Z(n,e):new J(n,e)}function w0(n){return"guarded"}function xy(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:Pn,multi:!0,useValue:n}]}let xd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new oi.x}appInitializer(){return this.injector.get(_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const s=new Promise(m=>r=m),u=this.injector.get(Cr),h=this.injector.get(mo);return"disabled"===h.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?mt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),s})}bootstrapListener(t){const r=this.injector.get(mo),s=this.injector.get(_0),u=this.injector.get(og),h=this.injector.get(Cr),m=this.injector.get(c.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),s.setUpPreloading(),u.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function D0(n){return n.appInitializer.bind(n)}function My(n){return n.bootstrapListener.bind(n)}const Ny=new c.OlP("Router Initializer");let gI=(()=>{class n{constructor(t){this.router=t}ngOnInit(){}navigateTo(t){this.router.navigate([t])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Cr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-ex-index"]],decls:6,vars:0,consts:[["routerLinkActive","active","routerLink","/ex001-quill-text-editor"],["routerLinkActive","active","routerLink","/ex002-firebase-crud"]],template:function(t,r){1&t&&(c.TgZ(0,"a",0),c._uU(1,"Ex01 - Quill Text Editor"),c.qZA(),c._UZ(2,"br"),c.TgZ(3,"a",1),c._uU(4,"Ex02 - Firebase CRUD"),c.qZA(),c._UZ(5,"br"))},directives:[zu,Dy],styles:[""]}),n})(),C0=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),ec=(()=>{class n extends C0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const zo=new c.OlP("NgValueAccessor"),XC={provide:zo,useExisting:(0,c.Gpc)(()=>Od),multi:!0},mI=new c.OlP("CompositionEventMode");let Od=(()=>{class n extends C0{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function A0(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(mI,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[c._Bn([XC]),c.qOj]}),n})();const xn=new c.OlP("NgValidators"),Ku=new c.OlP("NgAsyncValidators");function N0(n){return function Zu(n){return null==n||0===n.length}(n.value)?{required:!0}:null}function Jh(n){return null}function Fy(n){return null!=n}function Vy(n){const e=(0,c.QGY)(n)?(0,kn.D)(n):n;return(0,c.CqO)(e),e}function Xh(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Wo(n,e){return e.map(t=>t(n))}function F0(n){return n.map(e=>function L0(n){return!n.validate}(e)?e:t=>e.validate(t))}function Es(n){return null!=n?function ug(n){if(!n)return null;const e=n.filter(Fy);return 0==e.length?null:function(t){return Xh(Wo(t,e))}}(F0(n)):null}function cg(n){return null!=n?function lg(n){if(!n)return null;const e=n.filter(Fy);return 0==e.length?null:function(t){return function T0(...n){const e=(0,Sa.jO)(n),{args:t,keys:r}=In(n),s=new Zn.y(u=>{const{length:h}=t;if(!h)return void u.complete();const m=new Array(h);let w=h,P=h;for(let Q=0;Q<h;Q++){let se=!1;(0,Vo.Xf)(t[Q]).subscribe((0,Kn.x)(u,we=>{se||(se=!0,P--),m[Q]=we},()=>w--,void 0,()=>{(!w||!se)&&(P||u.next(r?Oa(r,m):m),u.complete())}))}});return e?s.pipe(ld(e)):s}(Wo(t,e).map(Vy)).pipe((0,Wt.U)(Xh))}}(F0(n)):null}function dg(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yI(n){return n._rawValidators}function Uy(n){return n._rawAsyncValidators}function V0(n){return n?Array.isArray(n)?n:[n]:[]}function tc(n,e){return Array.isArray(n)?n.includes(e):n===e}function ef(n,e){const t=V0(e);return V0(n).forEach(s=>{tc(t,s)||t.push(s)}),t}function hg(n,e){return V0(e).filter(t=>!tc(n,t))}class fg{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Es(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Qs extends fg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class zi extends fg{get formDirective(){return null}get path(){return null}}class U0{constructor(e){this._cd=e}is(e){var t,r,s;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(s=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===s?void 0:s[e])}}let pg=(()=>{class n extends U0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Qs,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[c.qOj]}),n})(),tf=(()=>{class n extends U0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(zi,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[c.qOj]}),n})();function Zo(n,e){nf(n,e),e.valueAccessor.writeValue(n.value),function jy(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ya(n,e)})}(n,e),function $0(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function _I(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ya(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function H0(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Md(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),rf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function yg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function nf(n,e){const t=yI(n);null!==e.validator?n.setValidators(dg(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Uy(n);null!==e.asyncValidator?n.setAsyncValidators(dg(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();yg(e._rawValidators,s),yg(e._rawAsyncValidators,s)}function rf(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=yI(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(h=>h!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=Uy(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(h=>h!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return yg(e._rawValidators,r),yg(e._rawAsyncValidators,r),t}function Ya(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function rc(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const kd="VALID",sf="INVALID",Qu="PENDING",ic="DISABLED";function Rd(n){return(af(n)?n.validators:n)||null}function K0(n){return Array.isArray(n)?Es(n):n||null}function _g(n,e){return(af(e)?e.asyncValidators:n)||null}function bI(n){return Array.isArray(n)?cg(n):n||null}function af(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const bg=n=>n instanceof wg,Eg=n=>n instanceof Ig,$y=n=>n instanceof EI;function Y0(n){return bg(n)?n.value:n.getRawValue()}function Q0(n,e){const t=Eg(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[e])throw new c.vHH(1001,"")}function Wi(n,e){Eg(n),n._forEachChild((r,s)=>{if(void 0===e[s])throw new c.vHH(1002,"")})}class Gy{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=K0(this._rawValidators),this._composedAsyncValidatorFn=bI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===kd}get invalid(){return this.status===sf}get pending(){return this.status==Qu}get disabled(){return this.status===ic}get enabled(){return this.status!==ic}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=K0(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=bI(e)}addValidators(e){this.setValidators(ef(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ef(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hg(e,this._rawAsyncValidators))}hasValidator(e){return tc(this._rawValidators,e)}hasAsyncValidator(e){return tc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Qu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ic,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=kd,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kd||this.status===Qu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ic:kd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Qu,this._hasOwnPendingAsyncValidator=!0;const t=Vy(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Z0(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(s=>{r=Eg(r)?r.controls.hasOwnProperty(s)?r.controls[s]:null:$y(r)&&r.at(s)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?ic:this.errors?sf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qu)?Qu:this._anyControlsHaveStatus(sf)?sf:kd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){af(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class wg extends Gy{constructor(e=null,t,r){super(Rd(t),_g(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),af(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){rc(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){rc(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Ig extends Gy{constructor(e,t,r){super(Rd(t),_g(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Wi(this,e),Object.keys(e).forEach(r=>{Q0(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Y0(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class EI extends Gy{constructor(e,t,r){super(Rd(t),_g(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Wi(this,e),e.forEach((r,s)=>{Q0(this,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Y0(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let uf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const ib={provide:zo,useExisting:(0,c.Gpc)(()=>Cg),multi:!0};let Cg=(()=>{class n extends ec{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[c._Bn([ib]),c.qOj]}),n})(),sb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const Wy=new c.OlP("NgModelWithFormControlWarning"),CI={provide:zi,useExisting:(0,c.Gpc)(()=>Pd)};let Pd=(()=>{class n extends zi{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(rf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Zo(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Md(t.control||null,t,!1),rc(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function vg(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(Md(r||null,t),bg(s)&&(Zo(s,t),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function G0(n,e){nf(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function qy(n,e){return rf(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){nf(this.form,this),this._oldForm&&rf(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xn,10),c.Y36(Ku,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([CI]),c.qOj,c.TTD]}),n})();const lb={provide:Qs,useExisting:(0,c.Gpc)(()=>df)};let df=(()=>{class n extends Qs{constructor(t,r,s,u,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function Yu(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===Od?t=u:function Nd(n){return Object.getPrototypeOf(n.constructor)===ec}(u)?r=u:s=u}),s||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function nc(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function By(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(zi,13),c.Y36(xn,10),c.Y36(Ku,10),c.Y36(zo,10),c.Y36(Wy,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([lb]),c.qOj,c.TTD]}),n})();const SI={provide:zo,useExisting:(0,c.Gpc)(()=>hf),multi:!0};function Og(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let hf=(()=>{class n extends ec{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const s=Og(this._getOptionId(t),t);this.setProperty("value",s)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function pA(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([SI]),c.qOj]}),n})(),Mg=(()=>{class n{constructor(t,r,s){this._element=t,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Og(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(hf,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const cb={provide:zo,useExisting:(0,c.Gpc)(()=>ws),multi:!0};function Zy(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let ws=(()=>{class n extends ec{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const s=t.map(u=>this._getOptionId(u));r=(u,h)=>{u._setSelected(s.indexOf(h.toString())>-1)}}else r=(s,u)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const s=[],u=r.selectedOptions;if(void 0!==u){const h=u;for(let m=0;m<h.length;m++){const P=this._getOptionValue(h[m].value);s.push(P)}}else{const h=r.options;for(let m=0;m<h.length;m++){const w=h[m];if(w.selected){const P=this._getOptionValue(w.value);s.push(P)}}}this.value=s,t(s)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function db(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([cb]),c.qOj]}),n})(),Ld=(()=>{class n{constructor(t,r,s){this._element=t,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Zy(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Zy(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(ws,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Qa=(()=>{class n{constructor(){this._validator=Jh}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Jh,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();const Ky={provide:xn,useExisting:(0,c.Gpc)(()=>Fd),multi:!0};let Fd=(()=>{class n extends Qa{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function OI(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>N0}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([Ky]),c.qOj]}),n})(),bb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[sb]]}),n})(),RI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[bb]}),n})(),Eb=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Wy,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[bb]}),n})(),Rg=(()=>{class n{group(t,r=null){const s=this._reduceControls(t);let m,u=null,h=null;return null!=r&&(function Is(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,h=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,h=null!=r.asyncValidator?r.asyncValidator:null)),new Ig(s,{asyncValidators:h,updateOn:m,validators:u})}control(t,r,s){return new wg(t,r,s)}array(t,r,s){const u=t.map(h=>this._createControl(h));return new EI(u,r,s)}_reduceControls(t){const r={};return Object.keys(t).forEach(s=>{r[s]=this._createControl(t[s])}),r}_createControl(t){return bg(t)||Eg(t)||$y(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:Eb}),n})();const wb=[[["","quill-editor-toolbar",""]]],Ib=["[quill-editor-toolbar]"],Pg=new c.OlP("config");let Vd=null,LI=(()=>{class n{constructor(t,r,s,u,h,m,w){this.elementRef=t,this.domSanitizer=r,this.doc=s,this.platformId=u,this.renderer=h,this.zone=m,this.config=w,this.format="html",this.required=!1,this.customToolbarPosition="top",this.sanitize=!1,this.style=null,this.strict=!0,this.customOptions=[],this.onEditorCreated=new c.vpe,this.onContentChanged=new c.vpe,this.onSelectionChanged=new c.vpe,this.disabled=!1,this.valueGetter=(P,Q)=>{let se=Q.children[0].innerHTML;("<p><br></p>"===se||"<div><br><div>"===se)&&(se=null);let we=se;if("text"===this.format)we=P.getText();else if("object"===this.format)we=P.getContents();else if("json"===this.format)try{we=JSON.stringify(P.getContents())}catch(Me){we=P.getText()}return we},this.valueSetter=(P,Q)=>{if("html"===this.format)return this.sanitize&&(Q=this.domSanitizer.sanitize(c.q3G.HTML,Q)),P.clipboard.convert(Q);if("json"===this.format)try{return JSON.parse(Q)}catch(se){return[{insert:Q}]}return Q},this.selectionChangeHandler=(P,Q,se)=>{this.zone.run(()=>{this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:Q,range:P,source:se}),!P&&this.onModelTouched&&this.onModelTouched()})},this.textChangeHandler=(P,Q,se)=>{const we=this.quillEditor.getText(),Me=this.quillEditor.getContents();let Le=this.editorElem.children[0].innerHTML;("<p><br></p>"===Le||"<div><br><div>"===Le)&&(Le=null),this.zone.run(()=>{const Xe=this.trackChanges||this.config.trackChanges;(se===Vd.sources.USER||Xe&&"all"===Xe)&&this.onModelChange&&this.onModelChange(this.valueGetter(this.quillEditor,this.editorElem)),this.onContentChanged.emit({content:Me,delta:P,editor:this.quillEditor,html:Le,oldDelta:Q,source:se,text:we})})}}onModelChange(t){}onModelTouched(){}ngAfterViewInit(){if(es(this.platformId))return;Vd||(Vd=M(9971)),this.elementRef.nativeElement.insertAdjacentHTML("top"===this.customToolbarPosition?"beforeend":"afterbegin","<div quill-editor-element></div>"),this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");const t=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),r=this.modules||this.config.modules||{};let s=void 0!==this.placeholder?this.placeholder:this.config.placeholder;void 0===s&&(s="Insert text here ..."),t&&(r.toolbar=t),this.style&&Object.keys(this.style).forEach(Q=>{this.renderer.setStyle(this.editorElem,Q,this.style[Q])}),this.customOptions.forEach(Q=>{const se=Vd.import(Q.import);se.whitelist=Q.whitelist,Vd.register(se,!0)});let u=this.bounds&&"self"===this.bounds?this.editorElem:this.bounds;u||(u=this.config.bounds?this.config.bounds:this.doc.body);let h=this.debug;!h&&!1!==h&&this.config.debug&&(h=this.config.debug);let m=this.readOnly;!m&&!1!==this.readOnly&&(m=void 0!==this.config.readOnly&&this.config.readOnly);let w=this.scrollingContainer;!w&&null!==this.scrollingContainer&&(w=null===this.config.scrollingContainer||this.config.scrollingContainer?this.config.scrollingContainer:null);let P=this.formats;if(!P&&void 0!==P&&(P=this.config.formats||null===this.config.formats?this.config.formats:[]),this.quillEditor=new Vd(this.editorElem,{bounds:u,debug:h,formats:P,modules:r,placeholder:s,readOnly:m,scrollingContainer:w,strict:this.strict,theme:this.theme||(this.config.theme?this.config.theme:"snow")}),this.content){if("object"===this.format)this.quillEditor.setContents(this.content,"silent");else if("text"===this.format)this.quillEditor.setText(this.content,"silent");else if("json"===this.format)try{this.quillEditor.setContents(JSON.parse(this.content),"silent")}catch(Q){this.quillEditor.setText(this.content,"silent")}else{this.sanitize&&(this.content=this.domSanitizer.sanitize(c.q3G.HTML,this.content));const Q=this.quillEditor.clipboard.convert(this.content);this.quillEditor.setContents(Q,"silent")}this.quillEditor.history.clear()}this.setDisabledState(),this.onEditorCreated.emit(this.quillEditor),this.quillEditor.on("selection-change",this.selectionChangeHandler),this.quillEditor.on("text-change",this.textChangeHandler)}ngOnDestroy(){this.quillEditor&&(this.quillEditor.off("selection-change",this.selectionChangeHandler),this.quillEditor.off("text-change",this.textChangeHandler))}ngOnChanges(t){if(this.quillEditor&&(t.readOnly&&this.quillEditor.enable(!t.readOnly.currentValue),t.placeholder&&(this.quillEditor.root.dataset.placeholder=t.placeholder.currentValue),t.style)){const r=t.style.currentValue,s=t.style.previousValue;s&&Object.keys(s).forEach(u=>{this.renderer.removeStyle(this.editorElem,u)}),r&&Object.keys(r).forEach(u=>{this.renderer.setStyle(this.editorElem,u,this.style[u])})}}writeValue(t){if(this.content=t,this.quillEditor){if(t)return void("text"===this.format?this.quillEditor.setText(t):this.quillEditor.setContents(this.valueSetter(this.quillEditor,this.content)));this.quillEditor.setText("")}}setDisabledState(t=this.disabled){this.disabled=t,this.quillEditor&&(t?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}validate(){if(!this.quillEditor)return null;const t={};let r=!0;const s=this.quillEditor.getText().trim().length;return this.minLength&&s&&s<this.minLength&&(t.minLengthError={given:s,minLength:this.minLength},r=!1),this.maxLength&&s>this.maxLength&&(t.maxLengthError={given:s,maxLength:this.maxLength},r=!1),this.required&&!s&&(t.requiredError={empty:!0},r=!1),r?null:t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(os),c.Y36(R),c.Y36(c.Lbi),c.Y36(c.Qsj),c.Y36(c.R0b),c.Y36(Pg))},n.\u0275cmp=c.Xpm({type:n,selectors:[["quill-editor"]],inputs:{format:"format",required:"required",customToolbarPosition:"customToolbarPosition",sanitize:"sanitize",style:"style",strict:"strict",customOptions:"customOptions",valueGetter:"valueGetter",valueSetter:"valueSetter",theme:"theme",modules:"modules",debug:"debug",readOnly:"readOnly",placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",formats:"formats",scrollingContainer:"scrollingContainer",bounds:"bounds",trackChanges:"trackChanges"},outputs:{onEditorCreated:"onEditorCreated",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged"},features:[c._Bn([{multi:!0,provide:zo,useExisting:(0,c.Gpc)(()=>n)},{multi:!0,provide:xn,useExisting:(0,c.Gpc)(()=>n)}]),c.TTD],ngContentSelectors:Ib,decls:1,vars:0,template:function(t,r){1&t&&(c.F$t(wb),c.Hsn(0))},encapsulation:2}),n})();const Db={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},FI={modules:Db};let Tb=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:Pg,useValue:t||{modules:Db}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[{provide:Pg,useValue:FI}],imports:[[]]}),n})(),yA=(()=>{class n{constructor(t){this.domSanitizer=t}transform(t){return this.domSanitizer.bypassSecurityTrustResourceUrl(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(os,16))},n.\u0275pipe=c.Yjl({name:"sanitizeUrl",type:n,pure:!0}),n})();function Cb(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&n){const t=c.oxw();let r;c.xp6(1),c.hij("",1e3-(null==(r=t.editorForm.get("editor"))?null:r.value.length)," left")}}function VI(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1),c._UZ(2,"iframe",14),c.ALo(3,"sanitizeUrl"),c.qZA()),2&n){const t=e.$implicit,r=e.index;c.xp6(1),c.hij(" Video - ",r," "),c.xp6(1),c.Q6J("src",c.lcZ(3,2,t),c.uOi)}}function UI(n,e){if(1&n&&(c.TgZ(0,"div"),c.YNc(1,VI,4,4,"div",13),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.Q6J("ngForOf",t.videoSrc)}}let BI=(()=>{class n{constructor(){this.videoSrc=[],this.editorStyle={height:"300px"},this.editorModules={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["xsmall","small",!1,"medium","large","xlarge","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},this.config={toolbar:[["bold","italic","underline"],["code-block"],["link","image","video"]]}}ngOnInit(){this.editorForm=new Ig({editor:new wg("<p><strong>Quill Editor Demo</strong></p>")})}onSubmit(){var t,r,s;this.editorContent=null===(t=this.editorForm.get("editor"))||void 0===t?void 0:t.value,console.log(null===(r=this.editorForm.get("editor"))||void 0===r?void 0:r.value),this.videoSrc=[],this.parseVideoSrc(null===(s=this.editorForm.get("editor"))||void 0===s?void 0:s.value),console.log("Video Src: ",this.videoSrc)}parseVideoSrc(t){for(;-1!=t.indexOf("<iframe");){var r=t.indexOf("<iframe"),s=t.indexOf("</iframe>"),u=t.substring(r,s),h=u.indexOf('src="'),m=u.indexOf('">');this.videoSrc.push(u.substring(h+5,m)),t=t.substring(s+9)}}maxLength(t){console.log(t),t.editor.getLength()>1e3&&t.editor.deleteText(1e3,t.editor.getLength()),this.editorContent2=t.editor.root.innerHTML}blur(t){this.editorContent3="Test Blur: "+t.editor.root.innerHTML}selectionChanged(t){this.editorContent4="Test selectionChanged: "+t.editor.root.innerHTML}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-ex001-quill-text-editor"]],decls:31,vars:10,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["href","#",1,"navbar-brand","ml-auto","mr-auto"],[1,"container"],[1,"row","pt-5"],[1,"col-md-8"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","editor"],["placeholder","Write something you like ...","formControlName","editor",3,"onContentChanged","onBlur","onSelectionChanged"],[4,"ngIf"],[1,"btn","btn-primary","mt-3"],[1,"col-md-4","bg-light","p-4"],[1,"my-5",3,"innerHTML"],[4,"ngFor","ngForOf"],["frameborder","0","allowfullscreen","true",1,"ql-video",3,"src"]],template:function(t,r){if(1&t&&(c.TgZ(0,"nav",0)(1,"a",1),c._uU(2,"Quill JS Editor with Angular"),c.qZA()(),c.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"form",5),c.NdJ("ngSubmit",function(){return r.onSubmit()}),c.TgZ(7,"div",6)(8,"label",7)(9,"h3"),c._uU(10,"Editor"),c.qZA()(),c.TgZ(11,"quill-editor",8),c.NdJ("onContentChanged",function(u){return r.maxLength(u)})("onBlur",function(u){return r.blur(u)})("onSelectionChanged",function(u){return r.selectionChanged(u)}),c.qZA(),c.YNc(12,Cb,2,1,"span",9),c._UZ(13,"br"),c.TgZ(14,"span"),c._uU(15),c.qZA(),c._UZ(16,"br"),c.TgZ(17,"span"),c._uU(18),c.qZA(),c._UZ(19,"br"),c.TgZ(20,"span"),c._uU(21),c.qZA(),c._UZ(22,"br"),c.qZA(),c.TgZ(23,"button",10),c._uU(24,"Submit"),c.qZA()()(),c.TgZ(25,"div",11)(26,"h3"),c._uU(27,"Output"),c.qZA(),c.TgZ(28,"div",12),c._uU(29),c.qZA(),c.YNc(30,UI,2,1,"div",9),c.qZA()()()),2&t){let s;c.xp6(6),c.Q6J("formGroup",r.editorForm),c.xp6(5),c.Akn(r.editorStyle),c.xp6(1),c.Q6J("ngIf",null!=(null==(s=r.editorForm.get("editor"))?null:s.value)),c.xp6(3),c.Oqu(r.editorContent2),c.xp6(3),c.Oqu(r.editorContent3),c.xp6(3),c.Oqu(r.editorContent4),c.xp6(7),c.Q6J("innerHTML",r.editorContent,c.oJD),c.xp6(1),c.Oqu(r.editorContent),c.xp6(1),c.Q6J("ngIf",r.videoSrc.length>0)}},directives:[uf,tf,Pd,LI,pg,df,hr,er],pipes:[yA],styles:[""]}),n})();var vA=M(4986),Ar=M(5813);function Qy(){return(0,lr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Kn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function Sb(n,e){return n===e}var pt,Xs=M(2011),_A=(M(1451),M(3942)),Ge=M(5861),Ju=M(9681),gf=M(4859),Ja=M(1877),nn=M(2090),bA="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ta={},Jy=Jy||{},jt=bA||self;function Lg(){}function Xy(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function mf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ev="closure_uid_"+(1e9*Math.random()>>>0),qI=0;function Fg(n,e,t){return n.call.apply(n.bind,arguments)}function Ud(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Zr(n,e,t){return(Zr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fg:Ud).apply(null,arguments)}function Xu(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Kr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,s,u){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return e.prototype[s].apply(r,h)}}function el(){this.s=this.s,this.o=this.o}var na={};el.prototype.s=!1,el.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function jI(n){return Object.prototype.hasOwnProperty.call(n,ev)&&n[ev]||(n[ev]=++qI)}(this);delete na[n]}},el.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Bd=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Yr=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,s="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in s&&e.call(t,s[u],u,n)};function yf(n){return Array.prototype.concat.apply([],arguments)}function Zi(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function jd(n){return/^[\s\xa0]*$/.test(n)}var yr,ac=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function mr(n,e){return-1!=n.indexOf(e)}function tl(n,e){return n<e?-1:n>e?1:0}e:{var uc=jt.navigator;if(uc){var lc=uc.userAgent;if(lc){yr=lc;break e}}yr=""}function nl(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function cc(n){const e={};for(const t in n)e[t]=n[t];return e}var dc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nv(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<dc.length;u++)t=dc[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Vg(n){return Vg[" "](n),n}Vg[" "]=Lg;var vf,n,Ob=mr(yr,"Opera"),hc=mr(yr,"Trident")||mr(yr,"MSIE"),rv=mr(yr,"Edge"),Ug=rv||hc,iv=mr(yr,"Gecko")&&!(mr(yr.toLowerCase(),"webkit")&&!mr(yr,"Edge"))&&!(mr(yr,"Trident")||mr(yr,"MSIE"))&&!mr(yr,"Edge"),Mb=mr(yr.toLowerCase(),"webkit")&&!mr(yr,"Edge");function Nb(){var n=jt.document;return n?n.documentMode:void 0}e:{var ov="",sv=(n=yr,iv?/rv:([^\);]+)(\)|;)/.exec(n):rv?/Edge\/([\d\.]+)/.exec(n):hc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Mb?/WebKit\/(\S+)/.exec(n):Ob?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(sv&&(ov=sv?sv[1]:""),hc){var Bg=Nb();if(null!=Bg&&Bg>parseFloat(ov)){vf=String(Bg);break e}}vf=ov}var HI={};var Rb=jt.document&&hc&&(Nb()||parseInt(vf,10))||void 0,GI=function(){if(!jt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{jt.addEventListener("test",Lg,e),jt.removeEventListener("test",Lg,e)}catch(t){}return n}();function pi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function qg(n,e){if(pi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(iv){e:{try{Vg(e.nodeName);var s=!0;break e}catch(u){}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:zI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&qg.Z.h.call(this)}}pi.prototype.h=function(){this.defaultPrevented=!0},Kr(qg,pi);var zI={2:"touch",3:"pen",4:"mouse"};qg.prototype.h=function(){qg.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var fc="closure_listenable_"+(1e6*Math.random()|0),av=0;function WI(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=s,this.key=++av,this.ca=this.fa=!1}function uv(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function lv(n){this.src=n,this.g={},this.h=0}function Pb(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=Bd(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(uv(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function cv(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return s}return-1}lv.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var h=cv(n,e,r,s);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new WI(e,this.src,u,!!r,s)).fa=t,n.push(e)),e};var Hg="closure_lm_"+(1e6*Math.random()|0),Lb={};function Fb(n,e,t,r,s){if(r&&r.once)return dv(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Fb(n,e[u],t,r,s);return null}return t=fv(t),n&&n[fc]?n.N(e,t,mf(r)?!!r.capture:!!r,s):pc(n,e,t,!1,r,s)}function pc(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var h=mf(s)?!!s.capture:!!s,m=Gg(n);if(m||(n[Hg]=m=new lv(n)),(t=m.add(e,t,r,h,u)).proxy)return t;if(r=function ZI(){var e=KI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)GI||(s=h),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(_f(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function dv(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)dv(n,e[u],t,r,s);return null}return t=fv(t),n&&n[fc]?n.O(e,t,mf(r)?!!r.capture:!!r,s):pc(n,e,t,!0,r,s)}function Vb(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)Vb(n,e[u],t,r,s);else r=mf(r)?!!r.capture:!!r,t=fv(t),n&&n[fc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=cv(u=n.g[e],t,r,s))&&(uv(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Gg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=cv(e,t,r,s)),(t=-1<n?e[n]:null)&&$g(t))}function $g(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[fc])Pb(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(_f(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Gg(e))?(Pb(t,n),0==t.h&&(t.src=null,e[Hg]=null)):uv(n)}}}function _f(n){return n in Lb?Lb[n]:Lb[n]="on"+n}function KI(n,e){if(n.ca)n=!0;else{e=new qg(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&$g(n),n=t.call(r,e)}return n}function Gg(n){return(n=n[Hg])instanceof lv?n:null}var hv="__closure_events_fn_"+(1e9*Math.random()>>>0);function fv(n){return"function"==typeof n?n:(n[hv]||(n[hv]=function(e){return n.handleEvent(e)}),n[hv])}function Pr(){el.call(this),this.i=new lv(this),this.P=this,this.I=null}function Qr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new pi(e,n);else if(e instanceof pi)e.target=e.target||n;else{var s=e;nv(e=new pi(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var h=e.g=t[u];s=zg(h,r,!0,e)&&s}if(s=zg(h=e.g=n,r,!0,e)&&s,s=zg(h,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=zg(h=e.g=t[u],r,!1,e)&&s}function zg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var h=e[u];if(h&&!h.ca&&h.capture==t){var m=h.listener,w=h.ia||h.src;h.fa&&Pb(n.i,h),s=!1!==m.call(w,r)&&s}}return s&&!r.defaultPrevented}Kr(Pr,el),Pr.prototype[fc]=!0,Pr.prototype.removeEventListener=function(n,e,t,r){Vb(this,n,e,t,r)},Pr.prototype.M=function(){if(Pr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)uv(t[r]);delete n.g[e],n.h--}}this.I=null},Pr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Pr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Wg=jt.JSON.stringify;function YI(){var n=yv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var mv,pv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new gv,n=>n.reset());class gv{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function EA(n){jt.setTimeout(()=>{throw n},0)}function bf(n,e){mv||function wA(){var n=jt.Promise.resolve(void 0);mv=function(){n.then(vv)}}(),gc||(mv(),gc=!0),yv.add(n,e)}var gc=!1,yv=new class Ub{constructor(){this.h=this.g=null}add(e,t){const r=pv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function vv(){for(var n;n=YI();){try{n.h.call(n.g)}catch(t){EA(t)}var e=pv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}gc=!1}function qd(n,e){Pr.call(this),this.h=n||1,this.g=e||jt,this.j=Zr(this.kb,this),this.l=Date.now()}function _v(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Hd(n,e,t){if("function"==typeof n)t&&(n=Zr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Zr(n.handleEvent,n)}return 2147483647<Number(e)?-1:jt.setTimeout(n,e||0)}function Ef(n){n.g=Hd(()=>{n.g=null,n.i&&(n.i=!1,Ef(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Kr(qd,Pr),(pt=qd.prototype).da=!1,pt.S=null,pt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Qr(this,"tick"),this.da&&(_v(this),this.start()))}},pt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pt.M=function(){qd.Z.M.call(this),_v(this),delete this.g};class bv extends el{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ef(this)}M(){super.M(),this.g&&(jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zg(n){el.call(this),this.h=n,this.g={}}Kr(Zg,el);var Bb=[];function Kg(n,e,t,r){Array.isArray(t)||(t&&(Bb[0]=t.toString()),t=Bb);for(var s=0;s<t.length;s++){var u=Fb(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Yg(n){nl(n.g,function(e,t){this.g.hasOwnProperty(t)&&$g(e)},n),n.g={}}function wf(){this.g=!0}function mc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function wv(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var h=1;h<s.length;h++)s[h]=""}}}return Wg(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Zg.prototype.M=function(){Zg.Z.M.call(this),Yg(this)},Zg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wf.prototype.Aa=function(){this.g=!1},wf.prototype.info=function(){};var rl={},Hb=null;function If(){return Hb=Hb||new Pr}function Iv(n){pi.call(this,rl.Ma,n)}function yc(n){const e=If();Qr(e,new Iv(e,n))}function Dv(n,e){pi.call(this,rl.STAT_EVENT,n),this.stat=e}function Ci(n){const e=If();Qr(e,new Dv(e,n))}function Tv(n,e){pi.call(this,rl.Na,n),this.size=e}function $d(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return jt.setTimeout(function(){n()},e)}rl.Ma="serverreachability",Kr(Iv,pi),rl.STAT_EVENT="statevent",Kr(Dv,pi),rl.Na="timingevent",Kr(Tv,pi);var Df={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Tf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Qg(){}function Av(){}Qg.prototype.h=null;var em,Gd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Jg(){pi.call(this,"d")}function Xg(){pi.call(this,"c")}function Cf(){}function tm(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Zg(this),this.P=QI,this.W=new qd(n=Ug?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new $b}function $b(){this.i=null,this.g="",this.h=!1}Kr(Jg,pi),Kr(Xg,pi),Kr(Cf,Qg),Cf.prototype.g=function(){return new XMLHttpRequest},Cf.prototype.i=function(){return{}},em=new Cf;var QI=45e3,nm={},rm={};function cr(n,e,t){n.K=1,n.v=om(Xa(e)),n.s=t,n.U=!0,Sv(n,null)}function Sv(n,e){n.F=Date.now(),Af(n),n.A=Xa(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),sm(t.h,"t",r),n.C=0,t=n.l.H,n.h=new $b,n.g=fE(n.l,t?e:null,!n.s),0<n.O&&(n.L=new bv(Zr(n.Ia,n,n.g),n.O)),Kg(n.V,n.g,"readystatechange",n.gb),e=n.H?cc(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),yc(1),function jb(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var h="",m=u.split("&"),w=0;w<m.length;w++){var P=m[w].split("=");if(1<P.length){var Q=P[0];P=P[1];var se=Q.split("_");h=2<=se.length&&"type"==se[1]?h+(Q+"=")+P+"&":h+(Q+"=redacted&")}}else h=null;else h=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Gb(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function zb(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=Wb(n,t),s==rm){4==e&&(n.o=4,Ci(14),r=!1),mc(n.j,n.m,null,"[Incomplete Response]");break}if(s==nm){n.o=4,Ci(15),mc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}mc(n.j,n.m,s,null),Ov(n,s)}Gb(n)&&s!=rm&&s!=nm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ci(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Kv(e),e.L=!0,Ci(11))):(mc(n.j,n.m,t,"[Invalid Chunked Response]"),vc(n),ra(n))}function Wb(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?rm:(t=Number(e.substring(t,r)),isNaN(t)?nm:(r+=1)+t>e.length?rm:(e=e.substr(r,t),n.C=r+t,e))}function Af(n){n.Y=Date.now()+n.P,xv(n,n.P)}function xv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=$d(Zr(n.eb,n),e)}function Sf(n){n.B&&(jt.clearTimeout(n.B),n.B=null)}function ra(n){0==n.l.G||n.I||Ff(n.l,n)}function vc(n){Sf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,_v(n.W),Yg(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ov(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||am(t.i,n)))if(t.I=n.N,!n.J&&am(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(P){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0])e:if(t.u)t.ta=s[1],0<t.ta-t.U&&37500>s[2]&&t.N&&0==t.A&&!t.v&&(t.v=$d(Zr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;fm(t),tu(t)}Zv(t),Ci(18)}if(1>=Fv(t.i)&&t.ka){try{t.ka()}catch(P){}t.ka=void 0}}else Cn(t,11)}else if((n.J||t.g==n)&&fm(t),!jd(e))for(s=t.Ca.g.parse(e),e=0;e<s.length;e++){let P=s[e];if(t.U=P[0],P=P[1],2==t.G)if("c"==P[0]){t.J=P[1],t.la=P[2];const Q=P[3];null!=Q&&(t.ma=Q,t.h.info("VER="+t.ma));const se=P[4];null!=se&&(t.za=se,t.h.info("SVER="+t.za));const we=P[5];null!=we&&"number"==typeof we&&0<we&&(t.K=r=1.5*we,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Me=n.g;if(Me){const Le=Me.g?Me.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Le){var u=r.i;!u.g&&(mr(Le,"spdy")||mr(Le,"quic")||mr(Le,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(um(u,u.h),u.h=null))}if(r.D){const Xe=Me.g?Me.g.getResponseHeader("X-HTTP-Session-Id"):null;Xe&&(r.sa=Xe,Ln(r.F,r.D,Xe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=Yv(r,r.H?r.la:null,r.W),h.J){rE(r.i,h);var m=h,w=r.K;w&&m.setTimeout(w),m.B&&(Sf(m),Af(m)),r.g=h}else hE(r);0<t.l.length&&zv(t)}else"stop"!=P[0]&&"close"!=P[0]||Cn(t,7);else 3==t.G&&("stop"==P[0]||"close"==P[0]?"stop"==P[0]?Cn(t,7):Gv(t):"noop"!=P[0]&&t.j&&t.j.wa(P),t.A=0)}yc(4)}catch(P){}}function Mv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Xy(n)||"string"==typeof n)Yr(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Xy(n)||"string"==typeof n){t=[];for(var r=n.length,s=0;s<r;s++)t.push(s)}else for(s in t=[],r=0,n)t[r++]=s;r=function Zb(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Xy(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length;for(var u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}}function _c(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof _c)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Kb(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];il(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var s={};for(t=e=0;e<n.g.length;)il(s,r=n.g[e])||(n.g[t++]=r,s[r]=1),e++;n.g.length=t}}function il(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(pt=tm.prototype).setTimeout=function(n){this.P=n},pt.gb=function(n){n=n.target;const e=this.L;e&&3==ia(n)?e.l():this.Ia(n)},pt.Ia=function(n){try{if(n==this.g)e:{const Q=ia(this.g);var e=this.g.Da();const se=this.g.ba();if(!(3>Q)&&(3!=Q||Ug||this.g&&(this.h.h||this.g.ga()||$v(this.g)))){this.I||4!=Q||7==e||yc(8==e||0>=se?3:2),Sf(this);var t=this.g.ba();this.N=t;t:if(Gb(this)){var r=$v(this.g);n="";var s=r.length,u=4==ia(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){vc(this),ra(this);var h="";break t}this.h.i=new jt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function Ev(n,e,t,r,s,u,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+h})}(this.j,this.u,this.A,this.m,this.X,Q,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jd(m)){var P=m;break t}}P=null}if(!(t=P)){this.i=!1,this.o=3,Ci(12),vc(this),ra(this);break e}mc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ov(this,t)}this.U?(zb(this,Q,h),Ug&&this.i&&3==Q&&(Kg(this.V,this.W,"tick",this.fb),this.W.start())):(mc(this.j,this.m,h,null),Ov(this,h)),4==Q&&vc(this),this.i&&!this.I&&(4==Q?Ff(this.l,this):(this.i=!1,Af(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,Ci(12)):(this.o=0,Ci(13)),vc(this),ra(this)}}}catch(Q){}},pt.fb=function(){if(this.g){var n=ia(this.g),e=this.g.ga();this.C<e.length&&(Sf(this),zb(this,n,e),this.i&&4!=n&&Af(this))}},pt.cancel=function(){this.I=!0,vc(this)},pt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function qb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(yc(3),Ci(17)),vc(this),this.o=2,ra(this)):xv(this,this.Y-n)},(pt=_c.prototype).R=function(){Kb(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},pt.T=function(){return Kb(this),this.g.concat()},pt.get=function(n,e){return il(this.h,n)?this.h[n]:e},pt.set=function(n,e){il(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},pt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var s=t[r],u=this.get(s);n.call(e,u,s,this)}};var im=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function bc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof bc){this.g=void 0!==e?e:n.g,yo(this,n.j),this.s=n.s,Ki(this,n.i),Yi(this,n.m),this.l=n.l,e=n.h;var t=new ol;t.i=e.i,e.g&&(t.g=new _c(e.g),t.h=e.h),Nv(this,t),this.o=n.o}else n&&(t=String(n).match(im))?(this.g=!!e,yo(this,t[1]||"",!0),this.s=xf(t[2]||""),Ki(this,t[3]||"",!0),Yi(this,t[4]),this.l=xf(t[5]||"",!0),Nv(this,t[6]||"",!0),this.o=xf(t[7]||"")):(this.g=!!e,this.h=new ol(null,this.g))}function Xa(n){return new bc(n)}function yo(n,e,t){n.j=t?xf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ki(n,e,t){n.i=t?xf(e,!0):e}function Yi(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Nv(n,e,t){e instanceof ol?(n.h=e,function eE(n,e){e&&!n.j&&(sl(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(kv(this,r),sm(this,s,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Ec(e,Jb)),n.h=new ol(e,n.g))}function Ln(n,e,t){n.h.set(e,t)}function om(n){return Ln(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function xf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ec(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Of),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Of(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}bc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ec(e,Yb,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ec(e,Yb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ec(t,"/"==t.charAt(0)?eD:Qb,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ec(t,Xb)),n.join("")};var Yb=/[#\/\?@]/g,Qb=/[#\?:]/g,eD=/[#\?]/g,Jb=/[#\?@]/g,Xb=/#/g;function ol(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function sl(n){n.g||(n.g=new _c,n.h=0,n.i&&function Ds(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function kv(n,e){sl(n),e=eu(n,e),il(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,il((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Kb(n)))}function Rv(n,e){return sl(n),e=eu(n,e),il(n.g.h,e)}function sm(n,e,t){kv(n,e),0<t.length&&(n.i=null,n.g.set(eu(n,e),Zi(t)),n.h+=t.length)}function eu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Pv(n){this.l=n||nE,n=jt.PerformanceNavigationTiming?0<(n=jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(jt.g&&jt.g.Ea&&jt.g.Ea()&&jt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(pt=ol.prototype).add=function(n,e){sl(this),this.i=null,n=eu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},pt.forEach=function(n,e){sl(this),this.g.forEach(function(t,r){Yr(t,function(s){n.call(e,s,r,this)},this)},this)},pt.T=function(){sl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var s=n[r],u=0;u<s.length;u++)t.push(e[r]);return t},pt.R=function(n){sl(this);var e=[];if("string"==typeof n)Rv(this,n)&&(e=yf(e,this.g.get(eu(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=yf(e,n[t])}return e},pt.set=function(n,e){return sl(this),this.i=null,Rv(this,n=eu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},pt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},pt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],s=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var h=s;""!==r[u]&&(h+="="+encodeURIComponent(String(r[u]))),n.push(h)}}return this.i=n.join("&")};var nE=10;function Lv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Fv(n){return n.h?1:n.g?n.g.size:0}function am(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function um(n,e){n.g?n.g.add(e):n.h=e}function rE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function iE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Zi(n.i)}function Vv(){}function tD(){this.g=new Vv}function nD(n,e,t){const r=t||"";try{Mv(n,function(s,u){let h=s;mf(s)&&(h=Wg(s)),e.push(r+u+"="+encodeURIComponent(h))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function lm(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch(u){}}function Mf(n){this.l=n.$b||null,this.j=n.ib||!1}function cm(n,e){Pr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Uv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pv.prototype.cancel=function(){if(this.i=iE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Vv.prototype.stringify=function(n){return jt.JSON.stringify(n,void 0)},Vv.prototype.parse=function(n){return jt.JSON.parse(n,void 0)},Kr(Mf,Qg),Mf.prototype.g=function(){return new cm(this.l,this.j)},Mf.prototype.i=function(n){return function(){return n}}({}),Kr(cm,Pr);var Uv=0;function oE(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Nf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,kf(n)}function kf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(pt=cm.prototype).open=function(n,e){if(this.readyState!=Uv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,kf(this)},pt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||jt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},pt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nf(this)),this.readyState=Uv},pt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,kf(this)),this.g&&(this.readyState=3,kf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==jt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;oE(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},pt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Nf(this):kf(this),3==this.readyState&&oE(this)}},pt.Ua=function(n){this.g&&(this.response=this.responseText=n,Nf(this))},pt.Ta=function(n){this.g&&(this.response=n,Nf(this))},pt.ha=function(){this.g&&Nf(this)},pt.setRequestHeader=function(n,e){this.v.append(n,e)},pt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},pt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(cm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var iD=jt.JSON.parse;function vr(n){Pr.call(this),this.headers=new _c,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=sE,this.K=this.L=!1}Kr(vr,Pr);var sE="",oD=/^https?$/i,sD=["POST","PUT"];function uE(n){return"content-type"==n.toLowerCase()}function Bv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,jv(n),Rf(n)}function jv(n){n.D||(n.D=!0,Qr(n,"complete"),Qr(n,"error"))}function qv(n){if(n.h&&void 0!==Jy&&(!n.C[1]||4!=ia(n)||2!=n.ba()))if(n.v&&4==ia(n))Hd(n.Fa,0,n);else if(Qr(n,"readystatechange"),4==ia(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match(im)[1]||null;if(!s&&jt.self&&jt.self.location){var u=jt.self.location.protocol;s=u.substr(0,u.length-1)}r=!oD.test(s?s.toLowerCase():"")}t=r}if(t)Qr(n,"complete"),Qr(n,"success");else{n.m=6;try{var h=2<ia(n)?n.g.statusText:""}catch(w){h=""}n.j=h+" ["+n.ba()+"]",jv(n)}}finally{Rf(n)}}}function Rf(n,e){if(n.g){Hv(n);const t=n.g,r=n.C[0]?Lg:null;n.g=null,n.C=null,e||Qr(n,"ready");try{t.onreadystatechange=r}catch(s){}}}function Hv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(jt.clearTimeout(n.A),n.A=null)}function ia(n){return n.g?n.g.readyState:0}function $v(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case sE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function dm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function lE(n){let e="";return nl(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ln(n,e,t))}function Ts(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function cE(n){this.za=0,this.l=[],this.h=new wf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ts("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ts("baseRetryDelayMs",5e3,n),this.$a=Ts("retryDelaySeedMs",1e4,n),this.Ya=Ts("forwardChannelMaxRetries",2,n),this.ra=Ts("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Pv(n&&n.concurrentRequestLimit),this.Ca=new tD,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Gv(n){if(aD(n),3==n.G){var e=n.V++,t=Xa(n.F);Ln(t,"SID",n.J),Ln(t,"RID",e),Ln(t,"TYPE","terminate"),hm(n,t),(e=new tm(n,n.h,e,void 0)).K=2,e.v=om(Xa(t)),t=!1,jt.navigator&&jt.navigator.sendBeacon&&(t=jt.navigator.sendBeacon(e.v.toString(),"")),!t&&jt.Image&&((new Image).src=e.v,t=!0),t||(e.g=fE(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Af(e)}uD(n)}function tu(n){n.g&&(Kv(n),n.g.cancel(),n.g=null)}function aD(n){tu(n),n.u&&(jt.clearTimeout(n.u),n.u=null),fm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&jt.clearTimeout(n.m),n.m=null)}function Pf(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&zv(n)}function zv(n){Lv(n.i)||n.m||(n.m=!0,bf(n.Ha,n),n.C=0)}function Wv(n,e){var t;t=e?e.m:n.V++;const r=Xa(n.F);Ln(r,"SID",n.J),Ln(r,"RID",t),Ln(r,"AID",n.U),hm(n,r),n.o&&n.s&&dm(r,n.o,n.s),t=new tm(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Pt(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),um(n.i,t),cr(t,r,e)}function hm(n,e){n.j&&Mv({},function(t,r){Ln(e,r,t)})}function Pt(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Zr(n.j.Oa,n.j,n):null;e:{var s=n.l;let u=-1;for(;;){const h=["count="+t];-1==u?0<t?(u=s[0].h,h.push("ofs="+u)):u=0:h.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let P=s[w].h;const Q=s[w].g;if(P-=u,0>P)u=Math.max(0,s[w].h-100),m=!1;else try{nD(Q,h,"req"+P+"_")}catch(se){r&&r(Q)}}if(m){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function hE(n){n.g||n.u||(n.Y=1,bf(n.Ga,n),n.A=0)}function Zv(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=$d(Zr(n.Ga,n),Vf(n,n.A)),n.A++,0))}function Kv(n){null!=n.B&&(jt.clearTimeout(n.B),n.B=null)}function Lf(n){n.g=new tm(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Xa(n.oa);Ln(e,"RID","rpc"),Ln(e,"SID",n.J),Ln(e,"CI",n.N?"0":"1"),Ln(e,"AID",n.U),hm(n,e),Ln(e,"TYPE","xmlhttp"),n.o&&n.s&&dm(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=om(Xa(e)),t.s=null,t.U=!0,Sv(t,n)}function fm(n){null!=n.v&&(jt.clearTimeout(n.v),n.v=null)}function Ff(n,e){var t=null;if(n.g==e){fm(n),Kv(n),n.g=null;var r=2}else{if(!am(n.i,e))return;t=e.D,rE(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;Qr(r=If(),new Tv(r,t,e,s)),zv(n)}else hE(n);else if(3==(s=e.o)||0==s&&0<n.I||!(1==r&&function dE(n,e){return!(Fv(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=$d(Zr(n.Ha,n,e),Vf(n,n.C)),n.C++,0)))}(n,e)||2==r&&Zv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:Cn(n,5);break;case 4:Cn(n,10);break;case 3:Cn(n,6);break;default:Cn(n,2)}}function Vf(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Cn(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Zr(n.jb,n);t||(t=new bc("//www.google.com/images/cleardot.gif"),jt.location&&"http"==jt.location.protocol||yo(t,"https"),om(t)),function rD(n,e){const t=new wf;if(jt.Image){const r=new Image;r.onload=Xu(lm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Xu(lm,t,r,"TestLoadImage: error",!1,e),r.onabort=Xu(lm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Xu(lm,t,r,"TestLoadImage: timeout",!1,e),jt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ci(2);n.G=0,n.j&&n.j.va(e),uD(n),aD(n)}function uD(n){n.G=0,n.I=-1,n.j&&((0!=iE(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Zi(n.l),n.l.length=0),n.j.ua())}function Yv(n,e,t){let r=function JI(n){return n instanceof bc?Xa(n):new bc(n,void 0)}(t);if(""!=r.i)e&&Ki(r,e+"."+r.i),Yi(r,r.m);else{const s=jt.location;r=function XI(n,e,t,r){var s=new bc(null,void 0);return n&&yo(s,n),e&&Ki(s,e),t&&Yi(s,t),r&&(s.l=r),s}(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,t)}return n.aa&&nl(n.aa,function(s,u){Ln(r,u,s)}),t=n.sa,(e=n.D)&&t&&Ln(r,e,t),Ln(r,"VER",n.ma),hm(n,r),r}function fE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vr(t&&n.Ba&&!n.qa?new Mf({ib:!0}):n.qa)).L=n.H,e}function pE(){}function Uf(){if(hc&&!(10<=Number(Rb)))throw Error("Environmental error: no available transport.")}function Qi(n,e){Pr.call(this),this.g=new cE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!jd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new zd(this)}function Qv(n){Jg.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Jv(){Xg.call(this),this.status=1}function zd(n){this.g=n}(pt=vr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():em.g(),this.C=function Cv(n){return n.h||(n.h=n.i())}(this.u?this.u:em),this.g.onreadystatechange=Zr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Bv(this,u)}n=t||"";const s=new _c(this.headers);r&&Mv(r,function(u,h){s.set(h,u)}),r=function sc(n){e:{var e=uE;const t=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<t;s++)if(s in r&&e.call(void 0,r[s],s,n)){e=s;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(s.T()),t=jt.FormData&&n instanceof jt.FormData,!(0<=Bd(sD,e))||r||t||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(u,h){this.g.setRequestHeader(h,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Hv(this),0<this.B&&((this.K=function aE(n){return hc&&function $I(){return function xb(n){var e=HI;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ac(String(vf)).split("."),t=ac("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var s=e[h]||"",u=t[h]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=tl(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||tl(0==s[2].length,0==u[2].length)||tl(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zr(this.pa,this)):this.A=Hd(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Bv(this,u)}},pt.pa=function(){void 0!==Jy&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qr(this,"timeout"),this.abort(8))},pt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Qr(this,"complete"),Qr(this,"abort"),Rf(this))},pt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rf(this,!0)),vr.Z.M.call(this)},pt.Fa=function(){this.s||(this.F||this.v||this.l?qv(this):this.cb())},pt.cb=function(){qv(this)},pt.ba=function(){try{return 2<ia(this)?this.g.status:-1}catch(n){return-1}},pt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},pt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),iD(e)}},pt.Da=function(){return this.m},pt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(pt=cE.prototype).ma=8,pt.G=1,pt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},pt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const s=new tm(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=cc(u),nv(u,this.P)):u=this.P),null===this.o&&(s.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Pt(this,s,e),Ln(t=Xa(this.F),"RID",n),Ln(t,"CVER",22),this.D&&Ln(t,"X-HTTP-Session-Id",this.D),hm(this,t),this.o&&u&&dm(t,this.o,u),um(this.i,s),this.Ra&&Ln(t,"TYPE","init"),this.ja?(Ln(t,"$req",e),Ln(t,"SID","null"),s.$=!0,cr(s,t,null)):cr(s,t,e),this.G=2}}else 3==this.G&&(n?Wv(this,n):0==this.l.length||Lv(this.i)||Wv(this))},pt.Ga=function(){if(this.u=null,Lf(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=$d(Zr(this.bb,this),n)}},pt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ci(10),tu(this),Lf(this))},pt.ab=function(){null!=this.v&&(this.v=null,tu(this),Zv(this),Ci(19))},pt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ci(2)):(this.h.info("Failed to ping google.com"),Ci(1))},(pt=pE.prototype).xa=function(){},pt.wa=function(){},pt.va=function(){},pt.ua=function(){},pt.Oa=function(){},Uf.prototype.g=function(n,e){return new Qi(n,e)},Kr(Qi,Pr),Qi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),bf(Zr(n.hb,n,e))),Ci(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Yv(n,null,n.W),zv(n)},Qi.prototype.close=function(){Gv(this.g)},Qi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Pf(this.g,e)}else this.v?((e={}).__data__=Wg(n),Pf(this.g,e)):Pf(this.g,n)},Qi.prototype.M=function(){this.g.j=null,delete this.j,Gv(this.g),delete this.g,Qi.Z.M.call(this)},Kr(Qv,Jg),Kr(Jv,Xg),Kr(zd,pE),zd.prototype.xa=function(){Qr(this.g,"a")},zd.prototype.wa=function(n){Qr(this.g,new Qv(n))},zd.prototype.va=function(n){Qr(this.g,new Jv(n))},zd.prototype.ua=function(){Qr(this.g,"b")},Uf.prototype.createWebChannel=Uf.prototype.g,Qi.prototype.send=Qi.prototype.u,Qi.prototype.open=Qi.prototype.m,Qi.prototype.close=Qi.prototype.close,Df.NO_ERROR=0,Df.TIMEOUT=8,Df.HTTP_ERROR=6,Tf.COMPLETE="complete",Av.EventType=Gd,Gd.OPEN="a",Gd.CLOSE="b",Gd.ERROR="c",Gd.MESSAGE="d",Pr.prototype.listen=Pr.prototype.N,vr.prototype.listenOnce=vr.prototype.O,vr.prototype.getLastError=vr.prototype.La,vr.prototype.getLastErrorCode=vr.prototype.Da,vr.prototype.getStatus=vr.prototype.ba,vr.prototype.getResponseJson=vr.prototype.Qa,vr.prototype.getResponseText=vr.prototype.ga,vr.prototype.send=vr.prototype.ea;var lD=ta.createWebChannelTransport=function(){return new Uf},cD=ta.getStatEventTarget=function(){return If()},wc=ta.ErrorCode=Df,dD=ta.EventType=Tf,hD=ta.Event=rl,gE=ta.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},pm=ta.FetchXmlHttpFactory=Mf,Bf=ta.WebChannel=Av,mE=ta.XhrIo=vr;const Xv="@firebase/firestore";class Lr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lr.UNAUTHENTICATED=new Lr(null),Lr.GOOGLE_CREDENTIALS=new Lr("google-credentials-uid"),Lr.FIRST_PARTY=new Lr("first-party-uid"),Lr.MOCK_USER=new Lr("mock-user");let oa="9.9.2";const Ko=new Ja.Yd("@firebase/firestore");function e_(){return Ko.logLevel}function et(n,...e){if(Ko.logLevel<=Ja.in.DEBUG){const t=e.map(gm);Ko.debug(`Firestore (${oa}): ${n}`,...t)}}function rr(n,...e){if(Ko.logLevel<=Ja.in.ERROR){const t=e.map(gm);Ko.error(`Firestore (${oa}): ${n}`,...t)}}function al(n,...e){if(Ko.logLevel<=Ja.in.WARN){const t=e.map(gm);Ko.warn(`Firestore (${oa}): ${n}`,...t)}}function gm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function yt(n="Unexpected state"){const e=`FIRESTORE (${oa}) INTERNAL ASSERTION FAILED: `+n;throw rr(e),new Error(e)}function Ut(n,e){n||yt()}function ct(n,e){return n}const je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Je extends nn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class gD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Lr.UNAUTHENTICATED))}shutdown(){}}class mm{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mD{constructor(e){this.t=e,this.currentUser=Lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=P=>this.i!==s?(s=this.i,t(P)):Promise.resolve();let h=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Jr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const P=h;e.enqueueRetryable((0,Ge.Z)(function*(){yield P.promise,yield u(r.currentUser)}))},w=P=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=P,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(P=>w(P)),setTimeout(()=>{if(!this.auth){const P=this.t.getImmediate({optional:!0});P?w(P):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Jr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ut("string"==typeof r.accessToken),new gD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ut(null===e||"string"==typeof e),new Lr(e)}}class yD{constructor(e,t,r){this.type="FirstParty",this.user=Lr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class vE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new yD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vD{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.p;return this.p=u.token,et("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?s(u):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ut("string"==typeof t.token),this.p=t.token,new Wd(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function _D(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class _E{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=_D(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function Ic(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function bE(n){return n+"\0"}class $n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Je(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Je(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Je(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Je(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $n.fromMillis(Date.now())}static fromDate(e){return $n.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new $n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class kt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new kt(e)}static min(){return new kt(new $n(0,0))}static max(){return new kt(new $n(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class jf{constructor(e,t,r){void 0===t?t=0:t>e.length&&yt(),void 0===r?r=e.length-t:r>e.length-t&&yt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===jf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),h=t.get(s);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cn extends jf{construct(e,t,r){return new cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Je(je.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new cn(t)}static emptyPath(){return new cn([])}}const bD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yn extends jf{construct(e,t,r){return new Yn(e,t,r)}static isValidIdentifier(e){return bD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Je(je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Je(je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Je(je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===m?(h=!h,s++):"."!==m||h?(r+=m,s++):(u(),s++)}if(u(),h)throw new Je(je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yn(t)}static emptyPath(){return new Yn([])}}class at{constructor(e){this.path=e}static fromPath(e){return new at(cn.fromString(e))}static fromName(e){return new at(cn.fromString(e).popFirst(5))}static empty(){return new at(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new at(new cn(e.slice()))}}class qf{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function t_(n){return n.fields.find(e=>2===e.kind)}function nu(n){return n.fields.filter(e=>2!==e.kind)}qf.UNKNOWN_ID=-1;class Hf{constructor(e,t){this.fieldPath=e,this.kind=t}}class $f{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new $f(0,Ai.min())}}function wE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=kt.fromTimestamp(1e9===r?new $n(t+1,0):new $n(t,r));return new Ai(s,at.empty(),e)}function IE(n){return new Ai(n.readTime,n.key,-1)}class Ai{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ai(kt.min(),at.empty(),-1)}static max(){return new Ai(kt.max(),at.empty(),-1)}}function n_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=at.comparator(n.documentKey,e.documentKey),0!==t?t:$t(n.largestBatchId,e.largestBatchId))}const r_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ul(n){return i_.apply(this,arguments)}function i_(){return i_=(0,Ge.Z)(function*(n){if(n.code!==je.FAILED_PRECONDITION||n.message!==r_)throw n;et("LocalStore","Unexpectedly lost primary lease")}),i_.apply(this,arguments)}class Fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&yt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Fe((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Fe?t:Fe.resolve(t)}catch(t){return Fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Fe.reject(t)}static resolve(e){return new Fe((t,r)=>{t(e)})}static reject(e){return new Fe((t,r)=>{r(e)})}static waitFor(e){return new Fe((t,r)=>{let s=0,u=0,h=!1;e.forEach(m=>{++s,m.next(()=>{++u,h&&u===s&&t()},w=>r(w))}),h=!0,u===s&&t()})}static or(e){let t=Fe.resolve(!1);for(const r of e)t=t.next(s=>s?Fe.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new Fe((r,s)=>{const u=e.length,h=new Array(u);let m=0;for(let w=0;w<u;w++){const P=w;t(e[P]).next(Q=>{h[P]=Q,++m,m===u&&r(h)},Q=>s(Q))}})}static doWhile(e,t){return new Fe((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class ym{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Jr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Gf(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const s=vm(r.target.error);this.T.reject(new Gf(e,s))}}static open(e,t,r,s){try{return new ym(t,e.transaction(s,r))}catch(u){throw new Gf(t,u)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(et("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new TE(t)}}class Cs{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===Cs.v((0,nn.z$)())&&rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return et("SimpleDb","Removing database:",e),Dc(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,nn.hl)())return!1;if(Cs.S())return!0;const e=(0,nn.z$)(),t=Cs.v(e),r=0<t&&t<10,s=Cs.D(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,Ge.Z)(function*(){return t.db||(et("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=h=>{r(h.target.result)},u.onblocked=()=>{s(new Gf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=h=>{const m=h.target.error;s("VersionError"===m.name?new Je(je.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Je(je.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Gf(e,m))},u.onupgradeneeded=h=>{et("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.P.M(h.target.result,u.transaction,h.oldVersion,t.version).next(()=>{et("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.O&&(t.db.onversionchange=r=>t.O(r)),t.db})()}F(e){this.O=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,Ge.Z)(function*(){const h="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.k(e);const w=ym.open(u.db,e,h?"readonly":"readwrite",r),P=s(w).next(Q=>(w.R(),Q)).catch(Q=>(w.abort(Q),Fe.reject(Q))).toPromise();return P.catch(()=>{}),yield w.A,P}catch(w){const P=w,Q="FirebaseError"!==P.name&&m<3;if(et("SimpleDb","Transaction failed with error:",P.message,"Retrying:",Q),u.close(),!Q)return Promise.reject(P)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class wD{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Dc(this.$.delete())}}class Gf extends Je{constructor(e,t){super(je.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ru(n){return"IndexedDbTransactionError"===n.name}class TE{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(et("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(et("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Dc(r)}add(e){return et("SimpleDb","ADD",this.store.name,e,e),Dc(this.store.add(e))}get(e){return Dc(this.store.get(e)).next(t=>(void 0===t&&(t=null),et("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return et("SimpleDb","DELETE",this.store.name,e),Dc(this.store.delete(e))}count(){return et("SimpleDb","COUNT",this.store.name),Dc(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.G(s,(h,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new Fe((u,h)=>{s.onerror=m=>{h(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Fe((s,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{s(h.target.result)}})}W(e,t){et("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const s=this.cursor(r);return this.G(s,(u,h,m)=>m.delete())}J(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.G(s,t)}Y(e){const t=this.cursor({});return new Fe((r,s)=>{t.onerror=u=>{const h=vm(u.target.error);s(h)},t.onsuccess=u=>{const h=u.target.result;h?e(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}G(e,t){const r=[];return new Fe((s,u)=>{e.onerror=h=>{u(h.target.error)},e.onsuccess=h=>{const m=h.target.result;if(!m)return void s();const w=new wD(m),P=t(m.primaryKey,m.value,w);if(P instanceof Fe){const Q=P.catch(se=>(w.done(),Fe.reject(se)));r.push(Q)}w.isDone?s():null===w.U?m.continue():m.continue(w.U)}}).next(()=>Fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Dc(n){return new Fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=vm(r.target.error);t(s)}})}let CE=!1;function vm(n){const e=Cs.v((0,nn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Je("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return CE||(CE=!0,setTimeout(()=>{throw r},0)),r}}return n}class ID{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;et("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ge.Z)(function*(){t.task=null;try{et("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){ru(r)?et("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ul(r)}yield t.Z(1)}))}}class DD{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let s=t,u=!0;return Fe.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(h=>{if(null!==h&&!r.has(h))return et("IndexBackiller",`Processing collection: ${h}`),this.nt(e,h,s).next(m=>{s-=m,r.add(h)});u=!1})).next(()=>t-s)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const h=u.changes;return this.localStore.indexManager.updateIndexEntries(e,h).next(()=>this.st(s,u)).next(m=>(et("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>h.size)}))}st(e,t){let r=e;return t.changes.forEach((s,u)=>{const h=IE(u);n_(h,r)>0&&(r=h)}),new Ai(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ji{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function _m(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function iu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function o_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ji.ot=-1;class Gn{constructor(e,t){this.comparator=e,this.root=t||Xr.EMPTY}insert(e,t){return new Gn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new Gn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bm(this.root,e,this.comparator,!1)}getReverseIterator(){return new bm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bm(this.root,e,this.comparator,!0)}}class bm{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=null!=r?r:Xr.RED,this.left=null!=s?s:Xr.EMPTY,this.right=null!=u?u:Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Xr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Xr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw yt();const e=this.left.check();if(e!==this.right.check())throw yt();return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1,Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw yt()}get value(){throw yt()}get color(){throw yt()}get left(){throw yt()}get right(){throw yt()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Xr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class En{constructor(e){this.comparator=e,this.data=new Gn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new AE(this.data.getIterator())}getIteratorFrom(e){return new AE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new En(this.comparator);return t.data=e,t}}class AE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tc(n){return n.hasNext()?n.getNext():void 0}class vo{constructor(e){this.fields=e,e.sort(Yn.comparator)}static empty(){return new vo([])}unionWith(e){let t=new En(Yn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new vo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ic(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Sr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Sr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Sr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sr.EMPTY_BYTE_STRING=new Sr("");const xE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cc(n){if(Ut(!!n),"string"==typeof n){let e=0;const t=xE.exec(n);if(Ut(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ir(n.seconds),nanos:ir(n.nanos)}}function ir(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function sa(n){return"string"==typeof n?Sr.fromBase64String(n):Sr.fromUint8Array(n)}function s_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ac(n){const e=n.mapValue.fields.__previous_value__;return s_(e)?Ac(e):e}function ou(n){const e=Cc(n.mapValue.fields.__local_write_time__.timestampValue);return new $n(e.seconds,e.nanos)}class TD{constructor(e,t,r,s,u,h,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class ll{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ll("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ll&&e.projectId===this.projectId&&e.database===this.database}}function Zd(n){return null==n}function zf(n){return 0===n&&1/n==-1/0}function OE(n){return"number"==typeof n&&Number.isInteger(n)&&!zf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const cl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Em={nullValue:"NULL_VALUE"};function dl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?s_(n)?4:NE(n)?9007199254740991:10:yt()}function As(n,e){if(n===e)return!0;const t=dl(n);if(t!==dl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ou(n).isEqual(ou(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=Cc(r.timestampValue),h=Cc(s.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,sa(n.bytesValue).isEqual(sa(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return ir(r.geoPointValue.latitude)===ir(s.geoPointValue.latitude)&&ir(r.geoPointValue.longitude)===ir(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ir(r.integerValue)===ir(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=ir(r.doubleValue),h=ir(s.doubleValue);return u===h?zf(u)===zf(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return Ic(n.arrayValue.values||[],e.arrayValue.values||[],As);case 10:return function(r,s){const u=r.mapValue.fields||{},h=s.mapValue.fields||{};if(_m(u)!==_m(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===h[m]||!As(u[m],h[m])))return!1;return!0}(n,e);default:return yt()}var s}function Sc(n,e){return void 0!==(n.values||[]).find(t=>As(t,e))}function Ss(n,e){if(n===e)return 0;const t=dl(n),r=dl(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(s,u){const h=ir(s.integerValue||s.doubleValue),m=ir(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return Kd(n.timestampValue,e.timestampValue);case 4:return Kd(ou(n),ou(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(s,u){const h=sa(s),m=sa(u);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const h=s.split("/"),m=u.split("/");for(let w=0;w<h.length&&w<m.length;w++){const P=$t(h[w],m[w]);if(0!==P)return P}return $t(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const h=$t(ir(s.latitude),ir(u.latitude));return 0!==h?h:$t(ir(s.longitude),ir(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const h=s.values||[],m=u.values||[];for(let w=0;w<h.length&&w<m.length;++w){const P=Ss(h[w],m[w]);if(P)return P}return $t(h.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===cl.mapValue&&u===cl.mapValue)return 0;if(s===cl.mapValue)return 1;if(u===cl.mapValue)return-1;const h=s.fields||{},m=Object.keys(h),w=u.fields||{},P=Object.keys(w);m.sort(),P.sort();for(let Q=0;Q<m.length&&Q<P.length;++Q){const se=$t(m[Q],P[Q]);if(0!==se)return se;const we=Ss(h[m[Q]],w[P[Q]]);if(0!==we)return we}return $t(m.length,P.length)}(n.mapValue,e.mapValue);default:throw yt()}}function Kd(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=Cc(n),r=Cc(e),s=$t(t.seconds,r.seconds);return 0!==s?s:$t(t.nanos,r.nanos)}function Yd(n){return wm(n)}function wm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Cc(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?sa(n.bytesValue).toBase64():"referenceValue"in n?at.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const h of r.values||[])u?u=!1:s+=",",s+=wm(h);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",h=!0;for(const m of s)h?h=!1:u+=",",u+=`${m}:${wm(r.fields[m])}`;return u+"}"}(n.mapValue):yt();var e}function hl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function a_(n){return!!n&&"integerValue"in n}function Wf(n){return!!n&&"arrayValue"in n}function Im(n){return!!n&&"nullValue"in n}function ME(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function u_(n){return!!n&&"mapValue"in n}function Zf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return iu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function NE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Qd(n){return"nullValue"in n?Em:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?hl(ll.empty(),at.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:yt()}function kE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?hl(ll.empty(),at.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?cl:yt()}function xc(n,e){const t=Ss(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function CD(n,e){const t=Ss(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Fr{constructor(e){this.value=e}static empty(){return new Fr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!u_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zf(t)}setAll(e){let t=Yn.emptyPath(),r={},s=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=m.popLast()}h?r[m.lastSegment()]=Zf(h):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());u_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return As(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];u_(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){iu(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Fr(Zf(this.value))}}function RE(n){const e=[];return iu(n.fields,(t,r)=>{const s=new Yn([t]);if(u_(r)){const u=RE(r.mapValue).fields;if(0===u.length)e.push(s);else for(const h of u)e.push(s.child(h))}else e.push(s)}),new vo(e)}class Fn{constructor(e,t,r,s,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Fn(e,0,kt.min(),kt.min(),Fr.empty(),0)}static newFoundDocument(e,t,r){return new Fn(e,1,t,kt.min(),r,0)}static newNoDocument(e,t){return new Fn(e,2,t,kt.min(),Fr.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,kt.min(),Fr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class PE{constructor(e,t=null,r=[],s=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=h,this.endAt=m,this.ut=null}}function AD(n,e=null,t=[],r=[],s=null,u=null,h=null){return new PE(n,e,t,r,s,u,h)}function fl(n){const e=ct(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+Yd(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Zd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Yd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Yd(r)).join(",")),e.ut=t}return e.ut}function Kf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!qE(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!As(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!c_(n.startAt,e.startAt)&&c_(n.endAt,e.endAt)}function Dm(n){return at.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Tm(n,e){return n.filters.filter(t=>t instanceof ei&&t.field.isEqual(e))}function LE(n,e,t){let r=Em,s=!0;for(const u of Tm(n,e)){let h=Em,m=!0;switch(u.op){case"<":case"<=":h=Qd(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,m=!1;break;case"!=":case"not-in":h=Em}xc({value:r,inclusive:s},{value:h,inclusive:m})<0&&(r=h,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];xc({value:r,inclusive:s},{value:h,inclusive:t.inclusive})<0&&(r=h,s=t.inclusive);break}return{value:r,inclusive:s}}function FE(n,e,t){let r=cl,s=!0;for(const u of Tm(n,e)){let h=cl,m=!0;switch(u.op){case">=":case">":h=kE(u.value),m=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,m=!1;break;case"!=":case"not-in":h=cl}CD({value:r,inclusive:s},{value:h,inclusive:m})>0&&(r=h,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];CD({value:r,inclusive:s},{value:h,inclusive:t.inclusive})>0&&(r=h,s=t.inclusive);break}return{value:r,inclusive:s}}class ei extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new SD(e,t,r):"array-contains"===t?new Yf(e,r):"in"===t?new UE(e,r):"not-in"===t?new BE(e,r):"array-contains-any"===t?new jE(e,r):new ei(e,t,r)}static ct(e,t,r){return"in"===t?new xD(e,r):new OD(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Ss(t,this.value)):null!==t&&dl(this.value)===dl(t)&&this.at(Ss(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return yt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class SD extends ei{constructor(e,t,r){super(e,t,r),this.key=at.fromName(r.referenceValue)}matches(e){const t=at.comparator(e.key,this.key);return this.at(t)}}class xD extends ei{constructor(e,t){super(e,"in",t),this.keys=VE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class OD extends ei{constructor(e,t){super(e,"not-in",t),this.keys=VE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function VE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>at.fromName(r.referenceValue))}class Yf extends ei{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wf(t)&&Sc(t.arrayValue,this.value)}}class UE extends ei{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Sc(this.value.arrayValue,t)}}class BE extends ei{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Sc(this.value.arrayValue,t)}}class jE extends ei{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Sc(this.value.arrayValue,r))}}class su{constructor(e,t){this.position=e,this.inclusive=t}}class Oc{constructor(e,t="asc"){this.field=e,this.dir=t}}function qE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function HE(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],h=n.position[s];if(r=u.field.isKeyField()?at.comparator(at.fromName(h.referenceValue),t.key):Ss(h,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function c_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!As(n.position[t],e.position[t]))return!1;return!0}class au{constructor(e,t=null,r=[],s=[],u=null,h="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=w,this.lt=null,this.ft=null}}function $E(n,e,t,r,s,u,h,m){return new au(n,e,t,r,s,u,h,m)}function Jd(n){return new au(n)}function GE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Mc(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function d_(n){for(const e of n.filters)if(e.ht())return e.field;return null}function Qf(n){return null!==n.collectionGroup}function Si(n){const e=ct(n);if(null===e.lt){e.lt=[];const t=d_(e),r=Mc(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new Oc(t)),e.lt.push(new Oc(Yn.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.lt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Oc(Yn.keyField(),u))}}}return e.lt}function Xi(n){const e=ct(n);if(!e.ft)if("F"===e.limitType)e.ft=AD(e.path,e.collectionGroup,Si(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Si(e))t.push(new Oc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new su(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new su(e.startAt.position,e.startAt.inclusive):null;e.ft=AD(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.ft}function Xd(n,e,t){return new au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function uu(n,e){return Kf(Xi(n),Xi(e))&&n.limitType===e.limitType}function zE(n){return`${fl(Xi(n))}|lt:${n.limitType}`}function h_(n){return`Query(target=${function l_(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Yd(r.value)}`;var r}).join(", ")}]`),Zd(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Yd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Yd(t)).join(",")),`Target(${e})`}(Xi(n))}; limitType=${n.limitType})`}function f_(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):at.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,h){const m=HE(s,u,h);return s.inclusive?m<=0:m<0}(t.startAt,Si(t),r)||t.endAt&&!function(s,u,h){const m=HE(s,u,h);return s.inclusive?m>=0:m>0}(t.endAt,Si(t),r)));var t,r}function Jf(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Xf(n){return(e,t)=>{let r=!1;for(const s of Si(n)){const u=MD(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function MD(n,e,t){const r=n.field.isKeyField()?at.comparator(e.key,t.key):function(s,u,h){const m=u.data.field(s),w=h.data.field(s);return null!==m&&null!==w?Ss(m,w):yt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return yt()}}function WE(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zf(e)?"-0":e}}function p_(n){return{integerValue:""+n}}function g_(n,e){return OE(e)?p_(e):WE(n,e)}class eh{constructor(){this._=void 0}}function ZE(n,e,t){return n instanceof ep?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof lu?Cm(n,e):n instanceof pl?Am(n,e):function(r,s){const u=KE(r,s),h=YE(u)+YE(r._t);return a_(u)&&a_(r._t)?p_(h):WE(r.wt,h)}(n,e)}function ND(n,e,t){return n instanceof lu?Cm(n,e):n instanceof pl?Am(n,e):t}function KE(n,e){return n instanceof gl?a_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ep extends eh{}class lu extends eh{constructor(e){super(),this.elements=e}}function Cm(n,e){const t=QE(e);for(const r of n.elements)t.some(s=>As(s,r))||t.push(r);return{arrayValue:{values:t}}}class pl extends eh{constructor(e){super(),this.elements=e}}function Am(n,e){let t=QE(e);for(const r of n.elements)t=t.filter(s=>!As(s,r));return{arrayValue:{values:t}}}class gl extends eh{constructor(e,t){super(),this.wt=e,this._t=t}}function YE(n){return ir(n.integerValue||n.doubleValue)}function QE(n){return Wf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class tp{constructor(e,t){this.field=e,this.transform=t}}class JE{constructor(e,t){this.version=e,this.transformResults=t}}class Vn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function np(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Sm{}function m_(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new nh(n.key,Vn.none()):new th(n.key,n.data,Vn.none());{const t=n.data,r=Fr.empty();let s=new En(Yn.comparator);for(let u of e.fields)if(!s.has(u)){let h=t.field(u);null===h&&u.length>1&&(u=u.popLast(),h=t.field(u)),null===h?r.delete(u):r.set(u,h),s=s.add(u)}return new aa(n.key,r,new vo(s.toArray()),Vn.none())}}function XE(n,e,t){n instanceof th?function(r,s,u){const h=r.value.clone(),m=gi(r.fieldTransforms,s,u.transformResults);h.setAll(m),s.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof aa?function(r,s,u){if(!np(r.precondition,s))return void s.convertToUnknownDocument(u.version);const h=gi(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(tw(r)),m.setAll(h),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function rp(n,e,t,r){return n instanceof th?function(s,u,h,m){if(!np(s.precondition,u))return h;const w=s.value.clone(),P=Nc(s.fieldTransforms,m,u);return w.setAll(P),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof aa?function(s,u,h,m){if(!np(s.precondition,u))return h;const w=Nc(s.fieldTransforms,m,u),P=u.data;return P.setAll(tw(s)),P.setAll(w),u.convertToFoundDocument(u.version,P).setHasLocalMutations(),null===h?null:h.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(Q=>Q.field))}(n,e,t,r):(h=t,np(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h);var u,h}function ew(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=KE(r.transform,s||null);null!=u&&(null===t&&(t=Fr.empty()),t.set(r.field,u))}return t||null}function y_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ic(t,r,(s,u)=>function kD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof lu&&r instanceof lu||t instanceof pl&&r instanceof pl?Ic(t.elements,r.elements,As):t instanceof gl&&r instanceof gl?As(t._t,r._t):t instanceof ep&&r instanceof ep);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class th extends Sm{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class aa extends Sm{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function tw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function gi(n,e,t){const r=new Map;Ut(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],h=u.transform,m=e.data.field(u.field);r.set(u.field,ND(h,m,t[s]))}return r}function Nc(n,e,t){const r=new Map;for(const s of n){const u=s.transform,h=t.data.field(s.field);r.set(s.field,ZE(u,h,e))}return r}class nh extends Sm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class v_ extends Sm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class DA{constructor(e){this.count=e}}var zn,hn;function xm(n){switch(n){default:return yt();case je.CANCELLED:case je.UNKNOWN:case je.DEADLINE_EXCEEDED:case je.RESOURCE_EXHAUSTED:case je.INTERNAL:case je.UNAVAILABLE:case je.UNAUTHENTICATED:return!1;case je.INVALID_ARGUMENT:case je.NOT_FOUND:case je.ALREADY_EXISTS:case je.PERMISSION_DENIED:case je.FAILED_PRECONDITION:case je.ABORTED:case je.OUT_OF_RANGE:case je.UNIMPLEMENTED:case je.DATA_LOSS:return!0}}function nw(n){if(void 0===n)return rr("GRPC error has no .code"),je.UNKNOWN;switch(n){case zn.OK:return je.OK;case zn.CANCELLED:return je.CANCELLED;case zn.UNKNOWN:return je.UNKNOWN;case zn.DEADLINE_EXCEEDED:return je.DEADLINE_EXCEEDED;case zn.RESOURCE_EXHAUSTED:return je.RESOURCE_EXHAUSTED;case zn.INTERNAL:return je.INTERNAL;case zn.UNAVAILABLE:return je.UNAVAILABLE;case zn.UNAUTHENTICATED:return je.UNAUTHENTICATED;case zn.INVALID_ARGUMENT:return je.INVALID_ARGUMENT;case zn.NOT_FOUND:return je.NOT_FOUND;case zn.ALREADY_EXISTS:return je.ALREADY_EXISTS;case zn.PERMISSION_DENIED:return je.PERMISSION_DENIED;case zn.FAILED_PRECONDITION:return je.FAILED_PRECONDITION;case zn.ABORTED:return je.ABORTED;case zn.OUT_OF_RANGE:return je.OUT_OF_RANGE;case zn.UNIMPLEMENTED:return je.UNIMPLEMENTED;case zn.DATA_LOSS:return je.DATA_LOSS;default:return yt()}}(hn=zn||(zn={}))[hn.OK=0]="OK",hn[hn.CANCELLED=1]="CANCELLED",hn[hn.UNKNOWN=2]="UNKNOWN",hn[hn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hn[hn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hn[hn.NOT_FOUND=5]="NOT_FOUND",hn[hn.ALREADY_EXISTS=6]="ALREADY_EXISTS",hn[hn.PERMISSION_DENIED=7]="PERMISSION_DENIED",hn[hn.UNAUTHENTICATED=16]="UNAUTHENTICATED",hn[hn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hn[hn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hn[hn.ABORTED=10]="ABORTED",hn[hn.OUT_OF_RANGE=11]="OUT_OF_RANGE",hn[hn.UNIMPLEMENTED=12]="UNIMPLEMENTED",hn[hn.INTERNAL=13]="INTERNAL",hn[hn.UNAVAILABLE=14]="UNAVAILABLE",hn[hn.DATA_LOSS=15]="DATA_LOSS";class cu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){iu(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return o_(this.inner)}size(){return this.innerSize}}const RD=new Gn(at.comparator);function eo(){return RD}const Om=new Gn(at.comparator);function rh(...n){let e=Om;for(const t of n)e=e.insert(t.key,t);return e}function __(n){let e=Om;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function _o(){return Nm()}function Mm(){return Nm()}function Nm(){return new cu(n=>n.toString(),(n,e)=>n.isEqual(e))}const rw=new Gn(at.comparator),PD=new En(at.comparator);function Zt(...n){let e=PD;for(const t of n)e=e.add(t);return e}const km=new En($t);function ip(){return km}class op{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,kc.createSynthesizedTargetChangeForCurrentChange(e,t)),new op(kt.min(),r,ip(),eo(),Zt())}}class kc{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new kc(Sr.EMPTY_BYTE_STRING,t,Zt(),Zt(),Zt())}}class ih{constructor(e,t,r,s){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=s}}class LD{constructor(e,t){this.targetId=e,this.It=t}}class iw{constructor(e,t,r=Sr.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class ow{constructor(){this.Tt=0,this.Et=aw(),this.At=Sr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Zt(),t=Zt(),r=Zt();return this.Et.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:yt()}}),new kc(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=aw()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class sw{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=eo(),this.Bt=b_(),this.Lt=new En($t)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:yt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,s)=>{this.jt(s)&&t(s)})}zt(e){const t=e.targetId,r=e.It.count,s=this.Ht(t);if(s){const u=s.target;if(Dm(u))if(0===r){const h=new at(u.path);this.Kt(t,h,Fn.newNoDocument(h,kt.min()))}else Ut(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((u,h)=>{const m=this.Ht(h);if(m){if(u.current&&Dm(m.target)){const w=new at(m.target.path);null!==this.$t.get(w)||this.Xt(h,w)||this.Kt(h,w,Fn.newNoDocument(w,e))}u.vt&&(t.set(h,u.St()),u.Dt())}});let r=Zt();this.Bt.forEach((u,h)=>{let m=!0;h.forEachWhile(w=>{const P=this.Ht(w);return!P||2===P.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.$t.forEach((u,h)=>h.setReadTime(e));const s=new op(e,t,this.Lt,this.$t,r);return this.$t=eo(),this.Bt=b_(),this.Lt=new En($t),s}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const s=this.Qt(e);this.Xt(e,t)?s.Ct(t,1):s.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new ow,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new En($t),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||et("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new ow),this.Ot.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}function b_(){return new Gn(at.comparator)}function aw(){return new Gn(at.comparator)}const uw={asc:"ASCENDING",desc:"DESCENDING"},lw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class FD{constructor(e,t){this.databaseId=e,this.dt=t}}function sp(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E_(n,e){return n.dt?e.toBase64():e.toUint8Array()}function VD(n,e){return sp(n,e.toTimestamp())}function xr(n){return Ut(!!n),kt.fromTimestamp(function(e){const t=Cc(e);return new $n(t.seconds,t.nanos)}(n))}function Rm(n,e){return(t=n,new cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function w_(n){const e=cn.fromString(n);return Ut(A_(e)),e}function oh(n,e){return Rm(n.databaseId,e.path)}function ua(n,e){const t=w_(e);if(t.get(1)!==n.databaseId.projectId)throw new Je(je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Je(je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new at(BD(t))}function I_(n,e){return Rm(n.databaseId,e)}function UD(n){const e=w_(n);return 4===e.length?cn.emptyPath():BD(e)}function sh(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function BD(n){return Ut(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function jD(n,e,t){return{name:oh(n,e),fields:t.value.mapValue.fields}}function qD(n,e,t){const r=ua(n,e.name),s=xr(e.updateTime),u=new Fr({mapValue:{fields:e.fields}}),h=Fn.newFoundDocument(r,s,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Pm(n,e){let t;if(e instanceof th)t={update:jD(n,e.key,e.value)};else if(e instanceof nh)t={delete:oh(n,e.key)};else if(e instanceof aa)t={update:jD(n,e.key,e.data),updateMask:xA(e.fieldMask)};else{if(!(e instanceof v_))return yt();t={verify:oh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const h=u.transform;if(h instanceof ep)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof lu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof pl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof gl)return{fieldPath:u.field.canonicalString(),increment:h._t};throw yt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:VD(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:yt()),t;var s}function cw(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Vn.updateTime(xr(s.updateTime)):void 0!==s.exists?Vn.exists(s.exists):Vn.none():Vn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,h){let m=null;"setToServerValue"in h?(Ut("REQUEST_TIME"===h.setToServerValue),m=new ep):"appendMissingElements"in h?m=new lu(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new pl(h.removeAllFromArray.values||[]):"increment"in h?m=new gl(u,h.increment):yt();const w=Yn.fromServerFormat(h.fieldPath);return new tp(w,m)}(n,s)):[];var s;if(e.update){const s=ua(n,e.update.name),u=new Fr({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new vo((e.updateMask.fieldPaths||[]).map(P=>Yn.fromServerFormat(P)));return new aa(s,u,h,t,r)}return new th(s,u,t,r)}if(e.delete){const s=ua(n,e.delete);return new nh(s,t)}if(e.verify){const s=ua(n,e.verify);return new v_(s,t)}return yt()}function ap(n,e){return{documents:[I_(n,e.path)]}}function HD(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=I_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=I_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0===w.length)return;const P=w.map(Q=>function(se){if("=="===se.op){if(ME(se.value))return{unaryFilter:{field:ml(se.field),op:"IS_NAN"}};if(Im(se.value))return{unaryFilter:{field:ml(se.field),op:"IS_NULL"}}}else if("!="===se.op){if(ME(se.value))return{unaryFilter:{field:ml(se.field),op:"IS_NOT_NAN"}};if(Im(se.value))return{unaryFilter:{field:ml(se.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ml(se.field),op:SA(se.op),value:se.value}}}(Q));return 1===P.length?P[0]:{compositeFilter:{op:"AND",filters:P}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(w){if(0!==w.length)return w.map(P=>{return{field:ml((Q=P).field),direction:dw(Q.dir)};var Q})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=(P=e.limit,n.dt||Zd(P)?P:{value:P});var P,m,w;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function D_(n){let e=UD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ut(1===r);const Q=t.from[0];Q.allDescendants?s=Q.collectionId:e=e.child(Q.collectionId)}let u=[];t.where&&(u=C_(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(Q=>{return new Oc(Rc((se=Q).field),function(we){switch(we){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(se.direction));var se}));let m=null;t.limit&&(m=function(Q){let se;return se="object"==typeof Q?Q.value:Q,Zd(se)?null:se}(t.limit));let w=null;var Q;t.startAt&&(w=new su((Q=t.startAt).values||[],!!Q.before));let P=null;return t.endAt&&(P=function(Q){return new su(Q.values||[],!Q.before)}(t.endAt)),$E(e,s,h,u,m,"F",w,P)}function C_(n){return n?void 0!==n.unaryFilter?[fw(n)]:void 0!==n.fieldFilter?[hw(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>C_(e)).reduce((e,t)=>e.concat(t)):yt():[]}function dw(n){return uw[n]}function SA(n){return lw[n]}function ml(n){return{fieldPath:n.canonicalString()}}function Rc(n){return Yn.fromServerFormat(n.fieldPath)}function hw(n){return ei.create(Rc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yt()}}(n.fieldFilter.op),n.fieldFilter.value)}function fw(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Rc(n.unaryFilter.field);return ei.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Rc(n.unaryFilter.field);return ei.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Rc(n.unaryFilter.field);return ei.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Rc(n.unaryFilter.field);return ei.create(s,"!=",{nullValue:"NULL_VALUE"});default:return yt()}}function xA(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function A_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function xi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pw(e)),e=S_(n.get(t),e);return pw(e)}function S_(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function pw(n){return n+"\x01\x01"}function du(n){const e=n.length;if(Ut(e>=2),2===e)return Ut("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),cn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const h=n.indexOf("\x01",u);switch((h<0||h>t)&&yt(),n.charAt(h+1)){case"\x01":const m=n.substring(u,h);let w;0===s.length?w=m:(s+=m,w=s,s=""),r.push(w);break;case"\x10":s+=n.substring(u,h),s+="\0";break;case"\x11":s+=n.substring(u,h+1);break;default:yt()}u=h+2}return new cn(r)}const $D=["userId","batchId"];function x_(n,e){return[n,xi(e)]}function gw(n,e,t){return[n,xi(e),t]}const GD={},zD=["prefixPath","collectionGroup","readTime","documentId"],OA=["prefixPath","collectionGroup","documentId"],WD=["collectionGroup","readTime","prefixPath","documentId"],O_=["canonicalId","targetId"],ZD=["targetId","path"],xs=["path","targetId"],KD=["collectionId","parent"],M_=["indexId","uid"],YD=["uid","sequenceNumber"],QD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],N_=["indexId","uid","orderedDocumentKey"],mw=["userId","collectionPath","documentId"],yw=["userId","collectionPath","largestBatchId"],JD=["userId","collectionGroup","largestBatchId"],k_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vw=[...k_,"documentOverlays"],_w=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bw=_w,R_=[...bw,"indexConfiguration","indexState","indexEntries"];class bo extends DE{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Vr(n,e){const t=ct(n);return Cs.N(t.ee,e)}class Ew{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&XE(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=rp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=rp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Mm();return this.mutations.forEach(s=>{const u=e.get(s.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=t.has(s.key)?null:m;const w=m_(h,m);null!==w&&r.set(s.key,w),h.isValidDocument()||h.convertToNoDocument(kt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Zt())}isEqual(e){return this.batchId===e.batchId&&Ic(this.mutations,e.mutations,(t,r)=>y_(t,r))&&Ic(this.baseMutations,e.baseMutations,(t,r)=>y_(t,r))}}class P_{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ut(e.mutations.length===r.length);let s=rw;const u=e.mutations;for(let h=0;h<u.length;h++)s=s.insert(u[h].key,r[h].version);return new P_(e,t,r,s)}}class Lm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class yl{constructor(e,t,r,s,u=kt.min(),h=kt.min(),m=Sr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(e){return new yl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new yl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new yl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ww{constructor(e){this.ne=e}}function Dw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:L_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:oh(s=n.ne,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:sp(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:vl(e.version)};else{if(!e.isUnknownDocument())return yt();r.unknownDocument={path:t.path.toArray(),version:vl(e.version)}}var s,u;return r}function L_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function vl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _l(n){const e=new $n(n.seconds,n.nanoseconds);return kt.fromTimestamp(e)}function Pc(n,e){const t=(e.baseMutations||[]).map(u=>cw(n.ne,u));for(let u=0;u<e.mutations.length-1;++u){const h=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(h.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>cw(n.ne,u)),s=$n.fromMillis(e.localWriteTimeMs);return new Ew(e.batchId,s,t,r)}function up(n){const e=_l(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?_l(n.lastLimboFreeSnapshotVersion):kt.min();let r;var s;return void 0!==n.query.documents?(Ut(1===(s=n.query).documents.length),r=Xi(Jd(UD(s.documents[0])))):r=Xi(D_(n.query)),new yl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Sr.fromBase64String(n.resumeToken))}function F_(n,e){const t=vl(e.snapshotVersion),r=vl(e.lastLimboFreeSnapshotVersion);let s;s=Dm(e.target)?ap(n.ne,e.target):HD(n.ne,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fl(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function lp(n){const e=D_({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Xd(e,e.limit,"L"):e}function cp(n,e){return new Lm(e.largestBatchId,cw(n.ne,e.overlayMutation))}function V_(n,e){const t=e.path.lastSegment();return[n,xi(e.path.popLast()),t]}function Tw(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:vl(r.readTime),documentKey:xi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Cw{getBundleMetadata(e,t){return U_(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:_l(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return U_(e).put({bundleId:(r=t).id,createTime:vl(xr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Aw(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:lp(s.bundledQuery),readTime:_l(s.readTime)};var s})}saveNamedQuery(e,t){return Aw(e).put({name:(r=t).name,readTime:vl(xr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function U_(n){return Vr(n,"bundles")}function Aw(n){return Vr(n,"namedQueries")}class Fm{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new Fm(e,t.uid||"")}getOverlay(e,t){return Vm(e).get(V_(this.userId,t)).next(r=>r?cp(this.wt,r):null)}getOverlays(e,t){const r=_o();return Fe.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,h)=>{const m=new Lm(t,h);s.push(this.ie(e,m))}),Fe.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(h=>s.add(xi(h.getCollectionPath())));const u=[];return s.forEach(h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(Vm(e).W("collectionPathOverlayIndex",m))}),Fe.waitFor(u)}getOverlaysForCollection(e,t,r){const s=_o(),u=xi(t),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Vm(e).K("collectionPathOverlayIndex",h).next(m=>{for(const w of m){const P=cp(this.wt,w);s.set(P.getKey(),P)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=_o();let h;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Vm(e).J({index:"collectionGroupOverlayIndex",range:m},(w,P,Q)=>{const se=cp(this.wt,P);u.size()<s||se.largestBatchId===h?(u.set(se.getKey(),se),h=se.largestBatchId):Q.done()}).next(()=>u)}ie(e,t){return Vm(e).put(function(r,s,u){const[h,m,w]=V_(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Pm(r.ne,u.mutation)}}(this.wt,this.userId,t))}}function Vm(n){return Vr(n,"documentOverlays")}class ah{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(ir(e.integerValue));else if("doubleValue"in e){const r=ir(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),zf(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(sa(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?NE(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):yt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const s of Object.keys(r))this.le(s,t),this.oe(r[s],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const s of r)this.oe(s,t)}_e(e,t){this.ce(t,37),at.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function Sw(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function xw(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=Sw(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}ah.ye=new ah;class XD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const s=t.codePointAt(0);this.Ie(240|s>>>18),this.Ie(128|63&s>>>12),this.Ie(128|63&s>>>6),this.Ie(128|63&s)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=t.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}ve(e){const t=this.Ve(e),r=xw(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}De(e){const t=this.Ve(e),r=xw(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class eT{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class MA{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class Um{constructor(){this.Oe=new XD,this.Fe=new eT(this.Oe),this.$e=new MA(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class uh{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new uh(this.indexId,this.documentKey,this.arrayValue,r)}}function lh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=tT(n.arrayValue,e.arrayValue),0!==t?t:(t=tT(n.directionalValue,e.directionalValue),0!==t?t:at.comparator(n.documentKey,e.documentKey)))}function tT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class nT{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=t_(e);if(void 0!==t&&!this.Qe(t))return!1;const r=nu(e);let s=0,u=0;for(;s<r.length&&this.Qe(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Ke){const h=r[s];if(!this.je(this.Ke,h)||!this.We(this.Ue[u++],h))return!1;++s}for(;s<r.length;++s){const h=r[s];if(u>=this.Ue.length||!this.We(this.Ue[u++],h))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Bm{constructor(){this.ze=new B_}addToCollectionParentIndex(e,t){return this.ze.add(t),Fe.resolve()}getCollectionParents(e,t){return Fe.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return Fe.resolve()}deleteFieldIndex(e,t){return Fe.resolve()}getDocumentsMatchingTarget(e,t){return Fe.resolve(null)}getIndexType(e,t){return Fe.resolve(0)}getFieldIndexes(e,t){return Fe.resolve([])}getNextCollectionGroupToUpdate(e){return Fe.resolve(null)}getMinOffset(e,t){return Fe.resolve(Ai.min())}getMinOffsetFromCollectionGroup(e,t){return Fe.resolve(Ai.min())}updateCollectionGroup(e,t,r){return Fe.resolve()}updateIndexEntries(e,t){return Fe.resolve()}}class B_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new En(cn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new En(cn.comparator)).toArray()}}const jm=new Uint8Array(0);class Ow{constructor(e,t){this.user=e,this.databaseId=t,this.He=new B_,this.Je=new cu(r=>fl(r),(r,s)=>Kf(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const u={collectionId:r,parent:xi(s)};return bl(e).put(u)}return Fe.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[bE(t),""],!1,!0);return bl(e).K(s).next(u=>{for(const h of u){if(h.collectionId!==t)break;r.push(du(h.parent))}return r})}addFieldIndex(e,t){const r=dh(e),s={indexId:(h=t).indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var h;delete s.indexId;const u=r.add(s);if(t.indexState){const h=Lc(e);return u.next(m=>{h.put(Tw(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=dh(e),s=Lc(e),u=ch(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ch(e);let s=!0;const u=new Map;return Fe.forEach(this.Ye(t),h=>this.Xe(e,h).next(m=>{s&&(s=!!m),u.set(h,m)})).next(()=>{if(s){let h=Zt();const m=[];return Fe.forEach(u,(w,P)=>{var Q;et("IndexedDbIndexManager",`Using index ${Q=w,`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(rn=>`${rn.fieldPath}:${rn.kind}`).join(",")}`} to execute ${fl(t)}`);const se=function(rn,zt){const Yt=t_(zt);if(void 0===Yt)return null;for(const ln of Tm(rn,Yt.fieldPath))switch(ln.op){case"array-contains-any":return ln.value.arrayValue.values||[];case"array-contains":return[ln.value]}return null}(P,w),we=function(rn,zt){const Yt=new Map;for(const ln of nu(zt))for(const ti of Tm(rn,ln.fieldPath))switch(ti.op){case"==":case"in":Yt.set(ln.fieldPath.canonicalString(),ti.value);break;case"not-in":case"!=":return Yt.set(ln.fieldPath.canonicalString(),ti.value),Array.from(Yt.values())}return null}(P,w),Me=function(rn,zt){const Yt=[];let ln=!0;for(const ti of nu(zt)){const h0=0===ti.kind?LE(rn,ti.fieldPath,rn.startAt):FE(rn,ti.fieldPath,rn.startAt);Yt.push(h0.value),ln&&(ln=h0.inclusive)}return new su(Yt,ln)}(P,w),Le=function(rn,zt){const Yt=[];let ln=!0;for(const ti of nu(zt)){const h0=0===ti.kind?FE(rn,ti.fieldPath,rn.endAt):LE(rn,ti.fieldPath,rn.endAt);Yt.push(h0.value),ln&&(ln=h0.inclusive)}return new su(Yt,ln)}(P,w),Xe=this.Ze(w,P,Me),ut=this.Ze(w,P,Le),Gt=this.tn(w,P,we),Kt=this.en(w.indexId,se,Xe,Me.inclusive,ut,Le.inclusive,Gt);return Fe.forEach(Kt,rn=>r.j(rn,t.limit).next(zt=>{zt.forEach(Yt=>{const ln=at.fromSegments(Yt.documentKey);h.has(ln)||(h=h.add(ln),m.push(ln))})}))}).next(()=>m)}return Fe.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,s,u,h,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),P=w/(null!=t?t.length:1),Q=[];for(let se=0;se<w;++se){const we=t?this.nn(t[se/P]):jm,Me=this.sn(e,we,r[se%P],s),Le=this.rn(e,we,u[se%P],h),Xe=m.map(ut=>this.sn(e,we,ut,!0));Q.push(...this.createRange(Me,Le,Xe))}return Q}sn(e,t,r,s){const u=new uh(e,at.empty(),t,r);return s?u:u.Le()}rn(e,t,r,s){const u=new uh(e,at.empty(),t,r);return s?u.Le():u}Xe(e,t){const r=new nT(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let h=null;for(const m of u)r.Ge(m)&&(!h||m.fields.length>h.fields.length)&&(h=m);return h})}getIndexType(e,t){let r=2;return Fe.forEach(this.Ye(t),s=>this.Xe(e,s).next(u=>{u?0!==r&&u.fields.length<function(h){let m=new En(Yn.comparator),w=!1;for(const P of h.filters){const Q=P;Q.field.isKeyField()||("array-contains"===Q.op||"array-contains-any"===Q.op?w=!0:m=m.add(Q.field))}for(const P of h.orderBy)P.field.isKeyField()||(m=m.add(P.field));return m.size+(w?1:0)}(s)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new Um;for(const s of nu(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const h=r.Be(s.kind);ah.ye.re(u,h)}return r.Me()}nn(e){const t=new Um;return ah.ye.re(e,t.Be(0)),t.Me()}un(e,t){const r=new Um;return ah.ye.re(hl(this.databaseId,t),r.Be(function(s){const u=nu(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Me()}tn(e,t,r){if(null===r)return[];let s=[];s.push(new Um);let u=0;for(const h of nu(e)){const m=r[u++];for(const w of s)if(this.cn(t,h.fieldPath)&&Wf(m))s=this.an(s,h,m);else{const P=w.Be(h.kind);ah.ye.re(m,P)}}return this.hn(s)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Me();return t}an(e,t,r){const s=[...e],u=[];for(const h of r.arrayValue.values||[])for(const m of s){const w=new Um;w.seed(m.Me()),ah.ye.re(h,w.Be(t.kind)),u.push(w)}return u}cn(e,t){return!!e.filters.find(r=>r instanceof ei&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=dh(e),s=Lc(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(u=>{const h=[];return Fe.forEach(u,m=>s.get([m.indexId,this.uid]).next(w=>{h.push(function(P,Q){const se=Q?new $f(Q.sequenceNumber,new Ai(_l(Q.readTime),new at(du(Q.documentKey)),Q.largestBatchId)):$f.empty(),we=P.fields.map(([Me,Le])=>new Hf(Yn.fromServerFormat(Me),Le));return new qf(P.indexId,P.collectionGroup,we,se)}(m,w))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:$t(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=dh(e),u=Lc(e);return this.ln(e).next(h=>s.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>Fe.forEach(m,w=>u.put(Tw(w.indexId,this.user,h,r)))))}updateIndexEntries(e,t){const r=new Map;return Fe.forEach(t,(s,u)=>{const h=r.get(s.collectionGroup);return(h?Fe.resolve(h):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),Fe.forEach(m,w=>this.fn(e,s,w).next(P=>{const Q=this.dn(u,w);return P.isEqual(Q)?Fe.resolve():this._n(e,u,w,P,Q)}))))})}wn(e,t,r,s){return ch(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,s){return ch(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const s=ch(e);let u=new En(lh);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(h,m)=>{u=u.add(new uh(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}dn(e,t){let r=new En(lh);const s=this.on(t,e);if(null==s)return r;const u=t_(t);if(null!=u){const h=e.data.field(u.fieldPath);if(Wf(h))for(const m of h.arrayValue.values||[])r=r.add(new uh(t.indexId,e.key,this.nn(m),s))}else r=r.add(new uh(t.indexId,e.key,jm,s));return r}_n(e,t,r,s,u){et("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(m,w,P,Q,se){const we=m.getIterator(),Me=w.getIterator();let Le=Tc(we),Xe=Tc(Me);for(;Le||Xe;){let ut=!1,Gt=!1;if(Le&&Xe){const Kt=P(Le,Xe);Kt<0?Gt=!0:Kt>0&&(ut=!0)}else null!=Le?Gt=!0:ut=!0;ut?(Q(Xe),Xe=Tc(Me)):Gt?(se(Le),Le=Tc(we)):(Le=Tc(we),Xe=Tc(Me))}}(s,u,lh,m=>{h.push(this.wn(e,t,r,m))},m=>{h.push(this.mn(e,t,r,m))}),Fe.waitFor(h)}ln(e){let t=1;return Lc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,m)=>lh(h,m)).filter((h,m,w)=>!m||0!==lh(h,w[m-1]));const s=[];s.push(e);for(const h of r){const m=lh(h,e),w=lh(h,t);if(0===m)s[0]=e.Le();else if(m>0&&w<0)s.push(h),s.push(h.Le());else if(w>0)break}s.push(t);const u=[];for(let h=0;h<s.length;h+=2)u.push(IDBKeyRange.bound([s[h].indexId,this.uid,s[h].arrayValue,s[h].directionalValue,jm,[]],[s[h+1].indexId,this.uid,s[h+1].arrayValue,s[h+1].directionalValue,jm,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Mw)}getMinOffset(e,t){return Fe.mapArray(this.Ye(t),r=>this.Xe(e,r).next(s=>s||yt())).next(Mw)}}function bl(n){return Vr(n,"collectionParents")}function ch(n){return Vr(n,"indexEntries")}function dh(n){return Vr(n,"indexConfiguration")}function Lc(n){return Vr(n,"indexState")}function Mw(n){Ut(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;n_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Ai(e.readTime,e.documentKey,t)}const qm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class mi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new mi(e,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function dp(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],h=IDBKeyRange.only(t.batchId);let m=0;const w=r.J({range:h},(Q,se,we)=>(m++,we.delete()));u.push(w.next(()=>{Ut(1===m)}));const P=[];for(const Q of t.mutations){const se=gw(e,Q.key.path,t.batchId);u.push(s.delete(se)),P.push(Q.key)}return Fe.waitFor(u).next(()=>P)}function j_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw yt();e=n.noDocument}return JSON.stringify(e).length}mi.DEFAULT_COLLECTION_PERCENTILE=10,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mi.DEFAULT=new mi(41943040,mi.DEFAULT_COLLECTION_PERCENTILE,mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mi.DISABLED=new mi(-1,0,0);class q_{constructor(e,t,r,s){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=s,this.gn={}}static se(e,t,r,s){Ut(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new q_(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fc(e).J({index:"userMutationsIndex",range:r},(s,u,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=Vc(e),h=Fc(e);return h.add({}).next(m=>{Ut("number"==typeof m);const w=new Ew(m,t,r,s),P=function(we,Me,Le){const Xe=Le.baseMutations.map(Gt=>Pm(we.ne,Gt)),ut=Le.mutations.map(Gt=>Pm(we.ne,Gt));return{userId:Me,batchId:Le.batchId,localWriteTimeMs:Le.localWriteTime.toMillis(),baseMutations:Xe,mutations:ut}}(this.wt,this.userId,w),Q=[];let se=new En((we,Me)=>$t(we.canonicalString(),Me.canonicalString()));for(const we of s){const Me=gw(this.userId,we.key.path,m);se=se.add(we.key.path.popLast()),Q.push(h.put(P)),Q.push(u.put(Me,GD))}return se.forEach(we=>{Q.push(this.indexManager.addToCollectionParentIndex(e,we))}),e.addOnCommittedListener(()=>{this.gn[m]=w.keys()}),Fe.waitFor(Q).next(()=>w)})}lookupMutationBatch(e,t){return Fc(e).get(t).next(r=>r?(Ut(r.userId===this.userId),Pc(this.wt,r)):null)}yn(e,t){return this.gn[t]?Fe.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.gn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Fc(e).J({index:"userMutationsIndex",range:s},(h,m,w)=>{m.userId===this.userId&&(Ut(m.batchId>=r),u=Pc(this.wt,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Fc(e).J({index:"userMutationsIndex",range:t,reverse:!0},(s,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fc(e).K("userMutationsIndex",t).next(r=>r.map(s=>Pc(this.wt,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=x_(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return Vc(e).J({range:s},(h,m,w)=>{const[P,Q,se]=h,we=du(Q);if(P===this.userId&&t.path.isEqual(we))return Fc(e).get(se).next(Me=>{if(!Me)throw yt();Ut(Me.userId===this.userId),u.push(Pc(this.wt,Me))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En($t);const s=[];return t.forEach(u=>{const h=x_(this.userId,u.path),m=IDBKeyRange.lowerBound(h),w=Vc(e).J({range:m},(P,Q,se)=>{const[we,Me,Le]=P,Xe=du(Me);we===this.userId&&u.path.isEqual(Xe)?r=r.add(Le):se.done()});s.push(w)}),Fe.waitFor(s).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=x_(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new En($t);return Vc(e).J({range:h},(w,P,Q)=>{const[se,we,Me]=w,Le=du(we);se===this.userId&&r.isPrefixOf(Le)?Le.length===s&&(m=m.add(Me)):Q.done()}).next(()=>this.pn(e,m))}pn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Fc(e).get(u).next(h=>{if(null===h)throw yt();Ut(h.userId===this.userId),r.push(Pc(this.wt,h))}))}),Fe.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return dp(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),Fe.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Fe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Vc(e).J({range:r},(u,h,m)=>{if(u[0]===this.userId){const w=du(u[1]);s.push(w)}else m.done()}).next(()=>{Ut(0===s.length)})})}containsKey(e,t){return rT(e,this.userId,t)}Tn(e){return Nw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function rT(n,e,t){const r=x_(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return Vc(n).J({range:u,H:!0},(m,w,P)=>{const[Q,se,we]=m;Q===e&&se===s&&(h=!0),P.done()}).next(()=>h)}function Fc(n){return Vr(n,"mutations")}function Vc(n){return Vr(n,"documentMutations")}function Nw(n){return Vr(n,"mutationQueues")}class Uc{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Uc(0)}static Rn(){return new Uc(-1)}}class iT{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Uc(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>kt.fromTimestamp(new $n(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Pn(e,s)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>hh(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Ut(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return hh(e).J((h,m)=>{const w=up(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(s++,u.push(this.removeTargetData(e,w)))}).next(()=>Fe.waitFor(u)).next(()=>s)}forEachTarget(e,t){return hh(e).J((r,s)=>{const u=up(s);t(u)})}bn(e){return H_(e).get("targetGlobalKey").next(t=>(Ut(null!==t),t))}Pn(e,t){return H_(e).put("targetGlobalKey",t)}vn(e,t){return hh(e).put(F_(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=fl(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return hh(e).J({range:s,index:"queryTargetsIndex"},(h,m,w)=>{const P=up(m);Kf(t,P.target)&&(u=P,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=hu(e);return t.forEach(h=>{const m=xi(h.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,h))}),Fe.waitFor(s)}removeMatchingKeys(e,t,r){const s=hu(e);return Fe.forEach(t,u=>{const h=xi(u.path);return Fe.waitFor([s.delete([r,h]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=hu(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=hu(e);let u=Zt();return s.J({range:r,H:!0},(h,m,w)=>{const P=du(h[1]),Q=new at(P);u=u.add(Q)}).next(()=>u)}containsKey(e,t){const r=xi(t.path),s=IDBKeyRange.bound([r],[bE(r)],!1,!0);let u=0;return hu(e).J({index:"documentTargetsIndex",H:!0,range:s},([h,m],w,P)=>{0!==h&&(u++,P.done())}).next(()=>u>0)}te(e,t){return hh(e).get(t).next(r=>r?up(r):null)}}function hh(n){return Vr(n,"targets")}function H_(n){return Vr(n,"targetGlobal")}function hu(n){return Vr(n,"targetDocuments")}function $_([n,e],[t,r]){const s=$t(n,t);return 0===s?$t(e,r):s}class oT{constructor(e){this.Sn=e,this.buffer=new En($_),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();$_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sT{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;et("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ge.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ru(r)?et("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ul(r)}yield t.kn(3e5)}))}}class kw{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.On(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Fe.resolve(Ji.ot);const r=new oT(t);return this.Mn.forEachTarget(e,s=>r.xn(s.sequenceNumber)).next(()=>this.Mn.Fn(e,s=>r.xn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector","Garbage collection skipped; disabled"),Fe.resolve(qm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qm):this.$n(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,t){let r,s,u,h,m,w,P;const Q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(se=>(se>this.params.maximumSequenceNumbersToCollect?(et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${se}`),s=this.params.maximumSequenceNumbersToCollect):s=se,h=Date.now(),this.nthSequenceNumber(e,s))).next(se=>(r=se,m=Date.now(),this.removeTargets(e,r,t))).next(se=>(u=se,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(se=>(P=Date.now(),e_()<=Ja.in.DEBUG&&et("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-Q}ms\n\tDetermined least recently used ${s} in `+(m-h)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${se} documents in `+(P-w)+`ms\nTotal Duration: ${P-Q}ms`),Fe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:se})))}}class G_{constructor(e,t){this.db=e,this.garbageCollector=new kw(this,t)}On(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,s)=>t(s))}addReference(e,t,r){return z_(e,r)}removeReference(e,t,r){return z_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return z_(e,t)}Un(e,t){return function(r,s){let u=!1;return Nw(r).Y(h=>rT(r,h,s).next(m=>(m&&(u=!0),Fe.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Ln(e,(h,m)=>{if(m<=t){const w=this.Un(e,h).next(P=>{if(!P)return u++,r.getEntry(e,h).next(()=>(r.removeEntry(h,kt.min()),hu(e).delete([0,xi(h.path)])))});s.push(w)}}).next(()=>Fe.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return z_(e,t)}Ln(e,t){const r=hu(e);let s,u=Ji.ot;return r.J({index:"documentTargetsIndex"},([h,m],{path:w,sequenceNumber:P})=>{0===h?(u!==Ji.ot&&t(new at(du(s)),u),u=P,s=w):u=Ji.ot}).next(()=>{u!==Ji.ot&&t(new at(du(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function z_(n,e){return hu(n).put((r=n.currentSequenceNumber,{targetId:0,path:xi(e.path),sequenceNumber:r}));var r}class W_{constructor(){this.changes=new cu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Z_{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return fh(e).put(r)}removeEntry(e,t,r){return fh(e).delete(function(s,u){const h=s.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],L_(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=Fn.newInvalidDocument(t);return fh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Hm(t))},(s,u)=>{r=this.Kn(t,u)}).next(()=>r)}Gn(e,t){let r={size:0,document:Fn.newInvalidDocument(t)};return fh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Hm(t))},(s,u)=>{r={document:this.Kn(t,u),size:j_(u)}}).next(()=>r)}getEntries(e,t){let r=eo();return this.Qn(e,t,(s,u)=>{const h=this.Kn(s,u);r=r.insert(s,h)}).next(()=>r)}jn(e,t){let r=eo(),s=new Gn(at.comparator);return this.Qn(e,t,(u,h)=>{const m=this.Kn(u,h);r=r.insert(u,m),s=s.insert(u,j_(h))}).next(()=>({documents:r,Wn:s}))}Qn(e,t,r){if(t.isEmpty())return Fe.resolve();let s=new En(Lw);t.forEach(w=>s=s.add(w));const u=IDBKeyRange.bound(Hm(s.first()),Hm(s.last())),h=s.getIterator();let m=h.getNext();return fh(e).J({index:"documentKeyIndex",range:u},(w,P,Q)=>{const se=at.fromSegments([...P.prefixPath,P.collectionGroup,P.documentId]);for(;m&&Lw(m,se)<0;)r(m,null),m=h.getNext();m&&m.isEqual(se)&&(r(m,P),m=h.hasNext()?h.getNext():null),m?Q.q(Hm(m)):Q.done()}).next(()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),L_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fh(e).K(IDBKeyRange.bound(s,u,!0)).next(h=>{let m=eo();for(const w of h){const P=this.Kn(at.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(P.key,P)}return m})}getAllFromCollectionGroup(e,t,r,s){let u=eo();const h=Pw(t,r),m=Pw(t,Ai.max());return fh(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,m,!0)},(w,P,Q)=>{const se=this.Kn(at.fromSegments(P.prefixPath.concat(P.collectionGroup,P.documentId)),P);u=u.insert(se.key,se),u.size===s&&Q.done()}).next(()=>u)}newChangeBuffer(e){return new aT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return uT(e).get("remoteDocumentGlobalKey").next(t=>(Ut(!!t),t))}qn(e,t){return uT(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function Iw(n,e){let t;if(e.document)t=qD(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=at.fromSegments(e.noDocument.path),s=_l(e.noDocument.readTime);t=Fn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return yt();{const r=at.fromSegments(e.unknownDocument.path),s=_l(e.unknownDocument.version);t=Fn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new $n(r[0],r[1]);return kt.fromTimestamp(s)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(kt.min()))return r}return Fn.newInvalidDocument(e)}}function Rw(n){return new Z_(n)}class aT extends W_{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new cu(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new En((u,h)=>$t(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const m=this.Hn.get(u);if(t.push(this.zn.removeEntry(e,u,m.readTime)),h.isValidDocument()){const w=Dw(this.zn.wt,h);s=s.add(u.path.popLast()),r+=j_(w)-m.size,t.push(this.zn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=Dw(this.zn.wt,h.convertToNoDocument(kt.min()));t.push(this.zn.addEntry(e,u,w))}}),s.forEach(u=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.zn.updateMetadata(e,r)),Fe.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:s})=>(s.forEach((u,h)=>{this.Hn.set(u,{size:h,readTime:r.get(u).readTime})}),r))}}function uT(n){return Vr(n,"remoteDocumentGlobal")}function fh(n){return Vr(n,"remoteDocumentsV14")}function Hm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Pw(n,e){const t=e.documentKey.path.toArray();return[n,L_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Lw(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=$t(t[u],r[u]),s)return s;return s=$t(t.length,r.length),s||(s=$t(t[t.length-2],r[r.length-2]),s||$t(t[t.length-1],r[r.length-1]))}class NA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class lT{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.getBaseDocument(e,t,r))).next(s=>(null!==r&&rp(r.mutation,s,vo.empty(),$n.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Zt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Zt()){const s=_o();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let h=rh();return u.forEach((m,w)=>{h=h.insert(m,w.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const r=_o();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Zt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((h,m)=>{t.set(h,m)})})}computeViews(e,t,r,s){let u=eo();const h=Nm(),m=Nm();return t.forEach((w,P)=>{const Q=r.get(P.key);s.has(P.key)&&(void 0===Q||Q.mutation instanceof aa)?u=u.insert(P.key,P):void 0!==Q&&(h.set(P.key,Q.mutation.getFieldMask()),rp(Q.mutation,P,Q.mutation.getFieldMask(),$n.now()))}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((P,Q)=>h.set(P,Q)),t.forEach((P,Q)=>{var se;return m.set(P,new NA(Q,null!==(se=h.get(P))&&void 0!==se?se:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Nm();let s=new Gn((h,m)=>h-m),u=Zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const m of h)m.keys().forEach(w=>{const P=t.get(w);if(null===P)return;let Q=r.get(w)||vo.empty();Q=m.applyToLocalView(P,Q),r.set(w,Q);const se=(s.get(m.batchId)||Zt()).add(w);s=s.insert(m.batchId,se)})}).next(()=>{const h=[],m=s.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),P=w.key,Q=w.value,se=Mm();Q.forEach(we=>{if(!u.has(we)){const Me=m_(t.get(we),r.get(we));null!==Me&&se.set(we,Me),u=u.add(we)}}),h.push(this.documentOverlayCache.saveOverlays(e,P,se))}return Fe.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return at.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Qf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const h=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):Fe.resolve(_o());let m=-1,w=u;return h.next(P=>Fe.forEach(P,(Q,se)=>(m<se.largestBatchId&&(m=se.largestBatchId),u.get(Q)?Fe.resolve():this.getBaseDocument(e,Q,se).next(we=>{w=w.insert(Q,we)}))).next(()=>this.populateOverlays(e,P,u)).next(()=>this.computeViews(e,w,P,Zt())).next(Q=>({batchId:m,changes:__(Q)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new at(t)).next(r=>{let s=rh();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=rh();return this.indexManager.getCollectionParents(e,s).next(h=>Fe.forEach(h,m=>{const w=(P=t,Q=m.child(s),new au(Q,null,P.explicitOrderBy.slice(),P.filters.slice(),P.limit,P.limitType,P.startAt,P.endAt));var P,Q;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(P=>{P.forEach((Q,se)=>{u=u.insert(Q,se)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,w)=>{const P=w.getKey();null===s.get(P)&&(s=s.insert(P,Fn.newInvalidDocument(P)))});let h=rh();return s.forEach((m,w)=>{const P=u.get(m);void 0!==P&&rp(P.mutation,w,vo.empty(),$n.now()),f_(t,w)&&(h=h.insert(m,w))}),h})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):Fe.resolve(Fn.newInvalidDocument(t))}}class kA{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return Fe.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:xr(r.createTime)}),Fe.resolve()}getNamedQuery(e,t){return Fe.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:lp(r.bundledQuery),readTime:xr(r.readTime)}),Fe.resolve();var r}}class RA{constructor(){this.overlays=new Gn(at.comparator),this.Xn=new Map}getOverlay(e,t){return Fe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=_o();return Fe.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.ie(e,t,u)}),Fe.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Xn.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.Xn.delete(r)),Fe.resolve()}getOverlaysForCollection(e,t,r){const s=_o(),u=t.length+1,h=new at(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const w=m.getNext().value,P=w.getKey();if(!t.isPrefixOf(P.path))break;P.path.length===u&&w.largestBatchId>r&&s.set(w.getKey(),w)}return Fe.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Gn((P,Q)=>P-Q);const h=this.overlays.getIterator();for(;h.hasNext();){const P=h.getNext().value;if(P.getKey().getCollectionGroup()===t&&P.largestBatchId>r){let Q=u.get(P.largestBatchId);null===Q&&(Q=_o(),u=u.insert(P.largestBatchId,Q)),Q.set(P.getKey(),P)}}const m=_o(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((P,Q)=>m.set(P,Q)),!(m.size()>=s)););return Fe.resolve(m)}ie(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const h=this.Xn.get(s.largestBatchId).delete(r.key);this.Xn.set(s.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new Lm(t,r));let u=this.Xn.get(t);void 0===u&&(u=Zt(),this.Xn.set(t,u)),this.Xn.set(t,u.add(r.key))}}class Fw{constructor(){this.Zn=new En(Ur.ts),this.es=new En(Ur.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Ur(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Ur(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new at(new cn([])),r=new Ur(t,e),s=new Ur(t,e+1),u=[];return this.es.forEachInRange([r,s],h=>{this.rs(h),u.push(h.key)}),u}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new at(new cn([])),r=new Ur(t,e),s=new Ur(t,e+1);let u=Zt();return this.es.forEachInRange([r,s],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new Ur(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ur{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return at.comparator(e.key,t.key)||$t(e.ls,t.ls)}static ns(e,t){return $t(e.ls,t.ls)||at.comparator(e.key,t.key)}}class PA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new En(Ur.ts)}checkEmpty(e){return Fe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.fs;this.fs++;const h=new Ew(u,t,r,s);this.mutationQueue.push(h);for(const m of s)this.ds=this.ds.add(new Ur(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return Fe.resolve(h)}lookupMutationBatch(e,t){return Fe.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ws(t+1),u=s<0?0:s;return Fe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Fe.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return Fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ur(t,0),s=new Ur(t,Number.POSITIVE_INFINITY),u=[];return this.ds.forEachInRange([r,s],h=>{const m=this._s(h.ls);u.push(m)}),Fe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new En($t);return t.forEach(s=>{const u=new Ur(s,0),h=new Ur(s,Number.POSITIVE_INFINITY);this.ds.forEachInRange([u,h],m=>{r=r.add(m.ls)})}),Fe.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;at.isDocumentKey(u)||(u=u.child(""));const h=new Ur(new at(u),0);let m=new En($t);return this.ds.forEachWhile(w=>{const P=w.key.path;return!!r.isPrefixOf(P)&&(P.length===s&&(m=m.add(w.ls)),!0)},h),Fe.resolve(this.gs(m))}gs(e){const t=[];return e.forEach(r=>{const s=this._s(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Ut(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return Fe.forEach(t.mutations,s=>{const u=new Ur(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Ur(t,0),s=this.ds.firstAfterOrEqual(r);return Fe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return Fe.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class LA{constructor(e){this.ps=e,this.docs=new Gn(at.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,h=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Fe.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let r=eo();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Fn.newInvalidDocument(s))}),Fe.resolve(r)}getAllFromCollection(e,t,r){let s=eo();const u=new at(t.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:w}}=h.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||n_(IE(w),r)<=0||(s=s.insert(w.key,w.mutableCopy()))}return Fe.resolve(s)}getAllFromCollectionGroup(e,t,r,s){yt()}Is(e,t){return Fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new FA(this)}getSize(e){return Fe.resolve(this.size)}}class FA extends W_{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.zn.addEntry(e,s)):this.zn.removeEntry(r)}),Fe.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class VA{constructor(e){this.persistence=e,this.Ts=new cu(t=>fl(t),Kf),this.lastRemoteSnapshotVersion=kt.min(),this.highestTargetId=0,this.Es=0,this.As=new Fw,this.targetCount=0,this.Rs=Uc.An()}forEachTarget(e,t){return this.Ts.forEach((r,s)=>t(s)),Fe.resolve()}getLastRemoteSnapshotVersion(e){return Fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Fe.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),Fe.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Uc(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,Fe.resolve()}updateTargetData(e,t){return this.vn(t),Fe.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Fe.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Ts.forEach((h,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Ts.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),Fe.waitFor(u).next(()=>s)}getTargetCount(e){return Fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return Fe.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),Fe.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(h=>{u.push(s.markPotentiallyOrphaned(e,h))}),Fe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),Fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return Fe.resolve(r)}containsKey(e,t){return Fe.resolve(this.As.containsKey(t))}}class i{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Ji(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new VA(this),this.indexManager=new Bm,this.remoteDocumentCache=new LA(r=>this.referenceDelegate.Ss(r)),this.wt=new ww(t),this.Ds=new kA(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new PA(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){et("MemoryPersistence","Starting transaction:",e);const s=new o(this.Ps.next());return this.referenceDelegate.Cs(),r(s).next(u=>this.referenceDelegate.xs(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Ns(e,t){return Fe.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class o extends DE{constructor(e){super(),this.currentSequenceNumber=e}}class a{constructor(e){this.persistence=e,this.ks=new Fw,this.Ms=null}static Os(e){return new a(e)}get Fs(){if(this.Ms)return this.Ms;throw yt()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),Fe.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),Fe.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),Fe.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(s=>this.Fs.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Fs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Ms=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fe.forEach(this.Fs,r=>{const s=at.fromPath(r);return this.$s(e,s).next(u=>{u||t.removeEntry(s,kt.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return Fe.or([()=>Fe.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class l{constructor(e){this.wt=e}M(e,t,r,s){const u=new ym("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$D,{unique:!0}),m.createObjectStore("documentMutations"),d(e),function(m){m.createObjectStore("remoteDocuments")}(e));let h=Fe.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),d(e)),h=h.next(()=>function(m){const w=m.store("targetGlobal"),P={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:kt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",P)}(u))),r<4&&s>=4&&(0!==r&&(h=h.next(()=>function(m,w){return w.store("mutations").K().next(P=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$D,{unique:!0});const Q=w.store("mutations"),se=P.map(we=>Q.put(we));return Fe.waitFor(se)})}(e,u))),h=h.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(h=h.next(()=>this.Bs(u))),r<6&&s>=6&&(h=h.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(u)))),r<7&&s>=7&&(h=h.next(()=>this.Us(u))),r<8&&s>=8&&(h=h.next(()=>this.qs(e,u))),r<9&&s>=9&&(h=h.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(h=h.next(()=>this.Ks(u))),r<11&&s>=11&&(h=h.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(h=h.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:mw});w.createIndex("collectionPathOverlayIndex",yw,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",JD,{unique:!1})}(e)})),r<13&&s>=13&&(h=h.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:zD});w.createIndex("documentKeyIndex",OA),w.createIndex("collectionGroupIndex",WD)}(e)).next(()=>this.Gs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(h=h.next(()=>this.Qs(e,u))),r<15&&s>=15&&(h=h.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:M_}).createIndex("sequenceNumberIndex",YD,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:QD}).createIndex("documentKeyIndex",N_,{unique:!1})}(e))),h}Ls(e){let t=0;return e.store("remoteDocuments").J((r,s)=>{t+=j_(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(s=>Fe.forEach(s,u=>{const h=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",h).next(m=>Fe.forEach(m,w=>{Ut(w.userId===u.userId);const P=Pc(this.wt,w);return dp(e,u.userId,P).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.J((h,m)=>{const w=new cn(h),P=[0,xi(w)];u.push(t.get(P).next(Q=>Q?Fe.resolve():t.put({targetId:0,path:xi(w),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>Fe.waitFor(u))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:KD});const r=t.store("collectionParents"),s=new B_,u=h=>{if(s.add(h)){const m=h.lastSegment(),w=h.popLast();return r.put({collectionId:m,parent:xi(w)})}};return t.store("remoteDocuments").J({H:!0},(h,m)=>{const w=new cn(h);return u(w.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([h,m,w],P)=>{const Q=du(m);return u(Q.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,s)=>{const u=up(s),h=F_(this.wt,u);return t.put(h)})}Gs(e,t){const r=t.store("remoteDocuments"),s=[];return r.J((u,h)=>{const m=t.store("remoteDocumentsV14"),w=(P=h,P.document?new at(cn.fromString(P.document.name).popFirst(5)):P.noDocument?at.fromSegments(P.noDocument.path):P.unknownDocument?at.fromSegments(P.unknownDocument.path):yt()).path.toArray();var P;const Q={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};s.push(m.put(Q))}).next(()=>Fe.waitFor(s))}Qs(e,t){const r=t.store("mutations"),s=Rw(this.wt),u=new i(a.Os,this.wt.ne);return r.K().next(h=>{const m=new Map;return h.forEach(w=>{var P;let Q=null!==(P=m.get(w.userId))&&void 0!==P?P:Zt();Pc(this.wt,w).keys().forEach(se=>Q=Q.add(se)),m.set(w.userId,Q)}),Fe.forEach(m,(w,P)=>{const Q=new Lr(P),se=Fm.se(this.wt,Q),we=u.getIndexManager(Q),Me=q_.se(Q,this.wt,we,u.referenceDelegate);return new lT(s,Me,se,we).recalculateAndSaveOverlaysForDocumentKeys(new bo(t,Ji.ot),w).next()})})}}function d(n){n.createObjectStore("targetDocuments",{keyPath:ZD}).createIndex("documentTargetsIndex",xs,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",O_,{unique:!0}),n.createObjectStore("targetGlobal")}const p="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class v{constructor(e,t,r,s,u,h,m,w,P,Q,se=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=u,this.window=h,this.document=m,this.Ws=P,this.zs=Q,this.Hs=se,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=we=>Promise.resolve(),!v.V())throw new Je(je.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new G_(this,s),this.ei=t+"main",this.wt=new ww(w),this.ni=new Cs(this.ei,this.Hs,new l(this.wt)),this.Vs=new iT(this.referenceDelegate,this.wt),this.remoteDocumentCache=Rw(this.wt),this.Ds=new Cw,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===Q&&rr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Je(je.FAILED_PRECONDITION,p);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Ji(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,Ge.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Ge.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>N(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(ru(e))return et("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return et("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return I(e).get("owner").next(t=>Fe.resolve(this.di(t)))}_i(e){return N(e).delete(this.clientId)}wi(){var e=this;return(0,Ge.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Vr(r,"clientMetadata");return s.K().next(u=>{const h=e.gi(u,18e5),m=u.filter(w=>-1===h.indexOf(w));return Fe.forEach(m,w=>s.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?Fe.resolve(!0):I(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Je(je.FAILED_PRECONDITION,p);return!1}}return!(!this.networkEnabled||!this.inForeground)||N(e).K().next(r=>void 0===this.gi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const h=!this.inForeground&&s.inForeground,m=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||h&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&et("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ge.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new bo(t,Ji.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>N(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return q_.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ow(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Fm.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){et("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(h=this.Hs)?R_:14===h?bw:13===h?_w:12===h?vw:11===h?k_:void yt();var h;let m;return this.ni.runTransaction(e,s,u,w=>(m=new bo(w,this.Ps?this.Ps.next():Ji.ot),"readwrite-primary"===t?this.ai(m).next(P=>!!P||this.hi(m)).next(P=>{if(!P)throw rr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Je(je.FAILED_PRECONDITION,r_);return r(m)}).next(P=>this.fi(m).next(()=>P)):this.bi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}bi(e){return I(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Je(je.FAILED_PRECONDITION,p)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return I(e).put("owner",t)}static V(){return Cs.V()}li(e){const t=I(e);return t.get("owner").next(r=>this.di(r)?(et("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Fe.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(rr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,nn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return et("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return rr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){rr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function I(n){return Vr(n,"owner")}function N(n){return Vr(n,"clientMetadata")}function z(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ne{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=s}static Vi(e,t){let r=Zt(),s=Zt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new ne(e,t.fromCache,r,s)}}class pe{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ci(e,t).next(u=>u||this.xi(e,t,s,r)).next(u=>u||this.Ni(e,t))}Ci(e,t){if(GE(t))return Fe.resolve(null);let r=Xi(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=Xd(t,null,"F"),r=Xi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const h=Zt(...u);return this.Di.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const P=this.ki(t,m);return this.Mi(t,P,h,w.readTime)?this.Ci(e,Xd(t,null,"F")):this.Oi(e,P,t,w)}))})))}xi(e,t,r,s){return GE(t)||s.isEqual(kt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(u=>{const h=this.ki(t,u);return this.Mi(t,h,r,s)?this.Ni(e,t):(e_()<=Ja.in.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),h_(t)),this.Oi(e,h,t,wE(s,-1)))})}ki(e,t){let r=new En(Xf(e));return t.forEach((s,u)=>{f_(e,u)&&(r=r.add(u))}),r}Mi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Ni(e,t){return e_()<=Ja.in.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",h_(t)),this.Di.getDocumentsMatchingQuery(e,t,Ai.min())}Oi(e,t,r,s){return this.Di.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(h=>{u=u.insert(h.key,h)}),u))}}class Te{constructor(e,t,r,s){this.persistence=e,this.Fi=t,this.wt=s,this.$i=new Gn($t),this.Bi=new cu(u=>fl(u),Kf),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lT(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function Ne(n,e,t,r){return new Te(n,e,t,r)}function $e(n,e){return nt.apply(this,arguments)}function nt(){return nt=(0,Ge.Z)(function*(n,e){const t=ct(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const h=[],m=[];let w=Zt();for(const P of s){h.push(P.batchId);for(const Q of P.mutations)w=w.add(Q.key)}for(const P of u){m.push(P.batchId);for(const Q of P.mutations)w=w.add(Q.key)}return t.localDocuments.getDocuments(r,w).next(P=>({Ki:P,removedBatchIds:h,addedBatchIds:m}))})})}),nt.apply(this,arguments)}function st(n,e){const t=ct(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Ui.newChangeBuffer({trackRemovals:!0});return function(h,m,w,P){const Q=w.batch,se=Q.keys();let we=Fe.resolve();return se.forEach(Me=>{we=we.next(()=>P.getEntry(m,Me)).next(Le=>{const Xe=w.docVersions.get(Me);Ut(null!==Xe),Le.version.compareTo(Xe)<0&&(Q.applyToRemoteDocument(Le,w),Le.isValidDocument()&&(Le.setReadTime(w.commitVersion),P.addEntry(Le)))})}),we.next(()=>h.mutationQueue.removeMutationBatch(m,Q))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let m=Zt();for(let w=0;w<h.mutationResults.length;++w)h.mutationResults[w].transformResults.length>0&&(m=m.add(h.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function gt(n){const e=ct(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function Ye(n,e){const t=ct(n),r=e.snapshotVersion;let s=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.Ui.newChangeBuffer({trackRemovals:!0});s=t.$i;const m=[];e.targetChanges.forEach((Q,se)=>{const we=s.get(se);if(!we)return;m.push(t.Vs.removeMatchingKeys(u,Q.removedDocuments,se).next(()=>t.Vs.addMatchingKeys(u,Q.addedDocuments,se)));let Me=we.withSequenceNumber(u.currentSequenceNumber);var Le,Xe,ut;e.targetMismatches.has(se)?Me=Me.withResumeToken(Sr.EMPTY_BYTE_STRING,kt.min()).withLastLimboFreeSnapshotVersion(kt.min()):Q.resumeToken.approximateByteSize()>0&&(Me=Me.withResumeToken(Q.resumeToken,r)),s=s.insert(se,Me),Xe=Me,ut=Q,(0===(Le=we).resumeToken.approximateByteSize()||Xe.snapshotVersion.toMicroseconds()-Le.snapshotVersion.toMicroseconds()>=3e8||ut.addedDocuments.size+ut.modifiedDocuments.size+ut.removedDocuments.size>0)&&m.push(t.Vs.updateTargetData(u,Me))});let w=eo(),P=Zt();if(e.documentUpdates.forEach(Q=>{e.resolvedLimboDocuments.has(Q)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,Q))}),m.push(Ot(u,h,e.documentUpdates).next(Q=>{w=Q.Gi,P=Q.Qi})),!r.isEqual(kt.min())){const Q=t.Vs.getLastRemoteSnapshotVersion(u).next(se=>t.Vs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(Q)}return Fe.waitFor(m).next(()=>h.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,P)).next(()=>w)}).then(u=>(t.$i=s,u))}function Ot(n,e,t){let r=Zt(),s=Zt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let h=eo();return t.forEach((m,w)=>{const P=u.get(m);w.isFoundDocument()!==P.isFoundDocument()&&(s=s.add(m)),w.isNoDocument()&&w.version.isEqual(kt.min())?(e.removeEntry(m,w.readTime),h=h.insert(m,w)):!P.isValidDocument()||w.version.compareTo(P.version)>0||0===w.version.compareTo(P.version)&&P.hasPendingWrites?(e.addEntry(w),h=h.insert(m,w)):et("LocalStore","Ignoring outdated watch update for ",m,". Current version:",P.version," Watch version:",w.version)}),{Gi:h,Qi:s}})}function an(n,e){const t=ct(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dn(n,e){const t=ct(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Vs.getTargetData(r,e).next(u=>u?(s=u,Fe.resolve(s)):t.Vs.allocateTargetId(r).next(h=>(s=new yl(e,h,0,r.currentSequenceNumber),t.Vs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.$i.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function Br(n,e,t){return fu.apply(this,arguments)}function fu(){return fu=(0,Ge.Z)(function*(n,e,t){const r=ct(n),s=r.$i.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,s)))}catch(h){if(!ru(h))throw h;et("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.$i=r.$i.remove(e),r.Bi.delete(s.target)}),fu.apply(this,arguments)}function ph(n,e,t){const r=ct(n);let s=kt.min(),u=Zt();return r.persistence.runTransaction("Execute query","readonly",h=>function(m,w,P){const Q=ct(m),se=Q.Bi.get(P);return void 0!==se?Fe.resolve(Q.$i.get(se)):Q.Vs.getTargetData(w,P)}(r,h,Xi(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(h,m.targetId).next(w=>{u=w})}).next(()=>r.Fi.getDocumentsMatchingQuery(h,e,t?s:kt.min(),t?u:Zt())).next(m=>(zm(r,Jf(e),m),{documents:m,ji:u})))}function $m(n,e){const t=ct(n),r=ct(t.Vs),s=t.$i.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.te(u,e).next(h=>h?h.target:null))}function Gm(n,e){const t=ct(n),r=t.Li.get(e)||kt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Ui.getAllFromCollectionGroup(s,e,wE(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(zm(t,e,s),s))}function zm(n,e,t){let r=kt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Li.set(e,r)}function hp(){return hp=(0,Ge.Z)(function*(n,e,t,r){const s=ct(n);let u=Zt(),h=eo();for(const P of t){const Q=e.Wi(P.metadata.name);P.document&&(u=u.add(Q));const se=e.zi(P);se.setReadTime(e.Hi(P.metadata.readTime)),h=h.insert(Q,se)}const m=s.Ui.newChangeBuffer({trackRemovals:!0}),w=yield dn(s,(P=r,Xi(Jd(cn.fromString(`__bundle__/docs/${P}`)))));var P;return s.persistence.runTransaction("Apply bundle documents","readwrite",P=>Ot(P,m,h).next(Q=>(m.apply(P),Q)).next(Q=>s.Vs.removeMatchingKeysForTargetId(P,w.targetId).next(()=>s.Vs.addMatchingKeys(P,u,w.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(P,Q.Gi,Q.Qi)).next(()=>Q.Gi)))}),hp.apply(this,arguments)}function Y_(n,e){return fp.apply(this,arguments)}function fp(){return fp=(0,Ge.Z)(function*(n,e,t=Zt()){const r=yield dn(n,Xi(lp(e.bundledQuery))),s=ct(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const h=xr(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return s.Ds.saveNamedQuery(u,e);const m=r.withResumeToken(Sr.EMPTY_BYTE_STRING,h);return s.$i=s.$i.insert(m.targetId,m),s.Vs.updateTargetData(u,m).next(()=>s.Vs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Vs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ds.saveNamedQuery(u,e))})}),fp.apply(this,arguments)}function Wm(n,e){return`firestore_clients_${n}_${e}`}function UA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function cT(n,e){return`firestore_targets_${n}_${e}`}class Vw{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Ji(e,t,r){const s=JSON.parse(r);let u,h="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return h&&s.error&&(h="string"==typeof s.error.message&&"string"==typeof s.error.code,h&&(u=new Je(s.error.code,s.error.message))),h?new Vw(e,t,s.state,u):(rr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Q_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Je(r.error.code,r.error.message))),u?new Q_(e,r.state,s):(rr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uw{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=ip();for(let h=0;s&&h<r.activeTargetIds.length;++h)s=OE(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return s?new Uw(e,u):(rr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class dT{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new dT(t.clientId,t.onlineState):(rr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class hT{constructor(){this.activeTargetIds=ip()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fT{constructor(e,t,r,s,u){this.window=e,this.js=t,this.persistenceKey=r,this.tr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Gn($t),this.started=!1,this.ir=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=Wm(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new hT),this.cr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ge.Z)(function*(){const t=yield e.syncEngine.Ri();for(const s of t){if(s===e.tr)continue;const u=e.getItem(Wm(e.persistenceKey,s));if(u){const h=Uw.Ji(s,u);h&&(e.sr=e.sr.insert(h.clientId,h))}}e._r();const r=e.storage.getItem(e.lr);if(r){const s=e.wr(r);s&&e.mr(s)}for(const s of e.ir)e.nr(s);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(cT(this.persistenceKey,e));if(r){const s=Q_.Ji(e,r);s&&(t=s.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(cT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.pr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return et("SharedClientState","READ",e,t),t}setItem(e,t){et("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){et("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(et("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void rr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const s=t.Rr(r.key);return t.br(s,null)}{const s=t.Pr(r.key,r.newValue);if(s)return t.br(s.clientId,s)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const s=t.vr(r.key,r.newValue);if(s)return t.Vr(s)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const s=t.Sr(r.key,r.newValue);if(s)return t.Dr(s)}}else if(r.key===t.lr){if(null!==r.newValue){const s=t.wr(r.newValue);if(s)return t.mr(s)}}else if(r.key===t.ur){const s=function(u){let h=Ji.ot;if(null!=u)try{const m=JSON.parse(u);Ut("number"==typeof m),h=m}catch(m){rr("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(r.newValue);s!==Ji.ot&&t.sequenceNumberHandler(s)}else if(r.key===t.dr){const s=t.Cr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const s=new Vw(this.currentUser,e,t,r),u=UA(this.persistenceKey,this.currentUser,e);this.setItem(u,s.Yi())}pr(e){const t=UA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const s=cT(this.persistenceKey,e),u=new Q_(e,t,r);this.setItem(s,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Uw.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),s=Number(r[1]);return Vw.Ji(new Lr(void 0!==r[2]?r[2]:null),s,t)}Sr(e,t){const r=this.hr.exec(e),s=Number(r[1]);return Q_.Ji(s,t)}wr(e){return dT.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);et("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),s=this.gr(this.sr),u=this.gr(r),h=[],m=[];return u.forEach(w=>{s.has(w)||h.push(w)}),s.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Or(h,m).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=ip();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class BA{constructor(){this.Fr=new hT,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new hT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class X1{Br(e){}shutdown(){}}class jA{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){et("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){et("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ex={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class tx{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class nx extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,s,u){const h=this.oo(e,t);et("RestConnection","Sending: ",h,r);const m={};return this.uo(m,s,u),this.co(e,h,m,r).then(w=>(et("RestConnection","Received: ",w),w),w=>{throw al("RestConnection",`${e} failed with error: `,w,"url: ",h,"request:",r),w})}ao(e,t,r,s,u,h){return this.ro(e,t,r,s,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+oa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}oo(e,t){return`${this.so}/v1/${t}:${ex[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,s){return new Promise((u,h)=>{const m=new mE;m.listenOnce(dD.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case wc.NO_ERROR:const P=m.getResponseJson();et("Connection","XHR received:",JSON.stringify(P)),u(P);break;case wc.TIMEOUT:et("Connection",'RPC "'+e+'" timed out'),h(new Je(je.DEADLINE_EXCEEDED,"Request time out"));break;case wc.HTTP_ERROR:const Q=m.getStatus();if(et("Connection",'RPC "'+e+'" failed with status:',Q,"response text:",m.getResponseText()),Q>0){const se=m.getResponseJson().error;if(se&&se.status&&se.message){const we=function(Me){const Le=Me.toLowerCase().replace(/_/g,"-");return Object.values(je).indexOf(Le)>=0?Le:je.UNKNOWN}(se.status);h(new Je(we,se.message))}else h(new Je(je.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Je(je.UNAVAILABLE,"Connection failed."));break;default:yt()}}finally{et("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(s);m.send(t,"POST",w,r,15)})}ho(e,t,r){const s=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=lD(),h=cD(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new pm({})),this.uo(m.initMessageHeaders,t,r),(0,nn.uI)()||(0,nn.b$)()||(0,nn.d)()||(0,nn.w1)()||(0,nn.Mn)()||(0,nn.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=s.join("");et("Connection","Creating WebChannel: "+w,m);const P=u.createWebChannel(w,m);let Q=!1,se=!1;const we=new tx({jr:Le=>{se?et("Connection","Not sending because WebChannel is closed:",Le):(Q||(et("Connection","Opening WebChannel transport."),P.open(),Q=!0),et("Connection","WebChannel sending:",Le),P.send(Le))},Wr:()=>P.close()}),Me=(Le,Xe,ut)=>{Le.listen(Xe,Gt=>{try{ut(Gt)}catch(Kt){setTimeout(()=>{throw Kt},0)}})};return Me(P,Bf.EventType.OPEN,()=>{se||et("Connection","WebChannel transport opened.")}),Me(P,Bf.EventType.CLOSE,()=>{se||(se=!0,et("Connection","WebChannel transport closed"),we.eo())}),Me(P,Bf.EventType.ERROR,Le=>{se||(se=!0,al("Connection","WebChannel transport errored:",Le),we.eo(new Je(je.UNAVAILABLE,"The operation could not be completed")))}),Me(P,Bf.EventType.MESSAGE,Le=>{var Xe;if(!se){const ut=Le.data[0];Ut(!!ut);const Gt=ut,Kt=Gt.error||(null===(Xe=Gt[0])||void 0===Xe?void 0:Xe.error);if(Kt){et("Connection","WebChannel received error:",Kt);const rn=Kt.status;let zt=function(ln){const ti=zn[ln];if(void 0!==ti)return nw(ti)}(rn),Yt=Kt.message;void 0===zt&&(zt=je.INTERNAL,Yt="Unknown error status: "+rn+" with message "+Kt.message),se=!0,we.eo(new Je(zt,Yt)),P.close()}else et("Connection","WebChannel received:",ut),we.no(ut)}}),Me(h,hD.STAT_EVENT,Le=>{Le.stat===gE.PROXY?et("Connection","Detected buffering proxy"):Le.stat===gE.NOPROXY&&et("Connection","Detected no buffering proxy")}),setTimeout(()=>{we.Zr()},0),we}}function qA(){return"undefined"!=typeof window?window:null}function Bw(){return"undefined"!=typeof document?document:null}function J_(n){return new FD(n,!0)}class pT{constructor(e,t,r=1e3,s=1.5,u=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=s,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),s=Math.max(0,t-r);s>0&&et("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,s,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class HA{constructor(e,t,r,s,u,h,m,w){this.js=e,this.Ao=r,this.Ro=s,this.bo=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new pT(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ge.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,Ge.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,Ge.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===je.RESOURCE_EXHAUSTED?(rr(t.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===je.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Po===t&&this.Uo(r,s)},r=>{e(()=>{const s=new Je(je.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(s)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(s=>{r(()=>this.qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}xo(){var e=this;this.state=5,this.So.Io((0,Ge.Z)(function*(){e.state=0,e.start()}))}qo(e){return et("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(et("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rx extends HA{constructor(e,t,r,s,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,h),this.wt=u}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function CA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:yt(),s=e.targetChange.targetIds||[],u=function(w,P){return w.dt?(Ut(void 0===P||"string"==typeof P),Sr.fromBase64String(P||"")):(Ut(void 0===P||P instanceof Uint8Array),Sr.fromUint8Array(P||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(w){const P=void 0===w.code?je.UNKNOWN:nw(w.code);return new Je(P,w.message||"")}(h);t=new iw(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=ua(n,r.document.name),u=xr(r.document.updateTime),h=new Fr({mapValue:{fields:r.document.fields}}),m=Fn.newFoundDocument(s,u,h);t=new ih(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,s=ua(n,r.document),u=r.readTime?xr(r.readTime):kt.min(),h=Fn.newNoDocument(s,u);t=new ih([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,s=ua(n,r.document);t=new ih([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return yt();{const r=e.filter,u=new DA(r.count||0);t=new LD(r.targetId,u)}}var w;return t}(this.wt,e),r=function(s){if(!("targetChange"in s))return kt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?kt.min():u.readTime?xr(u.readTime):kt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=sh(this.wt),t.addTarget=function(s,u){let h;const m=u.target;return h=Dm(m)?{documents:ap(s,m)}:{query:HD(s,m)},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?h.resumeToken=E_(s,u.resumeToken):u.snapshotVersion.compareTo(kt.min())>0&&(h.readTime=sp(s,u.snapshotVersion.toTimestamp())),h}(this.wt,e);const r=function T_(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return yt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=sh(this.wt),t.removeTarget=e,this.Oo(t)}}class ix extends HA{constructor(e,t,r,s,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,h),this.wt=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function AA(n,e){return n&&n.length>0?(Ut(void 0!==e),n.map(t=>function(r,s){let u=xr(r.updateTime?r.updateTime:s);return u.isEqual(kt.min())&&(u=xr(s)),new JE(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=xr(e.commitTime);return this.listener.Jo(r,t)}return Ut(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=sh(this.wt),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Pm(this.wt,r))};this.Oo(t)}}class ox extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=s,this.Zo=!1}tu(){if(this.Zo)throw new Je(je.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.bo.ro(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Je(je.UNKNOWN,s.toString())})}ao(e,t,r,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.bo.ao(e,t,r,u,h,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Je(je.UNKNOWN,u.toString())})}terminate(){this.Zo=!0}}class sx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(rr(t),this.su=!1):et("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class ax{constructor(e,t,r,s,u){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(m=>{r.enqueueAndForget((0,Ge.Z)(function*(){var w;gh(h)&&(et("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,Ge.Z)(function*(P){const Q=ct(P);Q.lu.add(4),yield Zm(Q),Q._u.set("Unknown"),Q.lu.delete(4),yield X_(Q)}),function(P){return w.apply(this,arguments)})(h))}))}),this._u=new sx(r,s)}}function X_(n){return gT.apply(this,arguments)}function gT(){return gT=(0,Ge.Z)(function*(n){if(gh(n))for(const e of n.fu)yield e(!0)}),gT.apply(this,arguments)}function Zm(n){return mT.apply(this,arguments)}function mT(){return mT=(0,Ge.Z)(function*(n){for(const e of n.fu)yield e(!1)}),mT.apply(this,arguments)}function jw(n,e){const t=ct(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),_T(t)?vT(t):Ym(t).Co()&&yT(t,e))}function e0(n,e){const t=ct(n),r=Ym(t);t.hu.delete(e),r.Co()&&$A(t,e),0===t.hu.size&&(r.Co()?r.ko():gh(t)&&t._u.set("Unknown"))}function yT(n,e){n.wu.Nt(e.targetId),Ym(n).Qo(e)}function $A(n,e){n.wu.Nt(e),Ym(n).jo(e)}function vT(n){n.wu=new sw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Ym(n).start(),n._u.iu()}function _T(n){return gh(n)&&!Ym(n).Do()&&n.hu.size>0}function gh(n){return 0===ct(n).lu.size}function GA(n){n.wu=void 0}function ux(n){return bT.apply(this,arguments)}function bT(){return bT=(0,Ge.Z)(function*(n){n.hu.forEach((e,t)=>{yT(n,e)})}),bT.apply(this,arguments)}function lx(n,e){return ET.apply(this,arguments)}function ET(){return ET=(0,Ge.Z)(function*(n,e){GA(n),_T(n)?(n._u.uu(e),vT(n)):n._u.set("Unknown")}),ET.apply(this,arguments)}function cx(n,e,t){return wT.apply(this,arguments)}function wT(){return wT=(0,Ge.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof iw&&2===e.state&&e.cause)try{yield(r=(0,Ge.Z)(function*(s,u){const h=u.cause;for(const m of u.targetIds)s.hu.has(m)&&(yield s.remoteSyncer.rejectListen(m,h),s.hu.delete(m),s.wu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){et("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield qw(n,r)}else if(e instanceof ih?n.wu.Ut(e):e instanceof LD?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(kt.min()))try{const r=yield gt(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const h=s.wu.Yt(u);return h.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const P=s.hu.get(w);P&&s.hu.set(w,P.withResumeToken(m.resumeToken,u))}}),h.targetMismatches.forEach(m=>{const w=s.hu.get(m);if(!w)return;s.hu.set(m,w.withResumeToken(Sr.EMPTY_BYTE_STRING,w.snapshotVersion)),$A(s,m);const P=new yl(w.target,m,1,w.sequenceNumber);yT(s,P)}),s.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){et("RemoteStore","Failed to raise snapshot:",r),yield qw(n,r)}var r}),wT.apply(this,arguments)}function qw(n,e,t){return IT.apply(this,arguments)}function IT(){return IT=(0,Ge.Z)(function*(n,e,t){if(!ru(e))throw e;n.lu.add(1),yield Zm(n),n._u.set("Offline"),t||(t=()=>gt(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ge.Z)(function*(){et("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield X_(n)}))}),IT.apply(this,arguments)}function zA(n,e){return e().catch(t=>qw(n,t,e))}function Km(n){return DT.apply(this,arguments)}function DT(){return DT=(0,Ge.Z)(function*(n){const e=ct(n),t=mh(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;dx(e);)try{const s=yield an(e.localStore,r);if(null===s){0===e.au.length&&t.ko();break}r=s.batchId,hx(e,s)}catch(s){yield qw(e,s)}WA(e)&&ZA(e)}),DT.apply(this,arguments)}function dx(n){return gh(n)&&n.au.length<10}function hx(n,e){n.au.push(e);const t=mh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function WA(n){return gh(n)&&!mh(n).Do()&&n.au.length>0}function ZA(n){mh(n).start()}function fx(n){return TT.apply(this,arguments)}function TT(){return TT=(0,Ge.Z)(function*(n){mh(n).Xo()}),TT.apply(this,arguments)}function px(n){return CT.apply(this,arguments)}function CT(){return CT=(0,Ge.Z)(function*(n){const e=mh(n);for(const t of n.au)e.Ho(t.mutations)}),CT.apply(this,arguments)}function gx(n,e,t){return AT.apply(this,arguments)}function AT(){return AT=(0,Ge.Z)(function*(n,e,t){const r=n.au.shift(),s=P_.from(r,e,t);yield zA(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Km(n)}),AT.apply(this,arguments)}function mx(n,e){return ST.apply(this,arguments)}function ST(){return ST=(0,Ge.Z)(function*(n,e){var t;e&&mh(n).zo&&(yield(t=(0,Ge.Z)(function*(r,s){if(xm(u=s.code)&&u!==je.ABORTED){const h=r.au.shift();mh(r).No(),yield zA(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,s)),yield Km(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),WA(n)&&ZA(n)}),ST.apply(this,arguments)}function KA(n,e){return xT.apply(this,arguments)}function xT(){return xT=(0,Ge.Z)(function*(n,e){const t=ct(n);t.asyncQueue.verifyOperationInProgress(),et("RemoteStore","RemoteStore received new credentials");const r=gh(t);t.lu.add(3),yield Zm(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield X_(t)}),xT.apply(this,arguments)}function OT(n,e){return MT.apply(this,arguments)}function MT(){return MT=(0,Ge.Z)(function*(n,e){const t=ct(n);e?(t.lu.delete(2),yield X_(t)):e||(t.lu.add(2),yield Zm(t),t._u.set("Unknown"))}),MT.apply(this,arguments)}function Ym(n){return n.mu||(n.mu=function(e,t,r){const s=ct(e);return s.tu(),new rx(t,s.bo,s.authCredentials,s.appCheckCredentials,s.wt,r)}(n.datastore,n.asyncQueue,{zr:ux.bind(null,n),Jr:lx.bind(null,n),Go:cx.bind(null,n)}),n.fu.push(function(){var e=(0,Ge.Z)(function*(t){t?(n.mu.No(),_T(n)?vT(n):n._u.set("Unknown")):(yield n.mu.stop(),GA(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function mh(n){return n.gu||(n.gu=function(e,t,r){const s=ct(e);return s.tu(),new ix(t,s.bo,s.authCredentials,s.appCheckCredentials,s.wt,r)}(n.datastore,n.asyncQueue,{zr:fx.bind(null,n),Jr:mx.bind(null,n),Yo:px.bind(null,n),Jo:gx.bind(null,n)}),n.fu.push(function(){var e=(0,Ge.Z)(function*(t){t?(n.gu.No(),yield Km(n)):(yield n.gu.stop(),n.au.length>0&&(et("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class NT{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,s,u){const h=Date.now()+r,m=new NT(e,t,h,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Je(je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qm(n,e){if(rr("AsyncQueue",`${e}: ${n}`),ru(n))return new Je(je.UNAVAILABLE,`${e}: ${n}`);throw n}class Jm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||at.comparator(t.key,r.key):(t,r)=>at.comparator(t.key,r.key),this.keyedMap=rh(),this.sortedSet=new Gn(this.comparator)}static emptySet(e){return new Jm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Jm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class YA{constructor(){this.yu=new Gn(at.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):yt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Xm{constructor(e,t,r,s,u,h,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,s){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new Xm(e,t,Jm.emptySet(t),u,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class yx{constructor(){this.Iu=void 0,this.listeners=[]}}class vx{constructor(){this.queries=new cu(e=>zE(e),uu),this.onlineState="Unknown",this.Tu=new Set}}function kT(n,e){return RT.apply(this,arguments)}function RT(){return RT=(0,Ge.Z)(function*(n,e){const t=ct(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new yx),s)try{u.Iu=yield t.onListen(r)}catch(h){const m=Qm(h,`Initialization of query '${h_(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&FT(t)}),RT.apply(this,arguments)}function PT(n,e){return LT.apply(this,arguments)}function LT(){return LT=(0,Ge.Z)(function*(n,e){const t=ct(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const h=u.listeners.indexOf(e);h>=0&&(u.listeners.splice(h,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),LT.apply(this,arguments)}function _x(n,e){const t=ct(n);let r=!1;for(const s of e){const h=t.queries.get(s.query);if(h){for(const m of h.listeners)m.Au(s)&&(r=!0);h.Iu=s}}r&&FT(t)}function bx(n,e,t){const r=ct(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function FT(n){n.Tu.forEach(e=>{e.next()})}class VT{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Xm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Xm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class Ex{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class QA{constructor(e){this.wt=e}Wi(e){return ua(this.wt,e)}zi(e){return e.metadata.exists?qD(this.wt,e.document,!1):Fn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return xr(e)}}class wx{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=JA(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=cn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new QA(this.wt);for(const s of e)if(s.metadata.queries){const u=r.Wi(s.metadata.name);for(const h of s.metadata.queries){const m=(t.get(h)||Zt()).add(u);t.set(h,m)}}return t}complete(){var e=this;return(0,Ge.Z)(function*(){const t=yield function K_(n,e,t,r){return hp.apply(this,arguments)}(e.localStore,new QA(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const s of e.queries)yield Y_(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function JA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class XA{constructor(e){this.key=e}}class eS{constructor(e){this.key=e}}class tS{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Zt(),this.mutatedKeys=Zt(),this.Lu=Xf(e),this.Uu=new Jm(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new YA,s=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,h=s,m=!1;const w="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,P="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((Q,se)=>{const we=s.get(Q),Me=f_(this.query,se)?se:null,Le=!!we&&this.mutatedKeys.has(we.key),Xe=!!Me&&(Me.hasLocalMutations||this.mutatedKeys.has(Me.key)&&Me.hasCommittedMutations);let ut=!1;we&&Me?we.data.isEqual(Me.data)?Le!==Xe&&(r.track({type:3,doc:Me}),ut=!0):this.Qu(we,Me)||(r.track({type:2,doc:Me}),ut=!0,(w&&this.Lu(Me,w)>0||P&&this.Lu(Me,P)<0)&&(m=!0)):!we&&Me?(r.track({type:0,doc:Me}),ut=!0):we&&!Me&&(r.track({type:1,doc:we}),ut=!0,(w||P)&&(m=!0)),ut&&(Me?(h=h.add(Me),u=Xe?u.add(Q):u.delete(Q)):(h=h.delete(Q),u=u.delete(Q)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const Q="F"===this.query.limitType?h.last():h.first();h=h.delete(Q.key),u=u.delete(Q.key),r.track({type:1,doc:Q})}return{Uu:h,Gu:r,Mi:m,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Gu.pu();u.sort((P,Q)=>function(se,we){const Me=Le=>{switch(Le){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt()}};return Me(se)-Me(we)}(P.type,Q.type)||this.Lu(P.doc,Q.doc)),this.ju(r);const h=t?this.Wu():[],m=0===this.Bu.size&&this.current?1:0,w=m!==this.$u;return this.$u=m,0!==u.length||w?{snapshot:new Xm(this.query,e.Uu,s,u,e.mutatedKeys,0===m,w,!1),zu:h}:{zu:h}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new YA,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Zt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new eS(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new XA(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Zt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Xm.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Ix{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Dx{constructor(e){this.key=e,this.Xu=!1}}class Tx{constructor(e,t,r,s,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Zu={},this.tc=new cu(m=>zE(m),uu),this.ec=new Map,this.nc=new Set,this.sc=new Gn(at.comparator),this.ic=new Map,this.rc=new Fw,this.oc={},this.uc=new Map,this.cc=Uc.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function Cx(n,e){return UT.apply(this,arguments)}function UT(){return UT=(0,Ge.Z)(function*(n,e){const t=uC(n);let r,s;const u=t.tc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.Yu();else{const h=yield dn(t.localStore,Xi(e));t.isPrimaryClient&&jw(t.remoteStore,h);const m=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,s=yield BT(t,e,r,"current"===m)}return s}),UT.apply(this,arguments)}function BT(n,e,t,r){return jT.apply(this,arguments)}function jT(){return jT=(0,Ge.Z)(function*(n,e,t,r){n.hc=(Q,se,we)=>{return(Me=(0,Ge.Z)(function*(Le,Xe,ut,Gt){let Kt=Xe.view.Ku(ut);Kt.Mi&&(Kt=yield ph(Le.localStore,Xe.query,!1).then(({documents:Yt})=>Xe.view.Ku(Yt,Kt)));const rn=Gt&&Gt.targetChanges.get(Xe.targetId),zt=Xe.view.applyChanges(Kt,Le.isPrimaryClient,rn);return QT(Le,Xe.targetId,zt.zu),zt.snapshot}),function(Le,Xe,ut,Gt){return Me.apply(this,arguments)})(n,Q,se,we);var Me};const s=yield ph(n.localStore,e,!0),u=new tS(e,s.ji),h=u.Ku(s.documents),m=kc.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(h,n.isPrimaryClient,m);QT(n,t,w.zu);const P=new Ix(e,t,u);return n.tc.set(e,P),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),w.snapshot}),jT.apply(this,arguments)}function Ax(n,e){return qT.apply(this,arguments)}function qT(){return qT=(0,Ge.Z)(function*(n,e){const t=ct(n),r=t.tc.get(e),s=t.ec.get(r.targetId);if(s.length>1)return t.ec.set(r.targetId,s.filter(u=>!uu(u,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Br(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),e0(t.remoteStore,r.targetId),ey(t,r.targetId)}).catch(ul))):(ey(t,r.targetId),yield Br(t.localStore,r.targetId,!0))}),qT.apply(this,arguments)}function HT(){return HT=(0,Ge.Z)(function*(n,e,t){const r=lC(n);try{const s=yield function(u,h){const m=ct(u),w=$n.now(),P=h.reduce((we,Me)=>we.add(Me.key),Zt());let Q,se;return m.persistence.runTransaction("Locally write mutations","readwrite",we=>{let Me=eo(),Le=Zt();return m.Ui.getEntries(we,P).next(Xe=>{Me=Xe,Me.forEach((ut,Gt)=>{Gt.isValidDocument()||(Le=Le.add(ut))})}).next(()=>m.localDocuments.getOverlayedDocuments(we,Me)).next(Xe=>{Q=Xe;const ut=[];for(const Gt of h){const Kt=ew(Gt,Q.get(Gt.key).overlayedDocument);null!=Kt&&ut.push(new aa(Gt.key,Kt,RE(Kt.value.mapValue),Vn.exists(!0)))}return m.mutationQueue.addMutationBatch(we,w,ut,h)}).next(Xe=>{se=Xe;const ut=Xe.applyToLocalDocumentSet(Q,Le);return m.documentOverlayCache.saveOverlays(we,Xe.batchId,ut)})}).then(()=>({batchId:se.batchId,changes:__(Q)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,h,m){let w=u.oc[u.currentUser.toKey()];w||(w=new Gn($t)),w=w.insert(h,m),u.oc[u.currentUser.toKey()]=w}(r,s.batchId,t),yield Bc(r,s.changes),yield Km(r.remoteStore)}catch(s){const u=Qm(s,"Failed to persist write");t.reject(u)}}),HT.apply(this,arguments)}function nS(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,Ge.Z)(function*(n,e){const t=ct(n);try{const r=yield Ye(t.localStore,e);e.targetChanges.forEach((s,u)=>{const h=t.ic.get(u);h&&(Ut(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?h.Xu=!0:s.modifiedDocuments.size>0?Ut(h.Xu):s.removedDocuments.size>0&&(Ut(h.Xu),h.Xu=!1))}),yield Bc(t,r,e)}catch(r){yield ul(r)}}),$T.apply(this,arguments)}function rS(n,e,t){const r=ct(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.tc.forEach((u,h)=>{const m=h.view.Eu(e);m.snapshot&&s.push(m.snapshot)}),function(u,h){const m=ct(u);m.onlineState=h;let w=!1;m.queries.forEach((P,Q)=>{for(const se of Q.listeners)se.Eu(h)&&(w=!0)}),w&&FT(m)}(r.eventManager,e),s.length&&r.Zu.Go(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function xx(n,e,t){return GT.apply(this,arguments)}function GT(){return GT=(0,Ge.Z)(function*(n,e,t){const r=ct(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.ic.get(e),u=s&&s.key;if(u){let h=new Gn(at.comparator);h=h.insert(u,Fn.newNoDocument(u,kt.min()));const m=Zt().add(u),w=new op(kt.min(),new Map,new En($t),h,m);yield nS(r,w),r.sc=r.sc.remove(u),r.ic.delete(e),JT(r)}else yield Br(r.localStore,e,!1).then(()=>ey(r,e,t)).catch(ul)}),GT.apply(this,arguments)}function Ox(n,e){return zT.apply(this,arguments)}function zT(){return zT=(0,Ge.Z)(function*(n,e){const t=ct(n),r=e.batch.batchId;try{const s=yield st(t.localStore,e);YT(t,r,null),KT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Bc(t,s)}catch(s){yield ul(s)}}),zT.apply(this,arguments)}function Mx(n,e,t){return WT.apply(this,arguments)}function WT(){return WT=(0,Ge.Z)(function*(n,e,t){const r=ct(n);try{const s=yield function(u,h){const m=ct(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let P;return m.mutationQueue.lookupMutationBatch(w,h).next(Q=>(Ut(null!==Q),P=Q.keys(),m.mutationQueue.removeMutationBatch(w,Q))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,P,h)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,P)).next(()=>m.localDocuments.getDocuments(w,P))})}(r.localStore,e);YT(r,e,t),KT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Bc(r,s)}catch(s){yield ul(s)}}),WT.apply(this,arguments)}function ZT(){return ZT=(0,Ge.Z)(function*(n,e){const t=ct(n);gh(t.remoteStore)||et("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const h=ct(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.uc.get(r)||[];s.push(e),t.uc.set(r,s)}catch(r){const s=Qm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),ZT.apply(this,arguments)}function KT(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function YT(n,e,t){const r=ct(n);let s=r.oc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.oc[r.currentUser.toKey()]=s}}function ey(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||iS(n,r)})}function iS(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(e0(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),JT(n))}function QT(n,e,t){for(const r of t)r instanceof XA?(n.rc.addReference(r.key,e),kx(n,r)):r instanceof eS?(et("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||iS(n,r.key)):yt()}function kx(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(et("SyncEngine","New document in limbo: "+t),n.nc.add(r),JT(n))}function JT(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new at(cn.fromString(e)),r=n.cc.next();n.ic.set(r,new Dx(t)),n.sc=n.sc.insert(t,r),jw(n.remoteStore,new yl(Xi(Jd(t.path)),r,2,Ji.ot))}}function Bc(n,e,t){return XT.apply(this,arguments)}function XT(){return XT=(0,Ge.Z)(function*(n,e,t){const r=ct(n),s=[],u=[],h=[];var m;r.tc.isEmpty()||(r.tc.forEach((m,w)=>{h.push(r.hc(w,e,t).then(P=>{if(P){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,P.fromCache?"not-current":"current"),s.push(P);const Q=ne.Vi(w.targetId,P);u.push(Q)}}))}),yield Promise.all(h),r.Zu.Go(s),yield(m=(0,Ge.Z)(function*(w,P){const Q=ct(w);try{yield Q.persistence.runTransaction("notifyLocalViewChanges","readwrite",se=>Fe.forEach(P,we=>Fe.forEach(we.Pi,Me=>Q.persistence.referenceDelegate.addReference(se,we.targetId,Me)).next(()=>Fe.forEach(we.vi,Me=>Q.persistence.referenceDelegate.removeReference(se,we.targetId,Me)))))}catch(se){if(!ru(se))throw se;et("LocalStore","Failed to update sequence numbers: "+se)}for(const se of P){const we=se.targetId;if(!se.fromCache){const Me=Q.$i.get(we),Xe=Me.withLastLimboFreeSnapshotVersion(Me.snapshotVersion);Q.$i=Q.$i.insert(we,Xe)}}}),function(w,P){return m.apply(this,arguments)})(r.localStore,u))}),XT.apply(this,arguments)}function Rx(n,e){return eC.apply(this,arguments)}function eC(){return eC=(0,Ge.Z)(function*(n,e){const t=ct(n);if(!t.currentUser.isEqual(e)){et("SyncEngine","User change. New user:",e.toKey());const r=yield $e(t.localStore,e);t.currentUser=e,(s=t).uc.forEach(h=>{h.forEach(m=>{m.reject(new Je(je.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Bc(t,r.Ki)}var s}),eC.apply(this,arguments)}function Px(n,e){const t=ct(n),r=t.ic.get(e);if(r&&r.Xu)return Zt().add(r.key);{let s=Zt();const u=t.ec.get(e);if(!u)return s;for(const h of u){const m=t.tc.get(h);s=s.unionWith(m.view.qu)}return s}}function Lx(n,e){return tC.apply(this,arguments)}function tC(){return tC=(0,Ge.Z)(function*(n,e){const t=ct(n),r=yield ph(t.localStore,e.query,!0),s=e.view.Ju(r);return t.isPrimaryClient&&QT(t,e.targetId,s.zu),s}),tC.apply(this,arguments)}function Fx(n,e){return nC.apply(this,arguments)}function nC(){return nC=(0,Ge.Z)(function*(n,e){const t=ct(n);return Gm(t.localStore,e).then(r=>Bc(t,r))}),nC.apply(this,arguments)}function Vx(n,e,t,r){return rC.apply(this,arguments)}function rC(){return rC=(0,Ge.Z)(function*(n,e,t,r){const s=ct(n),u=yield function(h,m){const w=ct(h),P=ct(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",Q=>P.yn(Q,m).next(se=>se?w.localDocuments.getDocuments(Q,se):Fe.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield Km(s.remoteStore):"acknowledged"===t||"rejected"===t?(YT(s,e,r||null),KT(s,e),m=e,ct(ct(s.localStore).mutationQueue).In(m)):yt(),yield Bc(s,u)):et("SyncEngine","Cannot apply mutation batch with id: "+e)}),rC.apply(this,arguments)}function iC(){return iC=(0,Ge.Z)(function*(n,e){const t=ct(n);if(uC(t),lC(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield oS(t,r.toArray());t.ac=!0,yield OT(t.remoteStore,!0);for(const u of s)jw(t.remoteStore,u)}else if(!1===e&&!1!==t.ac){const r=[];let s=Promise.resolve();t.ec.forEach((u,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):s=s.then(()=>(ey(t,h),Br(t.localStore,h,!0))),e0(t.remoteStore,h)}),yield s,yield oS(t,r),function(u){const h=ct(u);h.ic.forEach((m,w)=>{e0(h.remoteStore,w)}),h.rc.cs(),h.ic=new Map,h.sc=new Gn(at.comparator)}(t),t.ac=!1,yield OT(t.remoteStore,!1)}}),iC.apply(this,arguments)}function oS(n,e,t){return oC.apply(this,arguments)}function oC(){return oC=(0,Ge.Z)(function*(n,e,t){const r=ct(n),s=[],u=[];for(const h of e){let m;const w=r.ec.get(h);if(w&&0!==w.length){m=yield dn(r.localStore,Xi(w[0]));for(const P of w){const Q=r.tc.get(P),se=yield Lx(r,Q);se.snapshot&&u.push(se.snapshot)}}else{const P=yield $m(r.localStore,h);m=yield dn(r.localStore,P),yield BT(r,sS(P),h,!1)}s.push(m)}return r.Zu.Go(u),s}),oC.apply(this,arguments)}function sS(n){return $E(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Bx(n){const e=ct(n);return ct(ct(e.localStore).persistence).Ri()}function jx(n,e,t,r){return sC.apply(this,arguments)}function sC(){return sC=(0,Ge.Z)(function*(n,e,t,r){const s=ct(n);if(s.ac)return void et("SyncEngine","Ignoring unexpected query state notification.");const u=s.ec.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const h=yield Gm(s.localStore,Jf(u[0])),m=op.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Bc(s,h,m);break}case"rejected":yield Br(s.localStore,e,!0),ey(s,e,r);break;default:yt()}}),sC.apply(this,arguments)}function qx(n,e,t){return aC.apply(this,arguments)}function aC(){return aC=(0,Ge.Z)(function*(n,e,t){const r=uC(n);if(r.ac){for(const s of e){if(r.ec.has(s)){et("SyncEngine","Adding an already active target "+s);continue}const u=yield $m(r.localStore,s),h=yield dn(r.localStore,u);yield BT(r,sS(u),h.targetId,!1),jw(r.remoteStore,h)}for(const s of t)r.ec.has(s)&&(yield Br(r.localStore,s,!1).then(()=>{e0(r.remoteStore,s),ey(r,s)}).catch(ul))}}),aC.apply(this,arguments)}function uC(n){const e=ct(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Px.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xx.bind(null,e),e.Zu.Go=_x.bind(null,e.eventManager),e.Zu.lc=bx.bind(null,e.eventManager),e}function lC(n){const e=ct(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ox.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Mx.bind(null,e),e}class aS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ge.Z)(function*(){t.wt=J_(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return Ne(this.persistence,new pe,e.initialUser,this.wt)}_c(e){return new i(a.Os,this.wt)}dc(e){return new BA}terminate(){var e=this;return(0,Ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class uS extends aS{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ge.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield lC(r.yc.syncEngine),yield Km(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return Ne(this.persistence,new pe,e.initialUser,this.wt)}mc(e,t){return new sT(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new DD(t,this.persistence);return new ID(e.asyncQueue,r)}_c(e){const t=z(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?mi.withCacheSize(this.cacheSizeBytes):mi.DEFAULT;return new v(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,qA(),Bw(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new BA}}class $x extends uS{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ge.Z)(function*(){yield t().call(r,e);const s=r.yc.syncEngine;r.sharedClientState instanceof fT&&(r.sharedClientState.syncEngine={kr:Vx.bind(null,s),Mr:jx.bind(null,s),Or:qx.bind(null,s),Ri:Bx.bind(null,s),Nr:Fx.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var u=(0,Ge.Z)(function*(h){yield function Ux(n,e){return iC.apply(this,arguments)}(r.yc.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start():h||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(h&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():h||r.indexBackfillerScheduler.stop())});return function(h){return u.apply(this,arguments)}}())})()}dc(e){const t=qA();if(!fT.V(t))throw new Je(je.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=z(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class cC{initialize(e,t){var r=this;return(0,Ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>rS(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=Rx.bind(null,r.syncEngine),yield OT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new vx}createDatastore(e){const t=J_(e.databaseInfo.databaseId),r=new nx(e.databaseInfo);return new ox(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>rS(this.syncEngine,m,0),h=jA.V()?new jA:new X1,new ax(t,r,s,u,h);var t,r,s,u,h}createSyncEngine(e,t){return function(r,s,u,h,m,w,P){const Q=new Tx(r,s,u,h,m,w);return P&&(Q.ac=!0),Q}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ge.Z)(function*(t){const r=ct(t);et("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Zm(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function lS(n,e=10240){let t=0;return{read:()=>(0,Ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Hw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Gx{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Jr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Ge.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Ge.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Ge.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),s=Number(r);isNaN(s)&&e.Pc(`length string (${r}) is not valid number`);const u=yield e.vc(s);return new Ex(JSON.parse(u),t.length+s)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Ge.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,Ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Ge.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class zx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Je(je.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,Ge.Z)(function*(u,h){const m=ct(u),w=sh(m.wt)+"/documents",P={documents:h.map(Me=>oh(m.wt,Me))},Q=yield m.ao("BatchGetDocuments",w,P,h.length),se=new Map;Q.forEach(Me=>{const Le=function TA(n,e){return"found"in e?function(t,r){Ut(!!r.found);const s=ua(t,r.found.name),u=xr(r.found.updateTime),h=new Fr({mapValue:{fields:r.found.fields}});return Fn.newFoundDocument(s,u,h)}(n,e):"missing"in e?function(t,r){Ut(!!r.missing),Ut(!!r.readTime);const s=ua(t,r.missing),u=xr(r.readTime);return Fn.newNoDocument(s,u)}(n,e):yt()}(m.wt,Me);se.set(Le.key.toString(),Le)});const we=[];return h.forEach(Me=>{const Le=se.get(Me.toString());Ut(!!Le),we.push(Le)}),we}),function(u,h){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new nh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=at.fromPath(s);e.mutations.push(new v_(u,e.precondition(u)))}),yield(r=(0,Ge.Z)(function*(s,u){const h=ct(s),m=sh(h.wt)+"/documents",w={writes:u.map(P=>Pm(h.wt,P))};yield h.ro("Commit",m,w)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw yt();t=kt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Je(je.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Vn.updateTime(t):Vn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(kt.min()))throw new Je(je.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vn.updateTime(t)}return Vn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Wx{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Dc=r.maxAttempts,this.So=new pT(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Ge.Z)(function*(){const t=new zx(e.datastore),r=e.xc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Nc(u)}))}).catch(s=>{e.Nc(s)})}))}xc(e){try{const t=this.updateFunction(e);return!Zd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!xm(t)}return!1}}class Zx{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Lr.UNAUTHENTICATED,this.clientId=_E.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,Ge.Z)(function*(m){et("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(et("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,Ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Je(je.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Qm(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function cS(n,e){return dC.apply(this,arguments)}function dC(){return dC=(0,Ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),et("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,Ge.Z)(function*(u){r.isEqual(u)||(yield $e(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),dC.apply(this,arguments)}function dS(n,e){return hC.apply(this,arguments)}function hC(){return hC=(0,Ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield fC(n);et("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>KA(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>KA(e.remoteStore,u)),n.onlineComponents=e}),hC.apply(this,arguments)}function fC(n){return pC.apply(this,arguments)}function pC(){return pC=(0,Ge.Z)(function*(n){return n.offlineComponents||(et("FirestoreClient","Using default OfflineComponentProvider"),yield cS(n,new aS)),n.offlineComponents}),pC.apply(this,arguments)}function $w(n){return gC.apply(this,arguments)}function gC(){return gC=(0,Ge.Z)(function*(n){return n.onlineComponents||(et("FirestoreClient","Using default OnlineComponentProvider"),yield dS(n,new cC)),n.onlineComponents}),gC.apply(this,arguments)}function hS(n){return fC(n).then(e=>e.persistence)}function Gw(n){return fC(n).then(e=>e.localStore)}function fS(n){return $w(n).then(e=>e.remoteStore)}function mC(n){return $w(n).then(e=>e.syncEngine)}function ty(n){return yC.apply(this,arguments)}function yC(){return yC=(0,Ge.Z)(function*(n){const e=yield $w(n),t=e.eventManager;return t.onListen=Cx.bind(null,e.syncEngine),t.onUnlisten=Ax.bind(null,e.syncEngine),t}),yC.apply(this,arguments)}function pS(n,e,t={}){const r=new Jr;return n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function(s,u,h,m,w){const P=new Hw({next:se=>{u.enqueueAndForget(()=>PT(s,Q));const we=se.docs.has(h);!we&&se.fromCache?w.reject(new Je(je.UNAVAILABLE,"Failed to get document because the client is offline.")):we&&se.fromCache&&m&&"server"===m.source?w.reject(new Je(je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(se)},error:se=>w.reject(se)}),Q=new VT(Jd(h.path),P,{includeMetadataChanges:!0,Du:!0});return kT(s,Q)}(yield ty(n),n.asyncQueue,e,t,r)})),r.promise}function gS(n,e,t={}){const r=new Jr;return n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function(s,u,h,m,w){const P=new Hw({next:se=>{u.enqueueAndForget(()=>PT(s,Q)),se.fromCache&&"server"===m.source?w.reject(new Je(je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(se)},error:se=>w.reject(se)}),Q=new VT(h,P,{includeMetadataChanges:!0,Du:!0});return kT(s,Q)}(yield ty(n),n.asyncQueue,e,t,r)})),r.promise}const mS=new Map;function vC(n,e,t){if(!t)throw new Je(je.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yS(n,e,t,r){if(!0===e&&!0===r)throw new Je(je.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vS(n){if(!at.isDocumentKey(n))throw new Je(je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _S(n){if(at.isDocumentKey(n))throw new Je(je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zw(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":yt()}function gn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Je(je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zw(n);throw new Je(je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function bS(n,e){if(e<=0)throw new Je(je.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ES{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Je(je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Je(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,yS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class t0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ES({}),this._settingsFrozen=!1,e instanceof ll?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Je(je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ll(s.options.projectId)}(e))}get app(){if(!this._app)throw new Je(je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Je(je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ES(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new yE;switch(t.type){case"gapi":const r=t.client;return Ut(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new vE(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Je(je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=mS.get(e);t&&(et("ComponentProvider","Removing Datastore"),mS.delete(e),t.terminate())}(this),Promise.resolve()}}class Qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new El(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class to{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new to(this.firestore,e,this._query)}}class El extends to{constructor(e,t,r){super(e,t,Jd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new at(e))}withConverter(e){return new El(this.firestore,e,this._path)}}function wS(n,e,...t){if(n=(0,nn.m9)(n),vC("collection","path",e),n instanceof t0){const r=cn.fromString(e,...t);return _S(r),new El(n,null,r)}{if(!(n instanceof Qn||n instanceof El))throw new Je(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return _S(r),new El(n.firestore,null,r)}}function Ww(n,e,...t){if(n=(0,nn.m9)(n),1===arguments.length&&(e=_E.I()),vC("doc","path",e),n instanceof t0){const r=cn.fromString(e,...t);return vS(r),new Qn(n,null,new at(r))}{if(!(n instanceof Qn||n instanceof El))throw new Je(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(cn.fromString(e,...t));return vS(r),new Qn(n.firestore,n instanceof El?n.converter:null,new at(r))}}function IS(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),(n instanceof Qn||n instanceof El)&&(e instanceof Qn||e instanceof El)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function DS(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),n instanceof to&&e instanceof to&&n.firestore===e.firestore&&uu(n._query,e._query)&&n.converter===e.converter}class oO{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new pT(this,"async_queue_retry"),this.Kc=()=>{const t=Bw();t&&et("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Bw();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=Bw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Jr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return(0,Ge.Z)(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(t){if(!ru(t))throw t;et("AsyncQueue","Operation failed with retryable error: "+t)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,rr("INTERNAL UNHANDLED ERROR: ",function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),h}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Mc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const s=NT.createAndSchedule(this,e,t,r,u=>this.Wc(u));return this.$c.push(s),s}Gc(){this.Bc&&yt()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ge.Z)(function*(){let t;do{t=e.Mc,yield t}while(t!==e.Mc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function _C(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class sO{constructor(){this._progressObserver={},this._taskCompletionResolver=new Jr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class or extends t0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new oO,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||TS(this),this._firestoreClient.terminate()}}function jr(n){return n._firestoreClient||TS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function TS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new TD(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new Zx(n._authCredentials,n._appCheckCredentials,n._queue,r)}function CS(n,e,t){const r=new Jr;return n.asyncQueue.enqueue((0,Ge.Z)(function*(){try{yield cS(n,t),yield dS(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(h=u).name?h.code===je.FAILED_PRECONDITION||h.code===je.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code))throw u;al("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var h})).then(()=>r.promise)}function AS(n){if(n._initialized||n._terminated)throw new Je(je.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class jc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Je(je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wl(Sr.fromBase64String(e))}catch(t){throw new Je(je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wl(Sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pp{constructor(e){this._methodName=e}}class Zw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Je(je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Je(je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const mO=/^__.*__$/;class yO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new aa(e,this.data,this.fieldMask,t,this.fieldTransforms):new th(e,this.data,t,this.fieldTransforms)}}class SS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new aa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt()}}class Kw{constructor(e,t,r,s,u,h){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=s,void 0===u&&this.Xc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new Kw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ta({path:r,na:!1});return s.sa(e),s}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ta({path:r,na:!1});return s.Xc(),s}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return Jw(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(xS(this.Zc)&&mO.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class vO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||J_(e)}aa(e,t,r,s=!1){return new Kw({Zc:e,methodName:t,ca:r,path:Yn.emptyPath(),na:!1,ua:s},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function gp(n){const e=n._freezeSettings(),t=J_(n._databaseId);return new vO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yw(n,e,t,r,s,u={}){const h=n.aa(u.merge||u.mergeFields?2:0,e,t,s);IC("Data must be an object, but it was:",h,r);const m=NS(r,h);let w,P;if(u.merge)w=new vo(h.fieldMask),P=h.fieldTransforms;else if(u.mergeFields){const Q=[];for(const se of u.mergeFields){const we=DC(e,se,t);if(!h.contains(we))throw new Je(je.INVALID_ARGUMENT,`Field '${we}' is specified in your field mask but missing from your input data.`);RS(Q,we)||Q.push(we)}w=new vo(Q),P=h.fieldTransforms.filter(se=>w.covers(se.field))}else w=null,P=h.fieldTransforms;return new yO(new Fr(m),w,P)}class n0 extends pp{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n0}}function OS(n,e,t){return new Kw({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class bC extends pp{_toFieldTransform(e){return new tp(e.path,new ep)}isEqual(e){return e instanceof bC}}class _O extends pp{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=OS(this,e,!0),r=this.ha.map(u=>mp(u,t)),s=new lu(r);return new tp(e.path,s)}isEqual(e){return this===e}}class bO extends pp{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=OS(this,e,!0),r=this.ha.map(u=>mp(u,t)),s=new pl(r);return new tp(e.path,s)}isEqual(e){return this===e}}class EO extends pp{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new gl(e.wt,g_(e.wt,this.la));return new tp(e.path,t)}isEqual(e){return this===e}}function EC(n,e,t,r){const s=n.aa(1,e,t);IC("Data must be an object, but it was:",s,r);const u=[],h=Fr.empty();iu(r,(w,P)=>{const Q=Qw(e,w,t);P=(0,nn.m9)(P);const se=s.ia(Q);if(P instanceof n0)u.push(Q);else{const we=mp(P,se);null!=we&&(u.push(Q),h.set(Q,we))}});const m=new vo(u);return new SS(h,m,s.fieldTransforms)}function wC(n,e,t,r,s,u){const h=n.aa(1,e,t),m=[DC(e,r,t)],w=[s];if(u.length%2!=0)throw new Je(je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let we=0;we<u.length;we+=2)m.push(DC(e,u[we])),w.push(u[we+1]);const P=[],Q=Fr.empty();for(let we=m.length-1;we>=0;--we)if(!RS(P,m[we])){const Me=m[we];let Le=w[we];Le=(0,nn.m9)(Le);const Xe=h.ia(Me);if(Le instanceof n0)P.push(Me);else{const ut=mp(Le,Xe);null!=ut&&(P.push(Me),Q.set(Me,ut))}}const se=new vo(P);return new SS(Q,se,h.fieldTransforms)}function MS(n,e,t,r=!1){return mp(t,n.aa(r?4:3,e))}function mp(n,e){if(kS(n=(0,nn.m9)(n)))return IC("Unsupported field value:",e,n),NS(n,e);if(n instanceof pp)return function(t,r){if(!xS(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const h of t){let m=mp(h,r.ra(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,nn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return g_(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=$n.fromDate(t);return{timestampValue:sp(r.wt,s)}}if(t instanceof $n){const s=new $n(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:sp(r.wt,s)}}if(t instanceof Zw)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof wl)return{bytesValue:E_(r.wt,t._byteString)};if(t instanceof Qn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.oa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Rm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${zw(t)}`)}(n,e)}function NS(n,e){const t={};return o_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):iu(n,(r,s)=>{const u=mp(s,e.ea(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function kS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof $n||n instanceof Zw||n instanceof wl||n instanceof Qn||n instanceof pp)}function IC(n,e,t){if(!kS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=zw(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function DC(n,e,t){if((e=(0,nn.m9)(e))instanceof jc)return e._internalPath;if("string"==typeof e)return Qw(n,e);throw Jw("Field path arguments must be of type string or ",n,!1,void 0,t)}const wO=new RegExp("[~\\*/\\[\\]]");function Qw(n,e,t){if(e.search(wO)>=0)throw Jw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new jc(...e.split("."))._internalPath}catch(r){throw Jw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jw(n,e,t,r,s){const u=r&&!r.isEmpty(),h=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||h)&&(w+=" (found",u&&(w+=` in field ${r}`),h&&(w+=` in document ${s}`),w+=")"),new Je(je.INVALID_ARGUMENT,m+n+w)}function RS(n,e){return n.some(t=>t.isEqual(e))}class r0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new IO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Xw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class IO extends r0{data(){return super.data()}}function Xw(n,e){return"string"==typeof e?Qw(n,e):e instanceof jc?e._internalPath:e._delegate._internalPath}class yp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qc extends r0{constructor(e,t,r,s,u,h){super(e,t,r,s,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new o0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Xw("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class o0 extends qc{data(e={}){return super.data(e)}}class yh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new yp(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new o0(this._firestore,this._userDataWriter,r.key,r,new yp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Je(je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new o0(r._firestore,r._userDataWriter,h.doc.key,h.doc,new yp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>s||3!==h.type).map(h=>{const m=new o0(r._firestore,r._userDataWriter,h.doc.key,h.doc,new yp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,P=-1;return 0!==h.type&&(w=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),1!==h.type&&(u=u.add(h.doc),P=u.indexOf(h.doc.key)),{type:DO(h.type),doc:m,oldIndex:w,newIndex:P}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function DO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt()}}function PS(n,e){return n instanceof qc&&e instanceof qc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof yh&&e instanceof yh&&n._firestore===e._firestore&&DS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function LS(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Je(je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class s0{}function vh(n,...e){for(const t of e)n=t._apply(n);return n}class TO extends s0{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=gp(e.firestore),r=function(s,u,h,m,w,P,Q){let se;if(w.isKeyField()){if("array-contains"===P||"array-contains-any"===P)throw new Je(je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${P}' queries on documentId().`);if("in"===P||"not-in"===P){qS(Q,P);const Me=[];for(const Le of Q)Me.push(jS(m,s,Le));se={arrayValue:{values:Me}}}else se=jS(m,s,Q)}else"in"!==P&&"not-in"!==P&&"array-contains-any"!==P||qS(Q,P),se=MS(h,"where",Q,"in"===P||"not-in"===P);const we=ei.create(w,P,se);return function(Me,Le){if(Le.ht()){const ut=d_(Me);if(null!==ut&&!ut.isEqual(Le.field))throw new Je(je.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ut.toString()}' and '${Le.field.toString()}'`);const Gt=Mc(Me);null!==Gt&&HS(0,Le.field,Gt)}const Xe=function(ut,Gt){for(const Kt of ut.filters)if(Gt.indexOf(Kt.op)>=0)return Kt.op;return null}(Me,function(ut){switch(ut){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Le.op));if(null!==Xe)throw new Je(je.INVALID_ARGUMENT,Xe===Le.op?`Invalid query. You cannot use more than one '${Le.op.toString()}' filter.`:`Invalid query. You cannot use '${Le.op.toString()}' filters with '${Xe.toString()}' filters.`)}(s,we),we}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new to(e.firestore,e.converter,function(s,u){const h=s.filters.concat([u]);return new au(s.path,s.collectionGroup,s.explicitOrderBy.slice(),h,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class AO extends s0{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Je(je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Je(je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Oc(s,u);return function(m,w){if(null===Mc(m)){const P=d_(m);null!==P&&HS(0,P,w.field)}}(r,h),h}(e._query,this.fa,this.wa);return new to(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new au(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class FS extends s0{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new to(e.firestore,e.converter,Xd(e._query,this.ma,this.ga))}}class VS extends s0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=BS(e,this.type,this.ya,this.pa);return new to(e.firestore,e.converter,(s=t,new au((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class US extends s0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=BS(e,this.type,this.ya,this.pa);return new to(e.firestore,e.converter,(s=t,new au((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function BS(n,e,t,r){if(t[0]=(0,nn.m9)(t[0]),t[0]instanceof r0)return function(s,u,h,m,w){if(!m)throw new Je(je.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const P=[];for(const Q of Si(s))if(Q.field.isKeyField())P.push(hl(u,m.key));else{const se=m.data.field(Q.field);if(s_(se))throw new Je(je.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===se){const we=Q.field.canonicalString();throw new Je(je.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${we}' (used as the orderBy) does not exist.`)}P.push(se)}return new su(P,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=gp(n.firestore);return function(u,h,m,w,P,Q){const se=u.explicitOrderBy;if(P.length>se.length)throw new Je(je.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const we=[];for(let Me=0;Me<P.length;Me++){const Le=P[Me];if(se[Me].field.isKeyField()){if("string"!=typeof Le)throw new Je(je.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof Le}`);if(!Qf(u)&&-1!==Le.indexOf("/"))throw new Je(je.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${Le}' contains a slash.`);const Xe=u.path.child(cn.fromString(Le));if(!at.isDocumentKey(Xe))throw new Je(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Xe}' is not because it contains an odd number of segments.`);const ut=new at(Xe);we.push(hl(h,ut))}else{const Xe=MS(m,w,Le);we.push(Xe)}}return new su(we,Q)}(n._query,n.firestore._databaseId,s,e,t,r)}}function jS(n,e,t){if("string"==typeof(t=(0,nn.m9)(t))){if(""===t)throw new Je(je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qf(e)&&-1!==t.indexOf("/"))throw new Je(je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(cn.fromString(t));if(!at.isDocumentKey(r))throw new Je(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hl(n,new at(r))}if(t instanceof Qn)return hl(n,t._key);throw new Je(je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zw(t)}.`)}function qS(n,e){if(!Array.isArray(n)||0===n.length)throw new Je(je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Je(je.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function HS(n,e,t){if(!t.isEqual(e))throw new Je(je.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const PO={maxAttempts:5};class TC{convertValue(e,t="none"){switch(dl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw yt()}}convertObject(e,t){const r={};return iu(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Zw(ir(e.latitude),ir(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ac(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){const t=Cc(e);return new $n(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=cn.fromString(e);Ut(A_(r));const s=new ll(r.get(1),r.get(3)),u=new at(r.popFirst(5));return s.isEqual(t)||rr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function eI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class LO extends TC{constructor(e){super(),this.firestore=e}convertBytes(e){return new wl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}class $S{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gp(e)}set(e,t,r){this._verifyNotCommitted();const s=_h(e,this._firestore),u=eI(s.converter,t,r),h=Yw(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(h.toMutation(s._key,Vn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=_h(e,this._firestore);let h;return h="string"==typeof(t=(0,nn.m9)(t))||t instanceof jc?wC(this._dataReader,"WriteBatch.update",u._key,t,r,s):EC(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,Vn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_h(e,this._firestore);return this._mutations=this._mutations.concat(new nh(t._key,Vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Je(je.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _h(n,e){if((n=(0,nn.m9)(n)).firestore!==e)throw new Je(je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class vp extends TC{constructor(e){super(),this.firestore=e}convertBytes(e){return new wl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}function GS(n,e,t){n=gn(n,Qn);const r=gn(n.firestore,or),s=eI(n.converter,e,t);return ny(r,[Yw(gp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Vn.none())])}function zS(n,e,t,...r){n=gn(n,Qn);const s=gn(n.firestore,or),u=gp(s);let h;return h="string"==typeof(e=(0,nn.m9)(e))||e instanceof jc?wC(u,"updateDoc",n._key,e,t,r):EC(u,"updateDoc",n._key,e),ny(s,[h.toMutation(n._key,Vn.exists(!0))])}function WS(n,...e){var t,r,s;n=(0,nn.m9)(n);let u={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||_C(e[h])||(u=e[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges};if(_C(e[h])){const se=e[h];e[h]=null===(t=se.next)||void 0===t?void 0:t.bind(se),e[h+1]=null===(r=se.error)||void 0===r?void 0:r.bind(se),e[h+2]=null===(s=se.complete)||void 0===s?void 0:s.bind(se)}let w,P,Q;if(n instanceof Qn)P=gn(n.firestore,or),Q=Jd(n._key.path),w={next:se=>{e[h]&&e[h](CC(P,n,se))},error:e[h+1],complete:e[h+2]};else{const se=gn(n,to);P=gn(se.firestore,or),Q=se._query;const we=new vp(P);w={next:Me=>{e[h]&&e[h](new yh(P,we,se,Me))},error:e[h+1],complete:e[h+2]},LS(n._query)}return function(se,we,Me,Le){const Xe=new Hw(Le),ut=new VT(we,Xe,Me);return se.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return kT(yield ty(se),ut)})),()=>{Xe.Tc(),se.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return PT(yield ty(se),ut)}))}}(jr(P),Q,m,w)}function ny(n,e){return function(t,r){const s=new Jr;return t.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function Sx(n,e,t){return HT.apply(this,arguments)}(yield mC(t),r,s)})),s.promise}(jr(n),e)}function CC(n,e,t){const r=t.docs.get(e._key),s=new vp(n);return new qc(n,s,e._key,r,new yp(t.hasPendingWrites,t.fromCache),e.converter)}class zO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=gp(e)}get(e){const t=_h(e,this._firestore),r=new LO(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return yt();const u=s[0];if(u.isFoundDocument())return new r0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new r0(this._firestore,r,t._key,null,t.converter);throw yt()})}set(e,t,r){const s=_h(e,this._firestore),u=eI(s.converter,t,r),h=Yw(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,h),this}update(e,t,r,...s){const u=_h(e,this._firestore);let h;return h="string"==typeof(t=(0,nn.m9)(t))||t instanceof jc?wC(this._dataReader,"Transaction.update",u._key,t,r,s):EC(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,h),this}delete(e){const t=_h(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_h(e,this._firestore),r=new vp(this._firestore);return super.get(e).then(s=>new qc(this._firestore,r,t._key,s._document,new yp(!1,!1),t.converter))}}function AC(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Je("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function KS(){if("undefined"==typeof Uint8Array)throw new Je("unimplemented","Uint8Arrays are not available in this environment.")}function YS(){if(!function SE(){return"undefined"!=typeof atob}())throw new Je("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){oa=Ju.SDK_VERSION,(0,Ju._registerComponent)(new gf.wA("firestore",(t,{options:r})=>{const s=t.getProvider("app").getImmediate(),u=new or(s,new mD(t.getProvider("auth-internal")),new vD(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Ju.registerVersion)(Xv,"3.4.14",n),(0,Ju.registerVersion)(Xv,"3.4.14","esm2017")}();class a0{constructor(e){this._delegate=e}static fromBase64String(e){return YS(),new a0(wl.fromBase64String(e))}static fromUint8Array(e){return KS(),new a0(wl.fromUint8Array(e))}toBase64(){return YS(),this._delegate.toBase64()}toUint8Array(){return KS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function SC(n){return function tM(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class nM{enableIndexedDbPersistence(e,t){return function uO(n,e){AS(n=gn(n,or));const t=jr(n),r=n._freezeSettings(),s=new cC;return CS(t,s,new uS(s,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function lO(n){AS(n=gn(n,or));const e=jr(n),t=n._freezeSettings(),r=new cC;return CS(e,r,new $x(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function cO(n){if(n._initialized&&!n._terminated)throw new Je(je.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Jr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ge.Z)(function*(){try{yield(t=(0,Ge.Z)(function*(r){if(!Cs.V())return Promise.resolve();const s=r+"main";yield Cs.delete(s)}),function(r){return t.apply(this,arguments)})(z(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class QS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ll||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&al("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function rO(n,e,t,r={}){var s;const u=(n=gn(n,t0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&al("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=Lr.MOCK_USER;else{h=(0,nn.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Je(je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Lr(w)}n._authCredentials=new mm(new gD(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function hO(n){return function Kx(n){return n.asyncQueue.enqueue((0,Ge.Z)(function*(){const e=yield hS(n),t=yield fS(n);return e.setNetworkEnabled(!0),function(r){const s=ct(r);return s.lu.delete(0),X_(s)}(t)}))}(jr(n=gn(n,or)))}(this._delegate)}disableNetwork(){return function fO(n){return function Yx(n){return n.asyncQueue.enqueue((0,Ge.Z)(function*(){const e=yield hS(n),t=yield fS(n);return e.setNetworkEnabled(!1),(r=(0,Ge.Z)(function*(s){const u=ct(s);u.lu.add(0),yield Zm(u),u._u.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(jr(n=gn(n,or)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,yS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function dO(n){return function(e){const t=new Jr;return e.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function Nx(n,e){return ZT.apply(this,arguments)}(yield mC(e),t)})),t.promise}(jr(n=gn(n,or)))}(this._delegate)}onSnapshotsInSync(e){return function GO(n,e){return function Xx(n,e){const t=new Hw(e);return n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return r=yield ty(n),s=t,ct(r).Tu.add(s),void s.next();var r,s})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return r=yield ty(n),s=t,void ct(r).Tu.delete(s);var r,s}))}}(jr(n=gn(n,or)),_C(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Je("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ry(this,wS(this._delegate,e))}catch(t){throw Eo(t,"collection()","Firestore.collection()")}}doc(e){try{return new la(this,Ww(this._delegate,e))}catch(t){throw Eo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new wo(this,function iO(n,e){if(n=gn(n,t0),vC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Je(je.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new to(n,null,(t=e,new au(cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Eo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function WO(n,e,t){n=gn(n,or);const r=Object.assign(Object.assign({},PO),t);return function(s){if(s.maxAttempts<1)throw new Je(je.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function eO(n,e,t){const r=new Jr;return n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){const s=yield(u=n,$w(u).then(h=>h.datastore));var u;new Wx(n.asyncQueue,s,t,e,r).run()})),r.promise}(jr(n),s=>e(new zO(n,s)),r)}(this._delegate,t=>e(new JS(this,t)))}batch(){return jr(this._delegate),new XS(new $S(this._delegate,e=>ny(this._delegate,e)))}loadBundle(e){return function pO(n,e){const t=jr(n=gn(n,or)),r=new sO;return function tO(n,e,t,r){const s=function(u,h){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,P){if(w instanceof Uint8Array)return lS(w,P);if(w instanceof ArrayBuffer)return lS(new Uint8Array(w),P);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new Gx(w,h);var w}(t,J_(e));n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){!function Hx(n,e,t){const r=ct(n);var s;(s=(0,Ge.Z)(function*(u,h,m){try{const w=yield h.getMetadata();if(yield function(we,Me){const Le=ct(we),Xe=xr(Me.createTime);return Le.persistence.runTransaction("hasNewerBundle","readonly",ut=>Le.Ds.getBundleMetadata(ut,Me.id)).then(ut=>!!ut&&ut.createTime.compareTo(Xe)>=0)}(u.localStore,w))return yield h.close(),m._completeWith({taskState:"Success",documentsLoaded:(we=w).totalDocuments,bytesLoaded:we.totalBytes,totalDocuments:we.totalDocuments,totalBytes:we.totalBytes}),Promise.resolve(new Set);m._updateProgress(JA(w));const P=new wx(w,u.localStore,h.wt);let Q=yield h.fc();for(;Q;){const we=yield P.Nu(Q);we&&m._updateProgress(we),Q=yield h.fc()}const se=yield P.complete();return yield Bc(u,se.Ou,void 0),yield function(we,Me){const Le=ct(we);return Le.persistence.runTransaction("Save bundle","readwrite",Xe=>Le.Ds.saveBundleMetadata(Xe,Me))}(u.localStore,w),m._completeWith(se.progress),Promise.resolve(se.Mu)}catch(w){return al("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var we}),function(u,h,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield mC(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function gO(n,e){return function nO(n,e){return n.asyncQueue.enqueue((0,Ge.Z)(function*(){return function(t,r){const s=ct(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ds.getNamedQuery(u,r))}(yield Gw(n),e)}))}(jr(n=gn(n,or)),e).then(t=>t?new to(n,null,t.query):null)}(this._delegate,e).then(t=>t?new wo(this,t):null)}}class tI extends TC{constructor(e){super(),this.firestore=e}convertBytes(e){return new a0(new wl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return la.forKey(t,this.firestore,null)}}class JS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new tI(e)}get(e){const t=bp(e);return this._delegate.get(t).then(r=>new u0(this._firestore,new qc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=bp(e);return r?(AC("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=bp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=bp(e);return this._delegate.delete(t),this}}class XS{constructor(e){this._delegate=e}set(e,t,r){const s=bp(e);return r?(AC("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=bp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=bp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class _p{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new o0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new l0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=_p.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new _p(e,new tI(e),t),s.set(t,u)),u}}_p.INSTANCES=new WeakMap;class la{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Je("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new la(t,new Qn(t._delegate,r,new at(e)))}static forKey(e,t,r){return new la(t,new Qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ry(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ry(this.firestore,wS(this._delegate,e))}catch(t){throw Eo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,nn.m9)(e))instanceof Qn&&IS(this._delegate,e)}set(e,t){t=AC("DocumentReference.set",t);try{return t?GS(this._delegate,e,t):GS(this._delegate,e)}catch(r){throw Eo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?zS(this._delegate,e):zS(this._delegate,e,t,...r)}catch(s){throw Eo(s,"updateDoc()","DocumentReference.update()")}}delete(){return function HO(n){return ny(gn(n.firestore,or),[new nh(n._key,Vn.none())])}(this._delegate)}onSnapshot(...e){const t=e1(e),r=t1(e,s=>new u0(this.firestore,new qc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return WS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function VO(n){n=gn(n,Qn);const e=gn(n.firestore,or),t=jr(e),r=new vp(e);return function Qx(n,e){const t=new Jr;return n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return(r=(0,Ge.Z)(function*(s,u,h){try{const m=yield function(w,P){const Q=ct(w);return Q.persistence.runTransaction("read document","readonly",se=>Q.localDocuments.getDocument(se,P))}(s,u);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new Je(je.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Qm(m,`Failed to get document '${u} from cache`);h.reject(w)}}),function(s,u,h){return r.apply(this,arguments)})(yield Gw(n),e,t);var r})),t.promise}(t,n._key).then(s=>new qc(e,r,n._key,s,new yp(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function UO(n){n=gn(n,Qn);const e=gn(n.firestore,or);return pS(jr(e),n._key,{source:"server"}).then(t=>CC(e,n,t))}(this._delegate):function FO(n){n=gn(n,Qn);const e=gn(n.firestore,or);return pS(jr(e),n._key).then(t=>CC(e,n,t))}(this._delegate),t.then(r=>new u0(this.firestore,new qc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new la(this.firestore,this._delegate.withConverter(e?_p.getInstance(this.firestore,e):null))}}function Eo(n,e,t){return n.message=n.message.replace(e,t),n}function e1(n){for(const e of n)if("object"==typeof e&&!SC(e))return e;return{}}function t1(n,e){var t,r;let s;return s=SC(n[0])?n[0]:SC(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class u0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new la(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return PS(this._delegate,e._delegate)}}class l0 extends u0{data(e){const t=this._delegate.data(e);return function pD(n,e){n||yt()}(void 0!==t),t}}class wo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tI(e)}where(e,t,r){try{return new wo(this.firestore,vh(this._delegate,function CO(n,e,t){const r=e,s=Xw("where",n);return new TO(s,r,t)}(e,t,r)))}catch(s){throw Eo(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new wo(this.firestore,vh(this._delegate,function SO(n,e="asc"){const t=e,r=Xw("orderBy",n);return new AO(r,t)}(e,t)))}catch(r){throw Eo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new wo(this.firestore,vh(this._delegate,function xO(n){return bS("limit",n),new FS("limit",n,"F")}(e)))}catch(t){throw Eo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new wo(this.firestore,vh(this._delegate,function OO(n){return bS("limitToLast",n),new FS("limitToLast",n,"L")}(e)))}catch(t){throw Eo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new wo(this.firestore,vh(this._delegate,function MO(...n){return new VS("startAt",n,!0)}(...e)))}catch(t){throw Eo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new wo(this.firestore,vh(this._delegate,function NO(...n){return new VS("startAfter",n,!1)}(...e)))}catch(t){throw Eo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new wo(this.firestore,vh(this._delegate,function kO(...n){return new US("endBefore",n,!1)}(...e)))}catch(t){throw Eo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new wo(this.firestore,vh(this._delegate,function RO(...n){return new US("endAt",n,!0)}(...e)))}catch(t){throw Eo(t,"endAt()","Query.endAt()")}}isEqual(e){return DS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function jO(n){n=gn(n,to);const e=gn(n.firestore,or),t=jr(e),r=new vp(e);return function Jx(n,e){const t=new Jr;return n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return(r=(0,Ge.Z)(function*(s,u,h){try{const m=yield ph(s,u,!0),w=new tS(u,m.ji),P=w.Ku(m.documents),Q=w.applyChanges(P,!1);h.resolve(Q.snapshot)}catch(m){const w=Qm(m,`Failed to execute query '${u} against cache`);h.reject(w)}}),function(s,u,h){return r.apply(this,arguments)})(yield Gw(n),e,t);var r})),t.promise}(t,n._query).then(s=>new yh(e,r,n,s))}(this._delegate):"server"===(null==e?void 0:e.source)?function qO(n){n=gn(n,to);const e=gn(n.firestore,or),t=jr(e),r=new vp(e);return gS(t,n._query,{source:"server"}).then(s=>new yh(e,r,n,s))}(this._delegate):function BO(n){n=gn(n,to);const e=gn(n.firestore,or),t=jr(e),r=new vp(e);return LS(n._query),gS(t,n._query).then(s=>new yh(e,r,n,s))}(this._delegate),t.then(r=>new xC(this.firestore,new yh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=e1(e),r=t1(e,s=>new xC(this.firestore,new yh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return WS(this._delegate,t,r)}withConverter(e){return new wo(this.firestore,this._delegate.withConverter(e?_p.getInstance(this.firestore,e):null))}}class iM{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new l0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class xC{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new wo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new l0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new iM(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new l0(this._firestore,r))})}isEqual(e){return PS(this._delegate,e._delegate)}}class ry extends wo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new la(this.firestore,e):null}doc(e){try{return new la(this.firestore,void 0===e?Ww(this._delegate):Ww(this._delegate,e))}catch(t){throw Eo(t,"doc()","CollectionReference.doc()")}}add(e){return function $O(n,e){const t=gn(n.firestore,or),r=Ww(n),s=eI(n.converter,e);return ny(t,[Yw(gp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Vn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new la(this.firestore,t))}isEqual(e){return IS(this._delegate,e._delegate)}withConverter(e){return new ry(this.firestore,this._delegate.withConverter(e?_p.getInstance(this.firestore,e):null))}}function bp(n){return gn(n,Qn)}class OC{constructor(...e){this._delegate=new jc(...e)}static documentId(){return new OC(Yn.keyField().canonicalString())}isEqual(e){return(e=(0,nn.m9)(e))instanceof jc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ep{constructor(e){this._delegate=e}static serverTimestamp(){const e=function KO(){return new bC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ep(e)}static delete(){const e=function ZO(){return new n0("deleteField")}();return e._methodName="FieldValue.delete",new Ep(e)}static arrayUnion(...e){const t=function YO(...n){return new _O("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ep(t)}static arrayRemove(...e){const t=function QO(...n){return new bO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ep(t)}static increment(e){const t=function JO(n){return new EO("increment",n)}(e);return t._methodName="FieldValue.increment",new Ep(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const oM={Firestore:QS,GeoPoint:Zw,Timestamp:$n,Blob:a0,Transaction:JS,WriteBatch:XS,DocumentReference:la,DocumentSnapshot:u0,Query:wo,QueryDocumentSnapshot:l0,QuerySnapshot:xC,CollectionReference:ry,FieldPath:OC,FieldValue:Ep,setLogLevel:function rM(n){!function fD(n){Ko.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function aM(n){(function sM(n,e){n.INTERNAL.registerComponent(new gf.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},oM)))})(n,(e,t)=>new QS(e,t,new nM)),n.registerVersion("@firebase/firestore-compat","0.1.23")}(_A.Z);var uM=M(6451),nI=M(5363),lM=M(6063);class cM extends oi.x{constructor(e=1/0,t=1/0,r=lM.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:h}=this;t||(r.push(e),!s&&r.push(u.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let h=0;h<u.length&&!e.closed;h+=r?1:2)e.next(u[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const h=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=h;w+=2)m=w;m&&r.splice(0,m+1)}}}var dM=M(3099);function n1(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,dM.B)({connector:()=>new cM(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function r1(n,e){return(0,Ma.m)(e)?jn(()=>n,e):jn(()=>n)}var MC=M(9468);M(5867);const o1=new Map,mM={activated:!1,tokenObservers:[]},yM={initialized:!1,enabled:!1};function yi(n){return o1.get(n)||mM}function pu(n,e){o1.set(n,e)}function iI(){return yM}class wM{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ge.Z)(function*(){t.stop();try{t.pending=new nn.BH,yield function IM(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new nn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Io=new nn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function a1(n){if(!yi(n).activated)throw Io.create("use-before-activation",{appName:n.name})}function PC(n,e){return LC.apply(this,arguments)}function LC(){return LC=(0,Ge.Z)(function*({url:n,body:e},t){var r,s;const u={"Content-Type":"application/json"},h=t.getImmediate({optional:!0});if(h){const Me=yield h.getHeartbeatsHeader();Me&&(u["X-Firebase-Client"]=Me)}const m={method:"POST",body:JSON.stringify(e),headers:u};let w,P;try{w=yield fetch(n,m)}catch(Me){throw Io.create("fetch-network-error",{originalErrorMessage:null===(r=Me)||void 0===r?void 0:r.message})}if(200!==w.status)throw Io.create("fetch-status-error",{httpStatus:w.status});try{P=yield w.json()}catch(Me){throw Io.create("fetch-parse-error",{originalErrorMessage:null===(s=Me)||void 0===s?void 0:s.message})}const Q=P.ttl.match(/^([\d.]+)(s)$/);if(!Q||!Q[2]||isNaN(Number(Q[1])))throw Io.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${P.ttl}`});const se=1e3*Number(Q[1]),we=Date.now();return{token:P.token,expireTimeMillis:we+se,issuedAtTimeMillis:we}}),LC.apply(this,arguments)}function AM(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const c0="firebase-app-check-store";let aI=null;function l1(){return aI||(aI=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=s=>{n(s.target.result)},r.onerror=s=>{var u;e(Io.create("storage-open",{originalErrorMessage:null===(u=s.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(c0,{keyPath:"compositeKey"})}}catch(r){e(Io.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),aI)}function FC(){return FC=(0,Ge.Z)(function*(n,e){const r=(yield l1()).transaction(c0,"readwrite"),u=r.objectStore(c0).put({compositeKey:n,value:e});return new Promise((h,m)=>{u.onsuccess=w=>{h()},r.onerror=w=>{var P;m(Io.create("storage-set",{originalErrorMessage:null===(P=w.target.error)||void 0===P?void 0:P.message}))}})}),FC.apply(this,arguments)}const d0=new Ja.Yd("@firebase/app-check");function f1(n,e){return(0,nn.hl)()?function MM(n,e){return function c1(n,e){return FC.apply(this,arguments)}(function h1(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{d0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function p1(){return iI().enabled}function g1(){return jC.apply(this,arguments)}function jC(){return jC=(0,Ge.Z)(function*(){const n=iI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),jC.apply(this,arguments)}const FM={error:"UNKNOWN_ERROR"};function VM(n){return nn.US.encodeString(JSON.stringify(n),!1)}function uI(n){return qC.apply(this,arguments)}function qC(){return qC=(0,Ge.Z)(function*(n,e=!1){const t=n.app;a1(t);const r=yi(t);let u,s=r.token;if(!s){const w=yield r.cachedTokenPromise;w&&lI(w)&&(s=w)}if(!e&&s&&lI(s))return{token:s.token};let m,h=!1;if(p1()){r.exchangeTokenPromise||(r.exchangeTokenPromise=PC(AM(t,yield g1()),n.heartbeatServiceProvider).then(P=>(r.exchangeTokenPromise=void 0,P)),h=!0);const w=yield r.exchangeTokenPromise;return yield f1(t,w),pu(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),h=!0),s=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?d0.warn(w.message):d0.error(w),u=w}return s?(m={token:s.token},pu(t,Object.assign(Object.assign({},r),{token:s})),yield f1(t,s)):m=BM(u),h&&y1(t,m),m}),qC.apply(this,arguments)}function $C(n,e){const t=yi(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),pu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function m1(n){const{app:e}=n,t=yi(e);let r=t.tokenRefresher;r||(r=function UM(n){const{app:e}=n;return new wM((0,Ge.Z)(function*(){let r;if(r=yi(e).token?yield uI(n,!0):yield uI(n),r.error)throw r.error}),()=>!0,()=>{const t=yi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),pu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function y1(n,e){const t=yi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(s){}}function lI(n){return n.expireTimeMillis-Date.now()>0}function BM(n){return{token:VM(FM),error:n}}class jM{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=yi(this.app);for(const t of e)$C(this.app,t.next);return Promise.resolve()}}const T1="app-check-internal";!function tN(){(0,Ju._registerComponent)(new gf.wA("app-check",n=>function qM(n,e){return new jM(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(T1).initialize()})),(0,Ju._registerComponent)(new gf.wA(T1,n=>function HM(n){return{getToken:e=>uI(n,e),addTokenListener:e=>function HC(n,e,t,r){const{app:s}=n,u=yi(s),h={next:t,error:r,type:e};if(pu(s,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,h]})),u.token&&lI(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),m1(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>m1(n))}(n,"INTERNAL",e),removeTokenListener:e=>$C(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ju.registerVersion)("@firebase/app-check","0.5.12")}();class ZC{constructor(){return(0,Ar.vb)("app-check")}}"undefined"!=typeof window&&window;var sN=M(127);const A1=new c.OlP("angularfire2.auth.use-emulator"),S1=new c.OlP("angularfire2.auth.settings"),x1=new c.OlP("angularfire2.auth.tenant-id"),O1=new c.OlP("angularfire2.auth.langugage-code"),M1=new c.OlP("angularfire2.auth.use-device-language"),N1=new c.OlP("angularfire.auth.persistence"),k1=(n,e,t,r,s,u,h,m)=>(0,Xs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,u&&w.useDeviceLanguage(),h)for(const[P,Q]of Object.entries(h))w.settings[P]=Q;return m&&w.setPersistence(m),w},[t,r,s,u,h,m]);let R1=(()=>{class n{constructor(t,r,s,u,h,m,w,P,Q,se,we,Me){const Le=new oi.x,Xe=mt(void 0).pipe((0,nI.Q)(h.outsideAngular),jn(()=>u.runOutsideAngular(()=>Promise.resolve().then(M.bind(M,1451)))),(0,Wt.U)(()=>(0,Xs.on)(t,u,r)),(0,Wt.U)(ut=>k1(ut,u,m,P,Q,se,w,we)),n1({bufferSize:1,refCount:!1}));if(es(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{Xe.pipe(Pa()).subscribe();const Gt=Xe.pipe(jn(zt=>zt.getRedirectResult().then(Yt=>Yt,()=>null)),Ar.iC,n1({bufferSize:1,refCount:!1})),Kt=Xe.pipe(jn(zt=>new Zn.y(Yt=>({unsubscribe:u.runOutsideAngular(()=>zt.onAuthStateChanged(ln=>Yt.next(ln),ln=>Yt.error(ln),()=>Yt.complete()))})))),rn=Xe.pipe(jn(zt=>new Zn.y(Yt=>({unsubscribe:u.runOutsideAngular(()=>zt.onIdTokenChanged(ln=>Yt.next(ln),ln=>Yt.error(ln),()=>Yt.complete()))}))));this.authState=Gt.pipe(r1(Kt),(0,MC.R)(h.outsideAngular),(0,nI.Q)(h.insideAngular)),this.user=Gt.pipe(r1(rn),(0,MC.R)(h.outsideAngular),(0,nI.Q)(h.insideAngular)),this.idToken=this.user.pipe(jn(zt=>zt?(0,kn.D)(zt.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe(jn(zt=>zt?(0,kn.D)(zt.getIdTokenResult()):mt(null))),this.credential=(0,uM.T)(Gt,Le,this.authState.pipe(tr(zt=>!zt))).pipe((0,Wt.U)(zt=>(null==zt?void 0:zt.user)?zt:null),(0,MC.R)(h.outsideAngular),(0,nI.Q)(h.insideAngular))}return(0,Xs.pX)(this,Xe,u,{spy:{apply:(ut,Gt,Kt)=>{(ut.startsWith("signIn")||ut.startsWith("createUser"))&&Kt.then(rn=>Le.next(rn))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xs.Dh),c.LFG(Xs.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Ar.HU),c.LFG(A1,8),c.LFG(S1,8),c.LFG(x1,8),c.LFG(O1,8),c.LFG(M1,8),c.LFG(N1,8),c.LFG(ZC,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function P1(n,e){return function uN(n,e=vA.z){return new Zn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function YC(n,e){return P1(n,e).pipe((0,Wt.U)(t=>({payload:t,type:"query"})))}function dI(n,e){return YC(n,e).pipe(Wr(void 0),Qy(),(0,Wt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,m)=>{const w=s.find(Q=>Q.doc.ref.isEqual(h.ref)),P=null==t?void 0:t.payload.docs.find(Q=>Q.ref.isEqual(h.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(h.metadata)||!w&&P&&JSON.stringify(P.metadata)===JSON.stringify(h.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),u}))}function L1(n,e,t){return dI(n,t).pipe(wi((r,s)=>function cN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function dN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return QC(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return QC(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return QC(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function Ab(n,e=Ei.y){return n=null!=n?n:Sb,(0,lr.e)((t,r)=>{let s,u=!0;t.subscribe((0,Kn.x)(r,h=>{const m=e(h);(u||!n(s,m))&&(u=!1,s=m,r.next(h))}))})}(),(0,Wt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function QC(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function F1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class V1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=dI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Wt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Wr(void 0),Qy(),tr(([r,s])=>s.length>0||!r),(0,Wt.U)(([r,s])=>s),Ar.iC)}auditTrail(e){return this.stateChanges(e).pipe(wi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=F1(e);return L1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ar.iC)}valueChanges(e={}){return YC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Ar.iC)}get(e){return(0,kn.D)(this.query.get(e)).pipe(Ar.iC)}add(e){return this.ref.add(e)}doc(e){return new U1(this.ref.doc(e),this.afs)}}class U1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=q1(r,t);return new V1(s,u,this.afs)}snapshotChanges(){return function lN(n,e){return P1(n,e).pipe(Wr(void 0),Qy(),(0,Wt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ar.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,kn.D)(this.ref.get(e)).pipe(Ar.iC)}}class hN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?dI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),tr(t=>t.length>0),Ar.iC):dI(this.query,this.afs.schedulers.outsideAngular).pipe(Ar.iC)}auditTrail(e){return this.stateChanges(e).pipe(wi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=F1(e);return L1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ar.iC)}valueChanges(e={}){return YC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Wt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Ar.iC)}get(e){return(0,kn.D)(this.query.get(e)).pipe(Ar.iC)}}const B1=new c.OlP("angularfire2.enableFirestorePersistence"),j1=new c.OlP("angularfire2.firestore.persistenceSettings"),fN=new c.OlP("angularfire2.firestore.settings"),pN=new c.OlP("angularfire2.firestore.use-emulator");function q1(n,e=(t=>t)){return{query:e(n),ref:n}}let H1=(()=>{class n{constructor(t,r,s,u,h,m,w,P,Q,se,we,Me,Le,Xe,ut,Gt,Kt){this.schedulers=w;const rn=(0,Xs.on)(t,m,r),zt=Q;se&&k1(rn,m,we,Le,Xe,ut,Me,Gt),[this.firestore,this.persistenceEnabled$]=(0,Xs.cc)(`${rn.name}.firestore`,"AngularFirestore",rn.name,()=>{const Yt=m.runOutsideAngular(()=>rn.firestore());if(u&&Yt.settings(u),zt&&Yt.useEmulator(...zt),s&&!es(h)){const ln=()=>{try{return(0,kn.D)(Yt.enablePersistence(P||void 0).then(()=>!0,()=>!1))}catch(ti){return"undefined"!=typeof console&&console.warn(ti),mt(!1)}};return[Yt,m.runOutsideAngular(ln)]}return[Yt,mt(!1)]},[u,zt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:h}=q1(s,r),m=this.schedulers.ngZone.run(()=>u);return new V1(m,h,this)}collectionGroup(t,r){const s=r||(h=>h),u=this.firestore.collectionGroup(t);return new hN(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new U1(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Xs.Dh),c.LFG(Xs.xv,8),c.LFG(B1,8),c.LFG(fN,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Ar.HU),c.LFG(j1,8),c.LFG(pN,8),c.LFG(R1,8),c.LFG(A1,8),c.LFG(S1,8),c.LFG(x1,8),c.LFG(O1,8),c.LFG(M1,8),c.LFG(N1,8),c.LFG(ZC,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gN=(()=>{class n{constructor(){sN.Z.registerVersion("angularfire",Ar.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:B1,useValue:!0},{provide:j1,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[H1]}),n})(),JC=(()=>{class n{constructor(t){this.angularFirestore=t}getStudentDoc(t){return this.angularFirestore.collection("student-collection").doc(t).valueChanges()}getStudentList(){return this.angularFirestore.collection("student-collection").snapshotChanges()}createStudent(t){return new Promise((r,s)=>{this.angularFirestore.collection("student-collection").add(t).then(u=>{console.log(u)},u=>s(u))})}deleteStudent(t){return this.angularFirestore.collection("student-collection").doc(t.id).delete()}updateStudent(t,r){return this.angularFirestore.collection("student-collection").doc(r).update({name:t.name,email:t.email,course:t.course,fees:t.fees})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(H1))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mN=(()=>{class n{constructor(t,r,s){this.studentCrudService=t,this.formBuilder=r,this.router=s,this.studentForm=this.formBuilder.group({name:[""],email:[""],course:[""],fees:[""]})}ngOnInit(){}onSubmit(){this.studentCrudService.createStudent(this.studentForm.value),this.router.navigate(["ex002-firebase-crud/list-student"])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(JC),c.Y36(Rg),c.Y36(Cr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-create-student"]],decls:33,vars:2,consts:[[1,"container"],[1,"row","mt-3"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","name","placeholder","Full Name","required","",1,"form-control"],["type","email","formControlName","email","placeholder","Email","required","",1,"form-control"],["for","name"],["formControlName","course","placeholder","","required","",1,"form-control","form-select","form-select-lg","mb-3"],["value","Java","selected",""],["value","Python"],["value","PHP"],["value","JavaScript"],["type","number","formControlName","fees","placeholder","Fees","required","",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","reset",1,"btn","btn-danger"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"form",2),c.NdJ("ngSubmit",function(){return r.onSubmit()}),c.TgZ(3,"div",3)(4,"label"),c._uU(5,"Name"),c.qZA(),c._UZ(6,"input",4),c.qZA(),c.TgZ(7,"div",3)(8,"label"),c._uU(9,"Email"),c.qZA(),c._UZ(10,"input",5),c.qZA(),c.TgZ(11,"div",3)(12,"label",6),c._uU(13,"Course"),c.qZA(),c.TgZ(14,"select",7)(15,"option",8),c._uU(16,"Java"),c.qZA(),c.TgZ(17,"option",9),c._uU(18,"Python"),c.qZA(),c.TgZ(19,"option",10),c._uU(20,"PHP"),c.qZA(),c.TgZ(21,"option",11),c._uU(22,"JavaScript"),c.qZA()()(),c.TgZ(23,"div",3)(24,"label"),c._uU(25,"Fees"),c.qZA(),c._UZ(26,"input",12),c.qZA(),c.TgZ(27,"div",3)(28,"button",13),c._uU(29,"Create"),c.qZA(),c._uU(30," \xa0\xa0\xa0\xa0 "),c.TgZ(31,"button",14),c._uU(32,"Reset"),c.qZA()()()()()),2&t&&(c.xp6(2),c.Q6J("formGroup",r.studentForm),c.xp6(26),c.Q6J("disabled",!r.studentForm.valid))},directives:[uf,tf,Pd,Od,pg,df,Fd,hf,Mg,Ld,Cg],styles:[""]}),n})(),yN=(()=>{class n{constructor(t,r,s,u){this.studentCrudService=t,this.formBuilder=r,this.activatedRoute=s,this.router=u,this.studentForm=this.formBuilder.group({name:[""],email:[""],course:[""],fees:[""]})}ngOnInit(){var t;const r=null!==(t=this.activatedRoute.snapshot.paramMap.get("id"))&&void 0!==t?t:"0";this.studentCrudService.getStudentDoc(r).subscribe(s=>{this.studentRef=s,this.studentForm=this.formBuilder.group({name:[this.studentRef.name],email:[this.studentRef.email],course:[this.studentRef.course],fees:[this.studentRef.fees]})})}onSubmit(){var t;const r=null!==(t=this.activatedRoute.snapshot.paramMap.get("id"))&&void 0!==t?t:"0";this.studentCrudService.updateStudent(this.studentForm.value,r),this.router.navigate(["ex002-firebase-crud/list-student"])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(JC),c.Y36(Rg),c.Y36(ja),c.Y36(Cr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-edit-student"]],decls:33,vars:1,consts:[[1,"container"],[1,"row","mt-3"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","name","required","",1,"form-control"],["type","email","formControlName","email","required","",1,"form-control"],["for","name"],["formControlName","course","placeholder","","required","",1,"form-control","form-select","form-select-lg","mb-3"],["value","Java","selected",""],["value","Python"],["value","PHP"],["value","JavaScript"],["type","number","formControlName","fees","required","",1,"form-control"],["type","submit",1,"btn","btn-primary"],["type","reset",1,"btn","btn-danger"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"form",2),c.NdJ("ngSubmit",function(){return r.onSubmit()}),c.TgZ(3,"div",3)(4,"label"),c._uU(5,"Name"),c.qZA(),c._UZ(6,"input",4),c.qZA(),c.TgZ(7,"div",3)(8,"label"),c._uU(9,"Email"),c.qZA(),c._UZ(10,"input",5),c.qZA(),c.TgZ(11,"div",3)(12,"label",6),c._uU(13,"Course"),c.qZA(),c.TgZ(14,"select",7)(15,"option",8),c._uU(16,"Java"),c.qZA(),c.TgZ(17,"option",9),c._uU(18,"Python"),c.qZA(),c.TgZ(19,"option",10),c._uU(20,"PHP"),c.qZA(),c.TgZ(21,"option",11),c._uU(22,"JavaScript"),c.qZA()()(),c.TgZ(23,"div",3)(24,"label"),c._uU(25,"Fees"),c.qZA(),c._UZ(26,"input",12),c.qZA(),c.TgZ(27,"div",3)(28,"button",13),c._uU(29,"Update"),c.qZA(),c._uU(30," \xa0\xa0\xa0\xa0 "),c.TgZ(31,"button",14),c._uU(32,"Reset"),c.qZA()()()()()),2&t&&(c.xp6(2),c.Q6J("formGroup",r.studentForm))},directives:[uf,tf,Pd,Od,pg,df,Fd,hf,Mg,Ld,Cg],styles:[""]}),n})();function vN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"tr")(1,"th",6),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._uU(10),c.qZA(),c.TgZ(11,"td")(12,"span",7),c.NdJ("click",function(){const u=c.CHM(t).$implicit;return c.oxw().removeStudent(u)}),c._uU(13,"Delete"),c.qZA(),c._uU(14," \xa0 "),c.TgZ(15,"span",8),c._uU(16,"Edit"),c.qZA()()()}if(2&n){const t=e.$implicit,r=e.index;c.xp6(2),c.Oqu(r+1),c.xp6(2),c.Oqu(t.name),c.xp6(2),c.Oqu(t.email),c.xp6(2),c.Oqu(t.course),c.xp6(2),c.Oqu(t.fees),c.xp6(5),c.MGl("routerLink","/ex002-firebase-crud/edit-student/",t.id,"")}}const _N=[{path:"",pathMatch:"full",redirectTo:"ex001-quill-text-editor"},{path:"ex-index",component:gI},{path:"ex001-quill-text-editor",component:BI},{path:"ex002-firebase-crud",pathMatch:"full",redirectTo:"ex002-firebase-crud/list-student"},{path:"ex002-firebase-crud/create-student",component:mN},{path:"ex002-firebase-crud/list-student",component:(()=>{class n{constructor(t){this.studentCrudService=t}ngOnInit(){this.studentCrudService.getStudentList().subscribe(t=>{this.students=t.map(r=>Object.assign({id:r.payload.doc.id},r.payload.doc.data()))})}removeStudent(t){confirm("Are you sure to delete "+t.name)&&this.studentCrudService.deleteStudent(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(JC))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-list-student"]],decls:20,vars:1,consts:[[1,"container"],["routerLink","/ex002-firebase-crud/create-student/",1,"btn","btn-primary","my-3"],[1,"row"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-primary",3,"routerLink"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"span",1),c._uU(2,"Add"),c.qZA(),c.TgZ(3,"div",2)(4,"table",3)(5,"thead")(6,"th",4),c._uU(7,"#"),c.qZA(),c.TgZ(8,"th",4),c._uU(9,"Name"),c.qZA(),c.TgZ(10,"th",4),c._uU(11,"Email"),c.qZA(),c.TgZ(12,"th",4),c._uU(13,"Course"),c.qZA(),c.TgZ(14,"th",4),c._uU(15,"Fees"),c.qZA(),c.TgZ(16,"th",4),c._uU(17,"Action"),c.qZA()(),c.TgZ(18,"tbody"),c.YNc(19,vN,17,6,"tr",5),c.qZA()()()()),2&t&&(c.xp6(19),c.Q6J("ngForOf",r.students))},directives:[Sd,er],styles:[""]}),n})()},{path:"ex002-firebase-crud/edit-student/:id",component:yN},{path:"**",component:BI}];let bN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Qh.forRoot(_N)],Qh]}),n})(),EN=(()=>{class n{constructor(){this.title="project_angular"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[Yl],styles:[""]}),n})();const $1_firebaseConfig={apiKey:"AIzaSyDSfaU2H8Ue1kvnbmTU_Gw9kwNN9uuvI1g",authDomain:"project-angular-ex002.firebaseapp.com",projectId:"project-angular-ex002",storageBucket:"project-angular-ex002.appspot.com",messagingSenderId:"81885975300",appId:"1:81885975300:web:b05035fe136872f0693651"};let wN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[EN]}),n.\u0275inj=c.cJS({providers:[],imports:[[Da,bN,RI,Eb,Tb,Xs.hO.initializeApp($1_firebaseConfig),gN]]}),n})();(0,c.G48)(),Tu().bootstrapModule(wN).catch(n=>console.error(n))},5867:(ht,ge,M)=>{"use strict";M.d(ge,{Mq:()=>c.getApp,C6:()=>c.getApps});var c=M(9681);(0,c.registerVersion)("firebase","9.9.3","app")},127:(ht,ge,M)=>{"use strict";M.d(ge,{Z:()=>c.Z});var c=M(3942);c.Z.registerVersion("firebase","9.9.3","app-compat")},1451:(ht,ge,M)=>{"use strict";M.r(ge);var c=M(5861),ee=M(3942),F=M(2090),K=M(9681),j=M(655),q=M(1877),R=M(4859);const x=function k(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},V=function A(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},D=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),re=new q.Yd("@firebase/auth");function J(y,...f){re.logLevel<=q.in.ERROR&&re.error(`Auth (${K.SDK_VERSION}): ${y}`,...f)}function Z(y,...f){throw W(y,...f)}function X(y,...f){return W(y,...f)}function $(y,f,g){const b=Object.assign(Object.assign({},V()),{[f]:g});return new F.LL("auth","Firebase",b).create(f,{appName:y.name})}function H(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Z(y,"argument-error"),$(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function W(y,...f){if("string"!=typeof y){const g=f[0],b=[...f.slice(1)];return b[0]&&(b[0].appName=y.name),y._errorFactory.create(g,...b)}return D.create(y,...f)}function B(y,f,...g){if(!y)throw W(f,...g)}function te(y){const f="INTERNAL ASSERTION FAILED: "+y;throw J(f),new Error(f)}function Y(y,f){y||te(f)}const de=new Map;function ue(y){Y(y instanceof Function,"Expected a class definition");let f=de.get(y);return f?(Y(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,de.set(y,f),f)}function le(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ie(){return"http:"===fe()||"https:"===fe()}function fe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class xe{constructor(f,g){this.shortDelay=f,this.longDelay=g,Y(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function me(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ie()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function he(y,f){Y(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Ie{static initialize(f,g,b){this.fetchImpl=f,g&&(this.headersImpl=g),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void te("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void te("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void te("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ke={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Re=new xe(3e4,6e4);function Ue(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Qe(y,f,g,b){return Et.apply(this,arguments)}function Et(){return(Et=(0,c.Z)(function*(y,f,g,b,G={}){return wt(y,G,(0,c.Z)(function*(){let ae={},Se={};b&&("GET"===f?Se=b:ae={body:JSON.stringify(b)});const Ve=(0,F.xO)(Object.assign({key:y.config.apiKey},Se)).slice(1),tt=yield y._getAdditionalHeaders();return tt["Content-Type"]="application/json",y.languageCode&&(tt["X-Firebase-Locale"]=y.languageCode),Ie.fetch()(mn(y,y.config.apiHost,g,Ve),Object.assign({method:f,headers:tt,referrerPolicy:"no-referrer"},ae))}))})).apply(this,arguments)}function wt(y,f,g){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,c.Z)(function*(y,f,g){y._canInitEmulator=!1;const b=Object.assign(Object.assign({},ke),f);try{const G=new Be(y),ae=yield Promise.race([g(),G.promise]);G.clearNetworkTimeout();const Se=yield ae.json();if("needConfirmation"in Se)throw qe(y,"account-exists-with-different-credential",Se);if(ae.ok&&!("errorMessage"in Se))return Se;{const Ve=ae.ok?Se.errorMessage:Se.error.message,[tt,dt]=Ve.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===tt)throw qe(y,"credential-already-in-use",Se);if("EMAIL_EXISTS"===tt)throw qe(y,"email-already-in-use",Se);if("USER_DISABLED"===tt)throw qe(y,"user-disabled",Se);const Nt=b[tt]||tt.toLowerCase().replace(/[_\s]+/g,"-");if(dt)throw $(y,Nt,dt);Z(y,Nt)}}catch(G){if(G instanceof F.ZR)throw G;Z(y,"network-request-failed")}})).apply(this,arguments)}function Bt(y,f,g,b){return wn.apply(this,arguments)}function wn(){return(wn=(0,c.Z)(function*(y,f,g,b,G={}){const ae=yield Qe(y,f,g,b,G);return"mfaPendingCredential"in ae&&Z(y,"multi-factor-auth-required",{_serverResponse:ae}),ae})).apply(this,arguments)}function mn(y,f,g,b){const G=`${f}${g}?${b}`;return y.config.emulator?he(y.config,G):`${y.config.apiScheme}://${G}`}class Be{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,b)=>{this.timer=setTimeout(()=>b(X(this.auth,"network-request-failed")),Re.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qe(y,f,g){const b={appName:y.name};g.email&&(b.email=g.email),g.phoneNumber&&(b.phoneNumber=g.phoneNumber);const G=X(y,f,b);return G.customData._tokenResponse=g,G}function it(){return(it=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function ze(y,f){return vt.apply(this,arguments)}function vt(){return(vt=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Rt(y,f){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function on(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Do(){return(Do=(0,c.Z)(function*(y,f=!1){const g=(0,F.m9)(y),b=yield g.getIdToken(f),G=ft(b);B(G&&G.exp&&G.auth_time&&G.iat,g.auth,"internal-error");const ae="object"==typeof G.firebase?G.firebase:void 0,Se=null==ae?void 0:ae.sign_in_provider;return{claims:G,token:b,authTime:on(At(G.auth_time)),issuedAtTime:on(At(G.iat)),expirationTime:on(At(G.exp)),signInProvider:Se||null,signInSecondFactor:(null==ae?void 0:ae.sign_in_second_factor)||null}})).apply(this,arguments)}function At(y){return 1e3*Number(y)}function ft(y){var f;const[g,b,G]=y.split(".");if(void 0===g||void 0===b||void 0===G)return J("JWT malformed, contained fewer than 3 sections"),null;try{const ae=(0,F.tV)(b);return ae?JSON.parse(ae):(J("Failed to decode base64 JWT payload"),null)}catch(ae){return J("Caught error parsing JWT payload as JSON",null===(f=ae)||void 0===f?void 0:f.toString()),null}}function _r(y,f){return ni.apply(this,arguments)}function ni(){return(ni=(0,c.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(b){throw b instanceof F.ZR&&tn(b)&&y.auth.currentUser===y&&(yield y.auth.signOut()),b}})).apply(this,arguments)}function tn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class To{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const G=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,G)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const b=this.getInterval(f);this.timerId=setTimeout((0,c.Z)(function*(){yield g.iteration()}),b)}iteration(){var f=this;return(0,c.Z)(function*(){var g;try{yield f.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===(null===(g=b)||void 0===g?void 0:g.code)&&f.schedule(!0))}f.schedule()})()}}class br{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=on(this.lastLoginAt),this.creationTime=on(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Or(y){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,c.Z)(function*(y){var f;const g=y.auth,b=yield y.getIdToken(),G=yield _r(y,Rt(g,{idToken:b}));B(null==G?void 0:G.users.length,g,"internal-error");const ae=G.users[0];y._notifyReloadListener(ae);const Se=(null===(f=ae.providerUserInfo)||void 0===f?void 0:f.length)?ve(ae.providerUserInfo):[],Ve=Ae(y.providerData,Se),Nt=!!y.isAnonymous&&!(y.email&&ae.passwordHash||(null==Ve?void 0:Ve.length)),Ct={uid:ae.localId,displayName:ae.displayName||null,photoURL:ae.photoUrl||null,email:ae.email||null,emailVerified:ae.emailVerified||!1,phoneNumber:ae.phoneNumber||null,tenantId:ae.tenantId||null,providerData:Ve,metadata:new br(ae.createdAt,ae.lastLoginAt),isAnonymous:Nt};Object.assign(y,Ct)})).apply(this,arguments)}function Ee(){return(Ee=(0,c.Z)(function*(y){const f=(0,F.m9)(y);yield Or(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ae(y,f){return[...y.filter(b=>!f.some(G=>G.providerId===b.providerId)),...f]}function ve(y){return y.map(f=>{var{providerId:g}=f,b=(0,j._T)(f,["providerId"]);return{providerId:g,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Ce(){return(Ce=(0,c.Z)(function*(y,f){const g=yield wt(y,{},(0,c.Z)(function*(){const b=(0,F.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:G,apiKey:ae}=y.config,Se=mn(y,G,"/v1/token",`key=${ae}`),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/x-www-form-urlencoded",Ie.fetch()(Se,{method:"POST",headers:Ve,body:b})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ze{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){B(f.idToken,"internal-error"),B(void 0!==f.idToken,"internal-error"),B(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function Ft(y){const f=ft(y);return B(f,"internal-error"),B(void 0!==f.exp,"internal-error"),B(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var b=this;return(0,c.Z)(function*(){return B(!b.accessToken||b.refreshToken,f,"user-token-expired"),g||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(f,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var b=this;return(0,c.Z)(function*(){const{accessToken:G,refreshToken:ae,expiresIn:Se}=yield function De(y,f){return Ce.apply(this,arguments)}(f,g);b.updateTokensAndExpiration(G,ae,Number(Se))})()}updateTokensAndExpiration(f,g,b){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(f,g){const{refreshToken:b,accessToken:G,expirationTime:ae}=g,Se=new Ze;return b&&(B("string"==typeof b,"internal-error",{appName:f}),Se.refreshToken=b),G&&(B("string"==typeof G,"internal-error",{appName:f}),Se.accessToken=G),ae&&(B("number"==typeof ae,"internal-error",{appName:f}),Se.expirationTime=ae),Se}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ze,this.toJSON())}_performRefresh(){return te("not implemented")}}function rt(y,f){B("string"==typeof y||void 0===y,"internal-error",{appName:f})}class It{constructor(f){var{uid:g,auth:b,stsTokenManager:G}=f,ae=(0,j._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new To(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=b,this.stsTokenManager=G,this.accessToken=G.accessToken,this.displayName=ae.displayName||null,this.email=ae.email||null,this.emailVerified=ae.emailVerified||!1,this.phoneNumber=ae.phoneNumber||null,this.photoURL=ae.photoURL||null,this.isAnonymous=ae.isAnonymous||!1,this.tenantId=ae.tenantId||null,this.providerData=ae.providerData?[...ae.providerData]:[],this.metadata=new br(ae.createdAt||void 0,ae.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,c.Z)(function*(){const b=yield _r(g,g.stsTokenManager.getToken(g.auth,f));return B(b,g.auth,"internal-error"),g.accessToken!==b&&(g.accessToken=b,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),b})()}getIdTokenResult(f){return function en(y){return Do.apply(this,arguments)}(this,f)}reload(){return function Co(y){return Ee.apply(this,arguments)}(this)}_assign(f){this!==f&&(B(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new It(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var b=this;return(0,c.Z)(function*(){let G=!1;f.idToken&&f.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(f),G=!0),g&&(yield Or(b)),yield b.auth._persistUserIfCurrent(b),G&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var f=this;return(0,c.Z)(function*(){const g=yield f.getIdToken();return yield _r(f,function He(y,f){return it.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var b,G,ae,Se,Ve,tt,dt,Nt;const Ct=null!==(b=g.displayName)&&void 0!==b?b:void 0,Pn=null!==(G=g.email)&&void 0!==G?G:void 0,fi=null!==(ae=g.phoneNumber)&&void 0!==ae?ae:void 0,Xl=null!==(Se=g.photoURL)&&void 0!==Se?Se:void 0,Iy=null!==(Ve=g.tenantId)&&void 0!==Ve?Ve:void 0,Ys=null!==(tt=g._redirectEventId)&&void 0!==tt?tt:void 0,Td=null!==(dt=g.createdAt)&&void 0!==dt?dt:void 0,Cd=null!==(Nt=g.lastLoginAt)&&void 0!==Nt?Nt:void 0,{uid:Zh,emailVerified:Ad,isAnonymous:Cr,providerData:Kh,stsTokenManager:Yh}=g;B(Zh&&Yh,f,"internal-error");const Sd=Ze.fromJSON(this.name,Yh);B("string"==typeof Zh,f,"internal-error"),rt(Ct,f.name),rt(Pn,f.name),B("boolean"==typeof Ad,f,"internal-error"),B("boolean"==typeof Cr,f,"internal-error"),rt(fi,f.name),rt(Xl,f.name),rt(Iy,f.name),rt(Ys,f.name),rt(Td,f.name),rt(Cd,f.name);const zu=new It({uid:Zh,auth:f,email:Pn,emailVerified:Ad,displayName:Ct,isAnonymous:Cr,photoURL:Xl,phoneNumber:fi,tenantId:Iy,stsTokenManager:Sd,createdAt:Td,lastLoginAt:Cd});return Kh&&Array.isArray(Kh)&&(zu.providerData=Kh.map(Wu=>Object.assign({},Wu))),Ys&&(zu._redirectEventId=Ys),zu}static _fromIdTokenResponse(f,g,b=!1){return(0,c.Z)(function*(){const G=new Ze;G.updateFromServerResponse(g);const ae=new It({uid:g.localId,auth:f,stsTokenManager:G,isAnonymous:b});return yield Or(ae),ae})()}}const un=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(g,b){var G=this;return(0,c.Z)(function*(){G.storage[g]=b})()}_get(g){var b=this;return(0,c.Z)(function*(){const G=b.storage[g];return void 0===G?null:G})()}_remove(g){var b=this;return(0,c.Z)(function*(){delete b.storage[g]})()}_addListener(g,b){}_removeListener(g,b){}}return y.type="NONE",y})();function sr(y,f,g){return`firebase:${y}:${f}:${g}`}class Qt{constructor(f,g,b){this.persistence=f,this.auth=g,this.userKey=b;const{config:G,name:ae}=this.auth;this.fullUserKey=sr(this.userKey,G.apiKey,ae),this.fullPersistenceKey=sr("persistence",G.apiKey,ae),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,c.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?It._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,c.Z)(function*(){if(g.persistence===f)return;const b=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,b?g.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,b="authUser"){return(0,c.Z)(function*(){if(!g.length)return new Qt(ue(un),f,b);const G=(yield Promise.all(g.map(function(){var dt=(0,c.Z)(function*(Nt){if(yield Nt._isAvailable())return Nt});return function(Nt){return dt.apply(this,arguments)}}()))).filter(dt=>dt);let ae=G[0]||ue(un);const Se=sr(b,f.config.apiKey,f.name);let Ve=null;for(const dt of g)try{const Nt=yield dt._get(Se);if(Nt){const Ct=It._fromJSON(f,Nt);dt!==ae&&(Ve=Ct),ae=dt;break}}catch(Nt){}const tt=G.filter(dt=>dt._shouldAllowMigration);return ae._shouldAllowMigration&&tt.length?(ae=tt[0],Ve&&(yield ae._set(Se,Ve.toJSON())),yield Promise.all(g.map(function(){var dt=(0,c.Z)(function*(Nt){if(Nt!==ae)try{yield Nt._remove(Se)}catch(Ct){}});return function(Nt){return dt.apply(this,arguments)}}())),new Qt(ae,f,b)):new Qt(ae,f,b)})()}}function qr(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Jn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Oi(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(no(f))return"Blackberry";if(Xn(f))return"Webos";if(Os(f))return"Safari";if((f.includes("chrome/")||ca(f))&&!f.includes("edge/"))return"Chrome";if(Mr(f))return"Android";{const b=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function Oi(y=(0,F.z$)()){return/firefox\//i.test(y)}function Os(y=(0,F.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function ca(y=(0,F.z$)()){return/crios\//i.test(y)}function Jn(y=(0,F.z$)()){return/iemobile/i.test(y)}function Mr(y=(0,F.z$)()){return/android/i.test(y)}function no(y=(0,F.z$)()){return/blackberry/i.test(y)}function Xn(y=(0,F.z$)()){return/webos/i.test(y)}function Hr(y=(0,F.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Ao(y=(0,F.z$)()){return Hr(y)||Mr(y)||Xn(y)||no(y)||/windows phone/i.test(y)||Jn(y)}function Ms(y,f=[]){let g;switch(y){case"Browser":g=qr((0,F.z$)());break;case"Worker":g=`${qr((0,F.z$)())}-${y}`;break;default:g=y}const b=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${K.SDK_VERSION}/${b}`}class $r{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const b=ae=>new Promise((Se,Ve)=>{try{Se(f(ae))}catch(tt){Ve(tt)}});b.onAbort=g,this.queue.push(b);const G=this.queue.length-1;return()=>{this.queue[G]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,c.Z)(function*(){var b;if(g.auth.currentUser===f)return;const G=[];try{for(const ae of g.queue)yield ae(f),ae.onAbort&&G.push(ae.onAbort)}catch(ae){G.reverse();for(const Se of G)try{Se()}catch(Ve){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(b=ae)||void 0===b?void 0:b.message})}})()}}class lt{constructor(f,g,b){this.app=f,this.heartbeatServiceProvider=g,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vn(this),this.idTokenSubscription=new vn(this),this.beforeStateQueue=new $r(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=D,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(f,g){var b=this;return g&&(this._popupRedirectResolver=ue(g)),this._initializationPromise=this.queue((0,c.Z)(function*(){var G,ae;if(!b._deleted&&(b.persistenceManager=yield Qt.create(b,f),!b._deleted)){if(null===(G=b._popupRedirectResolver)||void 0===G?void 0:G._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(Se){}yield b.initializeCurrentUser(g),b.lastNotifiedUid=(null===(ae=b.currentUser)||void 0===ae?void 0:ae.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,c.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,c.Z)(function*(){var b;const G=yield g.assertedPersistence.getCurrentUser();let ae=G,Se=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Ve=null===(b=g.redirectUser)||void 0===b?void 0:b._redirectEventId,tt=null==ae?void 0:ae._redirectEventId,dt=yield g.tryRedirectSignIn(f);(!Ve||Ve===tt)&&(null==dt?void 0:dt.user)&&(ae=dt.user,Se=!0)}if(!ae)return g.directlySetCurrentUser(null);if(!ae._redirectEventId){if(Se)try{yield g.beforeStateQueue.runMiddleware(ae)}catch(Ve){ae=G,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(Ve))}return ae?g.reloadAndSetCurrentUserOrClear(ae):g.directlySetCurrentUser(null)}return B(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===ae._redirectEventId?g.directlySetCurrentUser(ae):g.reloadAndSetCurrentUserOrClear(ae)})()}tryRedirectSignIn(f){var g=this;return(0,c.Z)(function*(){let b=null;try{b=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(G){yield g._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,c.Z)(function*(){var b;try{yield Or(f)}catch(G){if("auth/network-request-failed"!==(null===(b=G)||void 0===b?void 0:b.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function _e(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,c.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,c.Z)(function*(){const b=f?(0,F.m9)(f):null;return b&&B(b.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(b&&b._clone(g))})()}_updateCurrentUser(f,g=!1){var b=this;return(0,c.Z)(function*(){if(!b._deleted)return f&&B(b.tenantId===f.tenantId,b,"tenant-id-mismatch"),g||(yield b.beforeStateQueue.runMiddleware(f)),b.queue((0,c.Z)(function*(){yield b.directlySetCurrentUser(f),b.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,c.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,c.Z)(function*(){yield g.assertedPersistence.setPersistence(ue(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new F.LL("auth","Firebase",f())}onAuthStateChanged(f,g,b){return this.registerStateListener(this.authStateSubscription,f,g,b)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,b){return this.registerStateListener(this.idTokenSubscription,f,g,b)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var b=this;return(0,c.Z)(function*(){const G=yield b.getOrInitRedirectPersistenceManager(g);return null===f?G.removeCurrentUser():G.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,c.Z)(function*(){if(!g.redirectPersistenceManager){const b=f&&ue(f)||g._popupRedirectResolver;B(b,g,"argument-error"),g.redirectPersistenceManager=yield Qt.create(g,[ue(b._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,c.Z)(function*(){var b,G;return g._isInitialized&&(yield g.queue((0,c.Z)(function*(){}))),(null===(b=g._currentUser)||void 0===b?void 0:b._redirectEventId)===f?g._currentUser:(null===(G=g.redirectUser)||void 0===G?void 0:G._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,c.Z)(function*(){if(f===g.currentUser)return g.queue((0,c.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,b,G){if(this._deleted)return()=>{};const ae="function"==typeof g?g:g.next.bind(g),Se=this._isInitialized?Promise.resolve():this._initializationPromise;return B(Se,this,"internal-error"),Se.then(()=>ae(this.currentUser)),"function"==typeof g?f.addObserver(g,b,G):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,c.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ms(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,c.Z)(function*(){var g;const b={"X-Client-Version":f.clientVersion};f.app.options.appId&&(b["X-Firebase-gmpid"]=f.app.options.appId);const G=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return G&&(b["X-Firebase-Client"]=G),b})()}}function Dt(y){return(0,F.m9)(y)}class vn{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Mi(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Ni(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class vi{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return te("not implemented")}_getIdTokenResponse(f){return te("not implemented")}_linkToIdToken(f,g){return te("not implemented")}_getReauthenticationResolver(f){return te("not implemented")}}function Un(y,f){return qt.apply(this,arguments)}function qt(){return(qt=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:resetPassword",Ue(y,f))})).apply(this,arguments)}function ha(y,f){return So.apply(this,arguments)}function So(){return(So=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function gu(y,f){return xo.apply(this,arguments)}function xo(){return(xo=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:update",Ue(y,f))})).apply(this,arguments)}function Qo(){return(Qo=(0,c.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:signInWithPassword",Ue(y,f))})).apply(this,arguments)}function Oo(y,f){return hr.apply(this,arguments)}function hr(){return(hr=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:sendOobCode",Ue(y,f))})).apply(this,arguments)}function _n(y,f){return mu.apply(this,arguments)}function mu(){return(mu=(0,c.Z)(function*(y,f){return Oo(y,f)})).apply(this,arguments)}function fa(y,f){return zr.apply(this,arguments)}function zr(){return(zr=(0,c.Z)(function*(y,f){return Oo(y,f)})).apply(this,arguments)}function ki(y,f){return yu.apply(this,arguments)}function yu(){return(yu=(0,c.Z)(function*(y,f){return Oo(y,f)})).apply(this,arguments)}function $c(y,f){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,c.Z)(function*(y,f){return Oo(y,f)})).apply(this,arguments)}function Il(){return(Il=(0,c.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:signInWithEmailLink",Ue(y,f))})).apply(this,arguments)}function Gc(){return(Gc=(0,c.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:signInWithEmailLink",Ue(y,f))})).apply(this,arguments)}class Er extends vi{constructor(f,g,b,G=null){super("password",b),this._email=f,this._password=g,this._tenantId=G}static _fromEmailAndPassword(f,g){return new Er(f,g,"password")}static _fromEmailAndCode(f,g,b=null){return new Er(f,g,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,c.Z)(function*(){switch(g.signInMethod){case"password":return function er(y,f){return Qo.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Pi(y,f){return Il.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Z(f,"internal-error")}})()}_linkToIdToken(f,g){var b=this;return(0,c.Z)(function*(){switch(b.signInMethod){case"password":return ha(f,{idToken:g,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function wp(y,f){return Gc.apply(this,arguments)}(f,{idToken:g,email:b._email,oobCode:b._password});default:Z(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Mo(y,f){return zc.apply(this,arguments)}function zc(){return(zc=(0,c.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:signInWithIdp",Ue(y,f))})).apply(this,arguments)}class ro extends vi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new ro(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Z("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:G}=g,ae=(0,j._T)(g,["providerId","signInMethod"]);if(!b||!G)return null;const Se=new ro(b,G);return Se.idToken=ae.idToken||void 0,Se.accessToken=ae.accessToken||void 0,Se.secret=ae.secret,Se.nonce=ae.nonce,Se.pendingToken=ae.pendingToken||null,Se}_getIdTokenResponse(f){return Mo(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,Mo(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Mo(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,F.xO)(g)}return f}}function Dp(y,f){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:sendVerificationCode",Ue(y,f))})).apply(this,arguments)}function No(){return(No=(0,c.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:signInWithPhoneNumber",Ue(y,f))})).apply(this,arguments)}function Zc(){return(Zc=(0,c.Z)(function*(y,f){const g=yield Bt(y,"POST","/v1/accounts:signInWithPhoneNumber",Ue(y,f));if(g.temporaryProof)throw qe(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Cp={USER_NOT_FOUND:"user-not-found"};function Kc(){return(Kc=(0,c.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:signInWithPhoneNumber",Ue(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Cp)})).apply(this,arguments)}class Ns extends vi{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Ns({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Ns({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Dl(y,f){return No.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Tp(y,f){return Zc.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Ap(y,f){return Kc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:b,verificationCode:G}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:b,code:G}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:b,phoneNumber:G,temporaryProof:ae}=f;return b||g||G||ae?new Ns({verificationId:g,verificationCode:b,phoneNumber:G,temporaryProof:ae}):null}}class vu{constructor(f){var g,b,G,ae,Se,Ve;const tt=(0,F.zd)((0,F.pd)(f)),dt=null!==(g=tt.apiKey)&&void 0!==g?g:null,Nt=null!==(b=tt.oobCode)&&void 0!==b?b:null,Ct=function bh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(G=tt.mode)&&void 0!==G?G:null);B(dt&&Nt&&Ct,"argument-error"),this.apiKey=dt,this.operation=Ct,this.code=Nt,this.continueUrl=null!==(ae=tt.continueUrl)&&void 0!==ae?ae:null,this.languageCode=null!==(Se=tt.languageCode)&&void 0!==Se?Se:null,this.tenantId=null!==(Ve=tt.tenantId)&&void 0!==Ve?Ve:null}static parseLink(f){const g=function pa(y){const f=(0,F.zd)((0,F.pd)(y)).link,g=f?(0,F.zd)((0,F.pd)(f)).deep_link_id:null,b=(0,F.zd)((0,F.pd)(y)).deep_link_id;return(b?(0,F.zd)((0,F.pd)(b)).link:null)||b||g||f||y}(f);try{return new vu(g)}catch(b){return null}}}let Qc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,b){return Er._fromEmailAndPassword(g,b)}static credentialWithLink(g,b){const G=vu.parseLink(b);return B(G,"argument-error"),Er._fromEmailAndCode(g,G.code,G.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class wr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Jo extends wr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Li extends Jo{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return B("providerId"in g&&"signInMethod"in g,"argument-error"),ro._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return B(f.idToken||f.accessToken,"argument-error"),ro._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Li.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Li.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:b,oauthTokenSecret:G,pendingToken:ae,nonce:Se,providerId:Ve}=f;if(!b&&!G&&!g&&!ae||!Ve)return null;try{return new Li(Ve)._credential({idToken:g,accessToken:b,nonce:Se,pendingToken:ae})}catch(tt){return null}}}let ks=(()=>{class y extends Jo{constructor(){super("facebook.com")}static credential(g){return ro._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(b){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Jc=(()=>{class y extends Jo{constructor(){super("google.com"),this.addScope("profile")}static credential(g,b){return ro._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:b})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:b,oauthAccessToken:G}=g;if(!b&&!G)return null;try{return y.credential(b,G)}catch(ae){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Eh=(()=>{class y extends Jo{constructor(){super("github.com")}static credential(g){return ro._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(b){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Xo extends vi{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Mo(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,Mo(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Mo(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:G,pendingToken:ae}=g;return b&&G&&ae&&b===G?new Xo(b,ae):null}static _create(f,g){return new Xo(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Nr extends wr{constructor(f){B(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Nr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Nr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Xo.fromJSON(f);return B(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:b}=f;if(!g||!b)return null;try{return Xo._create(b,g)}catch(G){return null}}}let ed=(()=>{class y extends Jo{constructor(){super("twitter.com")}static credential(g,b){return ro._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:b})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:b,oauthTokenSecret:G}=g;if(!b||!G)return null;try{return y.credential(b,G)}catch(ae){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function kr(y,f){return es.apply(this,arguments)}function es(){return(es=(0,c.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:signUp",Ue(y,f))})).apply(this,arguments)}class ri{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,b,G=!1){return(0,c.Z)(function*(){const ae=yield It._fromIdTokenResponse(f,b,G),Se=Tl(b);return new ri({user:ae,providerId:Se,_tokenResponse:b,operationType:g})})()}static _forOperation(f,g,b){return(0,c.Z)(function*(){yield f._updateTokensIfNecessary(b,!0);const G=Tl(b);return new ri({user:f,providerId:G,_tokenResponse:b,operationType:g})})()}}function Tl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Cl(){return(Cl=(0,c.Z)(function*(y){var f;const g=Dt(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new ri({user:g.currentUser,providerId:null,operationType:"signIn"});const b=yield kr(g,{returnSecureToken:!0}),G=yield ri._fromIdTokenResponse(g,"signIn",b,!0);return yield g._updateCurrentUser(G.user),G})).apply(this,arguments)}class Ps extends F.ZR{constructor(f,g,b,G){var ae;super(g.code,g.message),this.operationType=b,this.user=G,Object.setPrototypeOf(this,Ps.prototype),this.customData={appName:f.name,tenantId:null!==(ae=f.tenantId)&&void 0!==ae?ae:void 0,_serverResponse:g.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(f,g,b,G){return new Ps(f,g,b,G)}}function Al(y,f,g,b){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(ae=>{throw"auth/multi-factor-auth-required"===ae.code?Ps._fromErrorAndOperation(y,ae,f,b):ae})}function Fi(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function bn(){return(bn=(0,c.Z)(function*(y,f){const g=(0,F.m9)(y);yield pn(!0,g,f);const{providerUserInfo:b}=yield ze(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),G=Fi(b||[]);return g.providerData=g.providerData.filter(ae=>G.has(ae.providerId)),G.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function ga(y,f){return ts.apply(this,arguments)}function ts(){return(ts=(0,c.Z)(function*(y,f,g=!1){const b=yield _r(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return ri._forOperation(y,"link",b)})).apply(this,arguments)}function pn(y,f,g){return ma.apply(this,arguments)}function ma(){return(ma=(0,c.Z)(function*(y,f,g){yield Or(f);const G=!1===y?"provider-already-linked":"no-such-provider";B(Fi(f.providerData).has(g)===y,f.auth,G)})).apply(this,arguments)}function _u(y,f){return ko.apply(this,arguments)}function ko(){return(ko=(0,c.Z)(function*(y,f,g=!1){var b;const{auth:G}=y,ae="reauthenticate";try{const Se=yield _r(y,Al(G,ae,f,y),g);B(Se.idToken,G,"internal-error");const Ve=ft(Se.idToken);B(Ve,G,"internal-error");const{sub:tt}=Ve;return B(y.uid===tt,G,"user-mismatch"),ri._forOperation(y,ae,Se)}catch(Se){throw"auth/user-not-found"===(null===(b=Se)||void 0===b?void 0:b.code)&&Z(G,"user-mismatch"),Se}})).apply(this,arguments)}function fr(y,f){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,c.Z)(function*(y,f,g=!1){const b="signIn",G=yield Al(y,b,f),ae=yield ri._fromIdTokenResponse(y,b,G);return g||(yield y._updateCurrentUser(ae.user)),ae})).apply(this,arguments)}function On(y,f){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,c.Z)(function*(y,f){return fr(Dt(y),f)})).apply(this,arguments)}function pr(y,f){return ns.apply(this,arguments)}function ns(){return(ns=(0,c.Z)(function*(y,f){const g=(0,F.m9)(y);return yield pn(!1,g,f.providerId),ga(g,f)})).apply(this,arguments)}function io(y,f){return ya.apply(this,arguments)}function ya(){return(ya=(0,c.Z)(function*(y,f){return _u((0,F.m9)(y),f)})).apply(this,arguments)}function _i(y,f){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,c.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:signInWithCustomToken",Ue(y,f))})).apply(this,arguments)}function St(){return(St=(0,c.Z)(function*(y,f){const g=Dt(y),b=yield _i(g,{token:f,returnSecureToken:!0}),G=yield ri._fromIdTokenResponse(g,"signIn",b);return yield g._updateCurrentUser(G.user),G})).apply(this,arguments)}class Fs{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?bu._fromServerResponse(f,g):Z(f,"internal-error")}}class bu extends Fs{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new bu(g)}}function va(y,f,g){var b;B((null===(b=g.url)||void 0===b?void 0:b.length)>0,y,"invalid-continue-uri"),B(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(B(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(B(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function _a(){return(_a=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y),G={requestType:"PASSWORD_RESET",email:f};g&&va(b,G,g),yield fa(b,G)})).apply(this,arguments)}function Ml(){return(Ml=(0,c.Z)(function*(y,f,g){yield Un((0,F.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Jt(){return(Jt=(0,c.Z)(function*(y,f){yield gu((0,F.m9)(y),{oobCode:f})})).apply(this,arguments)}function Eu(y,f){return An.apply(this,arguments)}function An(){return(An=(0,c.Z)(function*(y,f){const g=(0,F.m9)(y),b=yield Un(g,{oobCode:f}),G=b.requestType;switch(B(G,g,"internal-error"),G){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(b.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(b.mfaInfo,g,"internal-error");default:B(b.email,g,"internal-error")}let ae=null;return b.mfaInfo&&(ae=Fs._fromServerResponse(Dt(g),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:ae},operation:G}})).apply(this,arguments)}function rs(){return(rs=(0,c.Z)(function*(y,f){const{data:g}=yield Eu((0,F.m9)(y),f);return g.email})).apply(this,arguments)}function ba(){return(ba=(0,c.Z)(function*(y,f,g){const b=Dt(y),G=yield kr(b,{returnSecureToken:!0,email:f,password:g}),ae=yield ri._fromIdTokenResponse(b,"signIn",G);return yield b._updateCurrentUser(ae.user),ae})).apply(this,arguments)}function wu(){return(wu=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y),G={requestType:"EMAIL_SIGNIN",email:f};B(g.handleCodeInApp,b,"argument-error"),g&&va(b,G,g),yield ki(b,G)})).apply(this,arguments)}function Bn(){return(Bn=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y),G=Qc.credentialWithLink(f,g||le());return B(G._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),On(b,G)})).apply(this,arguments)}function oo(y,f){return wa.apply(this,arguments)}function wa(){return(wa=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:createAuthUri",Ue(y,f))})).apply(this,arguments)}function bi(){return(bi=(0,c.Z)(function*(y,f){const b={identifier:f,continueUri:ie()?le():"http://localhost"},{signinMethods:G}=yield oo((0,F.m9)(y),b);return G||[]})).apply(this,arguments)}function Du(){return(Du=(0,c.Z)(function*(y,f){const g=(0,F.m9)(y),G={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&va(g.auth,G,f);const{email:ae}=yield _n(g.auth,G);ae!==y.email&&(yield y.reload())})).apply(this,arguments)}function Tu(){return(Tu=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y),ae={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&va(b.auth,ae,g);const{email:Se}=yield $c(b.auth,ae);Se!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ia(y,f){return Da.apply(this,arguments)}function Da(){return(Da=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ta(){return(Ta=(0,c.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const b=(0,F.m9)(y),ae={idToken:yield b.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},Se=yield _r(b,Ia(b.auth,ae));b.displayName=Se.displayName||null,b.photoURL=Se.photoUrl||null;const Ve=b.providerData.find(({providerId:tt})=>"password"===tt);Ve&&(Ve.displayName=b.displayName,Ve.photoURL=b.photoURL),yield b._updateTokensIfNecessary(Se)})).apply(this,arguments)}function Us(y,f,g){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,c.Z)(function*(y,f,g){const{auth:b}=y,ae={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(ae.email=f),g&&(ae.password=g);const Se=yield _r(y,ha(b,ae));yield y._updateTokensIfNecessary(Se,!0)})).apply(this,arguments)}class Bs{constructor(f,g,b={}){this.isNewUser=f,this.providerId=g,this.profile=b}}class rd extends Bs{constructor(f,g,b,G){super(f,g,b),this.username=G}}class js extends Bs{constructor(f,g){super(f,"facebook.com",g)}}class Bi extends rd{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Ih extends Bs{constructor(f,g){super(f,"google.com",g)}}class ar extends rd{constructor(f,g,b){super(f,"twitter.com",g,b)}}function ji(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function nd(y){var f,g;if(!y)return null;const{providerId:b}=y,G=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},ae=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!b&&(null==y?void 0:y.idToken)){const Se=null===(g=null===(f=ft(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(Se)return new Bs(ae,"anonymous"!==Se&&"custom"!==Se?Se:null)}if(!b)return null;switch(b){case"facebook.com":return new js(ae,G);case"github.com":return new Bi(ae,G);case"google.com":return new Ih(ae,G);case"twitter.com":return new ar(ae,G,y.screenName||null);case"custom":case"anonymous":return new Bs(ae,null);default:return new Bs(ae,b,G)}}(g)}class so{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new so("enroll",f)}static _fromMfaPendingCredential(f){return new so("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,b;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return so._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(b=f.multiFactorSession)||void 0===b?void 0:b.idToken)return so._fromIdtoken(f.multiFactorSession.idToken)}return null}}class qs{constructor(f,g,b){this.session=f,this.hints=g,this.signInResolver=b}static _fromError(f,g){const b=Dt(f),G=g.customData._serverResponse,ae=(G.mfaInfo||[]).map(Ve=>Fs._fromServerResponse(b,Ve));B(G.mfaPendingCredential,b,"internal-error");const Se=so._fromMfaPendingCredential(G.mfaPendingCredential);return new qs(Se,ae,function(){var Ve=(0,c.Z)(function*(tt){const dt=yield tt._process(b,Se);delete G.mfaInfo,delete G.mfaPendingCredential;const Nt=Object.assign(Object.assign({},G),{idToken:dt.idToken,refreshToken:dt.refreshToken});switch(g.operationType){case"signIn":const Ct=yield ri._fromIdTokenResponse(b,g.operationType,Nt);return yield b._updateCurrentUser(Ct.user),Ct;case"reauthenticate":return B(g.user,b,"internal-error"),ri._forOperation(g.user,g.operationType,Nt);default:Z(b,"internal-error")}});return function(tt){return Ve.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,c.Z)(function*(){return g.signInResolver(f)})()}}function Th(y,f){return Qe(y,"POST","/v2/accounts/mfaEnrollment:start",Ue(y,f))}class sd{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(b=>Fs._fromServerResponse(f.auth,b)))})}static _fromUser(f){return new sd(f)}getSession(){var f=this;return(0,c.Z)(function*(){return so._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var b=this;return(0,c.Z)(function*(){const G=f,ae=yield b.getSession(),Se=yield _r(b.user,G._process(b.user.auth,ae,g));return yield b.user._updateTokensIfNecessary(Se),b.user.reload()})()}unenroll(f){var g=this;return(0,c.Z)(function*(){var b;const G="string"==typeof f?f:f.uid,ae=yield g.user.getIdToken(),Se=yield _r(g.user,function Cu(y,f){return Qe(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ue(y,f))}(g.user.auth,{idToken:ae,mfaEnrollmentId:G}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Ve})=>Ve!==G),yield g.user._updateTokensIfNecessary(Se);try{yield g.user.reload()}catch(Ve){if("auth/user-token-expired"!==(null===(b=Ve)||void 0===b?void 0:b.code))throw Ve}})()}}const Au=new WeakMap,Po="__sak";class Fl{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Po,"1"),this.storage.removeItem(Po),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const oi=(()=>{class y extends Fl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,b)=>this.onStorageEvent(g,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Mp(){const y=(0,F.z$)();return Os(y)||Hr(y)}()&&function dr(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Ao(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const b of Object.keys(this.listeners)){const G=this.storage.getItem(b),ae=this.localCache[b];G!==ae&&g(b,ae,G)}}onStorageEvent(g,b=!1){if(!g.key)return void this.forAllChangedKeys((Ve,tt,dt)=>{this.notifyListeners(Ve,dt)});const G=g.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ve=this.storage.getItem(G);if(g.newValue!==Ve)null!==g.newValue?this.storage.setItem(G,g.newValue):this.storage.removeItem(G);else if(this.localCache[G]===g.newValue&&!b)return}const ae=()=>{const Ve=this.storage.getItem(G);!b&&this.localCache[G]===Ve||this.notifyListeners(G,Ve)},Se=this.storage.getItem(G);!function da(){return(0,F.w1)()&&10===document.documentMode}()||Se===g.newValue||g.newValue===g.oldValue?ae():setTimeout(ae,10)}notifyListeners(g,b){this.localCache[g]=b;const G=this.listeners[g];if(G)for(const ae of Array.from(G))ae(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,b,G)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:b,newValue:G}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,b){var G=()=>super._set,ae=this;return(0,c.Z)(function*(){yield G().call(ae,g,b),ae.localCache[g]=JSON.stringify(b)})()}_get(g){var b=()=>super._get,G=this;return(0,c.Z)(function*(){const ae=yield b().call(G,g);return G.localCache[g]=JSON.stringify(ae),ae})()}_remove(g){var b=()=>super._remove,G=this;return(0,c.Z)(function*(){yield b().call(G,g),delete G.localCache[g]})()}}return y.type="LOCAL",y})(),Zn=(()=>{class y extends Fl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,b){}_removeListener(g,b){}}return y.type="SESSION",y})();let ad=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const b=this.receivers.find(ae=>ae.isListeningto(g));if(b)return b;const G=new y(g);return this.receivers.push(G),G}isListeningto(g){return this.eventTarget===g}handleEvent(g){var b=this;return(0,c.Z)(function*(){const G=g,{eventId:ae,eventType:Se,data:Ve}=G.data,tt=b.handlersMap[Se];if(!(null==tt?void 0:tt.size))return;G.ports[0].postMessage({status:"ack",eventId:ae,eventType:Se});const dt=Array.from(tt).map(function(){var Ct=(0,c.Z)(function*(Pn){return Pn(G.origin,Ve)});return function(Pn){return Ct.apply(this,arguments)}}()),Nt=yield function Vl(y){return Promise.all(y.map(function(){var f=(0,c.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(b){return{fulfilled:!1,reason:b}}});return function(g){return f.apply(this,arguments)}}()))}(dt);G.ports[0].postMessage({status:"done",eventId:ae,eventType:Se,response:Nt})})()}_subscribe(g,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(b)}_unsubscribe(g,b){this.handlersMap[g]&&b&&this.handlersMap[g].delete(b),(!b||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function qi(y="",f=10){let g="";for(let b=0;b<f;b++)g+=Math.floor(10*Math.random());return y+g}class Ul{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,b=50){var G=this;return(0,c.Z)(function*(){const ae="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ae)throw new Error("connection_unavailable");let Se,Ve;return new Promise((tt,dt)=>{const Nt=qi("",20);ae.port1.start();const Ct=setTimeout(()=>{dt(new Error("unsupported_event"))},b);Ve={messageChannel:ae,onMessage(Pn){const fi=Pn;if(fi.data.eventId===Nt)switch(fi.data.status){case"ack":clearTimeout(Ct),Se=setTimeout(()=>{dt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Se),tt(fi.data.response);break;default:clearTimeout(Ct),clearTimeout(Se),dt(new Error("invalid_response"))}}},G.handlers.add(Ve),ae.port1.addEventListener("message",Ve.onMessage),G.target.postMessage({eventType:f,eventId:Nt,data:g},[ae.port2])}).finally(()=>{Ve&&G.removeMessageHandler(Ve)})})()}}function In(){return window}function Ei(){return void 0!==In().WorkerGlobalScope&&"function"==typeof In().importScripts}function Su(){return(Su=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Oa="firebaseLocalStorageDb",Lo="firebaseLocalStorage",xu="fbase_key";class Hi{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Fo(y,f){return y.transaction([Lo],f?"readwrite":"readonly").objectStore(Lo)}function ss(){const y=indexedDB.open(Oa,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const b=y.result;try{b.createObjectStore(Lo,{keyPath:xu})}catch(G){g(G)}}),y.addEventListener("success",(0,c.Z)(function*(){const b=y.result;b.objectStoreNames.contains(Lo)?f(b):(b.close(),yield function Ma(){const y=indexedDB.deleteDatabase(Oa);return new Hi(y).toPromise()}(),f(yield ss()))}))})}function Na(y,f,g){return as.apply(this,arguments)}function as(){return(as=(0,c.Z)(function*(y,f,g){const b=Fo(y,!0).put({[xu]:f,value:g});return new Hi(b).toPromise()})).apply(this,arguments)}function ka(){return(ka=(0,c.Z)(function*(y,f){const g=Fo(y,!1).get(f),b=yield new Hi(g).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Ra(y,f){const g=Fo(y,!0).delete(f);return new Hi(g).toPromise()}const Bo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,c.Z)(function*(){return g.db||(g.db=yield ss()),g.db})()}_withRetries(g){var b=this;return(0,c.Z)(function*(){let G=0;for(;;)try{const ae=yield b._openDb();return yield g(ae)}catch(ae){if(G++>3)throw ae;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,c.Z)(function*(){return Ei()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,c.Z)(function*(){g.receiver=ad._getInstance(function ld(){return Ei()?self:null}()),g.receiver._subscribe("keyChanged",function(){var b=(0,c.Z)(function*(G,ae){return{keyProcessed:(yield g._poll()).includes(ae.key)}});return function(G,ae){return b.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var b=(0,c.Z)(function*(G,ae){return["keyChanged"]});return function(G,ae){return b.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,c.Z)(function*(){var b,G;if(g.activeServiceWorker=yield function Wt(){return Su.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Ul(g.activeServiceWorker);const ae=yield g.sender._send("ping",{},800);!ae||(null===(b=ae[0])||void 0===b?void 0:b.fulfilled)&&(null===(G=ae[0])||void 0===G?void 0:G.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var b=this;return(0,c.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function ud(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:g},b.serviceWorkerReceiverAvailable?800:50)}catch(G){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const g=yield ss();return yield Na(g,Po,"1"),yield Ra(g,Po),!0}catch(g){}return!1})()}_withPendingWrite(g){var b=this;return(0,c.Z)(function*(){b.pendingWrites++;try{yield g()}finally{b.pendingWrites--}})()}_set(g,b){var G=this;return(0,c.Z)(function*(){return G._withPendingWrite((0,c.Z)(function*(){return yield G._withRetries(ae=>Na(ae,g,b)),G.localCache[g]=b,G.notifyServiceWorker(g)}))})()}_get(g){var b=this;return(0,c.Z)(function*(){const G=yield b._withRetries(ae=>function us(y,f){return ka.apply(this,arguments)}(ae,g));return b.localCache[g]=G,G})()}_remove(g){var b=this;return(0,c.Z)(function*(){return b._withPendingWrite((0,c.Z)(function*(){return yield b._withRetries(G=>Ra(G,g)),delete b.localCache[g],b.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,c.Z)(function*(){const b=yield g._withRetries(Se=>{const Ve=Fo(Se,!1).getAll();return new Hi(Ve).toPromise()});if(!b)return[];if(0!==g.pendingWrites)return[];const G=[],ae=new Set;for(const{fbase_key:Se,value:Ve}of b)ae.add(Se),JSON.stringify(g.localCache[Se])!==JSON.stringify(Ve)&&(g.notifyListeners(Se,Ve),G.push(Se));for(const Se of Object.keys(g.localCache))g.localCache[Se]&&!ae.has(Se)&&(g.notifyListeners(Se,null),G.push(Se));return G})()}notifyListeners(g,b){this.localCache[g]=b;const G=this.listeners[g];if(G)for(const ae of Array.from(G))ae(b)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function lr(y,f){return Qe(y,"POST","/v2/accounts/mfaSignIn:start",Ue(y,f))}function jn(){return(jn=(0,c.Z)(function*(y){return(yield Qe(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Wr(y){return new Promise((f,g)=>{const b=document.createElement("script");b.setAttribute("src",y),b.onload=f,b.onerror=G=>{const ae=X("internal-error");ae.customData=G,g(ae)},b.type="text/javascript",b.charset="UTF-8",function $s(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(b)})}function jo(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ir=1e12;class qn{constructor(f){this.auth=f,this.counter=Ir,this._widgets=new Map}render(f,g){const b=this.counter;return this._widgets.set(b,new Ou(f,this.auth.name,g||{})),this.counter++,b}reset(f){var g;const b=f||Ir;null===(g=this._widgets.get(b))||void 0===g||g.delete(),this._widgets.delete(b)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Ir))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,c.Z)(function*(){var b;return null===(b=g._widgets.get(f||Ir))||void 0===b||b.execute(),""})()}}class Ou{constructor(f,g,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const G="string"==typeof f?document.getElementById(f):f;B(G,"argument-error",{appName:g}),this.container=G,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Bl(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<y;b++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Sn=jo("rcb"),Ch=new xe(3e4,6e4);class cd{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(f=In().grecaptcha)||void 0===f?void 0:f.render)}load(f,g=""){return B(function Pa(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(In().grecaptcha):new Promise((b,G)=>{const ae=In().setTimeout(()=>{G(X(f,"network-request-failed"))},Ch.get());In()[Sn]=()=>{In().clearTimeout(ae),delete In()[Sn];const Ve=In().grecaptcha;if(!Ve)return void G(X(f,"internal-error"));const tt=Ve.render;Ve.render=(dt,Nt)=>{const Ct=tt(dt,Nt);return this.counter++,Ct},this.hostLanguage=g,b(Ve)},Wr(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Sn,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(ae),G(X(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!!(null===(g=In().grecaptcha)||void 0===g?void 0:g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ii{load(f){return(0,c.Z)(function*(){return new qn(f)})()}clearedOneInstance(){}}const Np="recaptcha",cs={theme:"light",type:"image"};class Gs{constructor(f,g=Object.assign({},cs),b){this.parameters=g,this.type=Np,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Dt(b),this.isInvisible="invisible"===this.parameters.size,B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const G="string"==typeof f?document.getElementById(f):f;B(G,this.auth,"argument-error"),this.container=G,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ii:new cd,this.validateStartingState()}verify(){var f=this;return(0,c.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),b=f.getAssertedRecaptcha();return b.getResponse(g)||new Promise(ae=>{const Se=Ve=>{!Ve||(f.tokenChangeListeners.delete(Se),ae(Ve))};f.tokenChangeListeners.add(Se),f.isInvisible&&b.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(b=>b(g)),"function"==typeof f)f(g);else if("string"==typeof f){const b=In()[f];"function"==typeof b&&b(g)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,c.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const b=document.createElement("div");g.appendChild(b),g=b}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,c.Z)(function*(){B(ie()&&!Ei(),f.auth,"internal-error"),yield function Mu(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function $i(y){return jn.apply(this,arguments)}(f.auth);B(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Rn{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Ns._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function qo(){return(qo=(0,c.Z)(function*(y,f,g){const b=Dt(y),G=yield zs(b,f,(0,F.m9)(g));return new Rn(G,ae=>On(b,ae))})).apply(this,arguments)}function jl(){return(jl=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y);yield pn(!1,b,"phone");const G=yield zs(b.auth,f,(0,F.m9)(g));return new Rn(G,ae=>pr(b,ae))})).apply(this,arguments)}function ui(){return(ui=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y),G=yield zs(b.auth,f,(0,F.m9)(g));return new Rn(G,ae=>io(b,ae))})).apply(this,arguments)}function zs(y,f,g){return ds.apply(this,arguments)}function ds(){return(ds=(0,c.Z)(function*(y,f,g){var b;const G=yield g.verify();try{let ae;if(B("string"==typeof G,y,"argument-error"),B(g.type===Np,y,"argument-error"),ae="string"==typeof f?{phoneNumber:f}:f,"session"in ae){const Se=ae.session;if("phoneNumber"in ae)return B("enroll"===Se.type,y,"internal-error"),(yield Th(y,{idToken:Se.credential,phoneEnrollmentInfo:{phoneNumber:ae.phoneNumber,recaptchaToken:G}})).phoneSessionInfo.sessionInfo;{B("signin"===Se.type,y,"internal-error");const Ve=(null===(b=ae.multiFactorHint)||void 0===b?void 0:b.uid)||ae.multiFactorUid;return B(Ve,y,"missing-multi-factor-info"),(yield lr(y,{mfaPendingCredential:Se.credential,mfaEnrollmentId:Ve,phoneSignInInfo:{recaptchaToken:G}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Se}=yield Dp(y,{phoneNumber:ae.phoneNumber,recaptchaToken:G});return Se}}finally{g._reset()}})).apply(this,arguments)}function Ru(){return(Ru=(0,c.Z)(function*(y,f){yield ga((0,F.m9)(y),f)})).apply(this,arguments)}let La=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Dt(g)}verifyPhoneNumber(g,b){return zs(this.auth,g,(0,F.m9)(b))}static credential(g,b){return Ns._fromVerification(g,b)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:b,temporaryProof:G}=g;return b&&G?Ns._fromTokenResponse(b,G):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function hs(y,f){return f?ue(f):(B(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class ql extends vi{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Mo(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Mo(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Mo(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Xt(y){return fr(y.auth,new ql(y),y.bypassAuthState)}function Pu(y){const{auth:f,user:g}=y;return B(g,f,"internal-error"),_u(g,new ql(y),y.bypassAuthState)}function Hn(y){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,c.Z)(function*(y){const{auth:f,user:g}=y;return B(g,f,"internal-error"),ga(g,new ql(y),y.bypassAuthState)})).apply(this,arguments)}class Di{constructor(f,g,b,G,ae=!1){this.auth=f,this.resolver=b,this.user=G,this.bypassAuthState=ae,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,c.Z)(function*(b,G){f.pendingPromise={resolve:b,reject:G};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(ae){f.reject(ae)}});return function(b,G){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,c.Z)(function*(){const{urlResponse:b,sessionId:G,postBody:ae,tenantId:Se,error:Ve,type:tt}=f;if(Ve)return void g.reject(Ve);const dt={auth:g.auth,requestUri:b,sessionId:G,tenantId:Se||void 0,postBody:ae||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(tt)(dt))}catch(Nt){g.reject(Nt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Xt;case"linkViaPopup":case"linkViaRedirect":return Hn;case"reauthViaPopup":case"reauthViaRedirect":return Pu;default:Z(this.auth,"internal-error")}}resolve(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const dd=new xe(2e3,1e4);function Fa(){return(Fa=(0,c.Z)(function*(y,f,g){const b=Dt(y);H(y,f,wr);const G=hs(b,g);return new $l(b,"signInViaPopup",f,G).executeNotNull()})).apply(this,arguments)}function Hl(){return(Hl=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y);H(b.auth,f,wr);const G=hs(b.auth,g);return new $l(b.auth,"reauthViaPopup",f,G,b).executeNotNull()})).apply(this,arguments)}function Fu(){return(Fu=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y);H(b.auth,f,wr);const G=hs(b.auth,g);return new $l(b.auth,"linkViaPopup",f,G,b).executeNotNull()})).apply(this,arguments)}let $l=(()=>{class y extends Di{constructor(g,b,G,ae,Se){super(g,b,ae,Se),this.provider=G,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,c.Z)(function*(){const b=yield g.execute();return B(b,g.auth,"internal-error"),b})()}onExecution(){var g=this;return(0,c.Z)(function*(){Y(1===g.filter.length,"Popup operations only handle one event");const b=qi();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],b),g.authWindow.associatedEvent=b,g.resolver._originValidation(g.auth).catch(G=>{g.reject(G)}),g.resolver._isIframeWebStorageSupported(g.auth,G=>{G||g.reject(X(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(X(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var b,G;this.pollId=(null===(G=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===G?void 0:G.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(X(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,dd.get())};g()}}return y.currentPopupAction=null,y})();const nr=new Map;class Rp extends Di{constructor(f,g,b=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,b),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,c.Z)(function*(){let b=nr.get(g.auth._key());if(!b){try{const ae=(yield function Va(y,f){return li.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;b=()=>Promise.resolve(ae)}catch(G){b=()=>Promise.reject(G)}nr.set(g.auth._key(),b)}return g.bypassAuthState||nr.set(g.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,b=this;return(0,c.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(b,f);if("unknown"!==f.type){if(f.eventId){const G=yield b.auth._redirectUserForId(f.eventId);if(G)return b.user=G,g().call(b,f);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function li(){return(li=(0,c.Z)(function*(y,f){const g=Gl(f),b=Ua(y);if(!(yield b._isAvailable()))return!1;const G="true"===(yield b._get(g));return yield b._remove(g),G})).apply(this,arguments)}function fs(y,f){return uo.apply(this,arguments)}function uo(){return(uo=(0,c.Z)(function*(y,f){return Ua(y)._set(Gl(f),"true")})).apply(this,arguments)}function hd(y,f){nr.set(y._key(),f)}function Ua(y){return ue(y._redirectPersistence)}function Gl(y){return sr("pendingRedirect",y.config.apiKey,y.name)}function O(){return(O=(0,c.Z)(function*(y,f,g){const b=Dt(y);H(y,f,wr);const G=hs(b,g);return yield fs(G,b),G._openRedirect(b,f,"signInViaRedirect")})).apply(this,arguments)}function ye(){return(ye=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y);H(b.auth,f,wr);const G=hs(b.auth,g);yield fs(G,b.auth);const ae=yield bt(b);return G._openRedirect(b.auth,f,"reauthViaRedirect",ae)})).apply(this,arguments)}function Ke(){return(Ke=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y);H(b.auth,f,wr);const G=hs(b.auth,g);yield pn(!1,b,f.providerId),yield fs(G,b.auth);const ae=yield bt(b);return G._openRedirect(b.auth,f,"linkViaRedirect",ae)})).apply(this,arguments)}function _t(){return(_t=(0,c.Z)(function*(y,f){return yield Dt(y)._initializationPromise,xt(y,f,!1)})).apply(this,arguments)}function xt(y,f){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,c.Z)(function*(y,f,g=!1){const b=Dt(y),G=hs(b,f),Se=yield new Rp(b,G,g).execute();return Se&&!g&&(delete Se.user._redirectEventId,yield b._persistUserIfCurrent(Se.user),yield b._setRedirectUser(null,f)),Se})).apply(this,arguments)}function bt(y){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,c.Z)(function*(y){const f=qi(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class lo{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(f,b)&&(g=!0,this.sendToConsumer(f,b),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function fd(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ti(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var b;if(f.error&&!Ti(f)){const G=(null===(b=f.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";g.onError(X(this.auth,G))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const b=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&b}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(co(f))}saveEventToCache(f){this.cachedEventUids.add(co(f)),this.lastProcessedEventTime=Date.now()}}function co(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Ti({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Vu(y){return gs.apply(this,arguments)}function gs(){return(gs=(0,c.Z)(function*(y,f={}){return Qe(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Tr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gi=/^https?/;function Pp(){return(Pp=(0,c.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Vu(y);for(const g of f)try{if(Lp(g))return}catch(b){}Z(y,"unauthorized-domain")})).apply(this,arguments)}function Lp(y){const f=le(),{protocol:g,hostname:b}=new URL(f);if(y.startsWith("chrome-extension://")){const Se=new URL(y);return""===Se.hostname&&""===b?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&Se.hostname===b}if(!Gi.test(g))return!1;if(Tr.test(y))return b===y;const G=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+G+"|"+G+")$","i").test(b)}const oy=new xe(3e4,6e4);function Fp(){const y=In().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Uu=null;function ms(y){return Uu=Uu||function Oh(y){return new Promise((f,g)=>{var b,G,ae;function Se(){Fp(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Fp(),g(X(y,"network-request-failed"))},timeout:oy.get()})}if(null===(G=null===(b=In().gapi)||void 0===b?void 0:b.iframes)||void 0===G?void 0:G.Iframe)f(gapi.iframes.getContext());else{if(!(null===(ae=In().gapi)||void 0===ae?void 0:ae.load)){const Ve=jo("iframefcb");return In()[Ve]=()=>{gapi.load?Se():g(X(y,"network-request-failed"))},Wr(`https://apis.google.com/js/api.js?onload=${Ve}`).catch(tt=>g(tt))}Se()}}).catch(f=>{throw Uu=null,f})}(y),Uu}const ys=new xe(5e3,15e3),sy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ja=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ay(y){const f=y.config;B(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?he(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,b={apiKey:f.apiKey,appName:y.name,v:K.SDK_VERSION},G=ja.get(y.config.apiHost);G&&(b.eid=G);const ae=y._getFrameworks();return ae.length&&(b.fw=ae.join(",")),`${g}?${(0,F.xO)(b).slice(1)}`}function Ws(){return Ws=(0,c.Z)(function*(y){const f=yield ms(y),g=In().gapi;return B(g,y,"internal-error"),f.open({where:document.body,url:ay(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sy,dontclear:!0},b=>new Promise(function(){var G=(0,c.Z)(function*(ae,Se){yield b.restyle({setHideOnLeave:!1});const Ve=X(y,"network-request-failed"),tt=In().setTimeout(()=>{Se(Ve)},ys.get());function dt(){In().clearTimeout(tt),ae(b)}b.ping(dt).then(dt,()=>{Se(Ve)})});return function(ae,Se){return G.apply(this,arguments)}}()))}),Ws.apply(this,arguments)}const Mh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Vp{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function ho(y,f,g,b,G,ae){B(y.config.authDomain,y,"auth-domain-config-required"),B(y.config.apiKey,y,"invalid-api-key");const Se={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:b,v:K.SDK_VERSION,eventId:G};if(f instanceof wr){f.setDefaultLanguage(y.languageCode),Se.providerId=f.providerId||"",(0,F.xb)(f.getCustomParameters())||(Se.customParameters=JSON.stringify(f.getCustomParameters()));for(const[tt,dt]of Object.entries(ae||{}))Se[tt]=dt}if(f instanceof Jo){const tt=f.getScopes().filter(dt=>""!==dt);tt.length>0&&(Se.scopes=tt.join(","))}y.tenantId&&(Se.tid=y.tenantId);const Ve=Se;for(const tt of Object.keys(Ve))void 0===Ve[tt]&&delete Ve[tt];return`${function Bu({config:y}){return y.emulator?he(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,F.xO)(Ve).slice(1)}`}const Wl="webStorageSupport";class Zl extends class cy{constructor(f){this.factorId=f}_process(f,g,b){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,b);case"signin":return this._finalizeSignIn(f,g.credential);default:return te("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Zl(f)}_finalizeEnroll(f,g,b){return function is(y,f){return Qe(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ue(y,f))}(f,{idToken:g,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function ls(y,f){return Qe(y,"POST","/v2/accounts/mfaSignIn:finalize",Ue(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Bp=(()=>{class y{constructor(){}static assertion(g){return Zl._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var jp="@firebase/auth";class Hp{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,c.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(b=>{var G;f((null===(G=b)||void 0===G?void 0:G.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function fo(){return window}function qa(){return(qa=(0,c.Z)(function*(y,f,g){var b;const{BuildInfo:G}=fo();Y(f.sessionId,"AuthEvent did not contain a session ID");const ae=yield Lh(f.sessionId),Se={};return Hr()?Se.ibi=G.packageName:Mr()?Se.apn=G.packageName:Z(y,"operation-not-supported-in-this-environment"),G.displayName&&(Se.appDisplayName=G.displayName),Se.sessionId=ae,ho(y,g,f.type,void 0,null!==(b=f.eventId)&&void 0!==b?b:void 0,Se)})).apply(this,arguments)}function _d(){return(_d=(0,c.Z)(function*(y){const{BuildInfo:f}=fo(),g={};Hr()?g.iosBundleId=f.packageName:Mr()?g.androidPackageName=f.packageName:Z(y,"operation-not-supported-in-this-environment"),yield Vu(y,g)})).apply(this,arguments)}function zp(){return(zp=(0,c.Z)(function*(y,f,g){const{cordova:b}=fo();let G=()=>{};try{yield new Promise((ae,Se)=>{let Ve=null;function tt(){var Ct;ae();const Pn=null===(Ct=b.plugins.browsertab)||void 0===Ct?void 0:Ct.close;"function"==typeof Pn&&Pn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function dt(){Ve||(Ve=window.setTimeout(()=>{Se(X(y,"redirect-cancelled-by-user"))},2e3))}function Nt(){"visible"===(null==document?void 0:document.visibilityState)&&dt()}f.addPassiveListener(tt),document.addEventListener("resume",dt,!1),Mr()&&document.addEventListener("visibilitychange",Nt,!1),G=()=>{f.removePassiveListener(tt),document.removeEventListener("resume",dt,!1),document.removeEventListener("visibilitychange",Nt,!1),Ve&&window.clearTimeout(Ve)}})}finally{G()}})).apply(this,arguments)}function Lh(y){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,c.Z)(function*(y){const f=Fh(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(G=>G.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Fh(y){if(Y(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let b=0;b<y.length;b++)g[b]=y.charCodeAt(b);return g}!function g0(y){(0,K._registerComponent)(new R.wA("auth",(f,{options:g})=>{const b=f.getProvider("app").getImmediate(),G=f.getProvider("heartbeat"),{apiKey:ae,authDomain:Se}=b.options;return((Ve,tt)=>{B(ae&&!ae.includes(":"),"invalid-api-key",{appName:Ve.name}),B(!(null==Se?void 0:Se.includes(":")),"argument-error",{appName:Ve.name});const dt={apiKey:ae,authDomain:Se,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ms(y)},Nt=new lt(Ve,tt,dt);return function ce(y,f){const g=(null==f?void 0:f.persistence)||[],b=(Array.isArray(g)?g:[g]).map(ue);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(b,null==f?void 0:f.popupRedirectResolver)}(Nt,g),Nt})(b,G)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,b)=>{f.getProvider("auth-internal").initialize()})),(0,K._registerComponent)(new R.wA("auth-internal",f=>{const g=Dt(f.getProvider("auth").getImmediate());return new Hp(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,K.registerVersion)(jp,"0.20.5",function vd(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,K.registerVersion)(jp,"0.20.5","esm2017")}("Browser");class Ed extends lo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,c.Z)(function*(){yield f.initPromise})()}}function Hu(y){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,c.Z)(function*(y){const f=yield $a()._get(wd(y));return f&&(yield $a()._remove(wd(y))),f})).apply(this,arguments)}function Vh(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const b=Math.floor(Math.random()*f.length);y.push(f.charAt(b))}return y.join("")}function $a(){return ue(oi)}function wd(y){return sr("authEvent",y.config.apiKey,y.name)}function sn(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,F.zd)(g.join("?"))}function Ga(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:X("no-auth-event")}}function Zs(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Zp(y=(0,F.z$)()){return!("file:"!==Zs()&&"ionic:"!==Zs()&&"capacitor:"!==Zs()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Hh(){try{const y=self.localStorage,f=qi();if(y)return y.setItem(f,"1"),y.removeItem(f),!function qh(y=(0,F.z$)()){return function Rr(){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)}()||function za(y=(0,F.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,F.hl)()}catch(y){return gr()&&(0,F.hl)()}return!1}function gr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wa(){return(function yy(){return"http:"===Zs()||"https:"===Zs()}()||(0,F.ru)()||Zp())&&!function Ks(){return(0,F.b$)()||(0,F.UG)()}()&&Hh()&&!gr()}function Id(){return Zp()&&"undefined"!=typeof document}function Ql(){return(Ql=(0,c.Z)(function*(){return!!Id()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const ci={LOCAL:"local",NONE:"none",SESSION:"session"},bs=B,Yp="persistence";function Gu(y){return $h.apply(this,arguments)}function $h(){return($h=(0,c.Z)(function*(y){yield y._initializationPromise;const f=Jp(),g=sr(Yp,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Jp(){var y;try{return(null===(y=function Kp(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const _y=B;class di{constructor(){this.browserResolver=ue(class Up{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zn,this._completeRedirectFn=xt,this._overrideRedirectResult=hd}_openPopup(f,g,b,G){var ae=this;return(0,c.Z)(function*(){var Se;Y(null===(Se=ae.eventManagers[f._key()])||void 0===Se?void 0:Se.manager,"_initialize() not called before _openPopup()");const Ve=ho(f,g,b,le(),G);return function zl(y,f,g,b=500,G=600){const ae=Math.max((window.screen.availHeight-G)/2,0).toString(),Se=Math.max((window.screen.availWidth-b)/2,0).toString();let Ve="";const tt=Object.assign(Object.assign({},Mh),{width:b.toString(),height:G.toString(),top:ae,left:Se}),dt=(0,F.z$)().toLowerCase();g&&(Ve=ca(dt)?"_blank":g),Oi(dt)&&(f=f||"http://localhost",tt.scrollbars="yes");const Nt=Object.entries(tt).reduce((Pn,[fi,Xl])=>`${Pn}${fi}=${Xl},`,"");if(function Yo(y=(0,F.z$)()){var f;return Hr(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(dt)&&"_self"!==Ve)return function uy(y,f){const g=document.createElement("a");g.href=y,g.target=f;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(b)}(f||"",Ve),new Vp(null);const Ct=window.open(f||"",Ve,Nt);B(Ct,y,"popup-blocked");try{Ct.focus()}catch(Pn){}return new Vp(Ct)}(f,Ve,qi())})()}_openRedirect(f,g,b,G){var ae=this;return(0,c.Z)(function*(){return yield ae._originValidation(f),function xa(y){In().location.href=y}(ho(f,g,b,le(),G)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:G,promise:ae}=this.eventManagers[g];return G?Promise.resolve(G):(Y(ae,"If manager is not set, promise should be"),ae)}const b=this.initAndGetManager(f);return this.eventManagers[g]={promise:b},b.catch(()=>{delete this.eventManagers[g]}),b}initAndGetManager(f){var g=this;return(0,c.Z)(function*(){const b=yield function md(y){return Ws.apply(this,arguments)}(f),G=new lo(f);return b.register("authEvent",ae=>(B(null==ae?void 0:ae.authEvent,f,"invalid-auth-event"),{status:G.onEvent(ae.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:G},g.iframes[f._key()]=b,G})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Wl,{type:Wl},G=>{var ae;const Se=null===(ae=null==G?void 0:G[0])||void 0===ae?void 0:ae[Wl];void 0!==Se&&g(!!Se),Z(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function pd(y){return Pp.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ao()||Os()||Hr()}}),this.cordovaResolver=ue(class Wp{constructor(){this._redirectPersistence=Zn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=xt,this._overrideRedirectResult=hd}_initialize(f){var g=this;return(0,c.Z)(function*(){const b=f._key();let G=g.eventManagers.get(b);return G||(G=new Ed(f),g.eventManagers.set(b,G),g.attachCallbackListeners(f,G)),G})()}_openPopup(f){Z(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,b,G){var ae=this;return(0,c.Z)(function*(){!function ju(y){var f,g,b,G,ae,Se,Ve,tt,dt,Nt;const Ct=fo();B("function"==typeof(null===(f=null==Ct?void 0:Ct.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),B(void 0!==(null===(g=null==Ct?void 0:Ct.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),B("function"==typeof(null===(ae=null===(G=null===(b=null==Ct?void 0:Ct.cordova)||void 0===b?void 0:b.plugins)||void 0===G?void 0:G.browsertab)||void 0===ae?void 0:ae.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(tt=null===(Ve=null===(Se=null==Ct?void 0:Ct.cordova)||void 0===Se?void 0:Se.plugins)||void 0===Ve?void 0:Ve.browsertab)||void 0===tt?void 0:tt.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(Nt=null===(dt=null==Ct?void 0:Ct.cordova)||void 0===dt?void 0:dt.InAppBrowser)||void 0===Nt?void 0:Nt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Se=yield ae._initialize(f);yield Se.initialized(),Se.resetRedirect(),function xh(){nr.clear()}(),yield ae._originValidation(f);const Ve=function qu(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Vh(),postBody:null,tenantId:y.tenantId,error:X(y,"no-auth-event")}}(f,b,G);yield function dy(y,f){return $a()._set(wd(y),f)}(f,Ve);const tt=yield function po(y,f,g){return qa.apply(this,arguments)}(f,Ve,g),dt=yield function bd(y){const{cordova:f}=fo();return new Promise(g=>{f.plugins.browsertab.isAvailable(b=>{let G=null;b?f.plugins.browsertab.openUrl(y):G=f.InAppBrowser.open(y,function Hc(y=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(G)})})}(tt);return function Ha(y,f,g){return zp.apply(this,arguments)}(f,Se,dt)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Gp(y){return _d.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:b,handleOpenURL:G,BuildInfo:ae}=fo(),Se=setTimeout((0,c.Z)(function*(){yield Hu(f),g.onEvent(Ga())}),500),Ve=function(){var Nt=(0,c.Z)(function*(Ct){clearTimeout(Se);const Pn=yield Hu(f);let fi=null;Pn&&(null==Ct?void 0:Ct.url)&&(fi=function hy(y,f){var g,b;const G=function Bh(y){const f=sn(y),g=f.link?decodeURIComponent(f.link):void 0,b=sn(g).link,G=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return sn(G).link||G||b||g||y}(f);if(G.includes("/__/auth/callback")){const ae=sn(G),Se=ae.firebaseError?function Uh(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(ae.firebaseError)):null,Ve=null===(b=null===(g=null==Se?void 0:Se.code)||void 0===g?void 0:g.split("auth/"))||void 0===b?void 0:b[1],tt=Ve?X(Ve):null;return tt?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:tt,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:G,postBody:null}}return null}(Pn,Ct.url)),g.onEvent(fi||Ga())});return function(Pn){return Nt.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,Ve);const tt=G,dt=`${ae.packageName.toLowerCase()}://`;fo().handleOpenURL=function(){var Nt=(0,c.Z)(function*(Ct){if(Ct.toLowerCase().startsWith(dt)&&Ve({url:Ct}),"function"==typeof tt)try{tt(Ct)}catch(Pn){console.error(Pn)}});return function(Ct){return Nt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Zn,this._completeRedirectFn=xt,this._overrideRedirectResult=hd}_initialize(f){var g=this;return(0,c.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,b,G){var ae=this;return(0,c.Z)(function*(){return yield ae.selectUnderlyingResolver(),ae.assertedUnderlyingResolver._openPopup(f,g,b,G)})()}_openRedirect(f,g,b,G){var ae=this;return(0,c.Z)(function*(){return yield ae.selectUnderlyingResolver(),ae.assertedUnderlyingResolver._openRedirect(f,g,b,G)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Id()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return _y(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,c.Z)(function*(){if(f.underlyingResolver)return;const g=yield function vy(){return Ql.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Xp(y){return y.unwrap()}function Dd(y){return eg(y)}function eg(y){const{_tokenResponse:f}=y instanceof F.ZR?y.customData:y;if(!f)return null;if(!(y instanceof F.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return La.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let b;switch(g){case"google.com":b=Jc;break;case"facebook.com":b=ks;break;case"github.com":b=Eh;break;case"twitter.com":b=ed;break;default:const{oauthIdToken:G,oauthAccessToken:ae,oauthTokenSecret:Se,pendingToken:Ve,nonce:tt}=f;return ae||Se||G||Ve?Ve?g.startsWith("saml.")?Xo._create(g,Ve):ro._fromParams({providerId:g,signInMethod:g,pendingToken:Ve,idToken:G,accessToken:ae}):new Li(g).credential({idToken:G,accessToken:ae,rawNonce:tt}):null}return y instanceof F.ZR?b.credentialFromError(y):b.credentialFromResult(y)}function hi(y,f){return f.catch(g=>{throw g instanceof F.ZR&&function Ey(y,f){var g,b;const G=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(b=f)||void 0===b?void 0:b.code))f.resolver=new tg(y,function ur(y,f){var g;const b=(0,F.m9)(y),G=f;return B(f.customData.operationType,b,"argument-error"),B(null===(g=G.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,b,"argument-error"),qs._fromError(b,G)}(y,f));else if(G){const ae=eg(f),Se=f;ae&&(Se.credential=ae,Se.tenantId=G.tenantId||void 0,Se.email=G.email||void 0,Se.phoneNumber=G.phoneNumber||void 0)}}(y,g),g}).then(g=>{const G=g.user;return{operationType:g.operationType,credential:Dd(g),additionalUserInfo:ji(g),user:Go.getOrCreate(G)}})}function Gh(y,f){return zh.apply(this,arguments)}function zh(){return(zh=(0,c.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:b=>hi(y,g.confirm(b))}})).apply(this,arguments)}class tg{constructor(f,g){this.resolver=g,this.auth=function by(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return hi(Xp(this.auth),this.resolver.resolveSignIn(f))}}class Go{constructor(f){this._delegate=f,this.multiFactor=function os(y){const f=(0,F.m9)(y);return Au.has(f)||Au.set(f,sd._fromUser(f)),Au.get(f)}(f)}static getOrCreate(f){return Go.USER_MAP.has(f)||Go.USER_MAP.set(f,new Go(f)),Go.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,c.Z)(function*(){return hi(g.auth,pr(g._delegate,f))})()}linkWithPhoneNumber(f,g){var b=this;return(0,c.Z)(function*(){return Gh(b.auth,function kp(y,f,g){return jl.apply(this,arguments)}(b._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,c.Z)(function*(){return hi(g.auth,function Sh(y,f,g){return Fu.apply(this,arguments)}(g._delegate,f,di))})()}linkWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Gu(Dt(g.auth)),function Oe(y,f,g){return function Pe(y,f,g){return Ke.apply(this,arguments)}(y,f,g)}(g._delegate,f,di)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,c.Z)(function*(){return hi(g.auth,io(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Gh(this.auth,function ai(y,f,g){return ui.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return hi(this.auth,function ao(y,f,g){return Hl.apply(this,arguments)}(this._delegate,f,di))}reauthenticateWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Gu(Dt(g.auth)),function U(y,f,g){return function oe(y,f,g){return ye.apply(this,arguments)}(y,f,g)}(g._delegate,f,di)})()}sendEmailVerification(f){return function kl(y,f){return Du.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,c.Z)(function*(){return yield function wh(y,f){return bn.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function xp(y,f){return Us((0,F.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Ll(y,f){return Us((0,F.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function ku(y,f){return Ru.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Pl(y,f){return Ta.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Rl(y,f,g){return Tu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Go.USER_MAP=new WeakMap;const Jl=B;let ng=(()=>{class y{constructor(g,b){if(this.app=g,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:G}=g.options;Jl(G,"invalid-api-key",{appName:g.name}),Jl(G,"invalid-api-key",{appName:g.name});const ae="undefined"!=typeof window?di:void 0;this._delegate=b.initialize({options:{persistence:wy(G,g.name),popupRedirectResolver:ae}}),this._delegate._updateErrorMap(x),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Go.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,b){!function Gr(y,f,g){const b=Dt(y);B(b._canInitEmulator,b,"emulator-config-failed"),B(/^https?:\/\//.test(f),b,"invalid-emulator-scheme");const G=!!(null==g?void 0:g.disableWarnings),ae=Mi(f),{host:Se,port:Ve}=function Wn(y){const f=Mi(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const b=g[2].split("@").pop()||"",G=/^(\[[^\]]+\])(:|$)/.exec(b);if(G){const ae=G[1];return{host:ae,port:Ni(b.substr(ae.length+1))}}{const[ae,Se]=b.split(":");return{host:ae,port:Ni(Se)}}}(f);b.config.emulator={url:`${ae}//${Se}${null===Ve?"":`:${Ve}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:Se,port:Ve,protocol:ae.replace(":",""),options:Object.freeze({disableWarnings:G})}),G||function Dn(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,b)}applyActionCode(g){return function We(y,f){return Jt.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Eu(this._delegate,g)}confirmPasswordReset(g,b){return function Ol(y,f,g){return Ml.apply(this,arguments)}(this._delegate,g,b)}createUserWithEmailAndPassword(g,b){var G=this;return(0,c.Z)(function*(){return hi(G._delegate,function ii(y,f,g){return ba.apply(this,arguments)}(G._delegate,g,b))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Ro(y,f){return bi.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Ea(y,f){const g=vu.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,c.Z)(function*(){Jl(Wa(),g._delegate,"operation-not-supported-in-this-environment");const b=yield function ot(y,f){return _t.apply(this,arguments)}(g._delegate,di);return b?hi(g._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function fy(y,f){Dt(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,b,G){const{next:ae,error:Se,complete:Ve}=rg(g,b,G);return this._delegate.onAuthStateChanged(ae,Se,Ve)}onIdTokenChanged(g,b,G){const{next:ae,error:Se,complete:Ve}=rg(g,b,G);return this._delegate.onIdTokenChanged(ae,Se,Ve)}sendSignInLinkToEmail(g,b){return function Sp(y,f,g){return wu.apply(this,arguments)}(this._delegate,g,b)}sendPasswordResetEmail(g,b){return function xl(y,f,g){return _a.apply(this,arguments)}(this._delegate,g,b||void 0)}setPersistence(g){var b=this;return(0,c.Z)(function*(){let G;switch(function Qp(y,f){bs(Object.values(ci).includes(f),y,"invalid-persistence-type"),(0,F.b$)()?bs(f!==ci.SESSION,y,"unsupported-persistence-type"):(0,F.UG)()?bs(f===ci.NONE,y,"unsupported-persistence-type"):gr()?bs(f===ci.NONE||f===ci.LOCAL&&(0,F.hl)(),y,"unsupported-persistence-type"):bs(f===ci.NONE||Hh(),y,"unsupported-persistence-type")}(b._delegate,g),g){case ci.SESSION:G=Zn;break;case ci.LOCAL:G=(yield ue(Bo)._isAvailable())?Bo:oi;break;case ci.NONE:G=un;break;default:return Z("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(G)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return hi(this._delegate,function td(y){return Cl.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return hi(this._delegate,On(this._delegate,g))}signInWithCustomToken(g){return hi(this._delegate,function Ls(y,f){return St.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,b){return hi(this._delegate,function Nl(y,f,g){return On((0,F.m9)(y),Qc.credential(f,g))}(this._delegate,g,b))}signInWithEmailLink(g,b){return hi(this._delegate,function Iu(y,f,g){return Bn.apply(this,arguments)}(this._delegate,g,b))}signInWithPhoneNumber(g,b){return Gh(this._delegate,function Nu(y,f,g){return qo.apply(this,arguments)}(this._delegate,g,b))}signInWithPopup(g){var b=this;return(0,c.Z)(function*(){return Jl(Wa(),b._delegate,"operation-not-supported-in-this-environment"),hi(b._delegate,function Lu(y,f,g){return Fa.apply(this,arguments)}(b._delegate,g,di))})()}signInWithRedirect(g){var b=this;return(0,c.Z)(function*(){return Jl(Wa(),b._delegate,"operation-not-supported-in-this-environment"),yield Gu(b._delegate),function $o(y,f,g){return function ps(y,f,g){return O.apply(this,arguments)}(y,f,g)}(b._delegate,g,di)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Vs(y,f){return rs.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ci,y})();function rg(y,f,g){let b=y;"function"!=typeof y&&({next:b,error:f,complete:g}=y);const G=b;return{next:Se=>G(Se&&Go.getOrCreate(Se)),error:f,complete:g}}function wy(y,f){const g=function Za(y,f){const g=Jp();if(!g)return[];const b=sr(Yp,y,f);switch(g.getItem(b)){case ci.NONE:return[un];case ci.LOCAL:return[Bo,Zn];case ci.SESSION:return[Zn];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(Bo)&&g.push(Bo),"undefined"!=typeof window)for(const b of[oi,Zn])g.includes(b)||g.push(b);return g.includes(un)||g.push(un),g}class Wh{constructor(){this.providerId="phone",this._delegate=new La(Xp(ee.Z.auth()))}static credential(f,g){return La.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Wh.PHONE_SIGN_IN_METHOD=La.PHONE_SIGN_IN_METHOD,Wh.PROVIDER_ID=La.PROVIDER_ID;const ig=B;class y0{constructor(f,g,b=ee.Z.app()){var G;ig(null===(G=b.options)||void 0===G?void 0:G.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new Gs(f,g,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function go(y){y.INTERNAL.registerComponent(new R.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),b=f.getProvider("auth");return new ng(g,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Qc,FacebookAuthProvider:ks,GithubAuthProvider:Eh,GoogleAuthProvider:Jc,OAuthProvider:Li,SAMLAuthProvider:Nr,PhoneAuthProvider:Wh,PhoneMultiFactorGenerator:Bp,RecaptchaVerifier:y0,TwitterAuthProvider:ed,Auth:ng,AuthCredential:vi,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.18")}(ee.Z)},9971:function(ht){"undefined"!=typeof self&&self,ht.exports=function(ge){var M={};function c(ee){if(M[ee])return M[ee].exports;var F=M[ee]={i:ee,l:!1,exports:{}};return ge[ee].call(F.exports,F,F.exports,c),F.l=!0,F.exports}return c.m=ge,c.c=M,c.d=function(ee,F,K){c.o(ee,F)||Object.defineProperty(ee,F,{configurable:!1,enumerable:!0,get:K})},c.n=function(ee){var F=ee&&ee.__esModule?function(){return ee.default}:function(){return ee};return c.d(F,"a",F),F},c.o=function(ee,F){return Object.prototype.hasOwnProperty.call(ee,F)},c.p="",c(c.s=109)}([function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=c(17),F=c(18),K=c(19),j=c(45),q=c(46),R=c(47),S=c(48),E=c(49),_=c(12),T=c(32),C=c(33),k=c(31),A=c(1);M.default={Scope:A.Scope,create:A.create,find:A.find,query:A.query,register:A.register,Container:ee.default,Format:F.default,Leaf:K.default,Embed:S.default,Scroll:j.default,Block:R.default,Inline:q.default,Text:E.default,Attributor:{Attribute:_.default,Class:T.default,Style:C.default,Store:k.default}}},function(ge,M,c){"use strict";var k,ee=this&&this.__extends||(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,x){A.__proto__=x}||function(A,x){for(var V in x)x.hasOwnProperty(V)&&(A[V]=x[V])},function(A,x){function V(){this.constructor=A}k(A,x),A.prototype=null===x?Object.create(x):(V.prototype=x.prototype,new V)});Object.defineProperty(M,"__esModule",{value:!0});var F=function(k){function A(x){var V=this;return(V=k.call(this,x="[Parchment] "+x)||this).message=x,V.name=V.constructor.name,V}return ee(A,k),A}(Error);M.ParchmentError=F;var S,K={},j={},q={},R={};function T(k,A){var x;if(void 0===A&&(A=S.ANY),"string"==typeof k)x=R[k]||K[k];else if(k instanceof Text||k.nodeType===Node.TEXT_NODE)x=R.text;else if("number"==typeof k)k&S.LEVEL&S.BLOCK?x=R.block:k&S.LEVEL&S.INLINE&&(x=R.inline);else if(k instanceof HTMLElement){var V=(k.getAttribute("class")||"").split(/\s+/);for(var D in V)if(x=j[V[D]])break;x=x||q[k.tagName]}return null==x?null:A&S.LEVEL&x.scope&&A&S.TYPE&x.scope?x:null}M.DATA_KEY="__blot",function(k){k[k.TYPE=3]="TYPE",k[k.LEVEL=12]="LEVEL",k[k.ATTRIBUTE=13]="ATTRIBUTE",k[k.BLOT=14]="BLOT",k[k.INLINE=7]="INLINE",k[k.BLOCK=11]="BLOCK",k[k.BLOCK_BLOT=10]="BLOCK_BLOT",k[k.INLINE_BLOT=6]="INLINE_BLOT",k[k.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",k[k.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",k[k.ANY=15]="ANY"}(S=M.Scope||(M.Scope={})),M.create=function E(k,A){var x=T(k);if(null==x)throw new F("Unable to create "+k+" blot");var V=x,D=k instanceof Node||k.nodeType===Node.TEXT_NODE?k:V.create(A);return new V(D,A)},M.find=function _(k,A){return void 0===A&&(A=!1),null==k?null:null!=k[M.DATA_KEY]?k[M.DATA_KEY].blot:A?_(k.parentNode,A):null},M.query=T,M.register=function C(){for(var k=[],A=0;A<arguments.length;A++)k[A]=arguments[A];if(k.length>1)return k.map(function(D){return C(D)});var x=k[0];if("string"!=typeof x.blotName&&"string"!=typeof x.attrName)throw new F("Invalid definition");if("abstract"===x.blotName)throw new F("Cannot register abstract class");return R[x.blotName||x.attrName]=x,"string"==typeof x.keyName?K[x.keyName]=x:(null!=x.className&&(j[x.className]=x),null!=x.tagName&&(x.tagName=Array.isArray(x.tagName)?x.tagName.map(function(D){return D.toUpperCase()}):x.tagName.toUpperCase(),(Array.isArray(x.tagName)?x.tagName:[x.tagName]).forEach(function(D){(null==q[D]||null==x.className)&&(q[D]=x)}))),x}},function(ge,M,c){var ee=c(51),F=c(11),K=c(3),j=c(20),q=String.fromCharCode(0),R=function(S){this.ops=Array.isArray(S)?S:null!=S&&Array.isArray(S.ops)?S.ops:[]};R.prototype.insert=function(S,E){var _={};return 0===S.length?this:(_.insert=S,null!=E&&"object"==typeof E&&Object.keys(E).length>0&&(_.attributes=E),this.push(_))},R.prototype.delete=function(S){return S<=0?this:this.push({delete:S})},R.prototype.retain=function(S,E){if(S<=0)return this;var _={retain:S};return null!=E&&"object"==typeof E&&Object.keys(E).length>0&&(_.attributes=E),this.push(_)},R.prototype.push=function(S){var E=this.ops.length,_=this.ops[E-1];if(S=K(!0,{},S),"object"==typeof _){if("number"==typeof S.delete&&"number"==typeof _.delete)return this.ops[E-1]={delete:_.delete+S.delete},this;if("number"==typeof _.delete&&null!=S.insert&&"object"!=typeof(_=this.ops[(E-=1)-1]))return this.ops.unshift(S),this;if(F(S.attributes,_.attributes)){if("string"==typeof S.insert&&"string"==typeof _.insert)return this.ops[E-1]={insert:_.insert+S.insert},"object"==typeof S.attributes&&(this.ops[E-1].attributes=S.attributes),this;if("number"==typeof S.retain&&"number"==typeof _.retain)return this.ops[E-1]={retain:_.retain+S.retain},"object"==typeof S.attributes&&(this.ops[E-1].attributes=S.attributes),this}}return E===this.ops.length?this.ops.push(S):this.ops.splice(E,0,S),this},R.prototype.chop=function(){var S=this.ops[this.ops.length-1];return S&&S.retain&&!S.attributes&&this.ops.pop(),this},R.prototype.filter=function(S){return this.ops.filter(S)},R.prototype.forEach=function(S){this.ops.forEach(S)},R.prototype.map=function(S){return this.ops.map(S)},R.prototype.partition=function(S){var E=[],_=[];return this.forEach(function(T){(S(T)?E:_).push(T)}),[E,_]},R.prototype.reduce=function(S,E){return this.ops.reduce(S,E)},R.prototype.changeLength=function(){return this.reduce(function(S,E){return E.insert?S+j.length(E):E.delete?S-E.delete:S},0)},R.prototype.length=function(){return this.reduce(function(S,E){return S+j.length(E)},0)},R.prototype.slice=function(S,E){S=S||0,"number"!=typeof E&&(E=1/0);for(var _=[],T=j.iterator(this.ops),C=0;C<E&&T.hasNext();){var k;C<S?k=T.next(S-C):(k=T.next(E-C),_.push(k)),C+=j.length(k)}return new R(_)},R.prototype.compose=function(S){var E=j.iterator(this.ops),_=j.iterator(S.ops),T=[],C=_.peek();if(null!=C&&"number"==typeof C.retain&&null==C.attributes){for(var k=C.retain;"insert"===E.peekType()&&E.peekLength()<=k;)k-=E.peekLength(),T.push(E.next());C.retain-k>0&&_.next(C.retain-k)}for(var A=new R(T);E.hasNext()||_.hasNext();)if("insert"===_.peekType())A.push(_.next());else if("delete"===E.peekType())A.push(E.next());else{var x=Math.min(E.peekLength(),_.peekLength()),V=E.next(x),D=_.next(x);if("number"==typeof D.retain){var L={};"number"==typeof V.retain?L.retain=x:L.insert=V.insert;var re=j.attributes.compose(V.attributes,D.attributes,"number"==typeof V.retain);if(re&&(L.attributes=re),A.push(L),!_.hasNext()&&F(A.ops[A.ops.length-1],L)){var J=new R(E.rest());return A.concat(J).chop()}}else"number"==typeof D.delete&&"number"==typeof V.retain&&A.push(D)}return A.chop()},R.prototype.concat=function(S){var E=new R(this.ops.slice());return S.ops.length>0&&(E.push(S.ops[0]),E.ops=E.ops.concat(S.ops.slice(1))),E},R.prototype.diff=function(S,E){if(this.ops===S.ops)return new R;var _=[this,S].map(function(x){return x.map(function(V){if(null!=V.insert)return"string"==typeof V.insert?V.insert:q;throw new Error("diff() called "+(x===S?"on":"with")+" non-document")}).join("")}),T=new R,C=ee(_[0],_[1],E),k=j.iterator(this.ops),A=j.iterator(S.ops);return C.forEach(function(x){for(var V=x[1].length;V>0;){var D=0;switch(x[0]){case ee.INSERT:D=Math.min(A.peekLength(),V),T.push(A.next(D));break;case ee.DELETE:D=Math.min(V,k.peekLength()),k.next(D),T.delete(D);break;case ee.EQUAL:D=Math.min(k.peekLength(),A.peekLength(),V);var L=k.next(D),re=A.next(D);F(L.insert,re.insert)?T.retain(D,j.attributes.diff(L.attributes,re.attributes)):T.push(re).delete(D)}V-=D}}),T.chop()},R.prototype.eachLine=function(S,E){E=E||"\n";for(var _=j.iterator(this.ops),T=new R,C=0;_.hasNext();){if("insert"!==_.peekType())return;var k=_.peek(),A=j.length(k)-_.peekLength(),x="string"==typeof k.insert?k.insert.indexOf(E,A)-A:-1;if(x<0)T.push(_.next());else if(x>0)T.push(_.next(x));else{if(!1===S(T,_.next(1).attributes||{},C))return;C+=1,T=new R}}T.length()>0&&S(T,{},C)},R.prototype.transform=function(S,E){if(E=!!E,"number"==typeof S)return this.transformPosition(S,E);for(var _=j.iterator(this.ops),T=j.iterator(S.ops),C=new R;_.hasNext()||T.hasNext();)if("insert"!==_.peekType()||!E&&"insert"===T.peekType())if("insert"===T.peekType())C.push(T.next());else{var k=Math.min(_.peekLength(),T.peekLength()),A=_.next(k),x=T.next(k);if(A.delete)continue;x.delete?C.push(x):C.retain(k,j.attributes.transform(A.attributes,x.attributes,E))}else C.retain(j.length(_.next()));return C.chop()},R.prototype.transformPosition=function(S,E){E=!!E;for(var _=j.iterator(this.ops),T=0;_.hasNext()&&T<=S;){var C=_.peekLength(),k=_.peekType();_.next(),"delete"!==k?("insert"===k&&(T<S||!E)&&(S+=C),T+=C):S-=Math.min(C,S-T)}return S},ge.exports=R},function(ge,M){"use strict";var c=Object.prototype.hasOwnProperty,ee=Object.prototype.toString,F=Object.defineProperty,K=Object.getOwnPropertyDescriptor,j=function(_){return"function"==typeof Array.isArray?Array.isArray(_):"[object Array]"===ee.call(_)},q=function(_){if(!_||"[object Object]"!==ee.call(_))return!1;var k,T=c.call(_,"constructor"),C=_.constructor&&_.constructor.prototype&&c.call(_.constructor.prototype,"isPrototypeOf");if(_.constructor&&!T&&!C)return!1;for(k in _);return void 0===k||c.call(_,k)},R=function(_,T){F&&"__proto__"===T.name?F(_,T.name,{enumerable:!0,configurable:!0,value:T.newValue,writable:!0}):_[T.name]=T.newValue},S=function(_,T){if("__proto__"===T){if(!c.call(_,T))return;if(K)return K(_,T).value}return _[T]};ge.exports=function E(){var _,T,C,k,A,x,V=arguments[0],D=1,L=arguments.length,re=!1;for("boolean"==typeof V&&(re=V,V=arguments[1]||{},D=2),(null==V||"object"!=typeof V&&"function"!=typeof V)&&(V={});D<L;++D)if(null!=(_=arguments[D]))for(T in _)C=S(V,T),V!==(k=S(_,T))&&(re&&k&&(q(k)||(A=j(k)))?(A?(A=!1,x=C&&j(C)?C:[]):x=C&&q(C)?C:{},R(V,{name:T,newValue:E(re,x,k)})):void 0!==k&&R(V,{name:T,newValue:k}));return V}},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.BlockEmbed=M.bubbleFormats=void 0;var ee=function(){function H(W,B){for(var te=0;te<B.length;te++){var Y=B[te];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(W,Y.key,Y)}}return function(W,B,te){return B&&H(W.prototype,B),te&&H(W,te),W}}(),F=function H(W,B,te){null===W&&(W=Function.prototype);var Y=Object.getOwnPropertyDescriptor(W,B);if(void 0===Y){var de=Object.getPrototypeOf(W);return null===de?void 0:H(de,B,te)}if("value"in Y)return Y.value;var ue=Y.get;return void 0===ue?void 0:ue.call(te)},j=V(c(3)),R=V(c(2)),E=V(c(0)),T=V(c(16)),k=V(c(6)),x=V(c(7));function V(H){return H&&H.__esModule?H:{default:H}}function D(H,W){if(!(H instanceof W))throw new TypeError("Cannot call a class as a function")}function L(H,W){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!W||"object"!=typeof W&&"function"!=typeof W?H:W}function re(H,W){if("function"!=typeof W&&null!==W)throw new TypeError("Super expression must either be null or a function, not "+typeof W);H.prototype=Object.create(W&&W.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(H,W):H.__proto__=W)}var Z=function(H){function W(){return D(this,W),L(this,(W.__proto__||Object.getPrototypeOf(W)).apply(this,arguments))}return re(W,H),ee(W,[{key:"attach",value:function(){F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"attach",this).call(this),this.attributes=new E.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new R.default).insert(this.value(),(0,j.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(te,Y){var de=E.default.query(te,E.default.Scope.BLOCK_ATTRIBUTE);null!=de&&this.attributes.attribute(de,Y)}},{key:"formatAt",value:function(te,Y,de,ue){this.format(de,ue)}},{key:"insertAt",value:function(te,Y,de){if("string"==typeof Y&&Y.endsWith("\n")){var ue=E.default.create(X.blotName);this.parent.insertBefore(ue,0===te?this:this.next),ue.insertAt(0,Y.slice(0,-1))}else F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertAt",this).call(this,te,Y,de)}}]),W}(E.default.Embed);Z.scope=E.default.Scope.BLOCK_BLOT;var X=function(H){function W(B){D(this,W);var te=L(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,B));return te.cache={},te}return re(W,H),ee(W,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(E.default.Leaf).reduce(function(te,Y){return 0===Y.length()?te:te.insert(Y.value(),$(Y))},new R.default).insert("\n",$(this))),this.cache.delta}},{key:"deleteAt",value:function(te,Y){F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"deleteAt",this).call(this,te,Y),this.cache={}}},{key:"formatAt",value:function(te,Y,de,ue){Y<=0||(E.default.query(de,E.default.Scope.BLOCK)?te+Y===this.length()&&this.format(de,ue):F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"formatAt",this).call(this,te,Math.min(Y,this.length()-te-1),de,ue),this.cache={})}},{key:"insertAt",value:function(te,Y,de){if(null!=de)return F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertAt",this).call(this,te,Y,de);if(0!==Y.length){var ue=Y.split("\n"),be=ue.shift();be.length>0&&(te<this.length()-1||null==this.children.tail?F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertAt",this).call(this,Math.min(te,this.length()-1),be):this.children.tail.insertAt(this.children.tail.length(),be),this.cache={});var ce=this;ue.reduce(function(le,ie){return(ce=ce.split(le,!0)).insertAt(0,ie),ie.length},te+be.length)}}},{key:"insertBefore",value:function(te,Y){var de=this.children.head;F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertBefore",this).call(this,te,Y),de instanceof T.default&&de.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(te,Y){F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"moveChildren",this).call(this,te,Y),this.cache={}}},{key:"optimize",value:function(te){F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"optimize",this).call(this,te),this.cache={}}},{key:"path",value:function(te){return F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"path",this).call(this,te,!0)}},{key:"removeChild",value:function(te){F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"removeChild",this).call(this,te),this.cache={}}},{key:"split",value:function(te){var Y=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Y&&(0===te||te>=this.length()-1)){var de=this.clone();return 0===te?(this.parent.insertBefore(de,this),this):(this.parent.insertBefore(de,this.next),de)}var ue=F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"split",this).call(this,te,Y);return this.cache={},ue}}]),W}(E.default.Block);function $(H){var W=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==H||("function"==typeof H.formats&&(W=(0,j.default)(W,H.formats())),null==H.parent||"scroll"==H.parent.blotName||H.parent.statics.scope!==H.statics.scope)?W:$(H.parent,W)}X.blotName="block",X.tagName="P",X.defaultChild="break",X.allowedChildren=[k.default,E.default.Embed,x.default],M.bubbleFormats=$,M.BlockEmbed=Z,M.default=X},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.overload=M.expandConfig=void 0;var ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ce){return typeof ce}:function(ce){return ce&&"function"==typeof Symbol&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},F=function(le,ie){if(Array.isArray(le))return le;if(Symbol.iterator in Object(le))return function ce(le,ie){var fe=[],me=!0,_e=!1,xe=void 0;try{for(var Ie,he=le[Symbol.iterator]();!(me=(Ie=he.next()).done)&&(fe.push(Ie.value),!ie||fe.length!==ie);me=!0);}catch(ke){_e=!0,xe=ke}finally{try{!me&&he.return&&he.return()}finally{if(_e)throw xe}}return fe}(le,ie);throw new TypeError("Invalid attempt to destructure non-iterable instance")},K=function(){function ce(le,ie){for(var fe=0;fe<ie.length;fe++){var me=ie[fe];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(le,me.key,me)}}return function(le,ie,fe){return ie&&ce(le.prototype,ie),fe&&ce(le,fe),le}}();c(50);var q=$(c(2)),S=$(c(14)),_=$(c(8)),C=$(c(9)),A=$(c(0)),x=c(15),V=$(x),L=$(c(3)),J=$(c(10)),X=$(c(34));function $(ce){return ce&&ce.__esModule?ce:{default:ce}}function H(ce,le,ie){return le in ce?Object.defineProperty(ce,le,{value:ie,enumerable:!0,configurable:!0,writable:!0}):ce[le]=ie,ce}function W(ce,le){if(!(ce instanceof le))throw new TypeError("Cannot call a class as a function")}var B=(0,J.default)("quill"),te=function(){function ce(le){var ie=this,fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(W(this,ce),this.options=Y(le,fe),this.container=this.options.container,null==this.container)return B.error("Invalid Quill container",le);this.options.debug&&ce.debug(this.options.debug);var me=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new _.default,this.scroll=A.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new S.default(this.scroll),this.selection=new V.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(_.default.events.EDITOR_CHANGE,function(xe){xe===_.default.events.TEXT_CHANGE&&ie.root.classList.toggle("ql-blank",ie.editor.isBlank())}),this.emitter.on(_.default.events.SCROLL_UPDATE,function(xe,he){var Ie=ie.selection.lastRange,ke=Ie&&0===Ie.length?Ie.index:void 0;de.call(ie,function(){return ie.editor.update(null,he,ke)},xe)});var _e=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+me+"<p><br></p></div>");this.setContents(_e),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return K(ce,null,[{key:"debug",value:function(ie){!0===ie&&(ie="log"),J.default.level(ie)}},{key:"find",value:function(ie){return ie.__quill||A.default.find(ie)}},{key:"import",value:function(ie){return null==this.imports[ie]&&B.error("Cannot import "+ie+". Are you sure it was registered?"),this.imports[ie]}},{key:"register",value:function(ie,fe){var me=this,_e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof ie){var xe=ie.attrName||ie.blotName;"string"==typeof xe?this.register("formats/"+xe,ie,fe):Object.keys(ie).forEach(function(he){me.register(he,ie[he],fe)})}else null!=this.imports[ie]&&!_e&&B.warn("Overwriting "+ie+" with",fe),this.imports[ie]=fe,(ie.startsWith("blots/")||ie.startsWith("formats/"))&&"abstract"!==fe.blotName?A.default.register(fe):ie.startsWith("modules")&&"function"==typeof fe.register&&fe.register()}}]),K(ce,[{key:"addContainer",value:function(ie){var fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof ie){var me=ie;(ie=document.createElement("div")).classList.add(me)}return this.container.insertBefore(ie,fe),ie}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(ie,fe,me){var _e=this,xe=ue(ie,fe,me),he=F(xe,4);return de.call(this,function(){return _e.editor.deleteText(ie,fe)},me=he[3],ie=he[0],-1*(fe=he[1]))}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var ie=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(ie),this.container.classList.toggle("ql-disabled",!ie)}},{key:"focus",value:function(){var ie=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=ie,this.scrollIntoView()}},{key:"format",value:function(ie,fe){var me=this;return de.call(this,function(){var xe=me.getSelection(!0),he=new q.default;if(null==xe)return he;if(A.default.query(ie,A.default.Scope.BLOCK))he=me.editor.formatLine(xe.index,xe.length,H({},ie,fe));else{if(0===xe.length)return me.selection.format(ie,fe),he;he=me.editor.formatText(xe.index,xe.length,H({},ie,fe))}return me.setSelection(xe,_.default.sources.SILENT),he},arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.default.sources.API)}},{key:"formatLine",value:function(ie,fe,me,_e,xe){var Ie,he=this,ke=ue(ie,fe,me,_e,xe),Re=F(ke,4);return fe=Re[1],Ie=Re[2],de.call(this,function(){return he.editor.formatLine(ie,fe,Ie)},xe=Re[3],ie=Re[0],0)}},{key:"formatText",value:function(ie,fe,me,_e,xe){var Ie,he=this,ke=ue(ie,fe,me,_e,xe),Re=F(ke,4);return fe=Re[1],Ie=Re[2],de.call(this,function(){return he.editor.formatText(ie,fe,Ie)},xe=Re[3],ie=Re[0],0)}},{key:"getBounds",value:function(ie){var me=void 0;me="number"==typeof ie?this.selection.getBounds(ie,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.selection.getBounds(ie.index,ie.length);var _e=this.container.getBoundingClientRect();return{bottom:me.bottom-_e.top,height:me.height,left:me.left-_e.left,right:me.right-_e.left,top:me.top-_e.top,width:me.width}}},{key:"getContents",value:function(){var ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-ie,me=ue(ie,fe),_e=F(me,2);return this.editor.getContents(ie=_e[0],fe=_e[1])}},{key:"getFormat",value:function(){var ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0);return"number"==typeof ie?this.editor.getFormat(ie,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.editor.getFormat(ie.index,ie.length)}},{key:"getIndex",value:function(ie){return ie.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(ie){return this.scroll.leaf(ie)}},{key:"getLine",value:function(ie){return this.scroll.line(ie)}},{key:"getLines",value:function(){var ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof ie?this.scroll.lines(ie.index,ie.length):this.scroll.lines(ie,fe)}},{key:"getModule",value:function(ie){return this.theme.modules[ie]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-ie,me=ue(ie,fe),_e=F(me,2);return this.editor.getText(ie=_e[0],fe=_e[1])}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(ie,fe,me){var _e=this;return de.call(this,function(){return _e.editor.insertEmbed(ie,fe,me)},arguments.length>3&&void 0!==arguments[3]?arguments[3]:ce.sources.API,ie)}},{key:"insertText",value:function(ie,fe,me,_e,xe){var Ie,he=this,ke=ue(ie,0,me,_e,xe),Re=F(ke,4);return Ie=Re[2],de.call(this,function(){return he.editor.insertText(ie,fe,Ie)},xe=Re[3],ie=Re[0],fe.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(ie,fe,me){this.clipboard.dangerouslyPasteHTML(ie,fe,me)}},{key:"removeFormat",value:function(ie,fe,me){var _e=this,xe=ue(ie,fe,me),he=F(xe,4);return fe=he[1],de.call(this,function(){return _e.editor.removeFormat(ie,fe)},me=he[3],ie=he[0])}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(ie){var fe=this;return de.call(this,function(){ie=new q.default(ie);var _e=fe.getLength(),xe=fe.editor.deleteText(0,_e),he=fe.editor.applyDelta(ie),Ie=he.ops[he.ops.length-1];return null!=Ie&&"string"==typeof Ie.insert&&"\n"===Ie.insert[Ie.insert.length-1]&&(fe.editor.deleteText(fe.getLength()-1,1),he.delete(1)),xe.compose(he)},arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.default.sources.API)}},{key:"setSelection",value:function(ie,fe,me){if(null==ie)this.selection.setRange(null,fe||ce.sources.API);else{var _e=ue(ie,fe,me),xe=F(_e,4);me=xe[3],this.selection.setRange(new x.Range(ie=xe[0],fe=xe[1]),me),me!==_.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(ie){var fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.default.sources.API,me=(new q.default).insert(ie);return this.setContents(me,fe)}},{key:"update",value:function(){var ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_.default.sources.USER,fe=this.scroll.update(ie);return this.selection.update(ie),fe}},{key:"updateContents",value:function(ie){var fe=this,me=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.default.sources.API;return de.call(this,function(){return ie=new q.default(ie),fe.editor.applyDelta(ie,me)},me,!0)}}]),ce}();function Y(ce,le){if((le=(0,L.default)(!0,{container:ce,modules:{clipboard:!0,keyboard:!0,history:!0}},le)).theme&&le.theme!==te.DEFAULTS.theme){if(le.theme=te.import("themes/"+le.theme),null==le.theme)throw new Error("Invalid theme "+le.theme+". Did you register it?")}else le.theme=X.default;var ie=(0,L.default)(!0,{},le.theme.DEFAULTS);[ie,le].forEach(function(_e){_e.modules=_e.modules||{},Object.keys(_e.modules).forEach(function(xe){!0===_e.modules[xe]&&(_e.modules[xe]={})})});var me=Object.keys(ie.modules).concat(Object.keys(le.modules)).reduce(function(_e,xe){var he=te.import("modules/"+xe);return null==he?B.error("Cannot load "+xe+" module. Are you sure you registered it?"):_e[xe]=he.DEFAULTS||{},_e},{});return null!=le.modules&&le.modules.toolbar&&le.modules.toolbar.constructor!==Object&&(le.modules.toolbar={container:le.modules.toolbar}),le=(0,L.default)(!0,{},te.DEFAULTS,{modules:me},ie,le),["bounds","container","scrollingContainer"].forEach(function(_e){"string"==typeof le[_e]&&(le[_e]=document.querySelector(le[_e]))}),le.modules=Object.keys(le.modules).reduce(function(_e,xe){return le.modules[xe]&&(_e[xe]=le.modules[xe]),_e},{}),le}function de(ce,le,ie,fe){if(this.options.strict&&!this.isEnabled()&&le===_.default.sources.USER)return new q.default;var me=null==ie?null:this.getSelection(),_e=this.editor.delta,xe=ce();if(null!=me&&(!0===ie&&(ie=me.index),null==fe?me=be(me,xe,le):0!==fe&&(me=be(me,ie,fe,le)),this.setSelection(me,_.default.sources.SILENT)),xe.length()>0){var he,ke,Ie=[_.default.events.TEXT_CHANGE,xe,_e,le];(he=this.emitter).emit.apply(he,[_.default.events.EDITOR_CHANGE].concat(Ie)),le!==_.default.sources.SILENT&&(ke=this.emitter).emit.apply(ke,Ie)}return xe}function ue(ce,le,ie,fe,me){var _e={};return"number"==typeof ce.index&&"number"==typeof ce.length?"number"!=typeof le?(me=fe,fe=ie,ie=le,le=ce.length,ce=ce.index):(le=ce.length,ce=ce.index):"number"!=typeof le&&(me=fe,fe=ie,ie=le,le=0),"object"===(void 0===ie?"undefined":ee(ie))?(_e=ie,me=fe):"string"==typeof ie&&(null!=fe?_e[ie]=fe:me=ie),[ce,le,_e,me=me||_.default.sources.API]}function be(ce,le,ie,fe){if(null==ce)return null;var me=void 0,_e=void 0;if(le instanceof q.default){var xe=[ce.index,ce.index+ce.length].map(function(Re){return le.transformPosition(Re,fe!==_.default.sources.USER)}),he=F(xe,2);me=he[0],_e=he[1]}else{var Ie=[ce.index,ce.index+ce.length].map(function(Re){return Re<le||Re===le&&fe===_.default.sources.USER?Re:ie>=0?Re+ie:Math.max(le,Re+ie)}),ke=F(Ie,2);me=ke[0],_e=ke[1]}return new x.Range(me,_e-me)}te.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},te.events=_.default.events,te.sources=_.default.sources,te.version="1.3.7",te.imports={delta:q.default,parchment:A.default,"core/module":C.default,"core/theme":X.default},M.expandConfig=Y,M.overload=ue,M.default=te},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function k(A,x){for(var V=0;V<x.length;V++){var D=x[V];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(A,D.key,D)}}return function(A,x,V){return x&&k(A.prototype,x),V&&k(A,V),A}}(),F=function k(A,x,V){null===A&&(A=Function.prototype);var D=Object.getOwnPropertyDescriptor(A,x);if(void 0===D){var L=Object.getPrototypeOf(A);return null===L?void 0:k(L,x,V)}if("value"in D)return D.value;var re=D.get;return void 0===re?void 0:re.call(V)},j=S(c(7)),R=S(c(0));function S(k){return k&&k.__esModule?k:{default:k}}function E(k,A){if(!(k instanceof A))throw new TypeError("Cannot call a class as a function")}function _(k,A){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!=typeof A&&"function"!=typeof A?k:A}var C=function(k){function A(){return E(this,A),_(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return function T(k,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);k.prototype=Object.create(A&&A.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(k,A):k.__proto__=A)}(A,k),ee(A,[{key:"formatAt",value:function(V,D,L,re){if(A.compare(this.statics.blotName,L)<0&&R.default.query(L,R.default.Scope.BLOT)){var J=this.isolate(V,D);re&&J.wrap(L,re)}else F(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,V,D,L,re)}},{key:"optimize",value:function(V){if(F(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,V),this.parent instanceof A&&A.compare(this.statics.blotName,this.parent.statics.blotName)>0){var D=this.parent.isolate(this.offset(),this.length());this.moveChildren(D),D.wrap(this)}}}],[{key:"compare",value:function(V,D){var L=A.order.indexOf(V),re=A.order.indexOf(D);return L>=0||re>=0?L-re:V===D?0:V<D?-1:1}}]),A}(R.default.Inline);C.allowedChildren=[C,R.default.Embed,j.default],C.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],M.default=C},function(ge,M,c){"use strict";function j(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function q(E,_){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?E:_}Object.defineProperty(M,"__esModule",{value:!0});var S=function(E){function _(){return j(this,_),q(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return function R(E,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(E,_):E.__proto__=_)}(_,E),_}(function K(E){return E&&E.__esModule?E:{default:E}}(c(0)).default.Text);M.default=S},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function x(V,D){for(var L=0;L<D.length;L++){var re=D[L];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(V,re.key,re)}}return function(V,D,L){return D&&x(V.prototype,D),L&&x(V,L),V}}(),F=function x(V,D,L){null===V&&(V=Function.prototype);var re=Object.getOwnPropertyDescriptor(V,D);if(void 0===re){var J=Object.getPrototypeOf(V);return null===J?void 0:x(J,D,L)}if("value"in re)return re.value;var Z=re.get;return void 0===Z?void 0:Z.call(L)},j=S(c(54));function S(x){return x&&x.__esModule?x:{default:x}}var C=(0,S(c(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(x){document.addEventListener(x,function(){for(var V=arguments.length,D=Array(V),L=0;L<V;L++)D[L]=arguments[L];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(re){var J;re.__quill&&re.__quill.emitter&&(J=re.__quill.emitter).handleDOM.apply(J,D)})})});var A=function(x){function V(){!function E(x,V){if(!(x instanceof V))throw new TypeError("Cannot call a class as a function")}(this,V);var D=function _(x,V){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!V||"object"!=typeof V&&"function"!=typeof V?x:V}(this,(V.__proto__||Object.getPrototypeOf(V)).call(this));return D.listeners={},D.on("error",C.error),D}return function T(x,V){if("function"!=typeof V&&null!==V)throw new TypeError("Super expression must either be null or a function, not "+typeof V);x.prototype=Object.create(V&&V.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(x,V):x.__proto__=V)}(V,x),ee(V,[{key:"emit",value:function(){C.log.apply(C,arguments),F(V.prototype.__proto__||Object.getPrototypeOf(V.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(L){for(var re=arguments.length,J=Array(re>1?re-1:0),Z=1;Z<re;Z++)J[Z-1]=arguments[Z];(this.listeners[L.type]||[]).forEach(function(X){var $=X.node,H=X.handler;(L.target===$||$.contains(L.target))&&H.apply(void 0,[L].concat(J))})}},{key:"listenDOM",value:function(L,re,J){this.listeners[L]||(this.listeners[L]=[]),this.listeners[L].push({node:re,handler:J})}}]),V}(j.default);A.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},A.sources={API:"api",SILENT:"silent",USER:"user"},M.default=A},function(ge,M,c){"use strict";function ee(K,j){if(!(K instanceof j))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(M,"__esModule",{value:!0});var F=function K(j){var q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ee(this,K),this.quill=j,this.options=q};F.DEFAULTS={},M.default=F},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=["error","warn","log","info"],F="warn";function K(q){if(ee.indexOf(q)<=ee.indexOf(F)){for(var R,S=arguments.length,E=Array(S>1?S-1:0),_=1;_<S;_++)E[_-1]=arguments[_];(R=console)[q].apply(R,E)}}function j(q){return ee.reduce(function(R,S){return R[S]=K.bind(console,S,q),R},{})}K.level=j.level=function(q){F=q},M.default=j},function(ge,M,c){var ee=Array.prototype.slice,F=c(52),K=c(53),j=ge.exports=function(E,_,T){return T||(T={}),E===_||(E instanceof Date&&_ instanceof Date?E.getTime()===_.getTime():!E||!_||"object"!=typeof E&&"object"!=typeof _?T.strict?E===_:E==_:function S(E,_,T){var C,k;if(q(E)||q(_)||E.prototype!==_.prototype)return!1;if(K(E))return!!K(_)&&(E=ee.call(E),_=ee.call(_),j(E,_,T));if(R(E)){if(!R(_)||E.length!==_.length)return!1;for(C=0;C<E.length;C++)if(E[C]!==_[C])return!1;return!0}try{var A=F(E),x=F(_)}catch(V){return!1}if(A.length!=x.length)return!1;for(A.sort(),x.sort(),C=A.length-1;C>=0;C--)if(A[C]!=x[C])return!1;for(C=A.length-1;C>=0;C--)if(!j(E[k=A[C]],_[k],T))return!1;return typeof E==typeof _}(E,_,T))};function q(E){return null==E}function R(E){return!(!E||"object"!=typeof E||"number"!=typeof E.length||"function"!=typeof E.copy||"function"!=typeof E.slice||E.length>0&&"number"!=typeof E[0])}},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=c(1),F=function(){function K(j,q,R){void 0===R&&(R={}),this.attrName=j,this.keyName=q,this.scope=null!=R.scope?R.scope&ee.Scope.LEVEL|ee.Scope.TYPE&ee.Scope.ATTRIBUTE:ee.Scope.ATTRIBUTE,null!=R.whitelist&&(this.whitelist=R.whitelist)}return K.keys=function(j){return[].map.call(j.attributes,function(q){return q.name})},K.prototype.add=function(j,q){return!!this.canAdd(j,q)&&(j.setAttribute(this.keyName,q),!0)},K.prototype.canAdd=function(j,q){return null!=ee.query(j,ee.Scope.BLOT&(this.scope|ee.Scope.TYPE))&&(null==this.whitelist||("string"==typeof q?this.whitelist.indexOf(q.replace(/["']/g,""))>-1:this.whitelist.indexOf(q)>-1))},K.prototype.remove=function(j){j.removeAttribute(this.keyName)},K.prototype.value=function(j){var q=j.getAttribute(this.keyName);return this.canAdd(j,q)&&q?q:""},K}();M.default=F},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.Code=void 0;var ee=function(X,$){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return function Z(X,$){var H=[],W=!0,B=!1,te=void 0;try{for(var de,Y=X[Symbol.iterator]();!(W=(de=Y.next()).done)&&(H.push(de.value),!$||H.length!==$);W=!0);}catch(ue){B=!0,te=ue}finally{try{!W&&Y.return&&Y.return()}finally{if(B)throw te}}return H}(X,$);throw new TypeError("Invalid attempt to destructure non-iterable instance")},F=function(){function Z(X,$){for(var H=0;H<$.length;H++){var W=$[H];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(X,W.key,W)}}return function(X,$,H){return $&&Z(X.prototype,$),H&&Z(X,H),X}}(),K=function Z(X,$,H){null===X&&(X=Function.prototype);var W=Object.getOwnPropertyDescriptor(X,$);if(void 0===W){var B=Object.getPrototypeOf(X);return null===B?void 0:Z(B,$,H)}if("value"in W)return W.value;var te=W.get;return void 0===te?void 0:te.call(H)},q=x(c(2)),S=x(c(0)),_=x(c(4)),C=x(c(6)),A=x(c(7));function x(Z){return Z&&Z.__esModule?Z:{default:Z}}function V(Z,X){if(!(Z instanceof X))throw new TypeError("Cannot call a class as a function")}function D(Z,X){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!X||"object"!=typeof X&&"function"!=typeof X?Z:X}function L(Z,X){if("function"!=typeof X&&null!==X)throw new TypeError("Super expression must either be null or a function, not "+typeof X);Z.prototype=Object.create(X&&X.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,X):Z.__proto__=X)}var re=function(Z){function X(){return V(this,X),D(this,(X.__proto__||Object.getPrototypeOf(X)).apply(this,arguments))}return L(X,Z),X}(C.default);re.blotName="code",re.tagName="CODE";var J=function(Z){function X(){return V(this,X),D(this,(X.__proto__||Object.getPrototypeOf(X)).apply(this,arguments))}return L(X,Z),F(X,[{key:"delta",value:function(){var H=this,W=this.domNode.textContent;return W.endsWith("\n")&&(W=W.slice(0,-1)),W.split("\n").reduce(function(B,te){return B.insert(te).insert("\n",H.formats())},new q.default)}},{key:"format",value:function(H,W){if(H!==this.statics.blotName||!W){var B=this.descendant(A.default,this.length()-1),Y=ee(B,1)[0];null!=Y&&Y.deleteAt(Y.length()-1,1),K(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"format",this).call(this,H,W)}}},{key:"formatAt",value:function(H,W,B,te){if(0!==W&&null!=S.default.query(B,S.default.Scope.BLOCK)&&(B!==this.statics.blotName||te!==this.statics.formats(this.domNode))){var Y=this.newlineIndex(H);if(!(Y<0||Y>=H+W)){var de=this.newlineIndex(H,!0)+1,ue=Y-de+1,be=this.isolate(de,ue),ce=be.next;be.format(B,te),ce instanceof X&&ce.formatAt(0,H-de+W-ue,B,te)}}}},{key:"insertAt",value:function(H,W,B){if(null==B){var te=this.descendant(A.default,H),Y=ee(te,2);Y[0].insertAt(Y[1],W)}}},{key:"length",value:function(){var H=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?H:H+1}},{key:"newlineIndex",value:function(H){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,H).lastIndexOf("\n");var B=this.domNode.textContent.slice(H).indexOf("\n");return B>-1?H+B:-1}},{key:"optimize",value:function(H){this.domNode.textContent.endsWith("\n")||this.appendChild(S.default.create("text","\n")),K(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"optimize",this).call(this,H);var W=this.next;null!=W&&W.prev===this&&W.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===W.statics.formats(W.domNode)&&(W.optimize(H),W.moveChildren(this),W.remove())}},{key:"replace",value:function(H){K(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"replace",this).call(this,H),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(W){var B=S.default.find(W);null==B?W.parentNode.removeChild(W):B instanceof S.default.Embed?B.remove():B.unwrap()})}}],[{key:"create",value:function(H){var W=K(X.__proto__||Object.getPrototypeOf(X),"create",this).call(this,H);return W.setAttribute("spellcheck",!1),W}},{key:"formats",value:function(){return!0}}]),X}(_.default);J.blotName="code-block",J.tagName="PRE",J.TAB="  ",M.Code=re,M.default=J},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ce){return typeof ce}:function(ce){return ce&&"function"==typeof Symbol&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},F=function(le,ie){if(Array.isArray(le))return le;if(Symbol.iterator in Object(le))return function ce(le,ie){var fe=[],me=!0,_e=!1,xe=void 0;try{for(var Ie,he=le[Symbol.iterator]();!(me=(Ie=he.next()).done)&&(fe.push(Ie.value),!ie||fe.length!==ie);me=!0);}catch(ke){_e=!0,xe=ke}finally{try{!me&&he.return&&he.return()}finally{if(_e)throw xe}}return fe}(le,ie);throw new TypeError("Invalid attempt to destructure non-iterable instance")},K=function(){function ce(le,ie){for(var fe=0;fe<ie.length;fe++){var me=ie[fe];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(le,me.key,me)}}return function(le,ie,fe){return ie&&ce(le.prototype,ie),fe&&ce(le,fe),le}}(),q=W(c(2)),S=W(c(20)),_=W(c(0)),C=W(c(13)),A=W(c(24)),x=c(4),V=W(x),L=W(c(16)),J=W(c(21)),X=W(c(11)),H=W(c(3));function W(ce){return ce&&ce.__esModule?ce:{default:ce}}var Y=/^[ -~]*$/,de=function(){function ce(le){(function te(ce,le){if(!(ce instanceof le))throw new TypeError("Cannot call a class as a function")})(this,ce),this.scroll=le,this.delta=this.getDelta()}return K(ce,[{key:"applyDelta",value:function(ie){var fe=this,me=!1;this.scroll.update();var _e=this.scroll.length();return this.scroll.batchStart(),(ie=function be(ce){return ce.reduce(function(le,ie){if(1===ie.insert){var fe=(0,J.default)(ie.attributes);return delete fe.image,le.insert({image:ie.attributes.image},fe)}if(null!=ie.attributes&&(!0===ie.attributes.list||!0===ie.attributes.bullet)&&((ie=(0,J.default)(ie)).attributes.list?ie.attributes.list="ordered":(ie.attributes.list="bullet",delete ie.attributes.bullet)),"string"==typeof ie.insert){var me=ie.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return le.insert(me,ie.attributes)}return le.push(ie)},new q.default)}(ie)).reduce(function(xe,he){var Ie=he.retain||he.delete||he.insert.length||1,ke=he.attributes||{};if(null!=he.insert){if("string"==typeof he.insert){var Re=he.insert;Re.endsWith("\n")&&me&&(me=!1,Re=Re.slice(0,-1)),xe>=_e&&!Re.endsWith("\n")&&(me=!0),fe.scroll.insertAt(xe,Re);var Ue=fe.scroll.line(xe),Qe=F(Ue,2),Et=Qe[0],wt=Qe[1],Mt=(0,H.default)({},(0,x.bubbleFormats)(Et));if(Et instanceof V.default){var Bt=Et.descendant(_.default.Leaf,wt),wn=F(Bt,1);Mt=(0,H.default)(Mt,(0,x.bubbleFormats)(wn[0]))}ke=S.default.attributes.diff(Mt,ke)||{}}else if("object"===ee(he.insert)){var Be=Object.keys(he.insert)[0];if(null==Be)return xe;fe.scroll.insertAt(xe,Be,he.insert[Be])}_e+=Ie}return Object.keys(ke).forEach(function(qe){fe.scroll.formatAt(xe,Ie,qe,ke[qe])}),xe+Ie},0),ie.reduce(function(xe,he){return"number"==typeof he.delete?(fe.scroll.deleteAt(xe,he.delete),xe):xe+(he.retain||he.insert.length||1)},0),this.scroll.batchEnd(),this.update(ie)}},{key:"deleteText",value:function(ie,fe){return this.scroll.deleteAt(ie,fe),this.update((new q.default).retain(ie).delete(fe))}},{key:"formatLine",value:function(ie,fe){var me=this,_e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(_e).forEach(function(xe){if(null==me.scroll.whitelist||me.scroll.whitelist[xe]){var he=me.scroll.lines(ie,Math.max(fe,1)),Ie=fe;he.forEach(function(ke){var Re=ke.length();if(ke instanceof C.default){var Ue=ie-ke.offset(me.scroll),Qe=ke.newlineIndex(Ue+Ie)-Ue+1;ke.formatAt(Ue,Qe,xe,_e[xe])}else ke.format(xe,_e[xe]);Ie-=Re})}}),this.scroll.optimize(),this.update((new q.default).retain(ie).retain(fe,(0,J.default)(_e)))}},{key:"formatText",value:function(ie,fe){var me=this,_e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(_e).forEach(function(xe){me.scroll.formatAt(ie,fe,xe,_e[xe])}),this.update((new q.default).retain(ie).retain(fe,(0,J.default)(_e)))}},{key:"getContents",value:function(ie,fe){return this.delta.slice(ie,ie+fe)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(ie,fe){return ie.concat(fe.delta())},new q.default)}},{key:"getFormat",value:function(ie){var fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,me=[],_e=[];0===fe?this.scroll.path(ie).forEach(function(he){var ke=F(he,1)[0];ke instanceof V.default?me.push(ke):ke instanceof _.default.Leaf&&_e.push(ke)}):(me=this.scroll.lines(ie,fe),_e=this.scroll.descendants(_.default.Leaf,ie,fe));var xe=[me,_e].map(function(he){if(0===he.length)return{};for(var Ie=(0,x.bubbleFormats)(he.shift());Object.keys(Ie).length>0;){var ke=he.shift();if(null==ke)return Ie;Ie=ue((0,x.bubbleFormats)(ke),Ie)}return Ie});return H.default.apply(H.default,xe)}},{key:"getText",value:function(ie,fe){return this.getContents(ie,fe).filter(function(me){return"string"==typeof me.insert}).map(function(me){return me.insert}).join("")}},{key:"insertEmbed",value:function(ie,fe,me){return this.scroll.insertAt(ie,fe,me),this.update((new q.default).retain(ie).insert(function B(ce,le,ie){return le in ce?Object.defineProperty(ce,le,{value:ie,enumerable:!0,configurable:!0,writable:!0}):ce[le]=ie,ce}({},fe,me)))}},{key:"insertText",value:function(ie,fe){var me=this,_e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return fe=fe.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(ie,fe),Object.keys(_e).forEach(function(xe){me.scroll.formatAt(ie,fe.length,xe,_e[xe])}),this.update((new q.default).retain(ie).insert(fe,(0,J.default)(_e)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var ie=this.scroll.children.head;return!(ie.statics.blotName!==V.default.blotName||ie.children.length>1)&&ie.children.head instanceof L.default}},{key:"removeFormat",value:function(ie,fe){var me=this.getText(ie,fe),_e=this.scroll.line(ie+fe),xe=F(_e,2),he=xe[0],Ie=xe[1],ke=0,Re=new q.default;null!=he&&(ke=he instanceof C.default?he.newlineIndex(Ie)-Ie+1:he.length()-Ie,Re=he.delta().slice(Ie,Ie+ke-1).insert("\n"));var Qe=this.getContents(ie,fe+ke).diff((new q.default).insert(me).concat(Re)),Et=(new q.default).retain(ie).concat(Qe);return this.applyDelta(Et)}},{key:"update",value:function(ie){var fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],me=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,_e=this.delta;if(1===fe.length&&"characterData"===fe[0].type&&fe[0].target.data.match(Y)&&_.default.find(fe[0].target)){var xe=_.default.find(fe[0].target),he=(0,x.bubbleFormats)(xe),Ie=xe.offset(this.scroll),ke=fe[0].oldValue.replace(A.default.CONTENTS,""),Re=(new q.default).insert(ke),Ue=(new q.default).insert(xe.value());ie=(new q.default).retain(Ie).concat(Re.diff(Ue,me)).reduce(function(Et,wt){return wt.insert?Et.insert(wt.insert,he):Et.push(wt)},new q.default),this.delta=_e.compose(ie)}else this.delta=this.getDelta(),(!ie||!(0,X.default)(_e.compose(ie),this.delta))&&(ie=_e.diff(this.delta,me));return ie}}]),ce}();function ue(ce,le){return Object.keys(le).reduce(function(ie,fe){return null==ce[fe]||(le[fe]===ce[fe]?ie[fe]=le[fe]:Array.isArray(le[fe])?le[fe].indexOf(ce[fe])<0&&(ie[fe]=le[fe].concat([ce[fe]])):ie[fe]=[le[fe],ce[fe]]),ie},{})}M.default=de},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.Range=void 0;var ee=function(X,$){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return function Z(X,$){var H=[],W=!0,B=!1,te=void 0;try{for(var de,Y=X[Symbol.iterator]();!(W=(de=Y.next()).done)&&(H.push(de.value),!$||H.length!==$);W=!0);}catch(ue){B=!0,te=ue}finally{try{!W&&Y.return&&Y.return()}finally{if(B)throw te}}return H}(X,$);throw new TypeError("Invalid attempt to destructure non-iterable instance")},F=function(){function Z(X,$){for(var H=0;H<$.length;H++){var W=$[H];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(X,W.key,W)}}return function(X,$,H){return $&&Z(X.prototype,$),H&&Z(X,H),X}}(),j=A(c(0)),R=A(c(21)),E=A(c(11)),T=A(c(8));function A(Z){return Z&&Z.__esModule?Z:{default:Z}}function x(Z){if(Array.isArray(Z)){for(var X=0,$=Array(Z.length);X<Z.length;X++)$[X]=Z[X];return $}return Array.from(Z)}function V(Z,X){if(!(Z instanceof X))throw new TypeError("Cannot call a class as a function")}var D=(0,A(c(10)).default)("quill:selection"),L=function Z(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;V(this,Z),this.index=X,this.length=$},re=function(){function Z(X,$){var H=this;V(this,Z),this.emitter=$,this.scroll=X,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=j.default.create("cursor",this),this.lastRange=this.savedRange=new L(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){H.mouseDown||setTimeout(H.update.bind(H,T.default.sources.USER),1)}),this.emitter.on(T.default.events.EDITOR_CHANGE,function(W,B){W===T.default.events.TEXT_CHANGE&&B.length()>0&&H.update(T.default.sources.SILENT)}),this.emitter.on(T.default.events.SCROLL_BEFORE_UPDATE,function(){if(H.hasFocus()){var W=H.getNativeRange();null!=W&&W.start.node!==H.cursor.textNode&&H.emitter.once(T.default.events.SCROLL_UPDATE,function(){try{H.setNativeRange(W.start.node,W.start.offset,W.end.node,W.end.offset)}catch(B){}})}}),this.emitter.on(T.default.events.SCROLL_OPTIMIZE,function(W,B){if(B.range){var te=B.range;H.setNativeRange(te.startNode,te.startOffset,te.endNode,te.endOffset)}}),this.update(T.default.sources.SILENT)}return F(Z,[{key:"handleComposition",value:function(){var $=this;this.root.addEventListener("compositionstart",function(){$.composing=!0}),this.root.addEventListener("compositionend",function(){if($.composing=!1,$.cursor.parent){var H=$.cursor.restore();if(!H)return;setTimeout(function(){$.setNativeRange(H.startNode,H.startOffset,H.endNode,H.endOffset)},1)}})}},{key:"handleDragging",value:function(){var $=this;this.emitter.listenDOM("mousedown",document.body,function(){$.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){$.mouseDown=!1,$.update(T.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function($,H){if(null==this.scroll.whitelist||this.scroll.whitelist[$]){this.scroll.update();var W=this.getNativeRange();if(null!=W&&W.native.collapsed&&!j.default.query($,j.default.Scope.BLOCK)){if(W.start.node!==this.cursor.textNode){var B=j.default.find(W.start.node,!1);if(null==B)return;if(B instanceof j.default.Leaf){var te=B.split(W.start.offset);B.parent.insertBefore(this.cursor,te)}else B.insertBefore(this.cursor,W.start.node);this.cursor.attach()}this.cursor.format($,H),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function($){var H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,W=this.scroll.length();$=Math.min($,W-1),H=Math.min($+H,W-1)-$;var B=void 0,te=this.scroll.leaf($),Y=ee(te,2),de=Y[0],ue=Y[1];if(null==de)return null;var be=de.position(ue,!0),ce=ee(be,2);B=ce[0],ue=ce[1];var le=document.createRange();if(H>0){le.setStart(B,ue);var ie=this.scroll.leaf($+H),fe=ee(ie,2);if(null==(de=fe[0]))return null;var me=de.position(ue=fe[1],!0),_e=ee(me,2);return le.setEnd(B=_e[0],ue=_e[1]),le.getBoundingClientRect()}var xe="left",he=void 0;return B instanceof Text?(ue<B.data.length?(le.setStart(B,ue),le.setEnd(B,ue+1)):(le.setStart(B,ue-1),le.setEnd(B,ue),xe="right"),he=le.getBoundingClientRect()):(he=de.domNode.getBoundingClientRect(),ue>0&&(xe="right")),{bottom:he.top+he.height,height:he.height,left:he[xe],right:he[xe],top:he.top,width:0}}},{key:"getNativeRange",value:function(){var $=document.getSelection();if(null==$||$.rangeCount<=0)return null;var H=$.getRangeAt(0);if(null==H)return null;var W=this.normalizeNative(H);return D.info("getNativeRange",W),W}},{key:"getRange",value:function(){var $=this.getNativeRange();return null==$?[null,null]:[this.normalizedToRange($),$]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function($){var H=this,W=[[$.start.node,$.start.offset]];$.native.collapsed||W.push([$.end.node,$.end.offset]);var B=W.map(function(de){var ue=ee(de,2),be=ue[0],ce=ue[1],le=j.default.find(be,!0),ie=le.offset(H.scroll);return 0===ce?ie:le instanceof j.default.Container?ie+le.length():ie+le.index(be,ce)}),te=Math.min(Math.max.apply(Math,x(B)),this.scroll.length()-1),Y=Math.min.apply(Math,[te].concat(x(B)));return new L(Y,te-Y)}},{key:"normalizeNative",value:function($){if(!J(this.root,$.startContainer)||!$.collapsed&&!J(this.root,$.endContainer))return null;var H={start:{node:$.startContainer,offset:$.startOffset},end:{node:$.endContainer,offset:$.endOffset},native:$};return[H.start,H.end].forEach(function(W){for(var B=W.node,te=W.offset;!(B instanceof Text)&&B.childNodes.length>0;)if(B.childNodes.length>te)B=B.childNodes[te],te=0;else{if(B.childNodes.length!==te)break;te=(B=B.lastChild)instanceof Text?B.data.length:B.childNodes.length+1}W.node=B,W.offset=te}),H}},{key:"rangeToNative",value:function($){var H=this,W=$.collapsed?[$.index]:[$.index,$.index+$.length],B=[],te=this.scroll.length();return W.forEach(function(Y,de){Y=Math.min(te-1,Y);var be=H.scroll.leaf(Y),ce=ee(be,2),ie=ce[1],fe=ce[0].position(ie,0!==de),me=ee(fe,2);B.push(me[0],ie=me[1])}),B.length<2&&(B=B.concat(B)),B}},{key:"scrollIntoView",value:function($){var H=this.lastRange;if(null!=H){var W=this.getBounds(H.index,H.length);if(null!=W){var B=this.scroll.length()-1,te=this.scroll.line(Math.min(H.index,B)),de=ee(te,1)[0],ue=de;if(H.length>0){var be=this.scroll.line(Math.min(H.index+H.length,B));ue=ee(be,1)[0]}if(null!=de&&null!=ue){var le=$.getBoundingClientRect();W.top<le.top?$.scrollTop-=le.top-W.top:W.bottom>le.bottom&&($.scrollTop+=W.bottom-le.bottom)}}}}},{key:"setNativeRange",value:function($,H){var W=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$,B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:H,te=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(D.info("setNativeRange",$,H,W,B),null==$||null!=this.root.parentNode&&null!=$.parentNode&&null!=W.parentNode){var Y=document.getSelection();if(null!=Y)if(null!=$){this.hasFocus()||this.root.focus();var de=(this.getNativeRange()||{}).native;if(null==de||te||$!==de.startContainer||H!==de.startOffset||W!==de.endContainer||B!==de.endOffset){"BR"==$.tagName&&(H=[].indexOf.call($.parentNode.childNodes,$),$=$.parentNode),"BR"==W.tagName&&(B=[].indexOf.call(W.parentNode.childNodes,W),W=W.parentNode);var ue=document.createRange();ue.setStart($,H),ue.setEnd(W,B),Y.removeAllRanges(),Y.addRange(ue)}}else Y.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function($){var H=arguments.length>1&&void 0!==arguments[1]&&arguments[1],W=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T.default.sources.API;if("string"==typeof H&&(W=H,H=!1),D.info("setRange",$),null!=$){var B=this.rangeToNative($);this.setNativeRange.apply(this,x(B).concat([H]))}else this.setNativeRange(null);this.update(W)}},{key:"update",value:function(){var $=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T.default.sources.USER,H=this.lastRange,W=this.getRange(),B=ee(W,2),Y=B[1];if(this.lastRange=B[0],null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,E.default)(H,this.lastRange)){var de;!this.composing&&null!=Y&&Y.native.collapsed&&Y.start.node!==this.cursor.textNode&&this.cursor.restore();var be,ue=[T.default.events.SELECTION_CHANGE,(0,R.default)(this.lastRange),(0,R.default)(H),$];(de=this.emitter).emit.apply(de,[T.default.events.EDITOR_CHANGE].concat(ue)),$!==T.default.sources.SILENT&&(be=this.emitter).emit.apply(be,ue)}}}]),Z}();function J(Z,X){return X instanceof Text&&(X=X.parentNode),Z.contains(X)}M.Range=L,M.default=re},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function T(C,k){for(var A=0;A<k.length;A++){var x=k[A];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(C,x.key,x)}}return function(C,k,A){return k&&T(C.prototype,k),A&&T(C,A),C}}(),F=function T(C,k,A){null===C&&(C=Function.prototype);var x=Object.getOwnPropertyDescriptor(C,k);if(void 0===x){var V=Object.getPrototypeOf(C);return null===V?void 0:T(V,k,A)}if("value"in x)return x.value;var D=x.get;return void 0===D?void 0:D.call(A)};function R(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")}function S(T,C){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||"object"!=typeof C&&"function"!=typeof C?T:C}var _=function(T){function C(){return R(this,C),S(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return function E(T,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function, not "+typeof C);T.prototype=Object.create(C&&C.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(T,C):T.__proto__=C)}(C,T),ee(C,[{key:"insertInto",value:function(A,x){0===A.children.length?F(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertInto",this).call(this,A,x):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),C}(function q(T){return T&&T.__esModule?T:{default:T}}(c(0)).default.Embed);_.blotName="break",_.tagName="BR",M.default=_},function(ge,M,c){"use strict";var S,ee=this&&this.__extends||(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,_){E.__proto__=_}||function(E,_){for(var T in _)_.hasOwnProperty(T)&&(E[T]=_[T])},function(E,_){function T(){this.constructor=E}S(E,_),E.prototype=null===_?Object.create(_):(T.prototype=_.prototype,new T)});Object.defineProperty(M,"__esModule",{value:!0});var F=c(44),K=c(30),j=c(1),q=function(S){function E(_){var T=S.call(this,_)||this;return T.build(),T}return ee(E,S),E.prototype.appendChild=function(_){this.insertBefore(_)},E.prototype.attach=function(){S.prototype.attach.call(this),this.children.forEach(function(_){_.attach()})},E.prototype.build=function(){var _=this;this.children=new F.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(T){try{var C=R(T);_.insertBefore(C,_.children.head||void 0)}catch(k){if(k instanceof j.ParchmentError)return;throw k}})},E.prototype.deleteAt=function(_,T){if(0===_&&T===this.length())return this.remove();this.children.forEachAt(_,T,function(C,k,A){C.deleteAt(k,A)})},E.prototype.descendant=function(_,T){var C=this.children.find(T),k=C[0],A=C[1];return null==_.blotName&&_(k)||null!=_.blotName&&k instanceof _?[k,A]:k instanceof E?k.descendant(_,A):[null,-1]},E.prototype.descendants=function(_,T,C){void 0===T&&(T=0),void 0===C&&(C=Number.MAX_VALUE);var k=[],A=C;return this.children.forEachAt(T,C,function(x,V,D){(null==_.blotName&&_(x)||null!=_.blotName&&x instanceof _)&&k.push(x),x instanceof E&&(k=k.concat(x.descendants(_,V,A))),A-=D}),k},E.prototype.detach=function(){this.children.forEach(function(_){_.detach()}),S.prototype.detach.call(this)},E.prototype.formatAt=function(_,T,C,k){this.children.forEachAt(_,T,function(A,x,V){A.formatAt(x,V,C,k)})},E.prototype.insertAt=function(_,T,C){var k=this.children.find(_),A=k[0];if(A)A.insertAt(k[1],T,C);else{var V=null==C?j.create("text",T):j.create(T,C);this.appendChild(V)}},E.prototype.insertBefore=function(_,T){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(C){return _ instanceof C}))throw new j.ParchmentError("Cannot insert "+_.statics.blotName+" into "+this.statics.blotName);_.insertInto(this,T)},E.prototype.length=function(){return this.children.reduce(function(_,T){return _+T.length()},0)},E.prototype.moveChildren=function(_,T){this.children.forEach(function(C){_.insertBefore(C,T)})},E.prototype.optimize=function(_){if(S.prototype.optimize.call(this,_),0===this.children.length)if(null!=this.statics.defaultChild){var T=j.create(this.statics.defaultChild);this.appendChild(T),T.optimize(_)}else this.remove()},E.prototype.path=function(_,T){void 0===T&&(T=!1);var C=this.children.find(_,T),k=C[0],A=C[1],x=[[this,_]];return k instanceof E?x.concat(k.path(A,T)):(null!=k&&x.push([k,A]),x)},E.prototype.removeChild=function(_){this.children.remove(_)},E.prototype.replace=function(_){_ instanceof E&&_.moveChildren(this),S.prototype.replace.call(this,_)},E.prototype.split=function(_,T){if(void 0===T&&(T=!1),!T){if(0===_)return this;if(_===this.length())return this.next}var C=this.clone();return this.parent.insertBefore(C,this.next),this.children.forEachAt(_,this.length(),function(k,A,x){k=k.split(A,T),C.appendChild(k)}),C},E.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},E.prototype.update=function(_,T){var C=this,k=[],A=[];_.forEach(function(x){x.target===C.domNode&&"childList"===x.type&&(k.push.apply(k,x.addedNodes),A.push.apply(A,x.removedNodes))}),A.forEach(function(x){if(!(null!=x.parentNode&&"IFRAME"!==x.tagName&&document.body.compareDocumentPosition(x)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var V=j.find(x);null!=V&&(null==V.domNode.parentNode||V.domNode.parentNode===C.domNode)&&V.detach()}}),k.filter(function(x){return x.parentNode==C.domNode}).sort(function(x,V){return x===V?0:x.compareDocumentPosition(V)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(x){var V=null;null!=x.nextSibling&&(V=j.find(x.nextSibling));var D=R(x);(D.next!=V||null==D.next)&&(null!=D.parent&&D.parent.removeChild(C),C.insertBefore(D,V||void 0))})},E}(K.default);function R(S){var E=j.find(S);if(null==E)try{E=j.create(S)}catch(_){E=j.create(j.Scope.INLINE),[].slice.call(S.childNodes).forEach(function(T){E.domNode.appendChild(T)}),S.parentNode&&S.parentNode.replaceChild(E.domNode,S),E.attach()}return E}M.default=q},function(ge,M,c){"use strict";var S,ee=this&&this.__extends||(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,_){E.__proto__=_}||function(E,_){for(var T in _)_.hasOwnProperty(T)&&(E[T]=_[T])},function(E,_){function T(){this.constructor=E}S(E,_),E.prototype=null===_?Object.create(_):(T.prototype=_.prototype,new T)});Object.defineProperty(M,"__esModule",{value:!0});var F=c(12),K=c(31),j=c(17),q=c(1),R=function(S){function E(_){var T=S.call(this,_)||this;return T.attributes=new K.default(T.domNode),T}return ee(E,S),E.formats=function(_){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?_.tagName.toLowerCase():void 0)},E.prototype.format=function(_,T){var C=q.query(_);C instanceof F.default?this.attributes.attribute(C,T):T&&null!=C&&(_!==this.statics.blotName||this.formats()[_]!==T)&&this.replaceWith(_,T)},E.prototype.formats=function(){var _=this.attributes.values(),T=this.statics.formats(this.domNode);return null!=T&&(_[this.statics.blotName]=T),_},E.prototype.replaceWith=function(_,T){var C=S.prototype.replaceWith.call(this,_,T);return this.attributes.copy(C),C},E.prototype.update=function(_,T){var C=this;S.prototype.update.call(this,_,T),_.some(function(k){return k.target===C.domNode&&"attributes"===k.type})&&this.attributes.build()},E.prototype.wrap=function(_,T){var C=S.prototype.wrap.call(this,_,T);return C instanceof E&&C.statics.scope===this.statics.scope&&this.attributes.move(C),C},E}(j.default);M.default=R},function(ge,M,c){"use strict";var q,ee=this&&this.__extends||(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,S){R.__proto__=S}||function(R,S){for(var E in S)S.hasOwnProperty(E)&&(R[E]=S[E])},function(R,S){function E(){this.constructor=R}q(R,S),R.prototype=null===S?Object.create(S):(E.prototype=S.prototype,new E)});Object.defineProperty(M,"__esModule",{value:!0});var F=c(30),K=c(1),j=function(q){function R(){return null!==q&&q.apply(this,arguments)||this}return ee(R,q),R.value=function(S){return!0},R.prototype.index=function(S,E){return this.domNode===S||this.domNode.compareDocumentPosition(S)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(E,1):-1},R.prototype.position=function(S,E){var _=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return S>0&&(_+=1),[this.parent.domNode,_]},R.prototype.value=function(){var S;return(S={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,S},R.scope=K.Scope.INLINE_BLOT,R}(F.default);M.default=j},function(ge,M,c){var ee=c(11),F=c(3),K={attributes:{compose:function(q,R,S){"object"!=typeof q&&(q={}),"object"!=typeof R&&(R={});var E=F(!0,{},R);for(var _ in S||(E=Object.keys(E).reduce(function(T,C){return null!=E[C]&&(T[C]=E[C]),T},{})),q)void 0!==q[_]&&void 0===R[_]&&(E[_]=q[_]);return Object.keys(E).length>0?E:void 0},diff:function(q,R){"object"!=typeof q&&(q={}),"object"!=typeof R&&(R={});var S=Object.keys(q).concat(Object.keys(R)).reduce(function(E,_){return ee(q[_],R[_])||(E[_]=void 0===R[_]?null:R[_]),E},{});return Object.keys(S).length>0?S:void 0},transform:function(q,R,S){if("object"!=typeof q)return R;if("object"==typeof R){if(!S)return R;var E=Object.keys(R).reduce(function(_,T){return void 0===q[T]&&(_[T]=R[T]),_},{});return Object.keys(E).length>0?E:void 0}}},iterator:function(q){return new j(q)},length:function(q){return"number"==typeof q.delete?q.delete:"number"==typeof q.retain?q.retain:"string"==typeof q.insert?q.insert.length:1}};function j(q){this.ops=q,this.index=0,this.offset=0}j.prototype.hasNext=function(){return this.peekLength()<1/0},j.prototype.next=function(q){q||(q=1/0);var R=this.ops[this.index];if(R){var S=this.offset,E=K.length(R);if(q>=E-S?(q=E-S,this.index+=1,this.offset=0):this.offset+=q,"number"==typeof R.delete)return{delete:q};var _={};return R.attributes&&(_.attributes=R.attributes),"number"==typeof R.retain?_.retain=q:_.insert="string"==typeof R.insert?R.insert.substr(S,q):R.insert,_}return{retain:1/0}},j.prototype.peek=function(){return this.ops[this.index]},j.prototype.peekLength=function(){return this.ops[this.index]?K.length(this.ops[this.index])-this.offset:1/0},j.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},j.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var q=this.offset,R=this.index,S=this.next(),E=this.ops.slice(this.index);return this.offset=q,this.index=R,[S].concat(E)}return[]},ge.exports=K},function(ge,M){var c=function(){"use strict";function ee(C,k){return null!=k&&C instanceof k}var F,K,j;try{F=Map}catch(C){F=function(){}}try{K=Set}catch(C){K=function(){}}try{j=Promise}catch(C){j=function(){}}function q(C,k,A,x,V){"object"==typeof k&&(A=k.depth,x=k.prototype,V=k.includeNonEnumerable,k=k.circular);var D=[],L=[],re="undefined"!=typeof Buffer;return void 0===k&&(k=!0),void 0===A&&(A=1/0),function J(Z,X){if(null===Z)return null;if(0===X)return Z;var $,H;if("object"!=typeof Z)return Z;if(ee(Z,F))$=new F;else if(ee(Z,K))$=new K;else if(ee(Z,j))$=new j(function(le,ie){Z.then(function(fe){le(J(fe,X-1))},function(fe){ie(J(fe,X-1))})});else if(q.__isArray(Z))$=[];else if(q.__isRegExp(Z))$=new RegExp(Z.source,T(Z)),Z.lastIndex&&($.lastIndex=Z.lastIndex);else if(q.__isDate(Z))$=new Date(Z.getTime());else{if(re&&Buffer.isBuffer(Z))return $=Buffer.allocUnsafe?Buffer.allocUnsafe(Z.length):new Buffer(Z.length),Z.copy($),$;ee(Z,Error)?$=Object.create(Z):void 0===x?(H=Object.getPrototypeOf(Z),$=Object.create(H)):($=Object.create(x),H=x)}if(k){var W=D.indexOf(Z);if(-1!=W)return L[W];D.push(Z),L.push($)}for(var B in ee(Z,F)&&Z.forEach(function(le,ie){var fe=J(ie,X-1),me=J(le,X-1);$.set(fe,me)}),ee(Z,K)&&Z.forEach(function(le){var ie=J(le,X-1);$.add(ie)}),Z){var te;H&&(te=Object.getOwnPropertyDescriptor(H,B)),(!te||null!=te.set)&&($[B]=J(Z[B],X-1))}if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(Z);for(B=0;B<Y.length;B++){var de=Y[B];(ue=Object.getOwnPropertyDescriptor(Z,de))&&!ue.enumerable&&!V||($[de]=J(Z[de],X-1),ue.enumerable||Object.defineProperty($,de,{enumerable:!1}))}}if(V){var be=Object.getOwnPropertyNames(Z);for(B=0;B<be.length;B++){var ue,ce=be[B];(ue=Object.getOwnPropertyDescriptor(Z,ce))&&ue.enumerable||($[ce]=J(Z[ce],X-1),Object.defineProperty($,ce,{enumerable:!1}))}}return $}(C,A)}function R(C){return Object.prototype.toString.call(C)}function T(C){var k="";return C.global&&(k+="g"),C.ignoreCase&&(k+="i"),C.multiline&&(k+="m"),k}return q.clonePrototype=function(k){if(null===k)return null;var A=function(){};return A.prototype=k,new A},q.__objToStr=R,q.__isDate=function S(C){return"object"==typeof C&&"[object Date]"===R(C)},q.__isArray=function E(C){return"object"==typeof C&&"[object Array]"===R(C)},q.__isRegExp=function _(C){return"object"==typeof C&&"[object RegExp]"===R(C)},q.__getRegExpFlags=T,q}();"object"==typeof ge&&ge.exports&&(ge.exports=c)},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(H,W){if(Array.isArray(H))return H;if(Symbol.iterator in Object(H))return function $(H,W){var B=[],te=!0,Y=!1,de=void 0;try{for(var be,ue=H[Symbol.iterator]();!(te=(be=ue.next()).done)&&(B.push(be.value),!W||B.length!==W);te=!0);}catch(ce){Y=!0,de=ce}finally{try{!te&&ue.return&&ue.return()}finally{if(Y)throw de}}return B}(H,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")},F=function(){function $(H,W){for(var B=0;B<W.length;B++){var te=W[B];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(H,te.key,te)}}return function(H,W,B){return W&&$(H.prototype,W),B&&$(H,B),H}}(),K=function $(H,W,B){null===H&&(H=Function.prototype);var te=Object.getOwnPropertyDescriptor(H,W);if(void 0===te){var Y=Object.getPrototypeOf(H);return null===Y?void 0:$(Y,W,B)}if("value"in te)return te.value;var de=te.get;return void 0===de?void 0:de.call(B)},q=D(c(0)),S=D(c(8)),E=c(4),_=D(E),C=D(c(16)),A=D(c(13)),V=D(c(25));function D($){return $&&$.__esModule?$:{default:$}}function Z($){return $ instanceof _.default||$ instanceof E.BlockEmbed}var X=function($){function H(W,B){!function L($,H){if(!($ instanceof H))throw new TypeError("Cannot call a class as a function")}(this,H);var te=function re($,H){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!H||"object"!=typeof H&&"function"!=typeof H?$:H}(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,W));return te.emitter=B.emitter,Array.isArray(B.whitelist)&&(te.whitelist=B.whitelist.reduce(function(Y,de){return Y[de]=!0,Y},{})),te.domNode.addEventListener("DOMNodeInserted",function(){}),te.optimize(),te.enable(),te}return function J($,H){if("function"!=typeof H&&null!==H)throw new TypeError("Super expression must either be null or a function, not "+typeof H);$.prototype=Object.create(H&&H.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf($,H):$.__proto__=H)}(H,$),F(H,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(B,te){var Y=this.line(B),de=ee(Y,2),ue=de[0],be=de[1],ce=this.line(B+te),ie=ee(ce,1)[0];if(K(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"deleteAt",this).call(this,B,te),null!=ie&&ue!==ie&&be>0){if(ue instanceof E.BlockEmbed||ie instanceof E.BlockEmbed)return void this.optimize();if(ue instanceof A.default){var fe=ue.newlineIndex(ue.length(),!0);if(fe>-1&&(ue=ue.split(fe+1))===ie)return void this.optimize()}else if(ie instanceof A.default){var me=ie.newlineIndex(0);me>-1&&ie.split(me+1)}ue.moveChildren(ie,ie.children.head instanceof C.default?null:ie.children.head),ue.remove()}this.optimize()}},{key:"enable",value:function(){this.domNode.setAttribute("contenteditable",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])}},{key:"formatAt",value:function(B,te,Y,de){null!=this.whitelist&&!this.whitelist[Y]||(K(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"formatAt",this).call(this,B,te,Y,de),this.optimize())}},{key:"insertAt",value:function(B,te,Y){if(null==Y||null==this.whitelist||this.whitelist[te]){if(B>=this.length())if(null==Y||null==q.default.query(te,q.default.Scope.BLOCK)){var de=q.default.create(this.statics.defaultChild);this.appendChild(de),null==Y&&te.endsWith("\n")&&(te=te.slice(0,-1)),de.insertAt(0,te,Y)}else{var ue=q.default.create(te,Y);this.appendChild(ue)}else K(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"insertAt",this).call(this,B,te,Y);this.optimize()}}},{key:"insertBefore",value:function(B,te){if(B.statics.scope===q.default.Scope.INLINE_BLOT){var Y=q.default.create(this.statics.defaultChild);Y.appendChild(B),B=Y}K(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"insertBefore",this).call(this,B,te)}},{key:"leaf",value:function(B){return this.path(B).pop()||[null,-1]}},{key:"line",value:function(B){return B===this.length()?this.line(B-1):this.descendant(Z,B)}},{key:"lines",value:function(){return function de(ue,be,ce){var le=[],ie=ce;return ue.children.forEachAt(be,ce,function(fe,me,_e){Z(fe)?le.push(fe):fe instanceof q.default.Container&&(le=le.concat(de(fe,me,ie))),ie-=_e}),le}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],te=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(K(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"optimize",this).call(this,B,te),B.length>0&&this.emitter.emit(S.default.events.SCROLL_OPTIMIZE,B,te))}},{key:"path",value:function(B){return K(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"path",this).call(this,B).slice(1)}},{key:"update",value:function(B){if(!0!==this.batch){var te=S.default.sources.USER;"string"==typeof B&&(te=B),Array.isArray(B)||(B=this.observer.takeRecords()),B.length>0&&this.emitter.emit(S.default.events.SCROLL_BEFORE_UPDATE,te,B),K(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"update",this).call(this,B.concat([])),B.length>0&&this.emitter.emit(S.default.events.SCROLL_UPDATE,te,B)}}}]),H}(q.default.Scroll);X.blotName="scroll",X.className="ql-editor",X.tagName="DIV",X.defaultChild="block",X.allowedChildren=[_.default,E.BlockEmbed,V.default],M.default=X},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.SHORTKEY=M.default=void 0;var ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(he){return typeof he}:function(he){return he&&"function"==typeof Symbol&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he},F=function(Ie,ke){if(Array.isArray(Ie))return Ie;if(Symbol.iterator in Object(Ie))return function he(Ie,ke){var Re=[],Ue=!0,Qe=!1,Et=void 0;try{for(var Mt,wt=Ie[Symbol.iterator]();!(Ue=(Mt=wt.next()).done)&&(Re.push(Mt.value),!ke||Re.length!==ke);Ue=!0);}catch(Bt){Qe=!0,Et=Bt}finally{try{!Ue&&wt.return&&wt.return()}finally{if(Qe)throw Et}}return Re}(Ie,ke);throw new TypeError("Invalid attempt to destructure non-iterable instance")},K=function(){function he(Ie,ke){for(var Re=0;Re<ke.length;Re++){var Ue=ke[Re];Ue.enumerable=Ue.enumerable||!1,Ue.configurable=!0,"value"in Ue&&(Ue.writable=!0),Object.defineProperty(Ie,Ue.key,Ue)}}return function(Ie,ke,Re){return ke&&he(Ie.prototype,ke),Re&&he(Ie,Re),Ie}}(),q=$(c(21)),S=$(c(11)),_=$(c(3)),C=$(c(2)),A=$(c(20)),V=$(c(0)),L=$(c(5)),J=$(c(10)),X=$(c(9));function $(he){return he&&he.__esModule?he:{default:he}}function H(he,Ie,ke){return Ie in he?Object.defineProperty(he,Ie,{value:ke,enumerable:!0,configurable:!0,writable:!0}):he[Ie]=ke,he}var Y=(0,J.default)("quill:keyboard"),de=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",ue=function(he){function Ie(ke,Re){!function W(he,Ie){if(!(he instanceof Ie))throw new TypeError("Cannot call a class as a function")}(this,Ie);var Ue=function B(he,Ie){if(!he)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Ie||"object"!=typeof Ie&&"function"!=typeof Ie?he:Ie}(this,(Ie.__proto__||Object.getPrototypeOf(Ie)).call(this,ke,Re));return Ue.bindings={},Object.keys(Ue.options.bindings).forEach(function(Qe){"list autofill"===Qe&&null!=ke.scroll.whitelist&&!ke.scroll.whitelist.list||Ue.options.bindings[Qe]&&Ue.addBinding(Ue.options.bindings[Qe])}),Ue.addBinding({key:Ie.keys.ENTER,shiftKey:null},fe),Ue.addBinding({key:Ie.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(Ue.addBinding({key:Ie.keys.BACKSPACE},{collapsed:!0},ce),Ue.addBinding({key:Ie.keys.DELETE},{collapsed:!0},le)):(Ue.addBinding({key:Ie.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},ce),Ue.addBinding({key:Ie.keys.DELETE},{collapsed:!0,suffix:/^.?$/},le)),Ue.addBinding({key:Ie.keys.BACKSPACE},{collapsed:!1},ie),Ue.addBinding({key:Ie.keys.DELETE},{collapsed:!1},ie),Ue.addBinding({key:Ie.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},ce),Ue.listen(),Ue}return function te(he,Ie){if("function"!=typeof Ie&&null!==Ie)throw new TypeError("Super expression must either be null or a function, not "+typeof Ie);he.prototype=Object.create(Ie&&Ie.prototype,{constructor:{value:he,enumerable:!1,writable:!0,configurable:!0}}),Ie&&(Object.setPrototypeOf?Object.setPrototypeOf(he,Ie):he.__proto__=Ie)}(Ie,he),K(Ie,null,[{key:"match",value:function(Re,Ue){return Ue=xe(Ue),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(Qe){return!!Ue[Qe]!==Re[Qe]&&null!==Ue[Qe]})&&Ue.key===(Re.which||Re.keyCode)}}]),K(Ie,[{key:"addBinding",value:function(Re){var Ue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Qe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Et=xe(Re);if(null==Et||null==Et.key)return Y.warn("Attempted to add invalid keyboard binding",Et);"function"==typeof Ue&&(Ue={handler:Ue}),"function"==typeof Qe&&(Qe={handler:Qe}),Et=(0,_.default)(Et,Ue,Qe),this.bindings[Et.key]=this.bindings[Et.key]||[],this.bindings[Et.key].push(Et)}},{key:"listen",value:function(){var Re=this;this.quill.root.addEventListener("keydown",function(Ue){if(!Ue.defaultPrevented){var Et=(Re.bindings[Ue.which||Ue.keyCode]||[]).filter(function(At){return Ie.match(Ue,At)});if(0!==Et.length){var wt=Re.quill.getSelection();if(null!=wt&&Re.quill.hasFocus()){var Mt=Re.quill.getLine(wt.index),Bt=F(Mt,2),wn=Bt[0],mn=Bt[1],Be=Re.quill.getLeaf(wt.index),qe=F(Be,2),He=qe[0],it=qe[1],ze=0===wt.length?[He,it]:Re.quill.getLeaf(wt.index+wt.length),vt=F(ze,2),Rt=vt[0],Lt=vt[1],on=He instanceof V.default.Text?He.value().slice(0,it):"",fn=Rt instanceof V.default.Text?Rt.value().slice(Lt):"",en={collapsed:0===wt.length,empty:0===wt.length&&wn.length()<=1,format:Re.quill.getFormat(wt),offset:mn,prefix:on,suffix:fn};Et.some(function(At){if(null!=At.collapsed&&At.collapsed!==en.collapsed||null!=At.empty&&At.empty!==en.empty||null!=At.offset&&At.offset!==en.offset)return!1;if(Array.isArray(At.format)){if(At.format.every(function(ft){return null==en.format[ft]}))return!1}else if("object"===ee(At.format)&&!Object.keys(At.format).every(function(ft){return!0===At.format[ft]?null!=en.format[ft]:!1===At.format[ft]?null==en.format[ft]:(0,S.default)(At.format[ft],en.format[ft])}))return!1;return!(null!=At.prefix&&!At.prefix.test(en.prefix)||null!=At.suffix&&!At.suffix.test(en.suffix))&&!0!==At.handler.call(Re,wt,en)})&&Ue.preventDefault()}}}})}}]),Ie}(X.default);function be(he,Ie){var ke;return H(ke={key:he,shiftKey:Ie,altKey:null},he===ue.keys.LEFT?"prefix":"suffix",/^$/),H(ke,"handler",function(Qe){var Et=Qe.index;he===ue.keys.RIGHT&&(Et+=Qe.length+1);var wt=this.quill.getLeaf(Et);return!(F(wt,1)[0]instanceof V.default.Embed&&(he===ue.keys.LEFT?Ie?this.quill.setSelection(Qe.index-1,Qe.length+1,L.default.sources.USER):this.quill.setSelection(Qe.index-1,L.default.sources.USER):Ie?this.quill.setSelection(Qe.index,Qe.length+1,L.default.sources.USER):this.quill.setSelection(Qe.index+Qe.length+1,L.default.sources.USER),1))}),ke}function ce(he,Ie){if(!(0===he.index||this.quill.getLength()<=1)){var ke=this.quill.getLine(he.index),Ue=F(ke,1)[0],Qe={};if(0===Ie.offset){var Et=this.quill.getLine(he.index-1),Mt=F(Et,1)[0];if(null!=Mt&&Mt.length()>1){var Bt=Ue.formats(),wn=this.quill.getFormat(he.index-1,1);Qe=A.default.attributes.diff(Bt,wn)||{}}}var mn=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(Ie.prefix)?2:1;this.quill.deleteText(he.index-mn,mn,L.default.sources.USER),Object.keys(Qe).length>0&&this.quill.formatLine(he.index-mn,mn,Qe,L.default.sources.USER),this.quill.focus()}}function le(he,Ie){var ke=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(Ie.suffix)?2:1;if(!(he.index>=this.quill.getLength()-ke)){var Re={},Ue=0,Qe=this.quill.getLine(he.index),wt=F(Qe,1)[0];if(Ie.offset>=wt.length()-1){var Mt=this.quill.getLine(he.index+1),wn=F(Mt,1)[0];if(wn){var mn=wt.formats(),Be=this.quill.getFormat(he.index,1);Re=A.default.attributes.diff(mn,Be)||{},Ue=wn.length()}}this.quill.deleteText(he.index,ke,L.default.sources.USER),Object.keys(Re).length>0&&this.quill.formatLine(he.index+Ue-1,ke,Re,L.default.sources.USER)}}function ie(he){var Ie=this.quill.getLines(he),ke={};if(Ie.length>1){var Re=Ie[0].formats(),Ue=Ie[Ie.length-1].formats();ke=A.default.attributes.diff(Ue,Re)||{}}this.quill.deleteText(he,L.default.sources.USER),Object.keys(ke).length>0&&this.quill.formatLine(he.index,1,ke,L.default.sources.USER),this.quill.setSelection(he.index,L.default.sources.SILENT),this.quill.focus()}function fe(he,Ie){var ke=this;he.length>0&&this.quill.scroll.deleteAt(he.index,he.length);var Re=Object.keys(Ie.format).reduce(function(Ue,Qe){return V.default.query(Qe,V.default.Scope.BLOCK)&&!Array.isArray(Ie.format[Qe])&&(Ue[Qe]=Ie.format[Qe]),Ue},{});this.quill.insertText(he.index,"\n",Re,L.default.sources.USER),this.quill.setSelection(he.index+1,L.default.sources.SILENT),this.quill.focus(),Object.keys(Ie.format).forEach(function(Ue){null==Re[Ue]&&(Array.isArray(Ie.format[Ue])||"link"!==Ue&&ke.quill.format(Ue,Ie.format[Ue],L.default.sources.USER))})}function me(he){return{key:ue.keys.TAB,shiftKey:!he,format:{"code-block":!0},handler:function(ke){var Re=V.default.query("code-block"),Ue=ke.index,Qe=ke.length,Et=this.quill.scroll.descendant(Re,Ue),wt=F(Et,2),Mt=wt[0],Bt=wt[1];if(null!=Mt){var wn=this.quill.getIndex(Mt),mn=Mt.newlineIndex(Bt,!0)+1,Be=Mt.newlineIndex(wn+Bt+Qe),qe=Mt.domNode.textContent.slice(mn,Be).split("\n");Bt=0,qe.forEach(function(He,it){he?(Mt.insertAt(mn+Bt,Re.TAB),Bt+=Re.TAB.length,0===it?Ue+=Re.TAB.length:Qe+=Re.TAB.length):He.startsWith(Re.TAB)&&(Mt.deleteAt(mn+Bt,Re.TAB.length),Bt-=Re.TAB.length,0===it?Ue-=Re.TAB.length:Qe-=Re.TAB.length),Bt+=He.length+1}),this.quill.update(L.default.sources.USER),this.quill.setSelection(Ue,Qe,L.default.sources.SILENT)}}}}function _e(he){return{key:he[0].toUpperCase(),shortKey:!0,handler:function(ke,Re){this.quill.format(he,!Re.format[he],L.default.sources.USER)}}}function xe(he){if("string"==typeof he||"number"==typeof he)return xe({key:he});if("object"===(void 0===he?"undefined":ee(he))&&(he=(0,q.default)(he,!1)),"string"==typeof he.key)if(null!=ue.keys[he.key.toUpperCase()])he.key=ue.keys[he.key.toUpperCase()];else{if(1!==he.key.length)return null;he.key=he.key.toUpperCase().charCodeAt(0)}return he.shortKey&&(he[de]=he.shortKey,delete he.shortKey),he}ue.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},ue.DEFAULTS={bindings:{bold:_e("bold"),italic:_e("italic"),underline:_e("underline"),indent:{key:ue.keys.TAB,format:["blockquote","indent","list"],handler:function(Ie,ke){if(ke.collapsed&&0!==ke.offset)return!0;this.quill.format("indent","+1",L.default.sources.USER)}},outdent:{key:ue.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(Ie,ke){if(ke.collapsed&&0!==ke.offset)return!0;this.quill.format("indent","-1",L.default.sources.USER)}},"outdent backspace":{key:ue.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(Ie,ke){null!=ke.format.indent?this.quill.format("indent","-1",L.default.sources.USER):null!=ke.format.list&&this.quill.format("list",!1,L.default.sources.USER)}},"indent code-block":me(!0),"outdent code-block":me(!1),"remove tab":{key:ue.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(Ie){this.quill.deleteText(Ie.index-1,1,L.default.sources.USER)}},tab:{key:ue.keys.TAB,handler:function(Ie){this.quill.history.cutoff();var ke=(new C.default).retain(Ie.index).delete(Ie.length).insert("\t");this.quill.updateContents(ke,L.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Ie.index+1,L.default.sources.SILENT)}},"list empty enter":{key:ue.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(Ie,ke){this.quill.format("list",!1,L.default.sources.USER),ke.format.indent&&this.quill.format("indent",!1,L.default.sources.USER)}},"checklist enter":{key:ue.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(Ie){var ke=this.quill.getLine(Ie.index),Re=F(ke,2),Ue=Re[0],Qe=Re[1],Et=(0,_.default)({},Ue.formats(),{list:"checked"}),wt=(new C.default).retain(Ie.index).insert("\n",Et).retain(Ue.length()-Qe-1).retain(1,{list:"unchecked"});this.quill.updateContents(wt,L.default.sources.USER),this.quill.setSelection(Ie.index+1,L.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:ue.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(Ie,ke){var Re=this.quill.getLine(Ie.index),Ue=F(Re,2),Qe=Ue[0],Et=Ue[1],wt=(new C.default).retain(Ie.index).insert("\n",ke.format).retain(Qe.length()-Et-1).retain(1,{header:null});this.quill.updateContents(wt,L.default.sources.USER),this.quill.setSelection(Ie.index+1,L.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(Ie,ke){var Re=ke.prefix.length,Ue=this.quill.getLine(Ie.index),Qe=F(Ue,2),Et=Qe[0],wt=Qe[1];if(wt>Re)return!0;var Mt=void 0;switch(ke.prefix.trim()){case"[]":case"[ ]":Mt="unchecked";break;case"[x]":Mt="checked";break;case"-":case"*":Mt="bullet";break;default:Mt="ordered"}this.quill.insertText(Ie.index," ",L.default.sources.USER),this.quill.history.cutoff();var Bt=(new C.default).retain(Ie.index-wt).delete(Re+1).retain(Et.length()-2-wt).retain(1,{list:Mt});this.quill.updateContents(Bt,L.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Ie.index-Re,L.default.sources.SILENT)}},"code exit":{key:ue.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(Ie){var ke=this.quill.getLine(Ie.index),Re=F(ke,2),Ue=Re[0],Qe=Re[1],Et=(new C.default).retain(Ie.index+Ue.length()-Qe-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Et,L.default.sources.USER)}},"embed left":be(ue.keys.LEFT,!1),"embed left shift":be(ue.keys.LEFT,!0),"embed right":be(ue.keys.RIGHT,!1),"embed right shift":be(ue.keys.RIGHT,!0)}},M.default=ue,M.SHORTKEY=de},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(x,V){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return function A(x,V){var D=[],L=!0,re=!1,J=void 0;try{for(var X,Z=x[Symbol.iterator]();!(L=(X=Z.next()).done)&&(D.push(X.value),!V||D.length!==V);L=!0);}catch($){re=!0,J=$}finally{try{!L&&Z.return&&Z.return()}finally{if(re)throw J}}return D}(x,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")},F=function A(x,V,D){null===x&&(x=Function.prototype);var L=Object.getOwnPropertyDescriptor(x,V);if(void 0===L){var re=Object.getPrototypeOf(x);return null===re?void 0:A(re,V,D)}if("value"in L)return L.value;var J=L.get;return void 0===J?void 0:J.call(D)},K=function(){function A(x,V){for(var D=0;D<V.length;D++){var L=V[D];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(x,L.key,L)}}return function(x,V,D){return V&&A(x.prototype,V),D&&A(x,D),x}}(),q=E(c(0)),S=E(c(7));function E(A){return A&&A.__esModule?A:{default:A}}var k=function(A){function x(V,D){!function _(A,x){if(!(A instanceof x))throw new TypeError("Cannot call a class as a function")}(this,x);var L=function T(A,x){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!x||"object"!=typeof x&&"function"!=typeof x?A:x}(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,V));return L.selection=D,L.textNode=document.createTextNode(x.CONTENTS),L.domNode.appendChild(L.textNode),L._length=0,L}return function C(A,x){if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function, not "+typeof x);A.prototype=Object.create(x&&x.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(A,x):A.__proto__=x)}(x,A),K(x,null,[{key:"value",value:function(){}}]),K(x,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(D,L){if(0!==this._length)return F(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"format",this).call(this,D,L);for(var re=this,J=0;null!=re&&re.statics.scope!==q.default.Scope.BLOCK_BLOT;)J+=re.offset(re.parent),re=re.parent;null!=re&&(this._length=x.CONTENTS.length,re.optimize(),re.formatAt(J,x.CONTENTS.length,D,L),this._length=0)}},{key:"index",value:function(D,L){return D===this.textNode?0:F(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"index",this).call(this,D,L)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){F(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var D=this.textNode,L=this.selection.getNativeRange(),re=void 0,J=void 0,Z=void 0;if(null!=L&&L.start.node===D&&L.end.node===D){var X=[D,L.start.offset,L.end.offset];re=X[0],J=X[1],Z=X[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==x.CONTENTS){var $=this.textNode.data.split(x.CONTENTS).join("");this.next instanceof S.default?(re=this.next.domNode,this.next.insertAt(0,$),this.textNode.data=x.CONTENTS):(this.textNode.data=$,this.parent.insertBefore(q.default.create(this.textNode),this),this.textNode=document.createTextNode(x.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=J){var H=[J,Z].map(function(B){return Math.max(0,Math.min(re.data.length,B-1))}),W=ee(H,2);return{startNode:re,startOffset:J=W[0],endNode:re,endOffset:Z=W[1]}}}}},{key:"update",value:function(D,L){var re=this;if(D.some(function(Z){return"characterData"===Z.type&&Z.target===re.textNode})){var J=this.restore();J&&(L.range=J)}}},{key:"value",value:function(){return""}}]),x}(q.default.Embed);k.blotName="cursor",k.className="ql-cursor",k.tagName="span",k.CONTENTS="\ufeff",M.default=k},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var F=q(c(0)),K=c(4),j=q(K);function q(T){return T&&T.__esModule?T:{default:T}}function R(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")}function S(T,C){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||"object"!=typeof C&&"function"!=typeof C?T:C}var _=function(T){function C(){return R(this,C),S(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return function E(T,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function, not "+typeof C);T.prototype=Object.create(C&&C.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(T,C):T.__proto__=C)}(C,T),C}(F.default.Container);_.allowedChildren=[j.default,K.BlockEmbed,_],M.default=_},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.ColorStyle=M.ColorClass=M.ColorAttributor=void 0;var ee=function(){function k(A,x){for(var V=0;V<x.length;V++){var D=x[V];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(A,D.key,D)}}return function(A,x,V){return x&&k(A.prototype,x),V&&k(A,V),A}}(),F=function k(A,x,V){null===A&&(A=Function.prototype);var D=Object.getOwnPropertyDescriptor(A,x);if(void 0===D){var L=Object.getPrototypeOf(A);return null===L?void 0:k(L,x,V)}if("value"in D)return D.value;var re=D.get;return void 0===re?void 0:re.call(V)},j=function q(k){return k&&k.__esModule?k:{default:k}}(c(0));function R(k,A){if(!(k instanceof A))throw new TypeError("Cannot call a class as a function")}function S(k,A){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!=typeof A&&"function"!=typeof A?k:A}var _=function(k){function A(){return R(this,A),S(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return function E(k,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);k.prototype=Object.create(A&&A.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(k,A):k.__proto__=A)}(A,k),ee(A,[{key:"value",value:function(V){var D=F(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"value",this).call(this,V);return D.startsWith("rgb(")?"#"+(D=D.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(function(L){return("00"+parseInt(L).toString(16)).slice(-2)}).join(""):D}}]),A}(j.default.Attributor.Style),T=new j.default.Attributor.Class("color","ql-color",{scope:j.default.Scope.INLINE}),C=new _("color","color",{scope:j.default.Scope.INLINE});M.ColorAttributor=_,M.ColorClass=T,M.ColorStyle=C},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.sanitize=M.default=void 0;var ee=function(){function C(k,A){for(var x=0;x<A.length;x++){var V=A[x];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}return function(k,A,x){return A&&C(k.prototype,A),x&&C(k,x),k}}(),F=function C(k,A,x){null===k&&(k=Function.prototype);var V=Object.getOwnPropertyDescriptor(k,A);if(void 0===V){var D=Object.getPrototypeOf(k);return null===D?void 0:C(D,A,x)}if("value"in V)return V.value;var L=V.get;return void 0===L?void 0:L.call(x)};function R(C,k){if(!(C instanceof k))throw new TypeError("Cannot call a class as a function")}function S(C,k){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!k||"object"!=typeof k&&"function"!=typeof k?C:k}var _=function(C){function k(){return R(this,k),S(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return function E(C,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function, not "+typeof k);C.prototype=Object.create(k&&k.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(C,k):C.__proto__=k)}(k,C),ee(k,[{key:"format",value:function(x,V){if(x!==this.statics.blotName||!V)return F(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,x,V);V=this.constructor.sanitize(V),this.domNode.setAttribute("href",V)}}],[{key:"create",value:function(x){var V=F(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,x);return x=this.sanitize(x),V.setAttribute("href",x),V.setAttribute("rel","noopener noreferrer"),V.setAttribute("target","_blank"),V}},{key:"formats",value:function(x){return x.getAttribute("href")}},{key:"sanitize",value:function(x){return T(x,this.PROTOCOL_WHITELIST)?x:this.SANITIZED_URL}}]),k}(function q(C){return C&&C.__esModule?C:{default:C}}(c(6)).default);function T(C,k){var A=document.createElement("a");A.href=C;var x=A.href.slice(0,A.href.indexOf(":"));return k.indexOf(x)>-1}_.blotName="link",_.tagName="A",_.SANITIZED_URL="about:blank",_.PROTOCOL_WHITELIST=["http","https","mailto","tel"],M.default=_,M.sanitize=T},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},F=function(){function k(A,x){for(var V=0;V<x.length;V++){var D=x[V];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(A,D.key,D)}}return function(A,x,V){return x&&k(A.prototype,x),V&&k(A,V),A}}(),j=S(c(23)),R=S(c(107));function S(k){return k&&k.__esModule?k:{default:k}}var _=0;function T(k,A){k.setAttribute(A,"true"!==k.getAttribute(A))}var C=function(){function k(A){var x=this;(function E(k,A){if(!(k instanceof A))throw new TypeError("Cannot call a class as a function")})(this,k),this.select=A,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){x.togglePicker()}),this.label.addEventListener("keydown",function(V){switch(V.keyCode){case j.default.keys.ENTER:x.togglePicker();break;case j.default.keys.ESCAPE:x.escape(),V.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return F(k,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),T(this.label,"aria-expanded"),T(this.options,"aria-hidden")}},{key:"buildItem",value:function(x){var V=this,D=document.createElement("span");return D.tabIndex="0",D.setAttribute("role","button"),D.classList.add("ql-picker-item"),x.hasAttribute("value")&&D.setAttribute("data-value",x.getAttribute("value")),x.textContent&&D.setAttribute("data-label",x.textContent),D.addEventListener("click",function(){V.selectItem(D,!0)}),D.addEventListener("keydown",function(L){switch(L.keyCode){case j.default.keys.ENTER:V.selectItem(D,!0),L.preventDefault();break;case j.default.keys.ESCAPE:V.escape(),L.preventDefault()}}),D}},{key:"buildLabel",value:function(){var x=document.createElement("span");return x.classList.add("ql-picker-label"),x.innerHTML=R.default,x.tabIndex="0",x.setAttribute("role","button"),x.setAttribute("aria-expanded","false"),this.container.appendChild(x),x}},{key:"buildOptions",value:function(){var x=this,V=document.createElement("span");V.classList.add("ql-picker-options"),V.setAttribute("aria-hidden","true"),V.tabIndex="-1",V.id="ql-picker-options-"+_,_+=1,this.label.setAttribute("aria-controls",V.id),this.options=V,[].slice.call(this.select.options).forEach(function(D){var L=x.buildItem(D);V.appendChild(L),!0===D.selected&&x.selectItem(L)}),this.container.appendChild(V)}},{key:"buildPicker",value:function(){var x=this;[].slice.call(this.select.attributes).forEach(function(V){x.container.setAttribute(V.name,V.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var x=this;this.close(),setTimeout(function(){return x.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(x){var V=arguments.length>1&&void 0!==arguments[1]&&arguments[1],D=this.container.querySelector(".ql-selected");if(x!==D&&(null!=D&&D.classList.remove("ql-selected"),null!=x&&(x.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(x.parentNode.children,x),x.hasAttribute("data-value")?this.label.setAttribute("data-value",x.getAttribute("data-value")):this.label.removeAttribute("data-value"),x.hasAttribute("data-label")?this.label.setAttribute("data-label",x.getAttribute("data-label")):this.label.removeAttribute("data-label"),V))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":ee(Event))){var L=document.createEvent("Event");L.initEvent("change",!0,!0),this.select.dispatchEvent(L)}this.close()}}},{key:"update",value:function(){var x=void 0;if(this.select.selectedIndex>-1){var V=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];x=this.select.options[this.select.selectedIndex],this.selectItem(V)}else this.selectItem(null);var D=null!=x&&x!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",D)}}]),k}();M.default=C},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var F=Y(c(0)),j=Y(c(5)),q=c(4),R=Y(q),E=Y(c(16)),T=Y(c(25)),k=Y(c(24)),x=Y(c(35)),D=Y(c(6)),re=Y(c(22)),Z=Y(c(7)),$=Y(c(55)),W=Y(c(42)),te=Y(c(23));function Y(de){return de&&de.__esModule?de:{default:de}}j.default.register({"blots/block":R.default,"blots/block/embed":q.BlockEmbed,"blots/break":E.default,"blots/container":T.default,"blots/cursor":k.default,"blots/embed":x.default,"blots/inline":D.default,"blots/scroll":re.default,"blots/text":Z.default,"modules/clipboard":$.default,"modules/history":W.default,"modules/keyboard":te.default}),F.default.register(R.default,E.default,k.default,D.default,re.default,Z.default),M.default=j.default},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=c(1),F=function(){function K(j){this.domNode=j,this.domNode[ee.DATA_KEY]={blot:this}}return Object.defineProperty(K.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),K.create=function(j){if(null==this.tagName)throw new ee.ParchmentError("Blot definition missing tagName");var q;return Array.isArray(this.tagName)?("string"==typeof j&&(j=j.toUpperCase(),parseInt(j).toString()===j&&(j=parseInt(j))),q="number"==typeof j?document.createElement(this.tagName[j-1]):this.tagName.indexOf(j)>-1?document.createElement(j):document.createElement(this.tagName[0])):q=document.createElement(this.tagName),this.className&&q.classList.add(this.className),q},K.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},K.prototype.clone=function(){var j=this.domNode.cloneNode(!1);return ee.create(j)},K.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[ee.DATA_KEY]},K.prototype.deleteAt=function(j,q){this.isolate(j,q).remove()},K.prototype.formatAt=function(j,q,R,S){var E=this.isolate(j,q);if(null!=ee.query(R,ee.Scope.BLOT)&&S)E.wrap(R,S);else if(null!=ee.query(R,ee.Scope.ATTRIBUTE)){var _=ee.create(this.statics.scope);E.wrap(_),_.format(R,S)}},K.prototype.insertAt=function(j,q,R){var S=null==R?ee.create("text",q):ee.create(q,R),E=this.split(j);this.parent.insertBefore(S,E)},K.prototype.insertInto=function(j,q){void 0===q&&(q=null),null!=this.parent&&this.parent.children.remove(this);var R=null;j.children.insertBefore(this,q),null!=q&&(R=q.domNode),(this.domNode.parentNode!=j.domNode||this.domNode.nextSibling!=R)&&j.domNode.insertBefore(this.domNode,R),this.parent=j,this.attach()},K.prototype.isolate=function(j,q){var R=this.split(j);return R.split(q),R},K.prototype.length=function(){return 1},K.prototype.offset=function(j){return void 0===j&&(j=this.parent),null==this.parent||this==j?0:this.parent.children.offset(this)+this.parent.offset(j)},K.prototype.optimize=function(j){null!=this.domNode[ee.DATA_KEY]&&delete this.domNode[ee.DATA_KEY].mutations},K.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},K.prototype.replace=function(j){null!=j.parent&&(j.parent.insertBefore(this,j.next),j.remove())},K.prototype.replaceWith=function(j,q){var R="string"==typeof j?ee.create(j,q):j;return R.replace(this),R},K.prototype.split=function(j,q){return 0===j?this:this.next},K.prototype.update=function(j,q){},K.prototype.wrap=function(j,q){var R="string"==typeof j?ee.create(j,q):j;return null!=this.parent&&this.parent.insertBefore(R,this.next),R.appendChild(this),R},K.blotName="abstract",K}();M.default=F},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=c(12),F=c(32),K=c(33),j=c(1),q=function(){function R(S){this.attributes={},this.domNode=S,this.build()}return R.prototype.attribute=function(S,E){E?S.add(this.domNode,E)&&(null!=S.value(this.domNode)?this.attributes[S.attrName]=S:delete this.attributes[S.attrName]):(S.remove(this.domNode),delete this.attributes[S.attrName])},R.prototype.build=function(){var S=this;this.attributes={};var E=ee.default.keys(this.domNode),_=F.default.keys(this.domNode),T=K.default.keys(this.domNode);E.concat(_).concat(T).forEach(function(C){var k=j.query(C,j.Scope.ATTRIBUTE);k instanceof ee.default&&(S.attributes[k.attrName]=k)})},R.prototype.copy=function(S){var E=this;Object.keys(this.attributes).forEach(function(_){var T=E.attributes[_].value(E.domNode);S.format(_,T)})},R.prototype.move=function(S){var E=this;this.copy(S),Object.keys(this.attributes).forEach(function(_){E.attributes[_].remove(E.domNode)}),this.attributes={}},R.prototype.values=function(){var S=this;return Object.keys(this.attributes).reduce(function(E,_){return E[_]=S.attributes[_].value(S.domNode),E},{})},R}();M.default=q},function(ge,M,c){"use strict";var q,ee=this&&this.__extends||(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,S){R.__proto__=S}||function(R,S){for(var E in S)S.hasOwnProperty(E)&&(R[E]=S[E])},function(R,S){function E(){this.constructor=R}q(R,S),R.prototype=null===S?Object.create(S):(E.prototype=S.prototype,new E)});function K(q,R){return(q.getAttribute("class")||"").split(/\s+/).filter(function(E){return 0===E.indexOf(R+"-")})}Object.defineProperty(M,"__esModule",{value:!0});var j=function(q){function R(){return null!==q&&q.apply(this,arguments)||this}return ee(R,q),R.keys=function(S){return(S.getAttribute("class")||"").split(/\s+/).map(function(E){return E.split("-").slice(0,-1).join("-")})},R.prototype.add=function(S,E){return!!this.canAdd(S,E)&&(this.remove(S),S.classList.add(this.keyName+"-"+E),!0)},R.prototype.remove=function(S){K(S,this.keyName).forEach(function(_){S.classList.remove(_)}),0===S.classList.length&&S.removeAttribute("class")},R.prototype.value=function(S){var _=(K(S,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(S,_)?_:""},R}(c(12).default);M.default=j},function(ge,M,c){"use strict";var q,ee=this&&this.__extends||(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,S){R.__proto__=S}||function(R,S){for(var E in S)S.hasOwnProperty(E)&&(R[E]=S[E])},function(R,S){function E(){this.constructor=R}q(R,S),R.prototype=null===S?Object.create(S):(E.prototype=S.prototype,new E)});function K(q){var R=q.split("-"),S=R.slice(1).map(function(E){return E[0].toUpperCase()+E.slice(1)}).join("");return R[0]+S}Object.defineProperty(M,"__esModule",{value:!0});var j=function(q){function R(){return null!==q&&q.apply(this,arguments)||this}return ee(R,q),R.keys=function(S){return(S.getAttribute("style")||"").split(";").map(function(E){return E.split(":")[0].trim()})},R.prototype.add=function(S,E){return!!this.canAdd(S,E)&&(S.style[K(this.keyName)]=E,!0)},R.prototype.remove=function(S){S.style[K(this.keyName)]="",S.getAttribute("style")||S.removeAttribute("style")},R.prototype.value=function(S){var E=S.style[K(this.keyName)];return this.canAdd(S,E)?E:""},R}(c(12).default);M.default=j},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function j(q,R){for(var S=0;S<R.length;S++){var E=R[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(q,E.key,E)}}return function(q,R,S){return R&&j(q.prototype,R),S&&j(q,S),q}}();var K=function(){function j(q,R){(function F(j,q){if(!(j instanceof q))throw new TypeError("Cannot call a class as a function")})(this,j),this.quill=q,this.options=R,this.modules={}}return ee(j,[{key:"init",value:function(){var R=this;Object.keys(this.options.modules).forEach(function(S){null==R.modules[S]&&R.addModule(S)})}},{key:"addModule",value:function(R){var S=this.quill.constructor.import("modules/"+R);return this.modules[R]=new S(this.quill,this.options.modules[R]||{}),this.modules[R]}}]),j}();K.DEFAULTS={modules:{}},K.themes={default:K},M.default=K},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function A(x,V){for(var D=0;D<V.length;D++){var L=V[D];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(x,L.key,L)}}return function(x,V,D){return V&&A(x.prototype,V),D&&A(x,D),x}}(),F=function A(x,V,D){null===x&&(x=Function.prototype);var L=Object.getOwnPropertyDescriptor(x,V);if(void 0===L){var re=Object.getPrototypeOf(x);return null===re?void 0:A(re,V,D)}if("value"in L)return L.value;var J=L.get;return void 0===J?void 0:J.call(D)},j=S(c(0)),R=S(c(7));function S(A){return A&&A.__esModule?A:{default:A}}var C="\ufeff",k=function(A){function x(V){!function E(A,x){if(!(A instanceof x))throw new TypeError("Cannot call a class as a function")}(this,x);var D=function _(A,x){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!x||"object"!=typeof x&&"function"!=typeof x?A:x}(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,V));return D.contentNode=document.createElement("span"),D.contentNode.setAttribute("contenteditable",!1),[].slice.call(D.domNode.childNodes).forEach(function(L){D.contentNode.appendChild(L)}),D.leftGuard=document.createTextNode(C),D.rightGuard=document.createTextNode(C),D.domNode.appendChild(D.leftGuard),D.domNode.appendChild(D.contentNode),D.domNode.appendChild(D.rightGuard),D}return function T(A,x){if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function, not "+typeof x);A.prototype=Object.create(x&&x.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(A,x):A.__proto__=x)}(x,A),ee(x,[{key:"index",value:function(D,L){return D===this.leftGuard?0:D===this.rightGuard?1:F(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"index",this).call(this,D,L)}},{key:"restore",value:function(D){var L=void 0,re=void 0,J=D.data.split(C).join("");if(D===this.leftGuard)if(this.prev instanceof R.default){var Z=this.prev.length();this.prev.insertAt(Z,J),L={startNode:this.prev.domNode,startOffset:Z+J.length}}else re=document.createTextNode(J),this.parent.insertBefore(j.default.create(re),this),L={startNode:re,startOffset:J.length};else D===this.rightGuard&&(this.next instanceof R.default?(this.next.insertAt(0,J),L={startNode:this.next.domNode,startOffset:J.length}):(re=document.createTextNode(J),this.parent.insertBefore(j.default.create(re),this.next),L={startNode:re,startOffset:J.length}));return D.data=C,L}},{key:"update",value:function(D,L){var re=this;D.forEach(function(J){if("characterData"===J.type&&(J.target===re.leftGuard||J.target===re.rightGuard)){var Z=re.restore(J.target);Z&&(L.range=Z)}})}}]),x}(j.default.Embed);M.default=k},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.AlignStyle=M.AlignClass=M.AlignAttribute=void 0;var F=function K(E){return E&&E.__esModule?E:{default:E}}(c(0));var j={scope:F.default.Scope.BLOCK,whitelist:["right","center","justify"]},q=new F.default.Attributor.Attribute("align","align",j),R=new F.default.Attributor.Class("align","ql-align",j),S=new F.default.Attributor.Style("align","text-align",j);M.AlignAttribute=q,M.AlignClass=R,M.AlignStyle=S},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.BackgroundStyle=M.BackgroundClass=void 0;var F=function j(S){return S&&S.__esModule?S:{default:S}}(c(0)),K=c(26);var q=new F.default.Attributor.Class("background","ql-bg",{scope:F.default.Scope.INLINE}),R=new K.ColorAttributor("background","background-color",{scope:F.default.Scope.INLINE});M.BackgroundClass=q,M.BackgroundStyle=R},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.DirectionStyle=M.DirectionClass=M.DirectionAttribute=void 0;var F=function K(E){return E&&E.__esModule?E:{default:E}}(c(0));var j={scope:F.default.Scope.BLOCK,whitelist:["rtl"]},q=new F.default.Attributor.Attribute("direction","dir",j),R=new F.default.Attributor.Class("direction","ql-direction",j),S=new F.default.Attributor.Style("direction","direction",j);M.DirectionAttribute=q,M.DirectionClass=R,M.DirectionStyle=S},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.FontClass=M.FontStyle=void 0;var ee=function(){function A(x,V){for(var D=0;D<V.length;D++){var L=V[D];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(x,L.key,L)}}return function(x,V,D){return V&&A(x.prototype,V),D&&A(x,D),x}}(),F=function A(x,V,D){null===x&&(x=Function.prototype);var L=Object.getOwnPropertyDescriptor(x,V);if(void 0===L){var re=Object.getPrototypeOf(x);return null===re?void 0:A(re,V,D)}if("value"in L)return L.value;var J=L.get;return void 0===J?void 0:J.call(D)},j=function q(A){return A&&A.__esModule?A:{default:A}}(c(0));function R(A,x){if(!(A instanceof x))throw new TypeError("Cannot call a class as a function")}function S(A,x){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!x||"object"!=typeof x&&"function"!=typeof x?A:x}var _={scope:j.default.Scope.INLINE,whitelist:["serif","monospace"]},T=new j.default.Attributor.Class("font","ql-font",_),C=function(A){function x(){return R(this,x),S(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return function E(A,x){if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function, not "+typeof x);A.prototype=Object.create(x&&x.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(A,x):A.__proto__=x)}(x,A),ee(x,[{key:"value",value:function(D){return F(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"value",this).call(this,D).replace(/["']/g,"")}}]),x}(j.default.Attributor.Style),k=new C("font","font-family",_);M.FontStyle=k,M.FontClass=T},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.SizeStyle=M.SizeClass=void 0;var F=function K(R){return R&&R.__esModule?R:{default:R}}(c(0));var j=new F.default.Attributor.Class("size","ql-size",{scope:F.default.Scope.INLINE,whitelist:["small","large","huge"]}),q=new F.default.Attributor.Style("size","font-size",{scope:F.default.Scope.INLINE,whitelist:["10px","18px","32px"]});M.SizeClass=j,M.SizeStyle=q},function(ge,M,c){"use strict";ge.exports={align:{"":c(76),center:c(77),right:c(78),justify:c(79)},background:c(80),blockquote:c(81),bold:c(82),clean:c(83),code:c(58),"code-block":c(58),color:c(84),direction:{"":c(85),rtl:c(86)},float:{center:c(87),full:c(88),left:c(89),right:c(90)},formula:c(91),header:{1:c(92),2:c(93)},italic:c(94),image:c(95),indent:{"+1":c(96),"-1":c(97)},link:c(98),list:{ordered:c(99),bullet:c(100),check:c(101)},script:{sub:c(102),super:c(103)},strike:c(104),underline:c(105),video:c(106)}},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.getLastChangeIndex=M.default=void 0;var ee=function(){function V(D,L){for(var re=0;re<L.length;re++){var J=L[re];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(D,J.key,J)}}return function(D,L,re){return L&&V(D.prototype,L),re&&V(D,re),D}}(),K=E(c(0)),q=E(c(5));function E(V){return V&&V.__esModule?V:{default:V}}var k=function(V){function D(L,re){!function _(V,D){if(!(V instanceof D))throw new TypeError("Cannot call a class as a function")}(this,D);var J=function T(V,D){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!D||"object"!=typeof D&&"function"!=typeof D?V:D}(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,L,re));return J.lastRecorded=0,J.ignoreChange=!1,J.clear(),J.quill.on(q.default.events.EDITOR_CHANGE,function(Z,X,$,H){Z!==q.default.events.TEXT_CHANGE||J.ignoreChange||(J.options.userOnly&&H!==q.default.sources.USER?J.transform(X):J.record(X,$))}),J.quill.keyboard.addBinding({key:"Z",shortKey:!0},J.undo.bind(J)),J.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},J.redo.bind(J)),/Win/i.test(navigator.platform)&&J.quill.keyboard.addBinding({key:"Y",shortKey:!0},J.redo.bind(J)),J}return function C(V,D){if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function, not "+typeof D);V.prototype=Object.create(D&&D.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(V,D):V.__proto__=D)}(D,V),ee(D,[{key:"change",value:function(re,J){if(0!==this.stack[re].length){var Z=this.stack[re].pop();this.stack[J].push(Z),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(Z[re],q.default.sources.USER),this.ignoreChange=!1;var X=x(Z[re]);this.quill.setSelection(X)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(re,J){if(0!==re.ops.length){this.stack.redo=[];var Z=this.quill.getContents().diff(J),X=Date.now();if(this.lastRecorded+this.options.delay>X&&this.stack.undo.length>0){var $=this.stack.undo.pop();Z=Z.compose($.undo),re=$.redo.compose(re)}else this.lastRecorded=X;this.stack.undo.push({redo:re,undo:Z}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(re){this.stack.undo.forEach(function(J){J.undo=re.transform(J.undo,!0),J.redo=re.transform(J.redo,!0)}),this.stack.redo.forEach(function(J){J.undo=re.transform(J.undo,!0),J.redo=re.transform(J.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),D}(E(c(9)).default);function x(V){var D=V.reduce(function(re,J){return re+(J.delete||0)},0),L=V.length()-D;return function A(V){var D=V.ops[V.ops.length-1];return null!=D&&(null!=D.insert?"string"==typeof D.insert&&D.insert.endsWith("\n"):null!=D.attributes&&Object.keys(D.attributes).some(function(L){return null!=K.default.query(L,K.default.Scope.BLOCK)}))}(V)&&(L-=1),L}k.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},M.default=k,M.getLastChangeIndex=x},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.BaseTooltip=void 0;var ee=function(){function fe(me,_e){for(var xe=0;xe<_e.length;xe++){var he=_e[xe];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(me,he.key,he)}}return function(me,_e,xe){return _e&&fe(me.prototype,_e),xe&&fe(me,xe),me}}(),F=function fe(me,_e,xe){null===me&&(me=Function.prototype);var he=Object.getOwnPropertyDescriptor(me,_e);if(void 0===he){var Ie=Object.getPrototypeOf(me);return null===Ie?void 0:fe(Ie,_e,xe)}if("value"in he)return he.value;var ke=he.get;return void 0===ke?void 0:ke.call(xe)},j=X(c(3)),R=X(c(2)),E=X(c(8)),T=X(c(23)),k=X(c(34)),x=X(c(59)),D=X(c(60)),re=X(c(28)),Z=X(c(61));function X(fe){return fe&&fe.__esModule?fe:{default:fe}}function $(fe,me){if(!(fe instanceof me))throw new TypeError("Cannot call a class as a function")}function H(fe,me){if(!fe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!me||"object"!=typeof me&&"function"!=typeof me?fe:me}function W(fe,me){if("function"!=typeof me&&null!==me)throw new TypeError("Super expression must either be null or a function, not "+typeof me);fe.prototype=Object.create(me&&me.prototype,{constructor:{value:fe,enumerable:!1,writable:!0,configurable:!0}}),me&&(Object.setPrototypeOf?Object.setPrototypeOf(fe,me):fe.__proto__=me)}var B=[!1,"center","right","justify"],te=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Y=[!1,"serif","monospace"],de=["1","2","3",!1],ue=["small",!1,"large","huge"],be=function(fe){function me(_e,xe){$(this,me);var he=H(this,(me.__proto__||Object.getPrototypeOf(me)).call(this,_e,xe));return _e.emitter.listenDOM("click",document.body,function ke(Re){if(!document.body.contains(_e.root))return document.body.removeEventListener("click",ke);null!=he.tooltip&&!he.tooltip.root.contains(Re.target)&&document.activeElement!==he.tooltip.textbox&&!he.quill.hasFocus()&&he.tooltip.hide(),null!=he.pickers&&he.pickers.forEach(function(Ue){Ue.container.contains(Re.target)||Ue.close()})}),he}return W(me,fe),ee(me,[{key:"addModule",value:function(xe){var he=F(me.prototype.__proto__||Object.getPrototypeOf(me.prototype),"addModule",this).call(this,xe);return"toolbar"===xe&&this.extendToolbar(he),he}},{key:"buildButtons",value:function(xe,he){xe.forEach(function(Ie){(Ie.getAttribute("class")||"").split(/\s+/).forEach(function(Re){if(Re.startsWith("ql-")&&(Re=Re.slice(3),null!=he[Re]))if("direction"===Re)Ie.innerHTML=he[Re][""]+he[Re].rtl;else if("string"==typeof he[Re])Ie.innerHTML=he[Re];else{var Ue=Ie.value||"";null!=Ue&&he[Re][Ue]&&(Ie.innerHTML=he[Re][Ue])}})})}},{key:"buildPickers",value:function(xe,he){var Ie=this;this.pickers=xe.map(function(Re){if(Re.classList.contains("ql-align"))return null==Re.querySelector("option")&&ie(Re,B),new D.default(Re,he.align);if(Re.classList.contains("ql-background")||Re.classList.contains("ql-color")){var Ue=Re.classList.contains("ql-background")?"background":"color";return null==Re.querySelector("option")&&ie(Re,te,"background"===Ue?"#ffffff":"#000000"),new x.default(Re,he[Ue])}return null==Re.querySelector("option")&&(Re.classList.contains("ql-font")?ie(Re,Y):Re.classList.contains("ql-header")?ie(Re,de):Re.classList.contains("ql-size")&&ie(Re,ue)),new re.default(Re)}),this.quill.on(E.default.events.EDITOR_CHANGE,function(){Ie.pickers.forEach(function(Ue){Ue.update()})})}}]),me}(k.default);be.DEFAULTS=(0,j.default)(!0,{},k.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var me=this,_e=this.container.querySelector("input.ql-image[type=file]");null==_e&&((_e=document.createElement("input")).setAttribute("type","file"),_e.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),_e.classList.add("ql-image"),_e.addEventListener("change",function(){if(null!=_e.files&&null!=_e.files[0]){var xe=new FileReader;xe.onload=function(he){var Ie=me.quill.getSelection(!0);me.quill.updateContents((new R.default).retain(Ie.index).delete(Ie.length).insert({image:he.target.result}),E.default.sources.USER),me.quill.setSelection(Ie.index+1,E.default.sources.SILENT),_e.value=""},xe.readAsDataURL(_e.files[0])}}),this.container.appendChild(_e)),_e.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var ce=function(fe){function me(_e,xe){$(this,me);var he=H(this,(me.__proto__||Object.getPrototypeOf(me)).call(this,_e,xe));return he.textbox=he.root.querySelector('input[type="text"]'),he.listen(),he}return W(me,fe),ee(me,[{key:"listen",value:function(){var xe=this;this.textbox.addEventListener("keydown",function(he){T.default.match(he,"enter")?(xe.save(),he.preventDefault()):T.default.match(he,"escape")&&(xe.cancel(),he.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var xe=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",he=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=he?this.textbox.value=he:xe!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+xe)||""),this.root.setAttribute("data-mode",xe)}},{key:"restoreFocus",value:function(){var xe=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=xe}},{key:"save",value:function(){var xe=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var he=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",xe,E.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",xe,E.default.sources.USER)),this.quill.root.scrollTop=he;break;case"video":xe=function le(fe){var me=fe.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||fe.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return me?(me[1]||"https")+"://www.youtube.com/embed/"+me[2]+"?showinfo=0":(me=fe.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(me[1]||"https")+"://player.vimeo.com/video/"+me[2]+"/":fe}(xe);case"formula":if(!xe)break;var Ie=this.quill.getSelection(!0);if(null!=Ie){var ke=Ie.index+Ie.length;this.quill.insertEmbed(ke,this.root.getAttribute("data-mode"),xe,E.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(ke+1," ",E.default.sources.USER),this.quill.setSelection(ke+2,E.default.sources.USER)}}this.textbox.value="",this.hide()}}]),me}(Z.default);function ie(fe,me){var _e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];me.forEach(function(xe){var he=document.createElement("option");xe===_e?he.setAttribute("selected","selected"):he.setAttribute("value",xe),fe.appendChild(he)})}M.BaseTooltip=ce,M.default=be},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function F(){this.head=this.tail=null,this.length=0}return F.prototype.append=function(){for(var K=[],j=0;j<arguments.length;j++)K[j]=arguments[j];this.insertBefore(K[0],null),K.length>1&&this.append.apply(this,K.slice(1))},F.prototype.contains=function(K){for(var j,q=this.iterator();j=q();)if(j===K)return!0;return!1},F.prototype.insertBefore=function(K,j){!K||(K.next=j,null!=j?(K.prev=j.prev,null!=j.prev&&(j.prev.next=K),j.prev=K,j===this.head&&(this.head=K)):null!=this.tail?(this.tail.next=K,K.prev=this.tail,this.tail=K):(K.prev=null,this.head=this.tail=K),this.length+=1)},F.prototype.offset=function(K){for(var j=0,q=this.head;null!=q;){if(q===K)return j;j+=q.length(),q=q.next}return-1},F.prototype.remove=function(K){!this.contains(K)||(null!=K.prev&&(K.prev.next=K.next),null!=K.next&&(K.next.prev=K.prev),K===this.head&&(this.head=K.next),K===this.tail&&(this.tail=K.prev),this.length-=1)},F.prototype.iterator=function(K){return void 0===K&&(K=this.head),function(){var j=K;return null!=K&&(K=K.next),j}},F.prototype.find=function(K,j){void 0===j&&(j=!1);for(var q,R=this.iterator();q=R();){var S=q.length();if(K<S||j&&K===S&&(null==q.next||0!==q.next.length()))return[q,K];K-=S}return[null,0]},F.prototype.forEach=function(K){for(var j,q=this.iterator();j=q();)K(j)},F.prototype.forEachAt=function(K,j,q){if(!(j<=0))for(var _,R=this.find(K),T=K-R[1],C=this.iterator(R[0]);(_=C())&&T<K+j;){var k=_.length();K>T?q(_,K-T,Math.min(j,T+k-K)):q(_,0,Math.min(k,K+j-T)),T+=k}},F.prototype.map=function(K){return this.reduce(function(j,q){return j.push(K(q)),j},[])},F.prototype.reduce=function(K,j){for(var q,R=this.iterator();q=R();)j=K(j,q);return j},F}();M.default=ee},function(ge,M,c){"use strict";var S,ee=this&&this.__extends||(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,_){E.__proto__=_}||function(E,_){for(var T in _)_.hasOwnProperty(T)&&(E[T]=_[T])},function(E,_){function T(){this.constructor=E}S(E,_),E.prototype=null===_?Object.create(_):(T.prototype=_.prototype,new T)});Object.defineProperty(M,"__esModule",{value:!0});var F=c(17),K=c(1),j={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},R=function(S){function E(_){var T=S.call(this,_)||this;return T.scroll=T,T.observer=new MutationObserver(function(C){T.update(C)}),T.observer.observe(T.domNode,j),T.attach(),T}return ee(E,S),E.prototype.detach=function(){S.prototype.detach.call(this),this.observer.disconnect()},E.prototype.deleteAt=function(_,T){this.update(),0===_&&T===this.length()?this.children.forEach(function(C){C.remove()}):S.prototype.deleteAt.call(this,_,T)},E.prototype.formatAt=function(_,T,C,k){this.update(),S.prototype.formatAt.call(this,_,T,C,k)},E.prototype.insertAt=function(_,T,C){this.update(),S.prototype.insertAt.call(this,_,T,C)},E.prototype.optimize=function(_,T){var C=this;void 0===_&&(_=[]),void 0===T&&(T={}),S.prototype.optimize.call(this,T);for(var k=[].slice.call(this.observer.takeRecords());k.length>0;)_.push(k.pop());for(var A=function(L,re){void 0===re&&(re=!0),null!=L&&L!==C&&null!=L.domNode.parentNode&&(null==L.domNode[K.DATA_KEY].mutations&&(L.domNode[K.DATA_KEY].mutations=[]),re&&A(L.parent))},x=function(L){null==L.domNode[K.DATA_KEY]||null==L.domNode[K.DATA_KEY].mutations||(L instanceof F.default&&L.children.forEach(x),L.optimize(T))},V=_,D=0;V.length>0;D+=1){if(D>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(V.forEach(function(L){var re=K.find(L.target,!0);null!=re&&(re.domNode===L.target&&("childList"===L.type?(A(K.find(L.previousSibling,!1)),[].forEach.call(L.addedNodes,function(J){var Z=K.find(J,!1);A(Z,!1),Z instanceof F.default&&Z.children.forEach(function(X){A(X,!1)})})):"attributes"===L.type&&A(re.prev)),A(re))}),this.children.forEach(x),k=(V=[].slice.call(this.observer.takeRecords())).slice();k.length>0;)_.push(k.pop())}},E.prototype.update=function(_,T){var C=this;void 0===T&&(T={}),(_=_||this.observer.takeRecords()).map(function(k){var A=K.find(k.target,!0);return null==A?null:null==A.domNode[K.DATA_KEY].mutations?(A.domNode[K.DATA_KEY].mutations=[k],A):(A.domNode[K.DATA_KEY].mutations.push(k),null)}).forEach(function(k){null==k||k===C||null==k.domNode[K.DATA_KEY]||k.update(k.domNode[K.DATA_KEY].mutations||[],T)}),null!=this.domNode[K.DATA_KEY].mutations&&S.prototype.update.call(this,this.domNode[K.DATA_KEY].mutations,T),this.optimize(_,T)},E.blotName="scroll",E.defaultChild="block",E.scope=K.Scope.BLOCK_BLOT,E.tagName="DIV",E}(F.default);M.default=R},function(ge,M,c){"use strict";var R,ee=this&&this.__extends||(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,E){S.__proto__=E}||function(S,E){for(var _ in E)E.hasOwnProperty(_)&&(S[_]=E[_])},function(S,E){function _(){this.constructor=S}R(S,E),S.prototype=null===E?Object.create(E):(_.prototype=E.prototype,new _)});Object.defineProperty(M,"__esModule",{value:!0});var F=c(18),K=c(1);var q=function(R){function S(){return null!==R&&R.apply(this,arguments)||this}return ee(S,R),S.formats=function(E){if(E.tagName!==S.tagName)return R.formats.call(this,E)},S.prototype.format=function(E,_){var T=this;E!==this.statics.blotName||_?R.prototype.format.call(this,E,_):(this.children.forEach(function(C){C instanceof F.default||(C=C.wrap(S.blotName,!0)),T.attributes.copy(C)}),this.unwrap())},S.prototype.formatAt=function(E,_,T,C){null!=this.formats()[T]||K.query(T,K.Scope.ATTRIBUTE)?this.isolate(E,_).format(T,C):R.prototype.formatAt.call(this,E,_,T,C)},S.prototype.optimize=function(E){R.prototype.optimize.call(this,E);var _=this.formats();if(0===Object.keys(_).length)return this.unwrap();var T=this.next;T instanceof S&&T.prev===this&&function j(R,S){if(Object.keys(R).length!==Object.keys(S).length)return!1;for(var E in R)if(R[E]!==S[E])return!1;return!0}(_,T.formats())&&(T.moveChildren(this),T.remove())},S.blotName="inline",S.scope=K.Scope.INLINE_BLOT,S.tagName="SPAN",S}(F.default);M.default=q},function(ge,M,c){"use strict";var q,ee=this&&this.__extends||(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,S){R.__proto__=S}||function(R,S){for(var E in S)S.hasOwnProperty(E)&&(R[E]=S[E])},function(R,S){function E(){this.constructor=R}q(R,S),R.prototype=null===S?Object.create(S):(E.prototype=S.prototype,new E)});Object.defineProperty(M,"__esModule",{value:!0});var F=c(18),K=c(1),j=function(q){function R(){return null!==q&&q.apply(this,arguments)||this}return ee(R,q),R.formats=function(S){var E=K.query(R.blotName).tagName;if(S.tagName!==E)return q.formats.call(this,S)},R.prototype.format=function(S,E){null!=K.query(S,K.Scope.BLOCK)&&(S!==this.statics.blotName||E?q.prototype.format.call(this,S,E):this.replaceWith(R.blotName))},R.prototype.formatAt=function(S,E,_,T){null!=K.query(_,K.Scope.BLOCK)?this.format(_,T):q.prototype.formatAt.call(this,S,E,_,T)},R.prototype.insertAt=function(S,E,_){if(null==_||null!=K.query(E,K.Scope.INLINE))q.prototype.insertAt.call(this,S,E,_);else{var T=this.split(S),C=K.create(E,_);T.parent.insertBefore(C,T)}},R.prototype.update=function(S,E){navigator.userAgent.match(/Trident/)?this.build():q.prototype.update.call(this,S,E)},R.blotName="block",R.scope=K.Scope.BLOCK_BLOT,R.tagName="P",R}(F.default);M.default=j},function(ge,M,c){"use strict";var j,ee=this&&this.__extends||(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,R){q.__proto__=R}||function(q,R){for(var S in R)R.hasOwnProperty(S)&&(q[S]=R[S])},function(q,R){function S(){this.constructor=q}j(q,R),q.prototype=null===R?Object.create(R):(S.prototype=R.prototype,new S)});Object.defineProperty(M,"__esModule",{value:!0});var K=function(j){function q(){return null!==j&&j.apply(this,arguments)||this}return ee(q,j),q.formats=function(R){},q.prototype.format=function(R,S){j.prototype.formatAt.call(this,0,this.length(),R,S)},q.prototype.formatAt=function(R,S,E,_){0===R&&S===this.length()?this.format(E,_):j.prototype.formatAt.call(this,R,S,E,_)},q.prototype.formats=function(){return this.statics.formats(this.domNode)},q}(c(19).default);M.default=K},function(ge,M,c){"use strict";var q,ee=this&&this.__extends||(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,S){R.__proto__=S}||function(R,S){for(var E in S)S.hasOwnProperty(E)&&(R[E]=S[E])},function(R,S){function E(){this.constructor=R}q(R,S),R.prototype=null===S?Object.create(S):(E.prototype=S.prototype,new E)});Object.defineProperty(M,"__esModule",{value:!0});var F=c(19),K=c(1),j=function(q){function R(S){var E=q.call(this,S)||this;return E.text=E.statics.value(E.domNode),E}return ee(R,q),R.create=function(S){return document.createTextNode(S)},R.value=function(S){var E=S.data;return E.normalize&&(E=E.normalize()),E},R.prototype.deleteAt=function(S,E){this.domNode.data=this.text=this.text.slice(0,S)+this.text.slice(S+E)},R.prototype.index=function(S,E){return this.domNode===S?E:-1},R.prototype.insertAt=function(S,E,_){null==_?(this.text=this.text.slice(0,S)+E+this.text.slice(S),this.domNode.data=this.text):q.prototype.insertAt.call(this,S,E,_)},R.prototype.length=function(){return this.text.length},R.prototype.optimize=function(S){q.prototype.optimize.call(this,S),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof R&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},R.prototype.position=function(S,E){return void 0===E&&(E=!1),[this.domNode,S]},R.prototype.split=function(S,E){if(void 0===E&&(E=!1),!E){if(0===S)return this;if(S===this.length())return this.next}var _=K.create(this.domNode.splitText(S));return this.parent.insertBefore(_,this.next),this.text=this.statics.value(this.domNode),_},R.prototype.update=function(S,E){var _=this;S.some(function(T){return"characterData"===T.type&&T.target===_.domNode})&&(this.text=this.statics.value(this.domNode))},R.prototype.value=function(){return this.text},R.blotName="text",R.scope=K.Scope.INLINE_BLOT,R}(F.default);M.default=j},function(ge,M,c){"use strict";var ee=document.createElement("div");if(ee.classList.toggle("test-class",!1),ee.classList.contains("test-class")){var F=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(K,j){return arguments.length>1&&!this.contains(K)==!j?j:F.call(this,K)}}String.prototype.startsWith||(String.prototype.startsWith=function(K,j){return this.substr(j=j||0,K.length)===K}),String.prototype.endsWith||(String.prototype.endsWith=function(K,j){var q=this.toString();("number"!=typeof j||!isFinite(j)||Math.floor(j)!==j||j>q.length)&&(j=q.length);var R=q.indexOf(K,j-=K.length);return-1!==R&&R===j}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(j){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof j)throw new TypeError("predicate must be a function");for(var E,q=Object(this),R=q.length>>>0,S=arguments[1],_=0;_<R;_++)if(j.call(S,E=q[_],_,q))return E}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(ge,M){var c=-1;function K(D,L,re){if(D==L)return D?[[0,D]]:[];(re<0||D.length<re)&&(re=null);var J=S(D,L),Z=D.substring(0,J);J=E(D=D.substring(J),L=L.substring(J));var X=D.substring(D.length-J),$=function j(D,L){var re;if(!D)return[[1,L]];if(!L)return[[c,D]];var J=D.length>L.length?D:L,Z=D.length>L.length?L:D,X=J.indexOf(Z);if(-1!=X)return re=[[1,J.substring(0,X)],[0,Z],[1,J.substring(X+Z.length)]],D.length>L.length&&(re[0][0]=re[2][0]=c),re;if(1==Z.length)return[[c,D],[1,L]];var $=function _(D,L){var re=D.length>L.length?D:L,J=D.length>L.length?L:D;if(re.length<4||2*J.length<re.length)return null;function Z(ue,be,ce){for(var me,_e,xe,he,le=ue.substring(ce,ce+Math.floor(ue.length/4)),ie=-1,fe="";-1!=(ie=be.indexOf(le,ie+1));){var Ie=S(ue.substring(ce),be.substring(ie)),ke=E(ue.substring(0,ce),be.substring(0,ie));fe.length<ke+Ie&&(fe=be.substring(ie-ke,ie)+be.substring(ie,ie+Ie),me=ue.substring(0,ce-ke),_e=ue.substring(ce+Ie),xe=be.substring(0,ie-ke),he=be.substring(ie+Ie))}return 2*fe.length>=ue.length?[me,_e,xe,he,fe]:null}var H,W,B,te,Y,X=Z(re,J,Math.ceil(re.length/4)),$=Z(re,J,Math.ceil(re.length/2));return X||$?(H=$?X&&X[4].length>$[4].length?X:$:X,D.length>L.length?(W=H[0],B=H[1],te=H[2],Y=H[3]):(te=H[0],Y=H[1],W=H[2],B=H[3]),[W,B,te,Y,H[4]]):null}(D,L);if($){var W=$[1],te=$[3],Y=$[4],de=K($[0],$[2]),ue=K(W,te);return de.concat([[0,Y]],ue)}return function q(D,L){for(var re=D.length,J=L.length,Z=Math.ceil((re+J)/2),X=Z,$=2*Z,H=new Array($),W=new Array($),B=0;B<$;B++)H[B]=-1,W[B]=-1;H[X+1]=0,W[X+1]=0;for(var te=re-J,Y=te%2!=0,de=0,ue=0,be=0,ce=0,le=0;le<Z;le++){for(var ie=-le+de;ie<=le-ue;ie+=2){for(var fe=X+ie,_e=(me=ie==-le||ie!=le&&H[fe-1]<H[fe+1]?H[fe+1]:H[fe-1]+1)-ie;me<re&&_e<J&&D.charAt(me)==L.charAt(_e);)me++,_e++;if(H[fe]=me,me>re)ue+=2;else if(_e>J)de+=2;else if(Y&&(xe=X+te-ie)>=0&&xe<$&&-1!=W[xe]&&me>=(he=re-W[xe]))return R(D,L,me,_e)}for(var Ie=-le+be;Ie<=le-ce;Ie+=2){for(var he,xe=X+Ie,ke=(he=Ie==-le||Ie!=le&&W[xe-1]<W[xe+1]?W[xe+1]:W[xe-1]+1)-Ie;he<re&&ke<J&&D.charAt(re-he-1)==L.charAt(J-ke-1);)he++,ke++;if(W[xe]=he,he>re)ce+=2;else if(ke>J)be+=2;else if(!Y){var me;if((fe=X+te-Ie)>=0&&fe<$&&-1!=H[fe]&&(_e=X+(me=H[fe])-fe,me>=(he=re-he)))return R(D,L,me,_e)}}}return[[c,D],[1,L]]}(D,L)}(D=D.substring(0,D.length-J),L=L.substring(0,L.length-J));return Z&&$.unshift([0,Z]),X&&$.push([0,X]),T($),null!=re&&($=function A(D,L){var re=function k(D,L){if(0===L)return[0,D];for(var re=0,J=0;J<D.length;J++){var Z=D[J];if(Z[0]===c||0===Z[0]){var X=re+Z[1].length;if(L===X)return[J+1,D];if(L<X){D=D.slice();var $=L-re,H=[Z[0],Z[1].slice(0,$)],W=[Z[0],Z[1].slice($)];return D.splice(J,1,H,W),[J+1,D]}re=X}}throw new Error("cursor_pos is out of bounds!")}(D,L),J=re[1],Z=re[0],X=J[Z],$=J[Z+1];if(null==X)return D;if(0!==X[0])return D;if(null!=$&&X[1]+$[1]===$[1]+X[1])return J.splice(Z,2,$,X),V(J,Z,2);if(null!=$&&0===$[1].indexOf(X[1])){J.splice(Z,2,[$[0],X[1]],[0,X[1]]);var H=$[1].slice(X[1].length);return H.length>0&&J.splice(Z+2,0,[$[0],H]),V(J,Z,3)}return D}($,re)),function x(D){for(var L=!1,re=function($){return $.charCodeAt(0)>=56320&&$.charCodeAt(0)<=57343},J=function($){return $.charCodeAt($.length-1)>=55296&&$.charCodeAt($.length-1)<=56319},Z=2;Z<D.length;Z+=1)0===D[Z-2][0]&&J(D[Z-2][1])&&D[Z-1][0]===c&&re(D[Z-1][1])&&1===D[Z][0]&&re(D[Z][1])&&(L=!0,D[Z-1][1]=D[Z-2][1].slice(-1)+D[Z-1][1],D[Z][1]=D[Z-2][1].slice(-1)+D[Z][1],D[Z-2][1]=D[Z-2][1].slice(0,-1));if(!L)return D;var X=[];for(Z=0;Z<D.length;Z+=1)D[Z][1].length>0&&X.push(D[Z]);return X}($)}function R(D,L,re,J){var Z=D.substring(0,re),X=L.substring(0,J),$=D.substring(re),H=L.substring(J),W=K(Z,X),B=K($,H);return W.concat(B)}function S(D,L){if(!D||!L||D.charAt(0)!=L.charAt(0))return 0;for(var re=0,J=Math.min(D.length,L.length),Z=J,X=0;re<Z;)D.substring(X,Z)==L.substring(X,Z)?X=re=Z:J=Z,Z=Math.floor((J-re)/2+re);return Z}function E(D,L){if(!D||!L||D.charAt(D.length-1)!=L.charAt(L.length-1))return 0;for(var re=0,J=Math.min(D.length,L.length),Z=J,X=0;re<Z;)D.substring(D.length-Z,D.length-X)==L.substring(L.length-Z,L.length-X)?X=re=Z:J=Z,Z=Math.floor((J-re)/2+re);return Z}function T(D){D.push([0,""]);for(var $,L=0,re=0,J=0,Z="",X="";L<D.length;)switch(D[L][0]){case 1:J++,X+=D[L][1],L++;break;case c:re++,Z+=D[L][1],L++;break;case 0:re+J>1?(0!==re&&0!==J&&(0!==($=S(X,Z))&&(L-re-J>0&&0==D[L-re-J-1][0]?D[L-re-J-1][1]+=X.substring(0,$):(D.splice(0,0,[0,X.substring(0,$)]),L++),X=X.substring($),Z=Z.substring($)),0!==($=E(X,Z))&&(D[L][1]=X.substring(X.length-$)+D[L][1],X=X.substring(0,X.length-$),Z=Z.substring(0,Z.length-$))),0===re?D.splice(L-J,re+J,[1,X]):0===J?D.splice(L-re,re+J,[c,Z]):D.splice(L-re-J,re+J,[c,Z],[1,X]),L=L-re-J+(re?1:0)+(J?1:0)+1):0!==L&&0==D[L-1][0]?(D[L-1][1]+=D[L][1],D.splice(L,1)):L++,J=0,re=0,Z="",X=""}""===D[D.length-1][1]&&D.pop();var H=!1;for(L=1;L<D.length-1;)0==D[L-1][0]&&0==D[L+1][0]&&(D[L][1].substring(D[L][1].length-D[L-1][1].length)==D[L-1][1]?(D[L][1]=D[L-1][1]+D[L][1].substring(0,D[L][1].length-D[L-1][1].length),D[L+1][1]=D[L-1][1]+D[L+1][1],D.splice(L-1,1),H=!0):D[L][1].substring(0,D[L+1][1].length)==D[L+1][1]&&(D[L-1][1]+=D[L+1][1],D[L][1]=D[L][1].substring(D[L+1][1].length)+D[L+1][1],D.splice(L+1,1),H=!0)),L++;H&&T(D)}var C=K;function V(D,L,re){for(var J=L+re-1;J>=0&&J>=L-1;J--)if(J+1<D.length){var Z=D[J],X=D[J+1];Z[0]===X[1]&&D.splice(J,2,[Z[0],Z[1]+X[1]])}return D}C.INSERT=1,C.DELETE=c,C.EQUAL=0,ge.exports=C},function(ge,M){function c(ee){var F=[];for(var K in ee)F.push(K);return F}(ge.exports="function"==typeof Object.keys?Object.keys:c).shim=c},function(ge,M){var c="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function ee(K){return"[object Arguments]"==Object.prototype.toString.call(K)}function F(K){return K&&"object"==typeof K&&"number"==typeof K.length&&Object.prototype.hasOwnProperty.call(K,"callee")&&!Object.prototype.propertyIsEnumerable.call(K,"callee")||!1}(M=ge.exports=c?ee:F).supported=ee,M.unsupported=F},function(ge,M){"use strict";var c=Object.prototype.hasOwnProperty,ee="~";function F(){}function K(q,R,S){this.fn=q,this.context=R,this.once=S||!1}function j(){this._events=new F,this._eventsCount=0}Object.create&&(F.prototype=Object.create(null),(new F).__proto__||(ee=!1)),j.prototype.eventNames=function(){var S,E,R=[];if(0===this._eventsCount)return R;for(E in S=this._events)c.call(S,E)&&R.push(ee?E.slice(1):E);return Object.getOwnPropertySymbols?R.concat(Object.getOwnPropertySymbols(S)):R},j.prototype.listeners=function(R,S){var _=this._events[ee?ee+R:R];if(S)return!!_;if(!_)return[];if(_.fn)return[_.fn];for(var T=0,C=_.length,k=new Array(C);T<C;T++)k[T]=_[T].fn;return k},j.prototype.emit=function(R,S,E,_,T,C){var k=ee?ee+R:R;if(!this._events[k])return!1;var V,D,A=this._events[k],x=arguments.length;if(A.fn){switch(A.once&&this.removeListener(R,A.fn,void 0,!0),x){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,S),!0;case 3:return A.fn.call(A.context,S,E),!0;case 4:return A.fn.call(A.context,S,E,_),!0;case 5:return A.fn.call(A.context,S,E,_,T),!0;case 6:return A.fn.call(A.context,S,E,_,T,C),!0}for(D=1,V=new Array(x-1);D<x;D++)V[D-1]=arguments[D];A.fn.apply(A.context,V)}else{var re,L=A.length;for(D=0;D<L;D++)switch(A[D].once&&this.removeListener(R,A[D].fn,void 0,!0),x){case 1:A[D].fn.call(A[D].context);break;case 2:A[D].fn.call(A[D].context,S);break;case 3:A[D].fn.call(A[D].context,S,E);break;case 4:A[D].fn.call(A[D].context,S,E,_);break;default:if(!V)for(re=1,V=new Array(x-1);re<x;re++)V[re-1]=arguments[re];A[D].fn.apply(A[D].context,V)}}return!0},j.prototype.on=function(R,S,E){var _=new K(S,E||this),T=ee?ee+R:R;return this._events[T]?this._events[T].fn?this._events[T]=[this._events[T],_]:this._events[T].push(_):(this._events[T]=_,this._eventsCount++),this},j.prototype.once=function(R,S,E){var _=new K(S,E||this,!0),T=ee?ee+R:R;return this._events[T]?this._events[T].fn?this._events[T]=[this._events[T],_]:this._events[T].push(_):(this._events[T]=_,this._eventsCount++),this},j.prototype.removeListener=function(R,S,E,_){var T=ee?ee+R:R;if(!this._events[T])return this;if(!S)return 0==--this._eventsCount?this._events=new F:delete this._events[T],this;var C=this._events[T];if(C.fn)C.fn===S&&(!_||C.once)&&(!E||C.context===E)&&(0==--this._eventsCount?this._events=new F:delete this._events[T]);else{for(var k=0,A=[],x=C.length;k<x;k++)(C[k].fn!==S||_&&!C[k].once||E&&C[k].context!==E)&&A.push(C[k]);A.length?this._events[T]=1===A.length?A[0]:A:0==--this._eventsCount?this._events=new F:delete this._events[T]}return this},j.prototype.removeAllListeners=function(R){var S;return R?this._events[S=ee?ee+R:R]&&(0==--this._eventsCount?this._events=new F:delete this._events[S]):(this._events=new F,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prototype.setMaxListeners=function(){return this},j.prefixed=ee,j.EventEmitter=j,void 0!==ge&&(ge.exports=j)},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.matchText=M.matchSpacing=M.matchNewline=M.matchBlot=M.matchAttributor=M.default=void 0;var ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Be){return typeof Be}:function(Be){return Be&&"function"==typeof Symbol&&Be.constructor===Symbol&&Be!==Symbol.prototype?"symbol":typeof Be},F=function(qe,He){if(Array.isArray(qe))return qe;if(Symbol.iterator in Object(qe))return function Be(qe,He){var it=[],ze=!0,vt=!1,Rt=void 0;try{for(var on,Lt=qe[Symbol.iterator]();!(ze=(on=Lt.next()).done)&&(it.push(on.value),!He||it.length!==He);ze=!0);}catch(fn){vt=!0,Rt=fn}finally{try{!ze&&Lt.return&&Lt.return()}finally{if(vt)throw Rt}}return it}(qe,He);throw new TypeError("Invalid attempt to destructure non-iterable instance")},K=function(){function Be(qe,He){for(var it=0;it<He.length;it++){var ze=He[it];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(qe,ze.key,ze)}}return function(qe,He,it){return He&&Be(qe.prototype,He),it&&Be(qe,it),qe}}(),q=W(c(3)),S=W(c(2)),_=W(c(0)),C=W(c(5)),A=W(c(10)),V=W(c(9)),D=c(36),L=c(37),J=W(c(13)),Z=c(26),X=c(38),$=c(39),H=c(40);function W(Be){return Be&&Be.__esModule?Be:{default:Be}}function B(Be,qe,He){return qe in Be?Object.defineProperty(Be,qe,{value:He,enumerable:!0,configurable:!0,writable:!0}):Be[qe]=He,Be}var ue=(0,A.default)("quill:clipboard"),be="__ql-matcher",ce=[[Node.TEXT_NODE,mn],[Node.TEXT_NODE,Mt],["br",function Qe(Be,qe){return xe(qe,"\n")||qe.insert("\n"),qe}],[Node.ELEMENT_NODE,Mt],[Node.ELEMENT_NODE,Ue],[Node.ELEMENT_NODE,Bt],[Node.ELEMENT_NODE,Re],[Node.ELEMENT_NODE,function wn(Be,qe){var He={},it=Be.style||{};return it.fontStyle&&"italic"===_e(Be).fontStyle&&(He.italic=!0),it.fontWeight&&(_e(Be).fontWeight.startsWith("bold")||parseInt(_e(Be).fontWeight)>=700)&&(He.bold=!0),Object.keys(He).length>0&&(qe=me(qe,He)),parseFloat(it.textIndent||0)>0&&(qe=(new S.default).insert("\t").concat(qe)),qe}],["li",function wt(Be,qe){var He=_.default.query(Be);if(null==He||"list-item"!==He.blotName||!xe(qe,"\n"))return qe;for(var it=-1,ze=Be.parentNode;!ze.classList.contains("ql-clipboard");)"list"===(_.default.query(ze)||{}).blotName&&(it+=1),ze=ze.parentNode;return it<=0?qe:qe.compose((new S.default).retain(qe.length()-1).retain(1,{indent:it}))}],["b",ke.bind(ke,"bold")],["i",ke.bind(ke,"italic")],["style",function Et(){return new S.default}]],le=[D.AlignAttribute,X.DirectionAttribute].reduce(function(Be,qe){return Be[qe.keyName]=qe,Be},{}),ie=[D.AlignStyle,L.BackgroundStyle,Z.ColorStyle,X.DirectionStyle,$.FontStyle,H.SizeStyle].reduce(function(Be,qe){return Be[qe.keyName]=qe,Be},{}),fe=function(Be){function qe(He,it){!function te(Be,qe){if(!(Be instanceof qe))throw new TypeError("Cannot call a class as a function")}(this,qe);var ze=function Y(Be,qe){if(!Be)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!qe||"object"!=typeof qe&&"function"!=typeof qe?Be:qe}(this,(qe.__proto__||Object.getPrototypeOf(qe)).call(this,He,it));return ze.quill.root.addEventListener("paste",ze.onPaste.bind(ze)),ze.container=ze.quill.addContainer("ql-clipboard"),ze.container.setAttribute("contenteditable",!0),ze.container.setAttribute("tabindex",-1),ze.matchers=[],ce.concat(ze.options.matchers).forEach(function(vt){var Rt=F(vt,2),on=Rt[1];!it.matchVisual&&on===Bt||ze.addMatcher(Rt[0],on)}),ze}return function de(Be,qe){if("function"!=typeof qe&&null!==qe)throw new TypeError("Super expression must either be null or a function, not "+typeof qe);Be.prototype=Object.create(qe&&qe.prototype,{constructor:{value:Be,enumerable:!1,writable:!0,configurable:!0}}),qe&&(Object.setPrototypeOf?Object.setPrototypeOf(Be,qe):Be.__proto__=qe)}(qe,Be),K(qe,[{key:"addMatcher",value:function(it,ze){this.matchers.push([it,ze])}},{key:"convert",value:function(it){if("string"==typeof it)return this.container.innerHTML=it.replace(/\>\r?\n +\</g,"><"),this.convert();var ze=this.quill.getFormat(this.quill.selection.savedRange.index);if(ze[J.default.blotName]){var vt=this.container.innerText;return this.container.innerHTML="",(new S.default).insert(vt,B({},J.default.blotName,ze[J.default.blotName]))}var Rt=this.prepareMatching(),Lt=F(Rt,2),en=Ie(this.container,Lt[0],Lt[1]);return xe(en,"\n")&&null==en.ops[en.ops.length-1].attributes&&(en=en.compose((new S.default).retain(en.length()-1).delete(1))),ue.log("convert",this.container.innerHTML,en),this.container.innerHTML="",en}},{key:"dangerouslyPasteHTML",value:function(it,ze){var vt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.default.sources.API;if("string"==typeof it)this.quill.setContents(this.convert(it),ze),this.quill.setSelection(0,C.default.sources.SILENT);else{var Rt=this.convert(ze);this.quill.updateContents((new S.default).retain(it).concat(Rt),vt),this.quill.setSelection(it+Rt.length(),C.default.sources.SILENT)}}},{key:"onPaste",value:function(it){var ze=this;if(!it.defaultPrevented&&this.quill.isEnabled()){var vt=this.quill.getSelection(),Rt=(new S.default).retain(vt.index),Lt=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(C.default.sources.SILENT),setTimeout(function(){Rt=Rt.concat(ze.convert()).delete(vt.length),ze.quill.updateContents(Rt,C.default.sources.USER),ze.quill.setSelection(Rt.length()-vt.length,C.default.sources.SILENT),ze.quill.scrollingContainer.scrollTop=Lt,ze.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var it=this,ze=[],vt=[];return this.matchers.forEach(function(Rt){var Lt=F(Rt,2),on=Lt[0],fn=Lt[1];switch(on){case Node.TEXT_NODE:vt.push(fn);break;case Node.ELEMENT_NODE:ze.push(fn);break;default:[].forEach.call(it.container.querySelectorAll(on),function(en){en[be]=en[be]||[],en[be].push(fn)})}}),[ze,vt]}}]),qe}(V.default);function me(Be,qe,He){return"object"===(void 0===qe?"undefined":ee(qe))?Object.keys(qe).reduce(function(it,ze){return me(it,ze,qe[ze])},Be):Be.reduce(function(it,ze){return ze.attributes&&ze.attributes[qe]?it.push(ze):it.insert(ze.insert,(0,q.default)({},B({},qe,He),ze.attributes))},new S.default)}function _e(Be){if(Be.nodeType!==Node.ELEMENT_NODE)return{};var qe="__ql-computed-style";return Be[qe]||(Be[qe]=window.getComputedStyle(Be))}function xe(Be,qe){for(var He="",it=Be.ops.length-1;it>=0&&He.length<qe.length;--it){var ze=Be.ops[it];if("string"!=typeof ze.insert)break;He=ze.insert+He}return He.slice(-1*qe.length)===qe}function he(Be){if(0===Be.childNodes.length)return!1;var qe=_e(Be);return["block","list-item"].indexOf(qe.display)>-1}function Ie(Be,qe,He){return Be.nodeType===Be.TEXT_NODE?He.reduce(function(it,ze){return ze(Be,it)},new S.default):Be.nodeType===Be.ELEMENT_NODE?[].reduce.call(Be.childNodes||[],function(it,ze){var vt=Ie(ze,qe,He);return ze.nodeType===Be.ELEMENT_NODE&&(vt=qe.reduce(function(Rt,Lt){return Lt(ze,Rt)},vt),vt=(ze[be]||[]).reduce(function(Rt,Lt){return Lt(ze,Rt)},vt)),it.concat(vt)},new S.default):new S.default}function ke(Be,qe,He){return me(He,Be,!0)}function Re(Be,qe){var He=_.default.Attributor.Attribute.keys(Be),it=_.default.Attributor.Class.keys(Be),ze=_.default.Attributor.Style.keys(Be),vt={};return He.concat(it).concat(ze).forEach(function(Rt){var Lt=_.default.query(Rt,_.default.Scope.ATTRIBUTE);null!=Lt&&(vt[Lt.attrName]=Lt.value(Be),vt[Lt.attrName])||(null!=(Lt=le[Rt])&&(Lt.attrName===Rt||Lt.keyName===Rt)&&(vt[Lt.attrName]=Lt.value(Be)||void 0),null!=(Lt=ie[Rt])&&(Lt.attrName===Rt||Lt.keyName===Rt)&&(vt[(Lt=ie[Rt]).attrName]=Lt.value(Be)||void 0))}),Object.keys(vt).length>0&&(qe=me(qe,vt)),qe}function Ue(Be,qe){var He=_.default.query(Be);if(null==He)return qe;if(He.prototype instanceof _.default.Embed){var it={},ze=He.value(Be);null!=ze&&(it[He.blotName]=ze,qe=(new S.default).insert(it,He.formats(Be)))}else"function"==typeof He.formats&&(qe=me(qe,He.blotName,He.formats(Be)));return qe}function Mt(Be,qe){return xe(qe,"\n")||(he(Be)||qe.length()>0&&Be.nextSibling&&he(Be.nextSibling))&&qe.insert("\n"),qe}function Bt(Be,qe){if(he(Be)&&null!=Be.nextElementSibling&&!xe(qe,"\n\n")){var He=Be.offsetHeight+parseFloat(_e(Be).marginTop)+parseFloat(_e(Be).marginBottom);Be.nextElementSibling.offsetTop>Be.offsetTop+1.5*He&&qe.insert("\n")}return qe}function mn(Be,qe){var He=Be.data;if("O:P"===Be.parentNode.tagName)return qe.insert(He.trim());if(0===He.trim().length&&Be.parentNode.classList.contains("ql-clipboard"))return qe;if(!_e(Be.parentNode).whiteSpace.startsWith("pre")){var it=function(vt,Rt){return(Rt=Rt.replace(/[^\u00a0]/g,"")).length<1&&vt?" ":Rt};He=(He=He.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,it.bind(it,!0)),(null==Be.previousSibling&&he(Be.parentNode)||null!=Be.previousSibling&&he(Be.previousSibling))&&(He=He.replace(/^\s+/,it.bind(it,!1))),(null==Be.nextSibling&&he(Be.parentNode)||null!=Be.nextSibling&&he(Be.nextSibling))&&(He=He.replace(/\s+$/,it.bind(it,!1)))}return qe.insert(He)}fe.DEFAULTS={matchers:[],matchVisual:!0},M.default=fe,M.matchAttributor=Re,M.matchBlot=Ue,M.matchNewline=Mt,M.matchSpacing=Bt,M.matchText=mn},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function T(C,k){for(var A=0;A<k.length;A++){var x=k[A];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(C,x.key,x)}}return function(C,k,A){return k&&T(C.prototype,k),A&&T(C,A),C}}(),F=function T(C,k,A){null===C&&(C=Function.prototype);var x=Object.getOwnPropertyDescriptor(C,k);if(void 0===x){var V=Object.getPrototypeOf(C);return null===V?void 0:T(V,k,A)}if("value"in x)return x.value;var D=x.get;return void 0===D?void 0:D.call(A)};function R(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")}function S(T,C){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||"object"!=typeof C&&"function"!=typeof C?T:C}var _=function(T){function C(){return R(this,C),S(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return function E(T,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function, not "+typeof C);T.prototype=Object.create(C&&C.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(T,C):T.__proto__=C)}(C,T),ee(C,[{key:"optimize",value:function(A){F(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,A),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return F(C.__proto__||Object.getPrototypeOf(C),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),C}(function q(T){return T&&T.__esModule?T:{default:T}}(c(6)).default);_.blotName="bold",_.tagName=["STRONG","B"],M.default=_},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.addControls=M.default=void 0;var ee=function(W,B){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return function H(W,B){var te=[],Y=!0,de=!1,ue=void 0;try{for(var ce,be=W[Symbol.iterator]();!(Y=(ce=be.next()).done)&&(te.push(ce.value),!B||te.length!==B);Y=!0);}catch(le){de=!0,ue=le}finally{try{!Y&&be.return&&be.return()}finally{if(de)throw ue}}return te}(W,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")},F=function(){function H(W,B){for(var te=0;te<B.length;te++){var Y=B[te];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(W,Y.key,Y)}}return function(W,B,te){return B&&H(W.prototype,B),te&&H(W,te),W}}(),j=A(c(2)),R=A(c(0)),E=A(c(5)),T=A(c(10)),k=A(c(9));function A(H){return H&&H.__esModule?H:{default:H}}function D(H,W){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!W||"object"!=typeof W&&"function"!=typeof W?H:W}var re=(0,T.default)("quill:toolbar"),J=function(H){function W(B,te){!function V(H,W){if(!(H instanceof W))throw new TypeError("Cannot call a class as a function")}(this,W);var ue,Y=D(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,B,te));if(Array.isArray(Y.options.container)){var de=document.createElement("div");X(de,Y.options.container),B.container.parentNode.insertBefore(de,B.container),Y.container=de}else Y.container="string"==typeof Y.options.container?document.querySelector(Y.options.container):Y.options.container;return Y.container instanceof HTMLElement?(Y.container.classList.add("ql-toolbar"),Y.controls=[],Y.handlers={},Object.keys(Y.options.handlers).forEach(function(be){Y.addHandler(be,Y.options.handlers[be])}),[].forEach.call(Y.container.querySelectorAll("button, select"),function(be){Y.attach(be)}),Y.quill.on(E.default.events.EDITOR_CHANGE,function(be,ce){be===E.default.events.SELECTION_CHANGE&&Y.update(ce)}),Y.quill.on(E.default.events.SCROLL_OPTIMIZE,function(){var be=Y.quill.selection.getRange(),ce=ee(be,1);Y.update(ce[0])}),Y):(ue=re.error("Container required for toolbar",Y.options),D(Y,ue))}return function L(H,W){if("function"!=typeof W&&null!==W)throw new TypeError("Super expression must either be null or a function, not "+typeof W);H.prototype=Object.create(W&&W.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(H,W):H.__proto__=W)}(W,H),F(W,[{key:"addHandler",value:function(te,Y){this.handlers[te]=Y}},{key:"attach",value:function(te){var Y=this,de=[].find.call(te.classList,function(be){return 0===be.indexOf("ql-")});if(de){if(de=de.slice(3),"BUTTON"===te.tagName&&te.setAttribute("type","button"),null==this.handlers[de]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[de])return void re.warn("ignoring attaching to disabled format",de,te);if(null==R.default.query(de))return void re.warn("ignoring attaching to nonexistent format",de,te)}te.addEventListener("SELECT"===te.tagName?"change":"click",function(be){var ce=void 0;if("SELECT"===te.tagName){if(te.selectedIndex<0)return;var le=te.options[te.selectedIndex];ce=!le.hasAttribute("selected")&&(le.value||!1)}else ce=!te.classList.contains("ql-active")&&(te.value||!te.hasAttribute("value")),be.preventDefault();Y.quill.focus();var ie=Y.quill.selection.getRange(),me=ee(ie,1)[0];if(null!=Y.handlers[de])Y.handlers[de].call(Y,ce);else if(R.default.query(de).prototype instanceof R.default.Embed){if(!(ce=prompt("Enter "+de)))return;Y.quill.updateContents((new j.default).retain(me.index).delete(me.length).insert(function x(H,W,B){return W in H?Object.defineProperty(H,W,{value:B,enumerable:!0,configurable:!0,writable:!0}):H[W]=B,H}({},de,ce)),E.default.sources.USER)}else Y.quill.format(de,ce,E.default.sources.USER);Y.update(me)}),this.controls.push([de,te])}}},{key:"update",value:function(te){var Y=null==te?{}:this.quill.getFormat(te);this.controls.forEach(function(de){var ue=ee(de,2),be=ue[0],ce=ue[1];if("SELECT"===ce.tagName){var le=void 0;if(null==te)le=null;else if(null==Y[be])le=ce.querySelector("option[selected]");else if(!Array.isArray(Y[be])){var ie=Y[be];"string"==typeof ie&&(ie=ie.replace(/\"/g,'\\"')),le=ce.querySelector('option[value="'+ie+'"]')}null==le?(ce.value="",ce.selectedIndex=-1):le.selected=!0}else if(null==te)ce.classList.remove("ql-active");else if(ce.hasAttribute("value")){var fe=Y[be]===ce.getAttribute("value")||null!=Y[be]&&Y[be].toString()===ce.getAttribute("value")||null==Y[be]&&!ce.getAttribute("value");ce.classList.toggle("ql-active",fe)}else ce.classList.toggle("ql-active",null!=Y[be])})}}]),W}(k.default);function Z(H,W,B){var te=document.createElement("button");te.setAttribute("type","button"),te.classList.add("ql-"+W),null!=B&&(te.value=B),H.appendChild(te)}function X(H,W){Array.isArray(W[0])||(W=[W]),W.forEach(function(B){var te=document.createElement("span");te.classList.add("ql-formats"),B.forEach(function(Y){if("string"==typeof Y)Z(te,Y);else{var de=Object.keys(Y)[0],ue=Y[de];Array.isArray(ue)?function $(H,W,B){var te=document.createElement("select");te.classList.add("ql-"+W),B.forEach(function(Y){var de=document.createElement("option");!1!==Y?de.setAttribute("value",Y):de.setAttribute("selected","selected"),te.appendChild(de)}),H.appendChild(te)}(te,de,ue):Z(te,de,ue)}}),H.appendChild(te)})}J.DEFAULTS={},J.DEFAULTS={container:null,handlers:{clean:function(){var W=this,B=this.quill.getSelection();if(null!=B)if(0==B.length){var te=this.quill.getFormat();Object.keys(te).forEach(function(Y){null!=R.default.query(Y,R.default.Scope.INLINE)&&W.quill.format(Y,!1)})}else this.quill.removeFormat(B,E.default.sources.USER)},direction:function(W){var B=this.quill.getFormat().align;"rtl"===W&&null==B?this.quill.format("align","right",E.default.sources.USER):!W&&"right"===B&&this.quill.format("align",!1,E.default.sources.USER),this.quill.format("direction",W,E.default.sources.USER)},indent:function(W){var B=this.quill.getSelection(),te=this.quill.getFormat(B),Y=parseInt(te.indent||0);if("+1"===W||"-1"===W){var de="+1"===W?1:-1;"rtl"===te.direction&&(de*=-1),this.quill.format("indent",Y+de,E.default.sources.USER)}},link:function(W){!0===W&&(W=prompt("Enter link URL:")),this.quill.format("link",W,E.default.sources.USER)},list:function(W){var B=this.quill.getSelection(),te=this.quill.getFormat(B);this.quill.format("list","check"===W?"checked"!==te.list&&"unchecked"!==te.list&&"unchecked":W,E.default.sources.USER)}}},M.default=J,M.addControls=X},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function T(C,k){for(var A=0;A<k.length;A++){var x=k[A];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(C,x.key,x)}}return function(C,k,A){return k&&T(C.prototype,k),A&&T(C,A),C}}(),F=function T(C,k,A){null===C&&(C=Function.prototype);var x=Object.getOwnPropertyDescriptor(C,k);if(void 0===x){var V=Object.getPrototypeOf(C);return null===V?void 0:T(V,k,A)}if("value"in x)return x.value;var D=x.get;return void 0===D?void 0:D.call(A)};var _=function(T){function C(k,A){!function R(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")}(this,C);var x=function S(T,C){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||"object"!=typeof C&&"function"!=typeof C?T:C}(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,k));return x.label.innerHTML=A,x.container.classList.add("ql-color-picker"),[].slice.call(x.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(V){V.classList.add("ql-primary")}),x}return function E(T,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function, not "+typeof C);T.prototype=Object.create(C&&C.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(T,C):T.__proto__=C)}(C,T),ee(C,[{key:"buildItem",value:function(A){var x=F(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"buildItem",this).call(this,A);return x.style.backgroundColor=A.getAttribute("value")||"",x}},{key:"selectItem",value:function(A,x){F(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"selectItem",this).call(this,A,x);var V=this.label.querySelector(".ql-color-label"),D=A&&A.getAttribute("data-value")||"";V&&("line"===V.tagName?V.style.stroke=D:V.style.fill=D)}}]),C}(function q(T){return T&&T.__esModule?T:{default:T}}(c(28)).default);M.default=_},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function T(C,k){for(var A=0;A<k.length;A++){var x=k[A];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(C,x.key,x)}}return function(C,k,A){return k&&T(C.prototype,k),A&&T(C,A),C}}(),F=function T(C,k,A){null===C&&(C=Function.prototype);var x=Object.getOwnPropertyDescriptor(C,k);if(void 0===x){var V=Object.getPrototypeOf(C);return null===V?void 0:T(V,k,A)}if("value"in x)return x.value;var D=x.get;return void 0===D?void 0:D.call(A)};var _=function(T){function C(k,A){!function R(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")}(this,C);var x=function S(T,C){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||"object"!=typeof C&&"function"!=typeof C?T:C}(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,k));return x.container.classList.add("ql-icon-picker"),[].forEach.call(x.container.querySelectorAll(".ql-picker-item"),function(V){V.innerHTML=A[V.getAttribute("data-value")||""]}),x.defaultItem=x.container.querySelector(".ql-selected"),x.selectItem(x.defaultItem),x}return function E(T,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function, not "+typeof C);T.prototype=Object.create(C&&C.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(T,C):T.__proto__=C)}(C,T),ee(C,[{key:"selectItem",value:function(A,x){F(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"selectItem",this).call(this,A,x),this.label.innerHTML=(A=A||this.defaultItem).innerHTML}}]),C}(function q(T){return T&&T.__esModule?T:{default:T}}(c(28)).default);M.default=_},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function j(q,R){for(var S=0;S<R.length;S++){var E=R[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(q,E.key,E)}}return function(q,R,S){return R&&j(q.prototype,R),S&&j(q,S),q}}();var K=function(){function j(q,R){var S=this;(function F(j,q){if(!(j instanceof q))throw new TypeError("Cannot call a class as a function")})(this,j),this.quill=q,this.boundsContainer=R||document.body,this.root=q.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){S.root.style.marginTop=-1*S.quill.root.scrollTop+"px"}),this.hide()}return ee(j,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(R){var S=R.left+R.width/2-this.root.offsetWidth/2,E=R.bottom+this.quill.root.scrollTop;this.root.style.left=S+"px",this.root.style.top=E+"px",this.root.classList.remove("ql-flip");var _=this.boundsContainer.getBoundingClientRect(),T=this.root.getBoundingClientRect(),C=0;return T.right>_.right&&(this.root.style.left=S+(C=_.right-T.right)+"px"),T.left<_.left&&(this.root.style.left=S+(C=_.left-T.left)+"px"),T.bottom>_.bottom&&(this.root.style.top=E-(R.bottom-R.top+(T.bottom-T.top))+"px",this.root.classList.add("ql-flip")),C}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),j}();M.default=K},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(H,W){if(Array.isArray(H))return H;if(Symbol.iterator in Object(H))return function $(H,W){var B=[],te=!0,Y=!1,de=void 0;try{for(var be,ue=H[Symbol.iterator]();!(te=(be=ue.next()).done)&&(B.push(be.value),!W||B.length!==W);te=!0);}catch(ce){Y=!0,de=ce}finally{try{!te&&ue.return&&ue.return()}finally{if(Y)throw de}}return B}(H,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")},F=function $(H,W,B){null===H&&(H=Function.prototype);var te=Object.getOwnPropertyDescriptor(H,W);if(void 0===te){var Y=Object.getPrototypeOf(H);return null===Y?void 0:$(Y,W,B)}if("value"in te)return te.value;var de=te.get;return void 0===de?void 0:de.call(B)},K=function(){function $(H,W){for(var B=0;B<W.length;B++){var te=W[B];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(H,te.key,te)}}return function(H,W,B){return W&&$(H.prototype,W),B&&$(H,B),H}}(),q=V(c(3)),S=V(c(8)),E=c(43),_=V(E),C=V(c(27)),k=c(15),x=V(c(41));function V($){return $&&$.__esModule?$:{default:$}}function D($,H){if(!($ instanceof H))throw new TypeError("Cannot call a class as a function")}function L($,H){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!H||"object"!=typeof H&&"function"!=typeof H?$:H}function re($,H){if("function"!=typeof H&&null!==H)throw new TypeError("Super expression must either be null or a function, not "+typeof H);$.prototype=Object.create(H&&H.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf($,H):$.__proto__=H)}var J=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],Z=function($){function H(W,B){D(this,H),null!=B.modules.toolbar&&null==B.modules.toolbar.container&&(B.modules.toolbar.container=J);var te=L(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,W,B));return te.quill.container.classList.add("ql-snow"),te}return re(H,$),K(H,[{key:"extendToolbar",value:function(B){B.container.classList.add("ql-snow"),this.buildButtons([].slice.call(B.container.querySelectorAll("button")),x.default),this.buildPickers([].slice.call(B.container.querySelectorAll("select")),x.default),this.tooltip=new X(this.quill,this.options.bounds),B.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(te,Y){B.handlers.link.call(B,!Y.format.link)})}}]),H}(_.default);Z.DEFAULTS=(0,q.default)(!0,{},_.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(H){if(H){var W=this.quill.getSelection();if(null==W||0==W.length)return;var B=this.quill.getText(W);/^\S+@\S+\.\S+$/.test(B)&&0!==B.indexOf("mailto:")&&(B="mailto:"+B),this.quill.theme.tooltip.edit("link",B)}else this.quill.format("link",!1)}}}}});var X=function($){function H(W,B){D(this,H);var te=L(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,W,B));return te.preview=te.root.querySelector("a.ql-preview"),te}return re(H,$),K(H,[{key:"listen",value:function(){var B=this;F(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(te){B.root.classList.contains("ql-editing")?B.save():B.edit("link",B.preview.textContent),te.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(te){if(null!=B.linkRange){var Y=B.linkRange;B.restoreFocus(),B.quill.formatText(Y,"link",!1,S.default.sources.USER),delete B.linkRange}te.preventDefault(),B.hide()}),this.quill.on(S.default.events.SELECTION_CHANGE,function(te,Y,de){if(null!=te){if(0===te.length&&de===S.default.sources.USER){var ue=B.quill.scroll.descendant(C.default,te.index),be=ee(ue,2),ce=be[0];if(null!=ce){B.linkRange=new k.Range(te.index-be[1],ce.length());var ie=C.default.formats(ce.domNode);return B.preview.textContent=ie,B.preview.setAttribute("href",ie),B.show(),void B.position(B.quill.getBounds(B.linkRange))}}else delete B.linkRange;B.hide()}})}},{key:"show",value:function(){F(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),H}(E.BaseTooltip);X.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),M.default=Z},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var F=ze(c(29)),K=c(36),j=c(38),q=c(64),S=ze(c(65)),_=ze(c(66)),T=c(67),C=ze(T),k=c(37),A=c(26),x=c(39),V=c(40),L=ze(c(56)),J=ze(c(68)),X=ze(c(27)),H=ze(c(69)),B=ze(c(70)),Y=ze(c(71)),ue=ze(c(72)),ce=ze(c(73)),le=c(13),ie=ze(le),me=ze(c(74)),xe=ze(c(75)),Ie=ze(c(57)),Re=ze(c(41)),Qe=ze(c(28)),wt=ze(c(59)),Bt=ze(c(60)),mn=ze(c(61)),qe=ze(c(108)),it=ze(c(62));function ze(vt){return vt&&vt.__esModule?vt:{default:vt}}F.default.register({"attributors/attribute/direction":j.DirectionAttribute,"attributors/class/align":K.AlignClass,"attributors/class/background":k.BackgroundClass,"attributors/class/color":A.ColorClass,"attributors/class/direction":j.DirectionClass,"attributors/class/font":x.FontClass,"attributors/class/size":V.SizeClass,"attributors/style/align":K.AlignStyle,"attributors/style/background":k.BackgroundStyle,"attributors/style/color":A.ColorStyle,"attributors/style/direction":j.DirectionStyle,"attributors/style/font":x.FontStyle,"attributors/style/size":V.SizeStyle},!0),F.default.register({"formats/align":K.AlignClass,"formats/direction":j.DirectionClass,"formats/indent":q.IndentClass,"formats/background":k.BackgroundStyle,"formats/color":A.ColorStyle,"formats/font":x.FontClass,"formats/size":V.SizeClass,"formats/blockquote":S.default,"formats/code-block":ie.default,"formats/header":_.default,"formats/list":C.default,"formats/bold":L.default,"formats/code":le.Code,"formats/italic":J.default,"formats/link":X.default,"formats/script":H.default,"formats/strike":B.default,"formats/underline":Y.default,"formats/image":ue.default,"formats/video":ce.default,"formats/list/item":T.ListItem,"modules/formula":me.default,"modules/syntax":xe.default,"modules/toolbar":Ie.default,"themes/bubble":qe.default,"themes/snow":it.default,"ui/icons":Re.default,"ui/picker":Qe.default,"ui/icon-picker":Bt.default,"ui/color-picker":wt.default,"ui/tooltip":mn.default},!0),M.default=F.default},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.IndentClass=void 0;var ee=function(){function C(k,A){for(var x=0;x<A.length;x++){var V=A[x];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}return function(k,A,x){return A&&C(k.prototype,A),x&&C(k,x),k}}(),F=function C(k,A,x){null===k&&(k=Function.prototype);var V=Object.getOwnPropertyDescriptor(k,A);if(void 0===V){var D=Object.getPrototypeOf(k);return null===D?void 0:C(D,A,x)}if("value"in V)return V.value;var L=V.get;return void 0===L?void 0:L.call(x)},j=function q(C){return C&&C.__esModule?C:{default:C}}(c(0));function R(C,k){if(!(C instanceof k))throw new TypeError("Cannot call a class as a function")}function S(C,k){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!k||"object"!=typeof k&&"function"!=typeof k?C:k}var _=function(C){function k(){return R(this,k),S(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return function E(C,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function, not "+typeof k);C.prototype=Object.create(k&&k.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(C,k):C.__proto__=k)}(k,C),ee(k,[{key:"add",value:function(x,V){if("+1"===V||"-1"===V){var D=this.value(x)||0;V="+1"===V?D+1:D-1}return 0===V?(this.remove(x),!0):F(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"add",this).call(this,x,V)}},{key:"canAdd",value:function(x,V){return F(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"canAdd",this).call(this,x,V)||F(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"canAdd",this).call(this,x,parseInt(V))}},{key:"value",value:function(x){return parseInt(F(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"value",this).call(this,x))||void 0}}]),k}(j.default.Attributor.Class),T=new _("indent","ql-indent",{scope:j.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});M.IndentClass=T},function(ge,M,c){"use strict";function j(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function q(E,_){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?E:_}Object.defineProperty(M,"__esModule",{value:!0});var S=function(E){function _(){return j(this,_),q(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return function R(E,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(E,_):E.__proto__=_)}(_,E),_}(function K(E){return E&&E.__esModule?E:{default:E}}(c(4)).default);S.blotName="blockquote",S.tagName="blockquote",M.default=S},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function _(T,C){for(var k=0;k<C.length;k++){var A=C[k];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(T,A.key,A)}}return function(T,C,k){return C&&_(T.prototype,C),k&&_(T,k),T}}();function q(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}function R(_,T){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!T||"object"!=typeof T&&"function"!=typeof T?_:T}var E=function(_){function T(){return q(this,T),R(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return function S(_,T){if("function"!=typeof T&&null!==T)throw new TypeError("Super expression must either be null or a function, not "+typeof T);_.prototype=Object.create(T&&T.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(_,T):_.__proto__=T)}(T,_),ee(T,null,[{key:"formats",value:function(k){return this.tagName.indexOf(k.tagName)+1}}]),T}(function j(_){return _&&_.__esModule?_:{default:_}}(c(4)).default);E.blotName="header",E.tagName=["H1","H2","H3","H4","H5","H6"],M.default=E},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.ListItem=void 0;var ee=function(){function D(L,re){for(var J=0;J<re.length;J++){var Z=re[J];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(L,Z.key,Z)}}return function(L,re,J){return re&&D(L.prototype,re),J&&D(L,J),L}}(),F=function D(L,re,J){null===L&&(L=Function.prototype);var Z=Object.getOwnPropertyDescriptor(L,re);if(void 0===Z){var X=Object.getPrototypeOf(L);return null===X?void 0:D(X,re,J)}if("value"in Z)return Z.value;var $=Z.get;return void 0===$?void 0:$.call(J)},j=_(c(0)),R=_(c(4)),E=_(c(25));function _(D){return D&&D.__esModule?D:{default:D}}function C(D,L){if(!(D instanceof L))throw new TypeError("Cannot call a class as a function")}function k(D,L){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!L||"object"!=typeof L&&"function"!=typeof L?D:L}function A(D,L){if("function"!=typeof L&&null!==L)throw new TypeError("Super expression must either be null or a function, not "+typeof L);D.prototype=Object.create(L&&L.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),L&&(Object.setPrototypeOf?Object.setPrototypeOf(D,L):D.__proto__=L)}var x=function(D){function L(){return C(this,L),k(this,(L.__proto__||Object.getPrototypeOf(L)).apply(this,arguments))}return A(L,D),ee(L,[{key:"format",value:function(J,Z){J!==V.blotName||Z?F(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"format",this).call(this,J,Z):this.replaceWith(j.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():F(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(J,Z){return this.parent.isolate(this.offset(this.parent),this.length()),J===this.parent.statics.blotName?(this.parent.replaceWith(J,Z),this):(this.parent.unwrap(),F(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"replaceWith",this).call(this,J,Z))}}],[{key:"formats",value:function(J){return J.tagName===this.tagName?void 0:F(L.__proto__||Object.getPrototypeOf(L),"formats",this).call(this,J)}}]),L}(R.default);x.blotName="list-item",x.tagName="LI";var V=function(D){function L(re){C(this,L);var J=k(this,(L.__proto__||Object.getPrototypeOf(L)).call(this,re)),Z=function($){if($.target.parentNode===re){var H=J.statics.formats(re),W=j.default.find($.target);"checked"===H?W.format("list","unchecked"):"unchecked"===H&&W.format("list","checked")}};return re.addEventListener("touchstart",Z),re.addEventListener("mousedown",Z),J}return A(L,D),ee(L,null,[{key:"create",value:function(J){var Z="ordered"===J?"OL":"UL",X=F(L.__proto__||Object.getPrototypeOf(L),"create",this).call(this,Z);return("checked"===J||"unchecked"===J)&&X.setAttribute("data-checked","checked"===J),X}},{key:"formats",value:function(J){return"OL"===J.tagName?"ordered":"UL"===J.tagName?J.hasAttribute("data-checked")?"true"===J.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),ee(L,[{key:"format",value:function(J,Z){this.children.length>0&&this.children.tail.format(J,Z)}},{key:"formats",value:function(){return function T(D,L,re){return L in D?Object.defineProperty(D,L,{value:re,enumerable:!0,configurable:!0,writable:!0}):D[L]=re,D}({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(J,Z){if(J instanceof x)F(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"insertBefore",this).call(this,J,Z);else{var X=null==Z?this.length():Z.offset(this),$=this.split(X);$.parent.insertBefore(J,$)}}},{key:"optimize",value:function(J){F(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"optimize",this).call(this,J);var Z=this.next;null!=Z&&Z.prev===this&&Z.statics.blotName===this.statics.blotName&&Z.domNode.tagName===this.domNode.tagName&&Z.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(Z.moveChildren(this),Z.remove())}},{key:"replace",value:function(J){if(J.statics.blotName!==this.statics.blotName){var Z=j.default.create(this.statics.defaultChild);J.moveChildren(Z),this.appendChild(Z)}F(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"replace",this).call(this,J)}}]),L}(E.default);V.blotName="list",V.scope=j.default.Scope.BLOCK_BLOT,V.tagName=["OL","UL"],V.defaultChild="list-item",V.allowedChildren=[x],M.ListItem=x,M.default=V},function(ge,M,c){"use strict";function j(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function q(E,_){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?E:_}Object.defineProperty(M,"__esModule",{value:!0});var S=function(E){function _(){return j(this,_),q(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return function R(E,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(E,_):E.__proto__=_)}(_,E),_}(function K(E){return E&&E.__esModule?E:{default:E}}(c(56)).default);S.blotName="italic",S.tagName=["EM","I"],M.default=S},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function T(C,k){for(var A=0;A<k.length;A++){var x=k[A];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(C,x.key,x)}}return function(C,k,A){return k&&T(C.prototype,k),A&&T(C,A),C}}(),F=function T(C,k,A){null===C&&(C=Function.prototype);var x=Object.getOwnPropertyDescriptor(C,k);if(void 0===x){var V=Object.getPrototypeOf(C);return null===V?void 0:T(V,k,A)}if("value"in x)return x.value;var D=x.get;return void 0===D?void 0:D.call(A)};function R(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")}function S(T,C){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||"object"!=typeof C&&"function"!=typeof C?T:C}var _=function(T){function C(){return R(this,C),S(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return function E(T,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function, not "+typeof C);T.prototype=Object.create(C&&C.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(T,C):T.__proto__=C)}(C,T),ee(C,null,[{key:"create",value:function(A){return"super"===A?document.createElement("sup"):"sub"===A?document.createElement("sub"):F(C.__proto__||Object.getPrototypeOf(C),"create",this).call(this,A)}},{key:"formats",value:function(A){return"SUB"===A.tagName?"sub":"SUP"===A.tagName?"super":void 0}}]),C}(function q(T){return T&&T.__esModule?T:{default:T}}(c(6)).default);_.blotName="script",_.tagName=["SUB","SUP"],M.default=_},function(ge,M,c){"use strict";function j(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function q(E,_){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?E:_}Object.defineProperty(M,"__esModule",{value:!0});var S=function(E){function _(){return j(this,_),q(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return function R(E,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(E,_):E.__proto__=_)}(_,E),_}(function K(E){return E&&E.__esModule?E:{default:E}}(c(6)).default);S.blotName="strike",S.tagName="S",M.default=S},function(ge,M,c){"use strict";function j(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function q(E,_){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?E:_}Object.defineProperty(M,"__esModule",{value:!0});var S=function(E){function _(){return j(this,_),q(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return function R(E,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(E,_):E.__proto__=_)}(_,E),_}(function K(E){return E&&E.__esModule?E:{default:E}}(c(6)).default);S.blotName="underline",S.tagName="U",M.default=S},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function k(A,x){for(var V=0;V<x.length;V++){var D=x[V];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(A,D.key,D)}}return function(A,x,V){return x&&k(A.prototype,x),V&&k(A,V),A}}(),F=function k(A,x,V){null===A&&(A=Function.prototype);var D=Object.getOwnPropertyDescriptor(A,x);if(void 0===D){var L=Object.getPrototypeOf(A);return null===L?void 0:k(L,x,V)}if("value"in D)return D.value;var re=D.get;return void 0===re?void 0:re.call(V)},j=function R(k){return k&&k.__esModule?k:{default:k}}(c(0)),q=c(27);function S(k,A){if(!(k instanceof A))throw new TypeError("Cannot call a class as a function")}function E(k,A){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!=typeof A&&"function"!=typeof A?k:A}var T=["alt","height","width"],C=function(k){function A(){return S(this,A),E(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return function _(k,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);k.prototype=Object.create(A&&A.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(k,A):k.__proto__=A)}(A,k),ee(A,[{key:"format",value:function(V,D){T.indexOf(V)>-1?D?this.domNode.setAttribute(V,D):this.domNode.removeAttribute(V):F(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,V,D)}}],[{key:"create",value:function(V){var D=F(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,V);return"string"==typeof V&&D.setAttribute("src",this.sanitize(V)),D}},{key:"formats",value:function(V){return T.reduce(function(D,L){return V.hasAttribute(L)&&(D[L]=V.getAttribute(L)),D},{})}},{key:"match",value:function(V){return/\.(jpe?g|gif|png)$/.test(V)||/^data:image\/.+;base64/.test(V)}},{key:"sanitize",value:function(V){return(0,q.sanitize)(V,["http","https","data"])?V:"//:0"}},{key:"value",value:function(V){return V.getAttribute("src")}}]),A}(j.default.Embed);C.blotName="image",C.tagName="IMG",M.default=C},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function k(A,x){for(var V=0;V<x.length;V++){var D=x[V];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(A,D.key,D)}}return function(A,x,V){return x&&k(A.prototype,x),V&&k(A,V),A}}(),F=function k(A,x,V){null===A&&(A=Function.prototype);var D=Object.getOwnPropertyDescriptor(A,x);if(void 0===D){var L=Object.getPrototypeOf(A);return null===L?void 0:k(L,x,V)}if("value"in D)return D.value;var re=D.get;return void 0===re?void 0:re.call(V)},K=c(4),q=function R(k){return k&&k.__esModule?k:{default:k}}(c(27));function S(k,A){if(!(k instanceof A))throw new TypeError("Cannot call a class as a function")}function E(k,A){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!=typeof A&&"function"!=typeof A?k:A}var T=["height","width"],C=function(k){function A(){return S(this,A),E(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return function _(k,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);k.prototype=Object.create(A&&A.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(k,A):k.__proto__=A)}(A,k),ee(A,[{key:"format",value:function(V,D){T.indexOf(V)>-1?D?this.domNode.setAttribute(V,D):this.domNode.removeAttribute(V):F(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,V,D)}}],[{key:"create",value:function(V){var D=F(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,V);return D.setAttribute("frameborder","0"),D.setAttribute("allowfullscreen",!0),D.setAttribute("src",this.sanitize(V)),D}},{key:"formats",value:function(V){return T.reduce(function(D,L){return V.hasAttribute(L)&&(D[L]=V.getAttribute(L)),D},{})}},{key:"sanitize",value:function(V){return q.default.sanitize(V)}},{key:"value",value:function(V){return V.getAttribute("src")}}]),A}(K.BlockEmbed);C.blotName="video",C.className="ql-video",C.tagName="IFRAME",M.default=C},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.FormulaBlot=void 0;var ee=function(){function V(D,L){for(var re=0;re<L.length;re++){var J=L[re];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(D,J.key,J)}}return function(D,L,re){return L&&V(D.prototype,L),re&&V(D,re),D}}(),F=function V(D,L,re){null===D&&(D=Function.prototype);var J=Object.getOwnPropertyDescriptor(D,L);if(void 0===J){var Z=Object.getPrototypeOf(D);return null===Z?void 0:V(Z,L,re)}if("value"in J)return J.value;var X=J.get;return void 0===X?void 0:X.call(re)},j=_(c(35)),R=_(c(5)),E=_(c(9));function _(V){return V&&V.__esModule?V:{default:V}}function T(V,D){if(!(V instanceof D))throw new TypeError("Cannot call a class as a function")}function C(V,D){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!D||"object"!=typeof D&&"function"!=typeof D?V:D}function k(V,D){if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function, not "+typeof D);V.prototype=Object.create(D&&D.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(V,D):V.__proto__=D)}var A=function(V){function D(){return T(this,D),C(this,(D.__proto__||Object.getPrototypeOf(D)).apply(this,arguments))}return k(D,V),ee(D,null,[{key:"create",value:function(re){var J=F(D.__proto__||Object.getPrototypeOf(D),"create",this).call(this,re);return"string"==typeof re&&(window.katex.render(re,J,{throwOnError:!1,errorColor:"#f00"}),J.setAttribute("data-value",re)),J}},{key:"value",value:function(re){return re.getAttribute("data-value")}}]),D}(j.default);A.blotName="formula",A.className="ql-formula",A.tagName="SPAN";var x=function(V){function D(){T(this,D);var L=C(this,(D.__proto__||Object.getPrototypeOf(D)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return L}return k(D,V),ee(D,null,[{key:"register",value:function(){R.default.register(A,!0)}}]),D}(E.default);M.FormulaBlot=A,M.default=x},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.CodeToken=M.CodeBlock=void 0;var ee=function(){function re(J,Z){for(var X=0;X<Z.length;X++){var $=Z[X];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(J,$.key,$)}}return function(J,Z,X){return Z&&re(J.prototype,Z),X&&re(J,X),J}}(),F=function re(J,Z,X){null===J&&(J=Function.prototype);var $=Object.getOwnPropertyDescriptor(J,Z);if(void 0===$){var H=Object.getPrototypeOf(J);return null===H?void 0:re(H,Z,X)}if("value"in $)return $.value;var W=$.get;return void 0===W?void 0:W.call(X)},j=C(c(0)),R=C(c(5)),E=C(c(9));function C(re){return re&&re.__esModule?re:{default:re}}function k(re,J){if(!(re instanceof J))throw new TypeError("Cannot call a class as a function")}function A(re,J){if(!re)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!J||"object"!=typeof J&&"function"!=typeof J?re:J}function x(re,J){if("function"!=typeof J&&null!==J)throw new TypeError("Super expression must either be null or a function, not "+typeof J);re.prototype=Object.create(J&&J.prototype,{constructor:{value:re,enumerable:!1,writable:!0,configurable:!0}}),J&&(Object.setPrototypeOf?Object.setPrototypeOf(re,J):re.__proto__=J)}var V=function(re){function J(){return k(this,J),A(this,(J.__proto__||Object.getPrototypeOf(J)).apply(this,arguments))}return x(J,re),ee(J,[{key:"replaceWith",value:function(X){this.domNode.textContent=this.domNode.textContent,this.attach(),F(J.prototype.__proto__||Object.getPrototypeOf(J.prototype),"replaceWith",this).call(this,X)}},{key:"highlight",value:function(X){var $=this.domNode.textContent;this.cachedText!==$&&(($.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=X($),this.domNode.normalize(),this.attach()),this.cachedText=$)}}]),J}(C(c(13)).default);V.className="ql-syntax";var D=new j.default.Attributor.Class("token","hljs",{scope:j.default.Scope.INLINE}),L=function(re){function J(Z,X){k(this,J);var $=A(this,(J.__proto__||Object.getPrototypeOf(J)).call(this,Z,X));if("function"!=typeof $.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var H=null;return $.quill.on(R.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(H),H=setTimeout(function(){$.highlight(),H=null},$.options.interval)}),$.highlight(),$}return x(J,re),ee(J,null,[{key:"register",value:function(){R.default.register(D,!0),R.default.register(V,!0)}}]),ee(J,[{key:"highlight",value:function(){var X=this;if(!this.quill.selection.composing){this.quill.update(R.default.sources.USER);var $=this.quill.getSelection();this.quill.scroll.descendants(V).forEach(function(H){H.highlight(X.options.highlight)}),this.quill.update(R.default.sources.SILENT),null!=$&&this.quill.setSelection($,R.default.sources.SILENT)}}}]),J}(E.default);L.DEFAULTS={highlight:null==window.hljs?null:function(re){return window.hljs.highlightAuto(re).value},interval:1e3},M.CodeBlock=V,M.CodeToken=D,M.default=L},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(ge,M){ge.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(ge,M){ge.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(ge,M){ge.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(ge,M){ge.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.BubbleTooltip=void 0;var ee=function J(Z,X,$){null===Z&&(Z=Function.prototype);var H=Object.getOwnPropertyDescriptor(Z,X);if(void 0===H){var W=Object.getPrototypeOf(Z);return null===W?void 0:J(W,X,$)}if("value"in H)return H.value;var B=H.get;return void 0===B?void 0:B.call($)},F=function(){function J(Z,X){for(var $=0;$<X.length;$++){var H=X[$];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(Z,H.key,H)}}return function(Z,X,$){return X&&J(Z.prototype,X),$&&J(Z,$),Z}}(),j=k(c(3)),R=k(c(8)),S=c(43),E=k(S),_=c(15),C=k(c(41));function k(J){return J&&J.__esModule?J:{default:J}}function A(J,Z){if(!(J instanceof Z))throw new TypeError("Cannot call a class as a function")}function x(J,Z){if(!J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Z||"object"!=typeof Z&&"function"!=typeof Z?J:Z}function V(J,Z){if("function"!=typeof Z&&null!==Z)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);J.prototype=Object.create(Z&&Z.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(J,Z):J.__proto__=Z)}var D=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],L=function(J){function Z(X,$){A(this,Z),null!=$.modules.toolbar&&null==$.modules.toolbar.container&&($.modules.toolbar.container=D);var H=x(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,X,$));return H.quill.container.classList.add("ql-bubble"),H}return V(Z,J),F(Z,[{key:"extendToolbar",value:function($){this.tooltip=new re(this.quill,this.options.bounds),this.tooltip.root.appendChild($.container),this.buildButtons([].slice.call($.container.querySelectorAll("button")),C.default),this.buildPickers([].slice.call($.container.querySelectorAll("select")),C.default)}}]),Z}(E.default);L.DEFAULTS=(0,j.default)(!0,{},E.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(Z){Z?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var re=function(J){function Z(X,$){A(this,Z);var H=x(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,X,$));return H.quill.on(R.default.events.EDITOR_CHANGE,function(W,B,te,Y){if(W===R.default.events.SELECTION_CHANGE)if(null!=B&&B.length>0&&Y===R.default.sources.USER){H.show(),H.root.style.left="0px",H.root.style.width="",H.root.style.width=H.root.offsetWidth+"px";var de=H.quill.getLines(B.index,B.length);if(1===de.length)H.position(H.quill.getBounds(B));else{var ue=de[de.length-1],be=H.quill.getIndex(ue),ce=Math.min(ue.length()-1,B.index+B.length-be),le=H.quill.getBounds(new _.Range(be,ce));H.position(le)}}else document.activeElement!==H.textbox&&H.quill.hasFocus()&&H.hide()}),H}return V(Z,J),F(Z,[{key:"listen",value:function(){var $=this;ee(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){$.root.classList.remove("ql-editing")}),this.quill.on(R.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!$.root.classList.contains("ql-hidden")){var H=$.quill.getSelection();null!=H&&$.position($.quill.getBounds(H))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function($){var H=ee(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"position",this).call(this,$),W=this.root.querySelector(".ql-tooltip-arrow");if(W.style.marginLeft="",0===H)return H;W.style.marginLeft=-1*H-W.offsetWidth/2+"px"}}]),Z}(S.BaseTooltip);re.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),M.BubbleTooltip=re,M.default=L},function(ge,M,c){ge.exports=c(63)}]).default},8306:(ht,ge,M)=>{"use strict";M.d(ge,{y:()=>_});var c=M(2961),ee=M(727),F=M(8822),K=M(4671);var R=M(2416),S=M(576),E=M(2806);let _=(()=>{class A{constructor(V){V&&(this._subscribe=V)}lift(V){const D=new A;return D.source=this,D.operator=V,D}subscribe(V,D,L){const re=function k(A){return A&&A instanceof c.Lv||function C(A){return A&&(0,S.m)(A.next)&&(0,S.m)(A.error)&&(0,S.m)(A.complete)}(A)&&(0,ee.Nn)(A)}(V)?V:new c.Hp(V,D,L);return(0,E.x)(()=>{const{operator:J,source:Z}=this;re.add(J?J.call(re,Z):Z?this._subscribe(re):this._trySubscribe(re))}),re}_trySubscribe(V){try{return this._subscribe(V)}catch(D){V.error(D)}}forEach(V,D){return new(D=T(D))((L,re)=>{const J=new c.Hp({next:Z=>{try{V(Z)}catch(X){re(X),J.unsubscribe()}},error:re,complete:L});this.subscribe(J)})}_subscribe(V){var D;return null===(D=this.source)||void 0===D?void 0:D.subscribe(V)}[F.L](){return this}pipe(...V){return function q(A){return 0===A.length?K.y:1===A.length?A[0]:function(V){return A.reduce((D,L)=>L(D),V)}}(V)(this)}toPromise(V){return new(V=T(V))((D,L)=>{let re;this.subscribe(J=>re=J,J=>L(J),()=>D(re))})}}return A.create=x=>new A(x),A})();function T(A){var x;return null!==(x=null!=A?A:R.v.Promise)&&void 0!==x?x:Promise}},7579:(ht,ge,M)=>{"use strict";M.d(ge,{x:()=>R});var c=M(8306),ee=M(727);const K=(0,M(3888).d)(E=>function(){E(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var j=M(8737),q=M(2806);let R=(()=>{class E extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(T){const C=new S(this,this);return C.operator=T,C}_throwIfClosed(){if(this.closed)throw new K}next(T){(0,q.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const C of this.currentObservers)C.next(T)}})}error(T){(0,q.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=T;const{observers:C}=this;for(;C.length;)C.shift().error(T)}})}complete(){(0,q.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:T}=this;for(;T.length;)T.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var T;return(null===(T=this.observers)||void 0===T?void 0:T.length)>0}_trySubscribe(T){return this._throwIfClosed(),super._trySubscribe(T)}_subscribe(T){return this._throwIfClosed(),this._checkFinalizedStatuses(T),this._innerSubscribe(T)}_innerSubscribe(T){const{hasError:C,isStopped:k,observers:A}=this;return C||k?ee.Lc:(this.currentObservers=null,A.push(T),new ee.w0(()=>{this.currentObservers=null,(0,j.P)(A,T)}))}_checkFinalizedStatuses(T){const{hasError:C,thrownError:k,isStopped:A}=this;C?T.error(k):A&&T.complete()}asObservable(){const T=new c.y;return T.source=this,T}}return E.create=(_,T)=>new S(_,T),E})();class S extends R{constructor(_,T){super(),this.destination=_,this.source=T}next(_){var T,C;null===(C=null===(T=this.destination)||void 0===T?void 0:T.next)||void 0===C||C.call(T,_)}error(_){var T,C;null===(C=null===(T=this.destination)||void 0===T?void 0:T.error)||void 0===C||C.call(T,_)}complete(){var _,T;null===(T=null===(_=this.destination)||void 0===_?void 0:_.complete)||void 0===T||T.call(_)}_subscribe(_){var T,C;return null!==(C=null===(T=this.source)||void 0===T?void 0:T.subscribe(_))&&void 0!==C?C:ee.Lc}}},2961:(ht,ge,M)=>{"use strict";M.d(ge,{Hp:()=>V,Lv:()=>C});var c=M(576),ee=M(727),F=M(2416),K=M(7849);function j(){}const q=E("C",void 0,void 0);function E(Z,X,$){return{kind:Z,value:X,error:$}}var _=M(3410),T=M(2806);class C extends ee.w0{constructor(X){super(),this.isStopped=!1,X?(this.destination=X,(0,ee.Nn)(X)&&X.add(this)):this.destination=J}static create(X,$,H){return new V(X,$,H)}next(X){this.isStopped?re(function S(Z){return E("N",Z,void 0)}(X),this):this._next(X)}error(X){this.isStopped?re(function R(Z){return E("E",void 0,Z)}(X),this):(this.isStopped=!0,this._error(X))}complete(){this.isStopped?re(q,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(X){this.destination.next(X)}_error(X){try{this.destination.error(X)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const k=Function.prototype.bind;function A(Z,X){return k.call(Z,X)}class x{constructor(X){this.partialObserver=X}next(X){const{partialObserver:$}=this;if($.next)try{$.next(X)}catch(H){D(H)}}error(X){const{partialObserver:$}=this;if($.error)try{$.error(X)}catch(H){D(H)}else D(X)}complete(){const{partialObserver:X}=this;if(X.complete)try{X.complete()}catch($){D($)}}}class V extends C{constructor(X,$,H){let W;if(super(),(0,c.m)(X)||!X)W={next:null!=X?X:void 0,error:null!=$?$:void 0,complete:null!=H?H:void 0};else{let B;this&&F.v.useDeprecatedNextContext?(B=Object.create(X),B.unsubscribe=()=>this.unsubscribe(),W={next:X.next&&A(X.next,B),error:X.error&&A(X.error,B),complete:X.complete&&A(X.complete,B)}):W=X}this.destination=new x(W)}}function D(Z){F.v.useDeprecatedSynchronousErrorHandling?(0,T.O)(Z):(0,K.h)(Z)}function re(Z,X){const{onStoppedNotification:$}=F.v;$&&_.z.setTimeout(()=>$(Z,X))}const J={closed:!0,next:j,error:function L(Z){throw Z},complete:j}},727:(ht,ge,M)=>{"use strict";M.d(ge,{Lc:()=>q,w0:()=>j,Nn:()=>R});var c=M(576);const F=(0,M(3888).d)(E=>function(T){E(this),this.message=T?`${T.length} errors occurred during unsubscription:\n${T.map((C,k)=>`${k+1}) ${C.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=T});var K=M(8737);class j{constructor(_){this.initialTeardown=_,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let _;if(!this.closed){this.closed=!0;const{_parentage:T}=this;if(T)if(this._parentage=null,Array.isArray(T))for(const A of T)A.remove(this);else T.remove(this);const{initialTeardown:C}=this;if((0,c.m)(C))try{C()}catch(A){_=A instanceof F?A.errors:[A]}const{_finalizers:k}=this;if(k){this._finalizers=null;for(const A of k)try{S(A)}catch(x){_=null!=_?_:[],x instanceof F?_=[..._,...x.errors]:_.push(x)}}if(_)throw new F(_)}}add(_){var T;if(_&&_!==this)if(this.closed)S(_);else{if(_ instanceof j){if(_.closed||_._hasParent(this))return;_._addParent(this)}(this._finalizers=null!==(T=this._finalizers)&&void 0!==T?T:[]).push(_)}}_hasParent(_){const{_parentage:T}=this;return T===_||Array.isArray(T)&&T.includes(_)}_addParent(_){const{_parentage:T}=this;this._parentage=Array.isArray(T)?(T.push(_),T):T?[T,_]:_}_removeParent(_){const{_parentage:T}=this;T===_?this._parentage=null:Array.isArray(T)&&(0,K.P)(T,_)}remove(_){const{_finalizers:T}=this;T&&(0,K.P)(T,_),_ instanceof j&&_._removeParent(this)}}j.EMPTY=(()=>{const E=new j;return E.closed=!0,E})();const q=j.EMPTY;function R(E){return E instanceof j||E&&"closed"in E&&(0,c.m)(E.remove)&&(0,c.m)(E.add)&&(0,c.m)(E.unsubscribe)}function S(E){(0,c.m)(E)?E():E.unsubscribe()}},2416:(ht,ge,M)=>{"use strict";M.d(ge,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ht,ge,M)=>{"use strict";M.d(ge,{E:()=>ee});const ee=new(M(8306).y)(j=>j.complete())},8996:(ht,ge,M)=>{"use strict";M.d(ge,{D:()=>X});var c=M(8421),ee=M(5363),F=M(9468),q=M(8306),S=M(2202),E=M(576),_=M(9672);function C($,H){if(!$)throw new Error("Iterable cannot be null");return new q.y(W=>{(0,_.f)(W,H,()=>{const B=$[Symbol.asyncIterator]();(0,_.f)(W,H,()=>{B.next().then(te=>{te.done?W.complete():W.next(te.value)})},0,!0)})})}var k=M(3670),A=M(8239),x=M(1144),V=M(6495),D=M(2206),L=M(4532),re=M(3260);function X($,H){return H?function Z($,H){if(null!=$){if((0,k.c)($))return function K($,H){return(0,c.Xf)($).pipe((0,F.R)(H),(0,ee.Q)(H))}($,H);if((0,x.z)($))return function R($,H){return new q.y(W=>{let B=0;return H.schedule(function(){B===$.length?W.complete():(W.next($[B++]),W.closed||this.schedule())})})}($,H);if((0,A.t)($))return function j($,H){return(0,c.Xf)($).pipe((0,F.R)(H),(0,ee.Q)(H))}($,H);if((0,D.D)($))return C($,H);if((0,V.T)($))return function T($,H){return new q.y(W=>{let B;return(0,_.f)(W,H,()=>{B=$[S.h](),(0,_.f)(W,H,()=>{let te,Y;try{({value:te,done:Y}=B.next())}catch(de){return void W.error(de)}Y?W.complete():W.next(te)},0,!0)}),()=>(0,E.m)(null==B?void 0:B.return)&&B.return()})}($,H);if((0,re.L)($))return function J($,H){return C((0,re.Q)($),H)}($,H)}throw(0,L.z)($)}($,H):(0,c.Xf)($)}},8421:(ht,ge,M)=>{"use strict";M.d(ge,{Xf:()=>k});var c=M(655),ee=M(1144),F=M(8239),K=M(8306),j=M(3670),q=M(2206),R=M(4532),S=M(6495),E=M(3260),_=M(576),T=M(7849),C=M(8822);function k(Z){if(Z instanceof K.y)return Z;if(null!=Z){if((0,j.c)(Z))return function A(Z){return new K.y(X=>{const $=Z[C.L]();if((0,_.m)($.subscribe))return $.subscribe(X);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Z);if((0,ee.z)(Z))return function x(Z){return new K.y(X=>{for(let $=0;$<Z.length&&!X.closed;$++)X.next(Z[$]);X.complete()})}(Z);if((0,F.t)(Z))return function V(Z){return new K.y(X=>{Z.then($=>{X.closed||(X.next($),X.complete())},$=>X.error($)).then(null,T.h)})}(Z);if((0,q.D)(Z))return L(Z);if((0,S.T)(Z))return function D(Z){return new K.y(X=>{for(const $ of Z)if(X.next($),X.closed)return;X.complete()})}(Z);if((0,E.L)(Z))return function re(Z){return L((0,E.Q)(Z))}(Z)}throw(0,R.z)(Z)}function L(Z){return new K.y(X=>{(function J(Z,X){var $,H,W,B;return(0,c.mG)(this,void 0,void 0,function*(){try{for($=(0,c.KL)(Z);!(H=yield $.next()).done;)if(X.next(H.value),X.closed)return}catch(te){W={error:te}}finally{try{H&&!H.done&&(B=$.return)&&(yield B.call($))}finally{if(W)throw W.error}}X.complete()})})(Z,X).catch($=>X.error($))})}},6451:(ht,ge,M)=>{"use strict";M.d(ge,{T:()=>q});var c=M(8189),ee=M(8421),F=M(515),K=M(7669),j=M(8996);function q(...R){const S=(0,K.yG)(R),E=(0,K._6)(R,1/0),_=R;return _.length?1===_.length?(0,ee.Xf)(_[0]):(0,c.J)(E)((0,j.D)(_,S)):F.E}},5403:(ht,ge,M)=>{"use strict";M.d(ge,{x:()=>ee});var c=M(2961);function ee(K,j,q,R,S){return new F(K,j,q,R,S)}class F extends c.Lv{constructor(j,q,R,S,E,_){super(j),this.onFinalize=E,this.shouldUnsubscribe=_,this._next=q?function(T){try{q(T)}catch(C){j.error(C)}}:super._next,this._error=S?function(T){try{S(T)}catch(C){j.error(C)}finally{this.unsubscribe()}}:super._error,this._complete=R?function(){try{R()}catch(T){j.error(T)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var j;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:q}=this;super.unsubscribe(),!q&&(null===(j=this.onFinalize)||void 0===j||j.call(this))}}}},4004:(ht,ge,M)=>{"use strict";M.d(ge,{U:()=>F});var c=M(4482),ee=M(5403);function F(K,j){return(0,c.e)((q,R)=>{let S=0;q.subscribe((0,ee.x)(R,E=>{R.next(K.call(j,E,S++))}))})}},8189:(ht,ge,M)=>{"use strict";M.d(ge,{J:()=>F});var c=M(5577),ee=M(4671);function F(K=1/0){return(0,c.z)(ee.y,K)}},5577:(ht,ge,M)=>{"use strict";M.d(ge,{z:()=>S});var c=M(4004),ee=M(8421),F=M(4482),K=M(9672),j=M(5403),R=M(576);function S(E,_,T=1/0){return(0,R.m)(_)?S((C,k)=>(0,c.U)((A,x)=>_(C,A,k,x))((0,ee.Xf)(E(C,k))),T):("number"==typeof _&&(T=_),(0,F.e)((C,k)=>function q(E,_,T,C,k,A,x,V){const D=[];let L=0,re=0,J=!1;const Z=()=>{J&&!D.length&&!L&&_.complete()},X=H=>L<C?$(H):D.push(H),$=H=>{A&&_.next(H),L++;let W=!1;(0,ee.Xf)(T(H,re++)).subscribe((0,j.x)(_,B=>{null==k||k(B),A?X(B):_.next(B)},()=>{W=!0},void 0,()=>{if(W)try{for(L--;D.length&&L<C;){const B=D.shift();x?(0,K.f)(_,x,()=>$(B)):$(B)}Z()}catch(B){_.error(B)}}))};return E.subscribe((0,j.x)(_,X,()=>{J=!0,Z()})),()=>{null==V||V()}}(C,k,E,T)))}},5363:(ht,ge,M)=>{"use strict";M.d(ge,{Q:()=>K});var c=M(9672),ee=M(4482),F=M(5403);function K(j,q=0){return(0,ee.e)((R,S)=>{R.subscribe((0,F.x)(S,E=>(0,c.f)(S,j,()=>S.next(E),q),()=>(0,c.f)(S,j,()=>S.complete(),q),E=>(0,c.f)(S,j,()=>S.error(E),q)))})}},3099:(ht,ge,M)=>{"use strict";M.d(ge,{B:()=>j});var c=M(8421),ee=M(7579),F=M(2961),K=M(4482);function j(R={}){const{connector:S=(()=>new ee.x),resetOnError:E=!0,resetOnComplete:_=!0,resetOnRefCountZero:T=!0}=R;return C=>{let k,A,x,V=0,D=!1,L=!1;const re=()=>{null==A||A.unsubscribe(),A=void 0},J=()=>{re(),k=x=void 0,D=L=!1},Z=()=>{const X=k;J(),null==X||X.unsubscribe()};return(0,K.e)((X,$)=>{V++,!L&&!D&&re();const H=x=null!=x?x:S();$.add(()=>{V--,0===V&&!L&&!D&&(A=q(Z,T))}),H.subscribe($),!k&&V>0&&(k=new F.Hp({next:W=>H.next(W),error:W=>{L=!0,re(),A=q(J,E,W),H.error(W)},complete:()=>{D=!0,re(),A=q(J,_),H.complete()}}),(0,c.Xf)(X).subscribe(k))})(C)}}function q(R,S,...E){if(!0===S)return void R();if(!1===S)return;const _=new F.Hp({next:()=>{_.unsubscribe(),R()}});return S(...E).subscribe(_)}},9468:(ht,ge,M)=>{"use strict";M.d(ge,{R:()=>ee});var c=M(4482);function ee(F,K=0){return(0,c.e)((j,q)=>{q.add(F.schedule(()=>j.subscribe(q),K))})}},8505:(ht,ge,M)=>{"use strict";M.d(ge,{b:()=>j});var c=M(576),ee=M(4482),F=M(5403),K=M(4671);function j(q,R,S){const E=(0,c.m)(q)||R||S?{next:q,error:R,complete:S}:q;return E?(0,ee.e)((_,T)=>{var C;null===(C=E.subscribe)||void 0===C||C.call(E);let k=!0;_.subscribe((0,F.x)(T,A=>{var x;null===(x=E.next)||void 0===x||x.call(E,A),T.next(A)},()=>{var A;k=!1,null===(A=E.complete)||void 0===A||A.call(E),T.complete()},A=>{var x;k=!1,null===(x=E.error)||void 0===x||x.call(E,A),T.error(A)},()=>{var A,x;k&&(null===(A=E.unsubscribe)||void 0===A||A.call(E)),null===(x=E.finalize)||void 0===x||x.call(E)}))}):K.y}},4408:(ht,ge,M)=>{"use strict";M.d(ge,{o:()=>j});var c=M(727);class ee extends c.w0{constructor(R,S){super()}schedule(R,S=0){return this}}const F={setInterval(q,R,...S){const{delegate:E}=F;return(null==E?void 0:E.setInterval)?E.setInterval(q,R,...S):setInterval(q,R,...S)},clearInterval(q){const{delegate:R}=F;return((null==R?void 0:R.clearInterval)||clearInterval)(q)},delegate:void 0};var K=M(8737);class j extends ee{constructor(R,S){super(R,S),this.scheduler=R,this.work=S,this.pending=!1}schedule(R,S=0){if(this.closed)return this;this.state=R;const E=this.id,_=this.scheduler;return null!=E&&(this.id=this.recycleAsyncId(_,E,S)),this.pending=!0,this.delay=S,this.id=this.id||this.requestAsyncId(_,this.id,S),this}requestAsyncId(R,S,E=0){return F.setInterval(R.flush.bind(R,this),E)}recycleAsyncId(R,S,E=0){if(null!=E&&this.delay===E&&!1===this.pending)return S;F.clearInterval(S)}execute(R,S){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const E=this._execute(R,S);if(E)return E;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(R,S){let _,E=!1;try{this.work(R)}catch(T){E=!0,_=T||new Error("Scheduled action threw falsy error")}if(E)return this.unsubscribe(),_}unsubscribe(){if(!this.closed){const{id:R,scheduler:S}=this,{actions:E}=S;this.work=this.state=this.scheduler=null,this.pending=!1,(0,K.P)(E,this),null!=R&&(this.id=this.recycleAsyncId(S,R,null)),this.delay=null,super.unsubscribe()}}}},7565:(ht,ge,M)=>{"use strict";M.d(ge,{v:()=>F});var c=M(6063);class ee{constructor(j,q=ee.now){this.schedulerActionCtor=j,this.now=q}schedule(j,q=0,R){return new this.schedulerActionCtor(this,j).schedule(R,q)}}ee.now=c.l.now;class F extends ee{constructor(j,q=ee.now){super(j,q),this.actions=[],this._active=!1,this._scheduled=void 0}flush(j){const{actions:q}=this;if(this._active)return void q.push(j);let R;this._active=!0;do{if(R=j.execute(j.state,j.delay))break}while(j=q.shift());if(this._active=!1,R){for(;j=q.shift();)j.unsubscribe();throw R}}}},4986:(ht,ge,M)=>{"use strict";M.d(ge,{z:()=>F});var c=M(4408);const F=new(M(7565).v)(c.o)},6063:(ht,ge,M)=>{"use strict";M.d(ge,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(ht,ge,M)=>{"use strict";M.d(ge,{z:()=>c});const c={setTimeout(ee,F,...K){const{delegate:j}=c;return(null==j?void 0:j.setTimeout)?j.setTimeout(ee,F,...K):setTimeout(ee,F,...K)},clearTimeout(ee){const{delegate:F}=c;return((null==F?void 0:F.clearTimeout)||clearTimeout)(ee)},delegate:void 0}},2202:(ht,ge,M)=>{"use strict";M.d(ge,{h:()=>ee});const ee=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ht,ge,M)=>{"use strict";M.d(ge,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ht,ge,M)=>{"use strict";M.d(ge,{_6:()=>q,jO:()=>K,yG:()=>j});var c=M(576);function F(R){return R[R.length-1]}function K(R){return(0,c.m)(F(R))?R.pop():void 0}function j(R){return function ee(R){return R&&(0,c.m)(R.schedule)}(F(R))?R.pop():void 0}function q(R,S){return"number"==typeof F(R)?R.pop():S}},8737:(ht,ge,M)=>{"use strict";function c(ee,F){if(ee){const K=ee.indexOf(F);0<=K&&ee.splice(K,1)}}M.d(ge,{P:()=>c})},3888:(ht,ge,M)=>{"use strict";function c(ee){const K=ee(j=>{Error.call(j),j.stack=(new Error).stack});return K.prototype=Object.create(Error.prototype),K.prototype.constructor=K,K}M.d(ge,{d:()=>c})},2806:(ht,ge,M)=>{"use strict";M.d(ge,{x:()=>F,O:()=>K});var c=M(2416);let ee=null;function F(j){if(c.v.useDeprecatedSynchronousErrorHandling){const q=!ee;if(q&&(ee={errorThrown:!1,error:null}),j(),q){const{errorThrown:R,error:S}=ee;if(ee=null,R)throw S}}else j()}function K(j){c.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=j)}},9672:(ht,ge,M)=>{"use strict";function c(ee,F,K,j=0,q=!1){const R=F.schedule(function(){K(),q?ee.add(this.schedule(null,j)):this.unsubscribe()},j);if(ee.add(R),!q)return R}M.d(ge,{f:()=>c})},4671:(ht,ge,M)=>{"use strict";function c(ee){return ee}M.d(ge,{y:()=>c})},1144:(ht,ge,M)=>{"use strict";M.d(ge,{z:()=>c});const c=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(ht,ge,M)=>{"use strict";M.d(ge,{D:()=>ee});var c=M(576);function ee(F){return Symbol.asyncIterator&&(0,c.m)(null==F?void 0:F[Symbol.asyncIterator])}},576:(ht,ge,M)=>{"use strict";function c(ee){return"function"==typeof ee}M.d(ge,{m:()=>c})},3670:(ht,ge,M)=>{"use strict";M.d(ge,{c:()=>F});var c=M(8822),ee=M(576);function F(K){return(0,ee.m)(K[c.L])}},6495:(ht,ge,M)=>{"use strict";M.d(ge,{T:()=>F});var c=M(2202),ee=M(576);function F(K){return(0,ee.m)(null==K?void 0:K[c.h])}},8239:(ht,ge,M)=>{"use strict";M.d(ge,{t:()=>ee});var c=M(576);function ee(F){return(0,c.m)(null==F?void 0:F.then)}},3260:(ht,ge,M)=>{"use strict";M.d(ge,{Q:()=>F,L:()=>K});var c=M(655),ee=M(576);function F(j){return(0,c.FC)(this,arguments,function*(){const R=j.getReader();try{for(;;){const{value:S,done:E}=yield(0,c.qq)(R.read());if(E)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(S)}}finally{R.releaseLock()}})}function K(j){return(0,ee.m)(null==j?void 0:j.getReader)}},4482:(ht,ge,M)=>{"use strict";M.d(ge,{A:()=>ee,e:()=>F});var c=M(576);function ee(K){return(0,c.m)(null==K?void 0:K.lift)}function F(K){return j=>{if(ee(j))return j.lift(function(q){try{return K(q,this)}catch(R){this.error(R)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(ht,ge,M)=>{"use strict";M.d(ge,{h:()=>F});var c=M(2416),ee=M(3410);function F(K){ee.z.setTimeout(()=>{const{onUnhandledError:j}=c.v;if(!j)throw K;j(K)})}},4532:(ht,ge,M)=>{"use strict";function c(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(ge,{z:()=>c})},655:(ht,ge,M)=>{"use strict";function K(Y,de){var ue={};for(var be in Y)Object.prototype.hasOwnProperty.call(Y,be)&&de.indexOf(be)<0&&(ue[be]=Y[be]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var ce=0;for(be=Object.getOwnPropertySymbols(Y);ce<be.length;ce++)de.indexOf(be[ce])<0&&Object.prototype.propertyIsEnumerable.call(Y,be[ce])&&(ue[be[ce]]=Y[be[ce]])}return ue}function S(Y,de,ue,be){return new(ue||(ue=Promise))(function(le,ie){function fe(xe){try{_e(be.next(xe))}catch(he){ie(he)}}function me(xe){try{_e(be.throw(xe))}catch(he){ie(he)}}function _e(xe){xe.done?le(xe.value):function ce(le){return le instanceof ue?le:new ue(function(ie){ie(le)})}(xe.value).then(fe,me)}_e((be=be.apply(Y,de||[])).next())})}function D(Y){return this instanceof D?(this.v=Y,this):new D(Y)}function L(Y,de,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,be=ue.apply(Y,de||[]),le=[];return ce={},ie("next"),ie("throw"),ie("return"),ce[Symbol.asyncIterator]=function(){return this},ce;function ie(Ie){be[Ie]&&(ce[Ie]=function(ke){return new Promise(function(Re,Ue){le.push([Ie,ke,Re,Ue])>1||fe(Ie,ke)})})}function fe(Ie,ke){try{!function me(Ie){Ie.value instanceof D?Promise.resolve(Ie.value.v).then(_e,xe):he(le[0][2],Ie)}(be[Ie](ke))}catch(Re){he(le[0][3],Re)}}function _e(Ie){fe("next",Ie)}function xe(Ie){fe("throw",Ie)}function he(Ie,ke){Ie(ke),le.shift(),le.length&&fe(le[0][0],le[0][1])}}function J(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,de=Y[Symbol.asyncIterator];return de?de.call(Y):(Y=function C(Y){var de="function"==typeof Symbol&&Symbol.iterator,ue=de&&Y[de],be=0;if(ue)return ue.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&be>=Y.length&&(Y=void 0),{value:Y&&Y[be++],done:!Y}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),ue={},be("next"),be("throw"),be("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function be(le){ue[le]=Y[le]&&function(ie){return new Promise(function(fe,me){!function ce(le,ie,fe,me){Promise.resolve(me).then(function(_e){le({value:_e,done:fe})},ie)}(fe,me,(ie=Y[le](ie)).done,ie.value)})}}}M.d(ge,{_T:()=>K,mG:()=>S,qq:()=>D,FC:()=>L,KL:()=>J})},5e3:(ht,ge,M)=>{"use strict";M.d(ge,{deG:()=>Ch,tb:()=>fw,AFp:()=>C_,ip1:()=>D_,CZH:()=>T_,hGG:()=>Lw,z2F:()=>lp,sBO:()=>xw,Sil:()=>GD,_Vd:()=>sa,EJc:()=>pw,SBq:()=>ou,qLn:()=>Dd,vpe:()=>Si,tBr:()=>xt,XFs:()=>He,OlP:()=>Sn,zs3:()=>Is,ZZ4:()=>G_,aQg:()=>Z_,soG:()=>S_,YKP:()=>kE,h0i:()=>Qd,PXZ:()=>yl,R0b:()=>xs,FiY:()=>Vt,Lbi:()=>hw,g9A:()=>Rc,Qsj:()=>zf,FYo:()=>Zd,JOm:()=>G,q3G:()=>sn,tp0:()=>Mn,Rgc:()=>uu,dDg:()=>k_,q4F:()=>As,GfV:()=>dl,s_b:()=>Xf,ifc:()=>At,eFA:()=>Iw,G48:()=>Fm,Gpc:()=>T,X6Q:()=>Aw,_c5:()=>Pw,VLi:()=>bw,c2e:()=>A_,zSh:()=>Ng,wAp:()=>Pt,vHH:()=>x,EiD:()=>wd,mCW:()=>fo,qzn:()=>ho,JVY:()=>Wl,pB0:()=>Zl,eBb:()=>Rh,L6k:()=>Up,LAX:()=>cy,cg1:()=>Pf,kL8:()=>dE,yhl:()=>Bu,dqk:()=>tn,sIi:()=>Xu,CqO:()=>qb,QGY:()=>Ev,F4k:()=>mc,RDi:()=>Al,AaK:()=>S,z3N:()=>_s,qOj:()=>pt,TTD:()=>Li,_Bn:()=>Tc,xp6:()=>Jh,uIk:()=>jd,ekj:()=>im,Suo:()=>m_,Xpm:()=>rt,lG2:()=>Os,Yz7:()=>ke,cJS:()=>Ue,oAB:()=>Qt,Yjl:()=>ca,Y36:()=>gc,_UZ:()=>bv,qZA:()=>Ef,TgZ:()=>Hd,EpF:()=>jb,n5z:()=>$i,LFG:()=>U,$8M:()=>$s,$Z:()=>yv,NdJ:()=>wv,CRH:()=>XE,oxw:()=>Dv,ALo:()=>qE,lcZ:()=>c_,Hsn:()=>$d,F$t:()=>Tv,Q6J:()=>vv,MGl:()=>Tf,iGM:()=>np,CHM:()=>Eu,oJD:()=>jh,uOi:()=>Ga,LSH:()=>$u,kYT:()=>qr,Akn:()=>Ds,YNc:()=>vf,_uU:()=>Rv,Oqu:()=>sm,hij:()=>eu});var c=M(7579),ee=M(727),F=M(8306),K=M(6451),j=M(3099);function q(i){for(let o in i)if(i[o]===q)return o;throw Error("Could not find renamed property on target object.")}function R(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function S(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(S).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function E(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const _=q({__forward_ref__:q});function T(i){return i.__forward_ref__=T,i.toString=function(){return S(this())},i}function C(i){return k(i)?i():i}function k(i){return"function"==typeof i&&i.hasOwnProperty(_)&&i.__forward_ref__===T}class x extends Error{constructor(o,a){super(function V(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function D(i){return"string"==typeof i?i:null==i?"":String(i)}function L(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():D(i)}function X(i,o){const a=o?` in ${o}`:"";throw new x(-201,`No provider for ${L(i)} found${a}`)}function me(i,o){null==i&&function _e(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function ke(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ue(i){return{providers:i.providers||[],imports:i.imports||[]}}function Qe(i){return Et(i,wn)||Et(i,Be)}function Et(i,o){return i.hasOwnProperty(o)?i[o]:null}function Bt(i){return i&&(i.hasOwnProperty(mn)||i.hasOwnProperty(qe))?i[mn]:null}const wn=q({\u0275prov:q}),mn=q({\u0275inj:q}),Be=q({ngInjectableDef:q}),qe=q({ngInjectorDef:q});var He=(()=>((He=He||{})[He.Default=0]="Default",He[He.Host=1]="Host",He[He.Self=2]="Self",He[He.SkipSelf=4]="SkipSelf",He[He.Optional=8]="Optional",He))();let it;function vt(i){const o=it;return it=i,o}function Rt(i,o,a){const l=Qe(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&He.Optional?null:void 0!==o?o:void X(S(i),"Injector")}function on(i){return{toString:i}.toString()}var fn=(()=>((fn=fn||{})[fn.OnPush=0]="OnPush",fn[fn.Default=1]="Default",fn))(),At=(()=>{return(i=At||(At={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",At;var i})();const ft="undefined"!=typeof globalThis&&globalThis,Ft="undefined"!=typeof window&&window,_r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,tn=ft||"undefined"!=typeof global&&global||Ft||_r,Or={},Tt=[],Co=q({\u0275cmp:q}),Ee=q({\u0275dir:q}),Ae=q({\u0275pipe:q}),ve=q({\u0275mod:q}),De=q({\u0275fac:q}),Ce=q({__NG_ELEMENT_ID__:q});let Ze=0;function rt(i){return on(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===fn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||Tt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||At.Emulated,id:"c",styles:i.styles||Tt,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,p=i.features,v=i.pipes;return l.id+=Ze++,l.inputs=Oi(i.inputs,a),l.outputs=Oi(i.outputs),p&&p.forEach(I=>I(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(yn):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(un):null,l})}function yn(i){return Jn(i)||function Mr(i){return i[Ee]||null}(i)}function un(i){return function no(i){return i[Ae]||null}(i)}const sr={};function Qt(i){return on(()=>{const o={type:i.type,bootstrap:i.bootstrap||Tt,declarations:i.declarations||Tt,imports:i.imports||Tt,exports:i.exports||Tt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(sr[i.id]=i.type),o})}function qr(i,o){return on(()=>{const a=Xn(i,!0);a.declarations=o.declarations||Tt,a.imports=o.imports||Tt,a.exports=o.exports||Tt})}function Oi(i,o){if(null==i)return Or;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,o&&(o[d]=p)}return a}const Os=rt;function ca(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Jn(i){return i[Co]||null}function Xn(i,o){const a=i[ve]||null;if(!a&&!0===o)throw new Error(`Type ${S(i)} does not have '\u0275mod' property.`);return a}function zr(i){return Array.isArray(i)&&"object"==typeof i[1]}function ki(i){return Array.isArray(i)&&!0===i[1]}function yu(i){return 0!=(8&i.flags)}function $c(i){return 2==(2&i.flags)}function Ri(i){return 1==(1&i.flags)}function Pi(i){return null!==i.template}function Il(i){return 0!=(512&i[2])}function wr(i,o){return i.hasOwnProperty(De)?i[De]:null}class Jo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Li(){return ks}function ks(i){return i.type.prototype.ngOnChanges&&(i.setInput=Eh),Jc}function Jc(){const i=Xo(this),o=null==i?void 0:i.current;if(o){const a=i.previous;if(a===Or)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Eh(i,o,a,l){const d=Xo(i)||function Rs(i,o){return i[Xc]=o}(i,{previous:Or,current:null}),p=d.current||(d.current={}),v=d.previous,I=this.declaredInputs[a],N=v[I];p[I]=new Jo(N&&N.currentValue,o,v===Or),i[l]=o}Li.ngInherit=!0;const Xc="__ngSimpleChanges__";function Xo(i){return i[Xc]||null}let Ps;function Al(i){Ps=i}function Fi(){return void 0!==Ps?Ps:"undefined"!=typeof document?document:void 0}function bn(i){return!!i.listen}const ga={createRenderer:(i,o)=>Fi()};function pn(i){for(;Array.isArray(i);)i=i[0];return i}function ko(i,o){return pn(o[i])}function fr(i,o){return pn(o[i.index])}function On(i,o){return i.data[o]}function pr(i,o){const a=o[i];return zr(a)?a:a[0]}function ns(i){return 4==(4&i[2])}function io(i){return 128==(128&i[2])}function _i(i,o){return null==o?null:i[o]}function Ui(i){i[18]=0}function Ls(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const St={lFrame:nd(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function _a(){return St.bindingsEnabled}function We(){return St.lFrame.lView}function Jt(){return St.lFrame.tView}function Eu(i){return St.lFrame.contextLView=i,i[8]}function An(){let i=Vs();for(;null!==i&&64===i.type;)i=i.parent;return i}function Vs(){return St.lFrame.currentTNode}function ii(i,o){const a=St.lFrame;a.currentTNode=i,a.isParent=o}function ba(){return St.lFrame.isParent}function Nl(){St.lFrame.isParent=!1}function Ea(){return St.isInCheckNoChangesMode}function Iu(i){St.isInCheckNoChangesMode=i}function Ro(){return St.lFrame.bindingIndex++}function bi(i){const o=St.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function Rl(i,o){const a=St.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ia(o)}function Ia(i){St.lFrame.currentDirectiveIndex=i}function Pl(){return St.lFrame.currentQueryIndex}function Ta(i){St.lFrame.currentQueryIndex=i}function xp(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function Ll(i,o,a){if(a&He.SkipSelf){let d=o,p=i;for(;!(d=d.parent,null!==d||a&He.Host||(d=xp(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,i=p}const l=St.lFrame=Ca();return l.currentTNode=o,l.lView=i,!0}function Us(i){const o=Ca(),a=i[1];St.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Ca(){const i=St.lFrame,o=null===i?null:i.child;return null===o?nd(i):o}function nd(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Bs(){const i=St.lFrame;return St.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const rd=Bs;function js(){const i=Bs();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function ar(){return St.lFrame.selectedIndex}function ji(i){St.lFrame.selectedIndex=i}function Nn(){const i=St.lFrame;return On(i.tView,i.selectedIndex)}function od(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:N,ngAfterViewChecked:z,ngOnDestroy:ne}=p;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),N&&(i.viewHooks||(i.viewHooks=[])).push(-a,N),z&&((i.viewHooks||(i.viewHooks=[])).push(a,z),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,z)),null!=ne&&(i.destroyHooks||(i.destroyHooks=[])).push(a,ne)}}function Aa(i,o,a){ur(i,o,3,a)}function so(i,o,a,l){(3&i[2])===a&&ur(i,o,a,l)}function qs(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function ur(i,o,a,l){const p=null!=l?l:-1,v=o.length-1;let I=0;for(let N=void 0!==l?65535&i[18]:0;N<v;N++)if("number"==typeof o[N+1]){if(I=o[N],null!=l&&I>=l)break}else o[N]<0&&(i[18]+=65536),(I<p||-1==p)&&(Th(i,a,o,N),i[18]=(4294901760&i[18])+N+2),N++}function Th(i,o,a,l){const d=a[l]<0,p=a[l+1],I=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(I)}finally{}}}else try{p.call(I)}finally{}}class Cu{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function mt(i,o,a){const l=bn(i);let d=0;for(;d<a.length;){const p=a[d];if("number"==typeof p){if(0!==p)break;d++;const v=a[d++],I=a[d++],N=a[d++];l?i.setAttribute(o,I,N,v):o.setAttributeNS(v,I,N)}else{const v=p,I=a[++d];si(v)?l&&i.setProperty(o,v,I):l?i.setAttribute(o,v,I):o.setAttribute(v,I),d++}}return d}function oi(i){return 3===i||4===i||6===i}function si(i){return 64===i.charCodeAt(0)}function Zn(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Vl(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function Vl(i,o,a,l,d){let p=0,v=i.length;if(-1===o)v=-1;else for(;p<i.length;){const I=i[p++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=p-1;break}}}for(;p<i.length;){const I=i[p];if("number"==typeof I)break;if(I===a){if(null===l)return void(null!==d&&(i[p+1]=d));if(l===i[p+1])return void(i[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==v&&(i.splice(v,0,o),p=v+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==d&&i.splice(p++,0,d)}function ad(i){return-1!==i}function qi(i){return 32767&i}function In(i,o){let a=function Ul(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let xa=!0;function Ei(i){const o=xa;return xa=i,o}let ld=0;function Kn(i,o){const a=xu(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,Lo(l.data,i),Lo(o,null),Lo(l.blueprint,null));const d=Hi(i,o),p=i.injectorIndex;if(ad(d)){const v=qi(d),I=In(d,o),N=I[1].data;for(let z=0;z<8;z++)o[p+z]=I[v+z]|N[v+z]}return o[p+8]=d,p}function Lo(i,o){i.push(0,0,0,0,0,0,0,0,o)}function xu(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Hi(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const p=d[1],v=p.type;if(l=2===v?p.declTNode:1===v?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Fo(i,o,a){!function Oa(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Ce)&&(l=a[Ce]),null==l&&(l=a[Ce]=ld++);const d=255&l;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function ss(i,o,a){if(a&He.Optional)return i;X(o,"NodeInjector")}function Na(i,o,a,l){if(a&He.Optional&&void 0===l&&(l=null),0==(a&(He.Self|He.Host))){const d=i[9],p=vt(void 0);try{return d?d.get(o,l,a&He.Optional):Rt(o,l,a&He.Optional)}finally{vt(p)}}return ss(l,o,a)}function as(i,o,a,l=He.Default,d){if(null!==i){const p=function Uo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Ce)?i[Ce]:void 0;return"number"==typeof o?o>=0?255&o:ka:o}(a);if("function"==typeof p){if(!Ll(o,i,l))return l&He.Host?ss(d,a,l):Na(o,a,l,d);try{const v=p(l);if(null!=v||l&He.Optional)return v;X(a)}finally{rd()}}else if("number"==typeof p){let v=null,I=xu(i,o),N=-1,z=l&He.Host?o[16][6]:null;for((-1===I||l&He.SkipSelf)&&(N=-1===I?Hi(i,o):o[I+8],-1!==N&&lr(l,!1)?(v=o[1],I=qi(N),o=In(N,o)):I=-1);-1!==I;){const ne=o[1];if(Bo(p,I,ne.data)){const pe=Ra(I,o,a,v,l,z);if(pe!==us)return pe}N=o[I+8],-1!==N&&lr(l,o[1].data[I+8]===z)&&Bo(p,I,o)?(v=ne,I=qi(N),o=In(N,o)):I=-1}}}return Na(o,a,l,d)}const us={};function ka(){return new ls(An(),We())}function Ra(i,o,a,l,d,p){const v=o[1],I=v.data[i+8],ne=Vo(I,v,a,null==l?$c(I)&&xa:l!=v&&0!=(3&I.type),d&He.Host&&p===I);return null!==ne?Hs(o,v,ne,I):us}function Vo(i,o,a,l,d){const p=i.providerIndexes,v=o.data,I=1048575&p,N=i.directiveStart,ne=p>>20,Te=d?I+ne:i.directiveEnd;for(let Ne=l?I:I+ne;Ne<Te;Ne++){const $e=v[Ne];if(Ne<N&&a===$e||Ne>=N&&$e.type===a)return Ne}if(d){const Ne=v[N];if(Ne&&Pi(Ne)&&Ne.type===a)return N}return null}function Hs(i,o,a,l){let d=i[a];const p=o.data;if(function sd(i){return i instanceof Cu}(d)){const v=d;v.resolving&&function re(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new x(-200,`Circular dependency in DI detected for ${i}${a}`)}(L(p[a]));const I=Ei(v.canSeeViewProviders);v.resolving=!0;const N=v.injectImpl?vt(v.injectImpl):null;Ll(i,l,He.Default);try{d=i[a]=v.factory(void 0,p,i,l),o.firstCreatePass&&a>=l.directiveStart&&function Op(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const v=ks(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==N&&vt(N),Ei(I),v.resolving=!1,rd()}}return d}function Bo(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function lr(i,o){return!(i&He.Self||i&He.Host&&o)}class ls{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return as(this._tNode,this._lView,o,l,a)}}function $i(i){return on(()=>{const o=i.prototype.constructor,a=o[De]||jn(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const p=d[De]||jn(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function jn(i){return k(i)?()=>{const o=jn(C(i));return o&&o()}:wr(i)}function $s(i){return function Ma(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(oi(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(An(),i)}const jo="__parameters__";function qn(i,o,a){return on(()=>{const l=function Ir(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const v=new d(...p);return I.annotation=v,I;function I(N,z,ne){const pe=N.hasOwnProperty(jo)?N[jo]:Object.defineProperty(N,jo,{value:[]})[jo];for(;pe.length<=ne;)pe.push(null);return(pe[ne]=pe[ne]||[]).push(v),N}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Sn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=ke({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ch=new Sn("AnalyzeForEntryComponents");function ai(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),ai(l,o)):o!==i&&o.push(l)}return o}function ui(i,o){i.forEach(a=>Array.isArray(a)?ui(a,o):o(a))}function zs(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function ds(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function ku(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}function Hn(i,o,a){let l=Di(i,o);return l>=0?i[1|l]=a:(l=~l,function hs(i,o,a,l){let d=i.length;if(d==o)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function Ho(i,o){const a=Di(i,o);if(a>=0)return i[1|a]}function Di(i,o){return function Lu(i,o,a){let l=0,d=i.length>>a;for(;d!==l;){const p=l+(d-l>>1),v=i[p<<a];if(o===v)return p<<a;v>o?d=p:l=p+1}return~(d<<a)}(i,o,1)}const Va={},li="__NG_DI_FLAG__",fs="ngTempTokenPath",xh=/\n/gm,Ua="__source",Gl=q({provide:String,useValue:q});let $o;function ps(i){const o=$o;return $o=i,o}function O(i,o=He.Default){if(void 0===$o)throw new x(203,"");return null===$o?Rt(i,void 0,o):$o.get(i,o&He.Optional?null:void 0,o)}function U(i,o=He.Default){return(function ze(){return it}()||O)(C(i),o)}const ye=U;function Oe(i){const o=[];for(let a=0;a<i.length;a++){const l=C(i[a]);if(Array.isArray(l)){if(0===l.length)throw new x(900,"");let d,p=He.Default;for(let v=0;v<l.length;v++){const I=l[v],N=Ke(I);"number"==typeof N?-1===N?d=I.token:p|=N:d=I}o.push(U(d,p))}else o.push(U(l))}return o}function Pe(i,o){return i[li]=o,i.prototype[li]=o,i}function Ke(i){return i[li]}const xt=Pe(qn("Inject",i=>({token:i})),-1),Vt=Pe(qn("Optional"),8),Mn=Pe(qn("SkipSelf"),4);let ys,md;function Ba(i){var o;return(null===(o=function gd(){if(void 0===ys&&(ys=null,tn.trustedTypes))try{ys=tn.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return ys}())||void 0===o?void 0:o.createHTML(i))||i}function Ws(){if(void 0===md&&(md=null,tn.trustedTypes))try{md=tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return md}function Mh(i){var o;return(null===(o=Ws())||void 0===o?void 0:o.createHTML(i))||i}function Nh(i){var o;return(null===(o=Ws())||void 0===o?void 0:o.createScriptURL(i))||i}class vs{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class kh extends vs{getTypeName(){return"HTML"}}class Vp extends vs{getTypeName(){return"Style"}}class zl extends vs{getTypeName(){return"Script"}}class uy extends vs{getTypeName(){return"URL"}}class ly extends vs{getTypeName(){return"ResourceURL"}}function _s(i){return i instanceof vs?i.changingThisBreaksApplicationSecurity:i}function ho(i,o){const a=Bu(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}function Bu(i){return i instanceof vs&&i.getTypeName()||null}function Wl(i){return new kh(i)}function Up(i){return new Vp(i)}function Rh(i){return new zl(i)}function cy(i){return new uy(i)}function Zl(i){return new ly(i)}class jp{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(Ba(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class qp{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Ba(o),a;const l=this.inertDocument.createElement("body");return l.innerHTML=Ba(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(o){const a=o.attributes;for(let d=a.length-1;0<d;d--){const v=a.item(d).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&o.removeAttribute(v)}let l=o.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const vd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,$p=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function fo(i){return(i=String(i)).match(vd)||i.match($p)?i:"unsafe:"+i}function po(i){const o={};for(const a of i.split(","))o[a]=!0;return o}function qa(...i){const o={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(o[l]=!0);return o}const Gp=po("area,br,col,hr,img,wbr"),_d=po("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),bd=po("rp,rt"),Lh=qa(Gp,qa(_d,po("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),qa(bd,po("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),qa(bd,_d)),Kl=po("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Fh=po("srcset"),qu=qa(Kl,Fh,po("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),po("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),dy=po("script,style,template");class Hu{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!Lh.hasOwnProperty(a))return this.sanitizedSomething=!0,!dy.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=o.attributes;for(let d=0;d<l.length;d++){const p=l.item(d),v=p.name,I=v.toLowerCase();if(!qu.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let N=p.value;Kl[I]&&(N=fo(N)),Fh[I]&&(i=N,N=(i=String(i)).split(",").map(o=>fo(o.trim())).join(", ")),this.buf.push(" ",v,'="',Vh(N),'"')}var i;return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();Lh.hasOwnProperty(a)&&!Gp.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(Vh(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const Yl=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hy=/([^\#-~ |!])/g;function Vh(i){return i.replace(/&/g,"&amp;").replace(Yl,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(hy,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $a;function wd(i,o){let a=null;try{$a=$a||function Bp(i){const o=new qp(i);return function Hp(){try{return!!(new window.DOMParser).parseFromString(Ba(""),"text/html")}catch(i){return!1}}()?new jp(o):o}(i);let l=o?String(o):"";a=$a.getInertBodyElement(l);let d=5,p=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=p,p=a.innerHTML,a=$a.getInertBodyElement(l)}while(l!==p);return Ba((new Hu).sanitizeChildren(Uh(a)||a))}finally{if(a){const l=Uh(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Uh(i){return"content"in i&&function Bh(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var sn=(()=>((sn=sn||{})[sn.NONE=0]="NONE",sn[sn.HTML=1]="HTML",sn[sn.STYLE=2]="STYLE",sn[sn.SCRIPT=3]="SCRIPT",sn[sn.URL=4]="URL",sn[sn.RESOURCE_URL=5]="RESOURCE_URL",sn))();function jh(i){const o=Ks();return o?Mh(o.sanitize(sn.HTML,i)||""):ho(i,"HTML")?Mh(_s(i)):wd(Fi(),D(i))}function $u(i){const o=Ks();return o?o.sanitize(sn.URL,i)||"":ho(i,"URL")?_s(i):fo(D(i))}function Ga(i){const o=Ks();if(o)return Nh(o.sanitize(sn.RESOURCE_URL,i)||"");if(ho(i,"ResourceURL"))return Nh(_s(i));throw new x(904,"")}function Ks(){const i=We();return i&&i[12]}const Hh="__ngContext__";function gr(i,o){i[Hh]=o}function Id(i){const o=function Wa(i){return i[Hh]||null}(i);return o?Array.isArray(o)?o:o.lView:null}function di(i){return i.ngOriginalError}function by(i,...o){i.error(...o)}class Dd{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function Xp(i){return i&&i.ngErrorLogger||by}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&di(o);for(;a&&di(a);)a=di(a);return a||null}}const wy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(tn))();function go(i){return i instanceof Function?i():i}var G=(()=>((G=G||{})[G.Important=1]="Important",G[G.DashCase=2]="DashCase",G))();function Se(i,o){return undefined(i,o)}function dt(i){const o=i[3];return ki(o)?o[3]:o}function Pn(i){return Xl(i[13])}function fi(i){return Xl(i[4])}function Xl(i){for(;null!==i&&!ki(i);)i=i[4];return i}function Ys(i,o,a,l,d){if(null!=l){let p,v=!1;ki(l)?p=l:zr(l)&&(v=!0,l=l[0]);const I=pn(l);0===i&&null!==a?null==d?Sy(o,a,I):mo(o,a,I,d||null,!0):1===i&&null!==a?mo(o,a,I,d||null,!0):2===i?function Ny(i,o,a){const l=Qh(i,o);l&&function fI(i,o,a,l){bn(i)?i.removeChild(o,a,l):o.removeChild(a)}(i,l,o,a)}(o,I,v):3===i&&o.destroyNode(I),null!=p&&function C0(i,o,a,l,d){const p=a[7];p!==pn(a)&&Ys(o,i,l,p,d);for(let I=10;I<a.length;I++){const N=a[I];ag(N[1],N,i,o,l,p)}}(o,i,p,a,d)}}function Ad(i,o,a){if(bn(i))return i.createElement(o,a);{const l=null!==a?function Cl(i){const o=i.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(o):i.createElementNS(l,o)}}function Dy(i,o){const a=i[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Ls(d,-1)),a.splice(l,1)}function Ty(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&Dy(d,l),o>0&&(i[a-1][4]=l[4]);const p=ds(i,10+o);!function Cr(i,o){ag(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=p[19];null!==v&&v.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Cy(i,o){if(!(256&o[2])){const a=o[11];bn(a)&&a.destroyNode&&ag(i,o,a,3,null,null),function Sd(i){let o=i[13];if(!o)return Ay(i[1],i);for(;o;){let a=null;if(zr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)zr(o)&&Ay(o[1],o),o=o[3];null===o&&(o=i),zr(o)&&Ay(o[1],o),a=o&&o[4]}o=a}}(o)}}function Ay(i,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function _0(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Cu)){const p=a[l+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const I=d[p[v]],N=p[v+1];try{N.call(I)}finally{}}else try{p.call(d)}finally{}}}}(i,o),function v0(i,o){const a=i.cleanup,l=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const v=a[p+1],I="function"==typeof v?v(o):pn(o[v]),N=l[d=a[p+2]],z=a[p+3];"boolean"==typeof z?I.removeEventListener(a[p],N,z):z>=0?l[d=z]():l[d=-z].unsubscribe(),p+=2}else{const v=l[d=a[p+1]];a[p].call(v)}if(null!==l){for(let p=d+1;p<l.length;p++)l[p]();o[7]=null}}(i,o),1===o[1].type&&bn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&ki(o[3])){a!==o[3]&&Dy(a,o);const l=o[19];null!==l&&l.detachView(i)}}}function og(i,o,a){return function hI(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===At.None||d===At.Emulated)return null}return fr(l,a)}(i,o.parent,a)}function mo(i,o,a,l,d){bn(i)?i.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function Sy(i,o,a){bn(i)?i.appendChild(o,a):o.appendChild(a)}function b0(i,o,a,l,d){null!==l?mo(i,o,a,l,d):Sy(i,o,a)}function Qh(i,o){return bn(i)?i.parentNode(o):o.parentNode}function E0(i,o,a){return xy(i,o,a)}let xy=function w0(i,o,a){return 40&i.type?fr(i,a):null};function sg(i,o,a,l){const d=og(i,l,o),p=o[11],I=E0(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let N=0;N<a.length;N++)b0(p,d,a[N],I,!1);else b0(p,d,a,I,!1)}function xd(i,o){if(null!==o){const a=o.type;if(3&a)return fr(o,i);if(4&a)return My(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return xd(i,l);{const d=i[o.index];return ki(d)?My(-1,d):pn(d)}}if(32&a)return Se(o,i)()||pn(i[o.index]);{const l=D0(i,o);return null!==l?Array.isArray(l)?l[0]:xd(dt(i[16]),l):xd(i,o.next)}}return null}function D0(i,o){return null!==o?i[16][6].projection[o.projection]:null}function My(i,o){const a=10+i+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return xd(l,d)}return o[7]}function ky(i,o,a,l,d,p,v){for(;null!=a;){const I=l[a.index],N=a.type;if(v&&0===o&&(I&&gr(pn(I),l),a.flags|=4),64!=(64&a.flags))if(8&N)ky(i,o,a.child,l,d,p,!1),Ys(o,i,d,I,p);else if(32&N){const z=Se(a,l);let ne;for(;ne=z();)Ys(o,i,d,ne,p);Ys(o,i,d,I,p)}else 16&N?T0(i,o,l,a,d,p):Ys(o,i,d,I,p);a=v?a.projectionNext:a.next}}function ag(i,o,a,l,d,p){ky(a,l,i.firstChild,o,d,p,!1)}function T0(i,o,a,l,d,p){const v=a[16],N=v[6].projection[l.projection];if(Array.isArray(N))for(let z=0;z<N.length;z++)Ys(o,i,d,N[z],p);else ky(i,o,N,v[3],d,p,!0)}function zo(i,o,a){bn(i)?i.setAttribute(o,"style",a):o.style.cssText=a}function Ry(i,o,a){bn(i)?""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a):o.className=a}function Py(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||i.charCodeAt(d+p)<=32)return d}a=d+1}}const A0="ng-template";function mI(i,o,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==Py(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Od(i){return 4===i.type&&i.value!==A0}function Zu(i,o,a){return o===(4!==i.type||a?i.value:A0)}function S0(i,o,a){let l=4;const d=i.attrs||[],p=function O0(i){for(let o=0;o<i.length;o++)if(oi(i[o]))return o;return i.length}(d);let v=!1;for(let I=0;I<o.length;I++){const N=o[I];if("number"!=typeof N){if(!v)if(4&l){if(l=2|1&l,""!==N&&!Zu(i,N,a)||""===N&&1===o.length){if(xn(l))return!1;v=!0}}else{const z=8&l?N:o[++I];if(8&l&&null!==i.attrs){if(!mI(i.attrs,z,a)){if(xn(l))return!1;v=!0}continue}const pe=Ku(8&l?"class":N,d,Od(i),a);if(-1===pe){if(xn(l))return!1;v=!0;continue}if(""!==z){let Te;Te=pe>p?"":d[pe+1].toLowerCase();const Ne=8&l?Te:null;if(Ne&&-1!==Py(Ne,z,0)||2&l&&z!==Te){if(xn(l))return!1;v=!0}}}}else{if(!v&&!xn(l)&&!xn(N))return!1;if(v&&xn(N))continue;v=!1,l=N|1&l}}return xn(l)||v}function xn(i){return 0==(1&i)}function Ku(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let p=!1;for(;d<o.length;){const v=o[d];if(v===i)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function M0(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function x0(i,o,a=!1){for(let l=0;l<o.length;l++)if(S0(i,o[l],a))return!0;return!1}function N0(i,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(i.length===l.length){for(let d=0;d<i.length;d++)if(i[d]!==l[d])continue e;return!0}}return!1}function Ly(i,o){return i?":not("+o.trim()+")":o}function k0(i){let o=i[0],a=1,l=2,d="",p=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&l){const I=i[++a];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!xn(v)&&(o+=Ly(p,d),d=""),l=v,p=p||!xn(l);a++}return""!==d&&(o+=Ly(p,d)),o}const Ht={};function Jh(i){Fy(Jt(),We(),ar()+i,Ea())}function Fy(i,o,a,l){if(!l)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&Aa(o,p,a)}else{const p=i.preOrderHooks;null!==p&&so(o,p,0,a)}ji(a)}function Xh(i,o){return i<<17|o<<2}function Wo(i){return i>>17&32767}function ug(i){return 2|i}function Es(i){return(131068&i)>>2}function lg(i,o){return-131069&i|o<<2}function dg(i){return 1|i}function z0(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],p=a[l+1];if(-1!==p){const v=i.data[p];Ta(d),v.contentQueries(2,o[p],p)}}}function nc(i,o,a,l,d,p,v,I,N,z){const ne=o.blueprint.slice();return ne[0]=d,ne[2]=140|l,Ui(ne),ne[3]=ne[15]=i,ne[8]=a,ne[10]=v||i&&i[10],ne[11]=I||i&&i[11],ne[12]=N||i&&i[12]||null,ne[9]=z||i&&i[9]||null,ne[6]=p,ne[16]=2==o.type?i[16]:ne,ne}function Nd(i,o,a,l,d){let p=i.data[o];if(null===p)p=function vg(i,o,a,l,d){const p=Vs(),v=ba(),N=i.data[o]=function Eg(i,o,a,l,d,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=N),null!==p&&(v?null==p.child&&null!==N.parent&&(p.child=N):null===p.next&&(p.next=N)),N}(i,o,a,l,d),function kl(){return St.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const v=function rs(){const i=St.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return ii(p,!0),p}function Yu(i,o,a,l){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function rc(i,o,a){Us(o);try{const l=i.viewQuery;null!==l&&Og(1,l,a);const d=i.template;null!==d&&kd(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&z0(i,o),i.staticViewQueries&&Og(2,i.viewQuery,a);const p=i.components;null!==p&&function cA(i,o){for(let a=0;a<o.length;a++)CI(i,o[a])}(o,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,js()}}function of(i,o,a,l){const d=o[2];if(256==(256&d))return;Us(o);const p=Ea();try{Ui(o),function wa(i){return St.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&kd(i,o,a,2,l);const v=3==(3&d);if(!p)if(v){const z=i.preOrderCheckHooks;null!==z&&Aa(o,z,null)}else{const z=i.preOrderHooks;null!==z&&so(o,z,0,null),qs(o,0)}if(function Wy(i){for(let o=Pn(i);null!==o;o=fi(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],p=d[3];0==(1024&d[2])&&Ls(p,1),d[2]|=1024}}}(o),function ub(i){for(let o=Pn(i);null!==o;o=fi(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];io(l)&&of(d,l,d.template,l[8])}}(o),null!==i.contentQueries&&z0(i,o),!p)if(v){const z=i.contentCheckHooks;null!==z&&Aa(o,z)}else{const z=i.contentHooks;null!==z&&so(o,z,1),qs(o,1)}!function lA(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)ji(~d);else{const p=d,v=a[++l],I=a[++l];Rl(v,p),I(2,o[p])}}}finally{ji(-1)}}(i,o);const I=i.components;null!==I&&function W0(i,o){for(let a=0;a<o.length;a++)TI(i,o[a])}(o,I);const N=i.viewQuery;if(null!==N&&Og(2,N,l),!p)if(v){const z=i.viewCheckHooks;null!==z&&Aa(o,z)}else{const z=i.viewHooks;null!==z&&so(o,z,2),qs(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Ls(o[3],-1))}finally{js()}}function Hy(i,o,a,l){const d=o[10],p=!Ea(),v=ns(o);try{p&&!v&&d.begin&&d.begin(),v&&rc(i,o,l),of(i,o,a,l)}finally{p&&!v&&d.end&&d.end()}}function kd(i,o,a,l,d){const p=ar(),v=2&l;try{ji(-1),v&&o.length>20&&Fy(i,o,20,Ea()),a(l,d)}finally{ji(p)}}function Qu(i,o,a){!_a()||(function hA(i,o,a,l){const d=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Kn(a,o),gr(l,o);const v=a.initialInputs;for(let I=d;I<p;I++){const N=i.data[I],z=Pi(N);z&&Cg(o,a,N);const ne=Hs(o,i,I,a);gr(ne,o),null!==v&&sb(0,I-d,ne,N,0,v),z&&(pr(a.index,o)[8]=ne)}}(i,o,a,fr(a,o)),128==(128&a.flags)&&function fA(i,o,a){const l=a.directiveStart,d=a.directiveEnd,v=a.index,I=function Tu(){return St.lFrame.currentDirectiveIndex}();try{ji(v);for(let N=l;N<d;N++){const z=i.data[N],ne=o[N];Ia(N),(null!==z.hostBindings||0!==z.hostVars||null!==z.hostAttrs)&&X0(z,ne)}}finally{ji(-1),Ia(I)}}(i,o,a))}function ic(i,o,a=fr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const v=l[p+1],I=-1===v?a(o,i):i[v];i[d++]=I}}}function Z0(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Rd(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function Rd(i,o,a,l,d,p,v,I,N,z){const ne=20+l,pe=ne+d,Te=function K0(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:Ht);return a}(ne,pe),Ne="function"==typeof z?z():z;return Te[1]={type:i,blueprint:Te,template:a,queries:null,viewQuery:I,declTNode:o,data:Te.slice().fill(null,ne),bindingStartIndex:ne,expandoStartIndex:pe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:N,consts:Ne,incompleteFirstPass:!1}}function bg(i,o,a,l){const d=Mg(o);null===a?d.push(l):(d.push(a),i.firstCreatePass&&cb(i).push(l,d.length-1))}function $y(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function Wi(i,o,a,l,d,p,v,I){const N=fr(o,a);let ne,z=o.inputs;!I&&null!=z&&(ne=z[l])?(xI(i,a,ne,l,d),$c(o)&&function Gy(i,o){const a=pr(o,i);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function Q0(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=v?v(d,o.value||"",l):d,bn(p)?p.setProperty(N,l,d):si(l)||(N.setProperty?N.setProperty(l,d):N[l]=d))}function Tg(i,o,a,l){let d=!1;if(_a()){const p=function eb(i,o,a){const l=i.directiveRegistry;let d=null;if(l)for(let p=0;p<l.length;p++){const v=l[p];x0(a,v.selectors,!1)&&(d||(d=[]),Fo(Kn(a,o),i,v.type),Pi(v)?(tb(i,a),d.unshift(v)):d.push(v))}return d}(i,o,a),v=null===l?null:{"":-1};if(null!==p){d=!0,uf(a,i.data.length,p.length);for(let ne=0;ne<p.length;ne++){const pe=p[ne];pe.providersResolver&&pe.providersResolver(pe)}let I=!1,N=!1,z=Yu(i,o,p.length,null);for(let ne=0;ne<p.length;ne++){const pe=p[ne];a.mergedAttrs=Zn(a.mergedAttrs,pe.hostAttrs),ib(i,a,o,z,pe),rb(z,pe,v),null!==pe.contentQueries&&(a.flags|=8),(null!==pe.hostBindings||null!==pe.hostAttrs||0!==pe.hostVars)&&(a.flags|=128);const Te=pe.type.prototype;!I&&(Te.ngOnChanges||Te.ngOnInit||Te.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),I=!0),!N&&(Te.ngOnChanges||Te.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),N=!0),z++}!function Y0(i,o){const l=o.directiveEnd,d=i.data,p=o.attrs,v=[];let I=null,N=null;for(let z=o.directiveStart;z<l;z++){const ne=d[z],pe=ne.inputs,Te=null===p||Od(o)?null:II(pe,p);v.push(Te),I=$y(pe,z,I),N=$y(ne.outputs,z,N)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=I,o.outputs=N}(i,a)}v&&function nb(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new x(-301,!1);l.push(o[d],p)}}}(a,l,v)}return a.mergedAttrs=Zn(a.mergedAttrs,a.attrs),d}function wI(i,o,a,l,d,p){const v=p.hostBindings;if(v){let I=i.hostBindingOpCodes;null===I&&(I=i.hostBindingOpCodes=[]);const N=~o.index;(function dA(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(I)!=N&&I.push(N),I.push(l,d,v)}}function X0(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function tb(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function rb(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;Pi(o)&&(a[""]=i)}}function uf(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function ib(i,o,a,l,d){i.data[l]=d;const p=d.factory||(d.factory=wr(d.type)),v=new Cu(p,Pi(d),null);i.blueprint[l]=v,a[l]=v,wI(i,o,0,l,Yu(i,a,d.hostVars,Ht),d)}function Cg(i,o,a){const l=fr(o,i),d=Z0(a),p=i[10],v=Sg(i,nc(i,d,null,a.onPush?64:16,l,o,p,p.createRenderer(l,a),null,null));i[o.index]=v}function Js(i,o,a,l,d,p){const v=fr(i,o);!function ob(i,o,a,l,d,p,v){if(null==p)bn(i)?i.removeAttribute(o,d,a):o.removeAttribute(d);else{const I=null==v?D(p):v(p,l||"",d);bn(i)?i.setAttribute(o,d,I,a):a?o.setAttributeNS(a,d,I):o.setAttribute(d,I)}}(o[11],v,p,i.value,a,l,d)}function sb(i,o,a,l,d,p){const v=p[o];if(null!==v){const I=l.setInput;for(let N=0;N<v.length;){const z=v[N++],ne=v[N++],pe=v[N++];null!==I?l.setInput(a,pe,z,ne):a[ne]=pe}}}function II(i,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function ab(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}function TI(i,o){const a=pr(o,i);if(io(a)){const l=a[1];80&a[2]?of(l,a,l.template,a[8]):a[5]>0&&Ag(a)}}function Ag(i){for(let l=Pn(i);null!==l;l=fi(l))for(let d=10;d<l.length;d++){const p=l[d];if(1024&p[2]){const v=p[1];of(v,p,v.template,p[8])}else p[5]>0&&Ag(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=pr(a[l],i);io(d)&&d[5]>0&&Ag(d)}}function CI(i,o){const a=pr(o,i),l=a[1];(function Pd(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),rc(l,a,a[8])}function Sg(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function lf(i){for(;i;){i[2]|=64;const o=dt(i);if(Il(i)&&!o)return i;i=o}return null}function xg(i,o,a){const l=o[10];l.begin&&l.begin();try{of(i,o,i.template,a)}catch(d){throw db(o,d),d}finally{l.end&&l.end()}}function lb(i){!function cf(i){for(let o=0;o<i.components.length;o++){const a=i.components[o],l=Id(a),d=l[1];Hy(d,l,d.template,a)}}(i[8])}function Og(i,o,a){Ta(0),o(i,a)}const hf=(()=>Promise.resolve(null))();function Mg(i){return i[7]||(i[7]=[])}function cb(i){return i.cleanup||(i.cleanup=[])}function db(i,o){const a=i[9],l=a?a.get(Dd,null):null;l&&l.handleError(o)}function xI(i,o,a,l,d){for(let p=0;p<a.length;){const v=a[p++],I=a[p++],N=o[v],z=i.data[v];null!==z.setInput?z.setInput(N,d,l,I):N[I]=d}}function ws(i,o,a){const l=ko(o,i);!function Cd(i,o,a){bn(i)?i.setValue(o,a):o.textContent=a}(i[11],l,a)}function Ld(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?p=I:1==p?d=E(d,I):2==p&&(l=E(l,I+": "+o[++v]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const Qa=new Sn("INJECTOR",-1);class fb{get(o,a=Va){if(a===Va){const l=new Error(`NullInjectorError: No provider for ${S(o)}!`);throw l.name="NullInjectorError",l}return a}}const Ng=new Sn("Set Injector scope."),ff={},pb={};let Ky;function gb(){return void 0===Ky&&(Ky=new fb),Ky}function Fd(i,o=null,a=null,l){const d=Yy(i,o,a,l);return d._resolveInjectorDefTypes(),d}function Yy(i,o=null,a=null,l){return new NI(i,a,o||gb(),l)}class NI{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&ui(a,I=>this.processProvider(I,o,a)),ui([o],I=>this.processInjectorType(I,[],p)),this.records.set(Qa,oc(void 0,this));const v=this.records.get(Ng);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:S(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Va,l=He.Default){this.assertNotDestroyed();const d=ps(this),p=vt(void 0);try{if(!(l&He.SkipSelf)){let I=this.records.get(o);if(void 0===I){const N=function Eb(i){return"function"==typeof i||"object"==typeof i&&i instanceof Sn}(o)&&Qe(o);I=N&&this.injectableDefInScope(N)?oc(kg(o),ff):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(l&He.Self?gb():this.parent).get(o,a=l&He.Optional&&a===Va?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[fs]=v[fs]||[]).unshift(S(o)),d)throw v;return function ot(i,o,a,l){const d=i[fs];throw o[Ua]&&d.unshift(o[Ua]),i.message=function _t(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=S(o);if(Array.isArray(o))d=o.map(S).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];p.push(v+":"+("string"==typeof I?JSON.stringify(I):S(I)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(xh,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[fs]=null,i}(v,o,"R3InjectorError",this.source)}throw v}finally{vt(p),ps(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(S(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new x(205,!1)}processInjectorType(o,a,l){if(!(o=C(o)))return!1;let d=Bt(o);const p=null==d&&o.ngModule||void 0,v=void 0===p?o:p,I=-1!==l.indexOf(v);if(void 0!==p&&(d=Bt(p)),null==d)return!1;if(null!=d.imports&&!I){let ne;l.push(v);try{ui(d.imports,pe=>{this.processInjectorType(pe,a,l)&&(void 0===ne&&(ne=[]),ne.push(pe))})}finally{}if(void 0!==ne)for(let pe=0;pe<ne.length;pe++){const{ngModule:Te,providers:Ne}=ne[pe];ui(Ne,$e=>this.processProvider($e,Te,Ne||Tt))}}this.injectorDefTypes.add(v);const N=wr(v)||(()=>new v);this.records.set(v,oc(N,ff));const z=d.providers;if(null!=z&&!I){const ne=o;ui(z,pe=>this.processProvider(pe,ne,z))}return void 0!==p&&void 0!==o.providers}processProvider(o,a,l){let d=pf(o=C(o))?o:C(o&&o.provide);const p=function mb(i,o,a){return vb(i)?oc(void 0,i.useValue):oc(yb(i),ff)}(o);if(pf(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=oc(void 0,ff,!0),v.factory=()=>Oe(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,p)}hydrate(o,a){return a.value===ff&&(a.value=pb,a.value=a.factory()),"object"==typeof a.value&&a.value&&function RI(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=C(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function kg(i){const o=Qe(i),a=null!==o?o.factory:wr(i);if(null!==a)return a;if(i instanceof Sn)throw new x(204,!1);if(i instanceof Function)return function kI(i){const o=i.length;if(o>0)throw ku(o,"?"),new x(204,!1);const a=function wt(i){const o=i&&(i[wn]||i[Be]);if(o){const a=function Mt(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new x(204,!1)}function yb(i,o,a){let l;if(pf(i)){const d=C(i);return wr(d)||kg(d)}if(vb(i))l=()=>C(i.useValue);else if(function gA(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Oe(i.deps||[]));else if(function _b(i){return!(!i||!i.useExisting)}(i))l=()=>U(C(i.useExisting));else{const d=C(i&&(i.useClass||i.provide));if(!function bb(i){return!!i.deps}(i))return wr(d)||kg(d);l=()=>new d(...Oe(i.deps))}return l}function oc(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function vb(i){return null!==i&&"object"==typeof i&&Gl in i}function pf(i){return"function"==typeof i}let Is=(()=>{class i{static create(a,l){var d;if(Array.isArray(a))return Fd({name:""},l,a,"");{const p=null!==(d=a.name)&&void 0!==d?d:"";return Fd({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=Va,i.NULL=new fb,i.\u0275prov=ke({token:i,providedIn:"any",factory:()=>U(Qa)}),i.__NG_ELEMENT_ID__=-1,i})();function nn(i,o){od(Id(i)[1],An())}function pt(i){let o=function ta(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let d;if(Pi(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new x(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const v=i;v.inputs=jt(i.inputs),v.declaredInputs=jt(i.declaredInputs),v.outputs=jt(i.outputs);const I=d.hostBindings;I&&mf(i,I);const N=d.viewQuery,z=d.contentQueries;if(N&&Lg(i,N),z&&Xy(i,z),R(i.inputs,d.inputs),R(i.declaredInputs,d.declaredInputs),R(i.outputs,d.outputs),Pi(d)&&d.data.animation){const ne=i.data;ne.animation=(ne.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let v=0;v<p.length;v++){const I=p[v];I&&I.ngInherit&&I(i),I===pt&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Jy(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Zn(d.hostAttrs,a=Zn(a,d.hostAttrs))}}(l)}function jt(i){return i===Or?{}:i===Tt?[]:i}function Lg(i,o){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function Xy(i,o){const a=i.contentQueries;i.contentQueries=a?(l,d,p)=>{o(l,d,p),a(l,d,p)}:o}function mf(i,o){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let Fg=null;function Ud(){if(!Fg){const i=tn.Symbol;if(i&&i.iterator)Fg=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Fg=l)}}}return Fg}function Xu(i){return!!tv(i)&&(Array.isArray(i)||!(i instanceof Map)&&Ud()in i)}function tv(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Yr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function jd(i,o,a,l){const d=We();return Yr(d,Ro(),o)&&(Jt(),Js(Nn(),d,i,o,a,l)),jd}function mr(i,o,a,l){return Yr(i,Ro(),a)?o+D(a)+l:Ht}function vf(i,o,a,l,d,p,v,I){const N=We(),z=Jt(),ne=i+20,pe=z.firstCreatePass?function Nb(i,o,a,l,d,p,v,I,N){const z=o.consts,ne=Nd(o,i,4,v||null,_i(z,I));Tg(o,a,ne,_i(z,N)),od(o,ne);const pe=ne.tViews=Rd(2,ne,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,z);return null!==o.queries&&(o.queries.template(o,ne),pe.queries=o.queries.embeddedTView(ne)),ne}(ne,z,N,o,a,l,d,p,v):z.data[ne];ii(pe,!1);const Te=N[11].createComment("");sg(z,N,Te,pe),gr(Te,N),Sg(N,N[ne]=ab(Te,N,Te,pe)),Ri(pe)&&Qu(z,N,pe),null!=v&&ic(N,pe,I)}function gc(i,o=He.Default){const a=We();return null===a?U(i,o):as(An(),a,C(i),o)}function yv(){throw new Error("invalid")}function vv(i,o,a){const l=We();return Yr(l,Ro(),o)&&Wi(Jt(),Nn(),l,i,o,l[11],a,!1),vv}function qd(i,o,a,l,d){const v=d?"class":"style";xI(i,a,o.inputs[v],v,l)}function Hd(i,o,a,l){const d=We(),p=Jt(),v=20+i,I=d[11],N=d[v]=Ad(I,o,function id(){return St.lFrame.currentNamespace}()),z=p.firstCreatePass?function _v(i,o,a,l,d,p,v){const I=o.consts,z=Nd(o,i,2,d,_i(I,p));return Tg(o,a,z,_i(I,v)),null!==z.attrs&&Ld(z,z.attrs,!1),null!==z.mergedAttrs&&Ld(z,z.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,z),z}(v,p,d,0,o,a,l):p.data[v];ii(z,!0);const ne=z.mergedAttrs;null!==ne&&mt(I,N,ne);const pe=z.classes;null!==pe&&Ry(I,N,pe);const Te=z.styles;return null!==Te&&zo(I,N,Te),64!=(64&z.flags)&&sg(p,d,N,z),0===function bu(){return St.lFrame.elementDepthCount}()&&gr(N,d),function va(){St.lFrame.elementDepthCount++}(),Ri(z)&&(Qu(p,d,z),function sf(i,o,a){if(yu(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=i.data[p];v.contentQueries&&v.contentQueries(1,a[p],p)}}}(p,z,d)),null!==l&&ic(d,z),Hd}function Ef(){let i=An();ba()?Nl():(i=i.parent,ii(i,!1));const o=i;!function xl(){St.lFrame.elementDepthCount--}();const a=Jt();return a.firstCreatePass&&(od(a,i),yu(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Fl(i){return 0!=(16&i.flags)}(o)&&qd(a,o,We(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Mp(i){return 0!=(32&i.flags)}(o)&&qd(a,o,We(),o.stylesWithoutHost,!1),Ef}function bv(i,o,a,l){return Hd(i,o,a,l),Ef(),bv}function jb(){return We()}function Ev(i){return!!i&&"function"==typeof i.then}function mc(i){return!!i&&"function"==typeof i.subscribe}const qb=mc;function wv(i,o,a,l){const d=We(),p=Jt(),v=An();return function If(i,o,a,l,d,p,v,I){const N=Ri(l),ne=i.firstCreatePass&&cb(i),pe=o[8],Te=Mg(o);let Ne=!0;if(3&l.type||I){const st=fr(l,o),gt=I?I(st):st,Ye=Te.length,Ot=I?an=>I(pn(an[l.index])):l.index;if(bn(a)){let an=null;if(!I&&N&&(an=function Hb(i,o,a,l){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===a&&d[p+1]===l){const I=o[7],N=d[p+2];return I.length>N?I[N]:null}"string"==typeof v&&(p+=2)}return null}(i,o,d,l.index)),null!==an)(an.__ngLastListenerFn__||an).__ngNextListenerFn__=p,an.__ngLastListenerFn__=p,Ne=!1;else{p=yc(l,o,pe,p,!1);const dn=a.listen(gt,d,p);Te.push(p,dn),ne&&ne.push(d,Ot,Ye,Ye+1)}}else p=yc(l,o,pe,p,!0),gt.addEventListener(d,p,v),Te.push(p),ne&&ne.push(d,Ot,Ye,v)}else p=yc(l,o,pe,p,!1);const $e=l.outputs;let nt;if(Ne&&null!==$e&&(nt=$e[d])){const st=nt.length;if(st)for(let gt=0;gt<st;gt+=2){const Br=o[nt[gt]][nt[gt+1]].subscribe(p),fu=Te.length;Te.push(p,Br),ne&&ne.push(d,l.index,fu,-(fu+1))}}}(p,d,d[11],v,i,o,!!a,l),wv}function Iv(i,o,a,l){try{return!1!==a(l)}catch(d){return db(i,d),!1}}function yc(i,o,a,l,d){return function p(v){if(v===Function)return l;const I=2&i.flags?pr(i.index,o):o;0==(32&o[2])&&lf(I);let N=Iv(o,0,l,v),z=p.__ngNextListenerFn__;for(;z;)N=Iv(o,0,z,v)&&N,z=z.__ngNextListenerFn__;return d&&!1===N&&(v.preventDefault(),v.returnValue=!1),N}}function Dv(i=1){return function Bi(i){return(St.lFrame.contextLView=function Ih(i,o){for(;i>0;)o=o[15],i--;return o}(i,St.lFrame.contextLView))[8]}(i)}function Ci(i,o){let a=null;const l=function eA(i){const o=i.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(i);for(let d=0;d<o.length;d++){const p=o[d];if("*"!==p){if(null===l?x0(i,p,!0):N0(l,p))return d}else a=d}return a}function Tv(i){const o=We()[16][6];if(!o.projection){const l=o.projection=ku(i?i.length:1,null),d=l.slice();let p=o.child;for(;null!==p;){const v=i?Ci(p,i):0;null!==v&&(d[v]?d[v].projectionNext=p:l[v]=p,d[v]=p),p=p.next}}}function $d(i,o=0,a){const l=We(),d=Jt(),p=Nd(d,20+i,16,null,a||null);null===p.projection&&(p.projection=o),Nl(),64!=(64&p.flags)&&function gI(i,o,a){T0(o[11],0,o,a,og(i,a,o),E0(a.parent||o[6],a,o))}(d,l,p)}function Tf(i,o,a,l,d){const p=We(),v=mr(p,o,a,l);return v!==Ht&&Wi(Jt(),Nn(),p,i,v,p[11],d,!1),Tf}function nm(i,o,a,l,d){const p=i[a+1],v=null===o;let I=l?Wo(p):Es(p),N=!1;for(;0!==I&&(!1===N||v);){const ne=i[I+1];rm(i[I],o)&&(N=!0,i[I+1]=l?dg(ne):ug(ne)),I=l?Wo(ne):Es(ne)}N&&(i[a+1]=l?ug(p):dg(p))}function rm(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Di(i,o)>=0}const cr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Sv(i){return i.substring(cr.key,cr.keyEnd)}function Gb(i){return i.substring(cr.value,cr.valueEnd)}function xv(i,o){const a=cr.textEnd;let l=cr.key=ra(i,o,a);return a===l?-1:(l=cr.keyEnd=function Ov(i,o,a){let l;for(;o<a&&(45===(l=i.charCodeAt(o))||95===l||(-33&l)>=65&&(-33&l)<=90||l>=48&&l<=57);)o++;return o}(i,l,a),l=Zb(i,l,a),l=cr.value=ra(i,l,a),l=cr.valueEnd=function Mv(i,o,a){let l=-1,d=-1,p=-1,v=o,I=v;for(;v<a;){const N=i.charCodeAt(v++);if(59===N)return I;34===N||39===N?I=v=_c(i,N,v,a):o===v-4&&85===p&&82===d&&76===l&&40===N?I=v=_c(i,41,v,a):N>32&&(I=v),p=d,d=l,l=-33&N}return I}(i,l,a),Zb(i,l,a))}function ra(i,o,a){for(;o<a&&i.charCodeAt(o)<=32;)o++;return o}function Zb(i,o,a,l){return(o=ra(i,o,a))<a&&o++,o}function _c(i,o,a,l){let d=-1,p=a;for(;p<l;){const v=i.charCodeAt(p++);if(v==o&&92!==d)return p;d=92==v&&92===d?0:v}throw new Error}function im(i,o){return function Ki(i,o,a,l){const d=We(),p=Jt(),v=bi(2);p.firstUpdatePass&&Ln(p,i,v,l),o!==Ht&&Yr(d,v,o)&&Jb(p,p.data[ar()],d,d[11],i,d[v+1]=function sl(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=S(_s(i)))),i}(o,a),l,v)}(i,o,null,!0),im}function Ds(i){!function Yi(i,o,a,l){const d=Jt(),p=bi(2);d.firstUpdatePass&&Ln(d,null,p,l);const v=We();if(a!==Ht&&Yr(v,p,a)){const I=d.data[ar()];if(kv(I,l)&&!Nv(d,p)){let N=l?I.classesWithoutHost:I.stylesWithoutHost;null!==N&&(a=E(N,a||"")),qd(d,I,v,a,l)}else!function eD(i,o,a,l,d,p,v,I){d===Ht&&(d=Tt);let N=0,z=0,ne=0<d.length?d[0]:null,pe=0<p.length?p[0]:null;for(;null!==ne||null!==pe;){const Te=N<d.length?d[N+1]:void 0,Ne=z<p.length?p[z+1]:void 0;let nt,$e=null;ne===pe?(N+=2,z+=2,Te!==Ne&&($e=pe,nt=Ne)):null===pe||null!==ne&&ne<pe?(N+=2,$e=ne):(z+=2,$e=pe,nt=Ne),null!==$e&&Jb(i,o,a,l,$e,nt,v,I),ne=N<d.length?d[N]:null,pe=z<p.length?p[z]:null}}(d,I,v,v[11],v[p+1],v[p+1]=function Yb(i,o,a){if(null==a||""===a)return Tt;const l=[],d=_s(a);if(Array.isArray(d))for(let p=0;p<d.length;p++)i(l,d[p],!0);else if("object"==typeof d)for(const p in d)d.hasOwnProperty(p)&&i(l,p,d[p]);else"string"==typeof d&&o(l,d);return l}(i,o,a),l,p)}}(Qb,bc,i,!1)}function bc(i,o){for(let a=function Af(i){return function Sf(i){cr.key=0,cr.keyEnd=0,cr.value=0,cr.valueEnd=0,cr.textEnd=i.length}(i),xv(i,ra(i,0,cr.textEnd))}(o);a>=0;a=xv(o,a))Qb(i,Sv(o),Gb(o))}function Nv(i,o){return o>=i.expandoStartIndex}function Ln(i,o,a,l){const d=i.data;if(null===d[a+1]){const p=d[ar()],v=Nv(i,a);kv(p,l)&&null===o&&!v&&(o=!1),o=function om(i,o,a,l){const d=function Da(i){const o=St.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=Of(a=Ec(null,i,o,a,l),o.attrs,l),p=null);else{const v=o.directiveStylingLast;if(-1===v||i[v]!==d)if(a=Ec(d,i,o,a,l),null===p){let N=function JI(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Es(l))return i[Wo(l)]}(i,o,l);void 0!==N&&Array.isArray(N)&&(N=Ec(null,i,o,N[1],l),N=Of(N,o.attrs,l),function XI(i,o,a,l){i[Wo(a?o.classBindings:o.styleBindings)]=l}(i,o,l,N))}else p=function xf(i,o,a){let l;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)l=Of(l,i[p].hostAttrs,a);return Of(l,o.attrs,a)}(i,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,l),function $b(i,o,a,l,d,p){let v=p?o.classBindings:o.styleBindings,I=Wo(v),N=Es(v);i[l]=a;let ne,z=!1;if(Array.isArray(a)){const pe=a;ne=pe[1],(null===ne||Di(pe,ne)>0)&&(z=!0)}else ne=a;if(d)if(0!==N){const Te=Wo(i[I+1]);i[l+1]=Xh(Te,I),0!==Te&&(i[Te+1]=lg(i[Te+1],l)),i[I+1]=function F0(i,o){return 131071&i|o<<17}(i[I+1],l)}else i[l+1]=Xh(I,0),0!==I&&(i[I+1]=lg(i[I+1],l)),I=l;else i[l+1]=Xh(N,0),0===I?I=l:i[N+1]=lg(i[N+1],l),N=l;z&&(i[l+1]=ug(i[l+1])),nm(i,ne,l,!0),nm(i,ne,l,!1),function QI(i,o,a,l,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&Di(p,o)>=0&&(a[l+1]=dg(a[l+1]))}(o,ne,i,l,p),v=Xh(I,N),p?o.classBindings=v:o.styleBindings=v}(d,p,o,a,v,l)}}function Ec(i,o,a,l,d){let p=null;const v=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<v&&(p=o[I],l=Of(l,p.hostAttrs,d),p!==i);)I++;return null!==i&&(a.directiveStylingLast=I),l}function Of(i,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?d=v:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Hn(i,v,!!a||o[++p]))}return void 0===i?null:i}function Qb(i,o,a){Hn(i,o,_s(a))}function Jb(i,o,a,l,d,p,v,I){if(!(3&o.type))return;const N=i.data,z=N[I+1];ol(function cg(i){return 1==(1&i)}(z)?Xb(N,o,a,d,Es(z),v):void 0)||(ol(p)||function L0(i){return 2==(2&i)}(z)&&(p=Xb(N,null,a,d,I,v)),function ec(i,o,a,l,d){const p=bn(i);if(o)d?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:G.DashCase;if(null==d)p?i.removeStyle(a,l,v):a.style.removeProperty(l);else{const I="string"==typeof d&&d.endsWith("!important");I&&(d=d.slice(0,-10),v|=G.Important),p?i.setStyle(a,l,d,v):a.style.setProperty(l,d,I?"important":"")}}}(l,v,ko(ar(),a),d,p))}function Xb(i,o,a,l,d,p){const v=null===o;let I;for(;d>0;){const N=i[d],z=Array.isArray(N),ne=z?N[1]:N,pe=null===ne;let Te=a[d+1];Te===Ht&&(Te=pe?Tt:void 0);let Ne=pe?Ho(Te,l):ne===l?Te:void 0;if(z&&!ol(Ne)&&(Ne=Ho(N,l)),ol(Ne)&&(I=Ne,v))return I;const $e=i[d+1];d=v?Wo($e):Es($e)}if(null!==o){let N=p?o.residualClasses:o.residualStyles;null!=N&&(I=Ho(N,l))}return I}function ol(i){return void 0!==i}function kv(i,o){return 0!=(i.flags&(o?16:32))}function Rv(i,o=""){const a=We(),l=Jt(),d=i+20,p=l.firstCreatePass?Nd(l,d,1,o,null):l.data[d],v=a[d]=function Td(i,o){return bn(i)?i.createText(o):i.createTextNode(o)}(a[11],o);sg(l,a,v,p),ii(p,!1)}function sm(i){return eu("",i,""),sm}function eu(i,o,a){const l=We(),d=mr(l,i,o,a);return d!==Ht&&ws(l,ar(),d),eu}const Ts=void 0;var Gv=["en",[["a","p"],["AM","PM"],Ts],[["AM","PM"],Ts,Ts],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ts,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ts,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ts,"{1} 'at' {0}",Ts],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function cE(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let tu={};function Pf(i){const o=function hE(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Wv(o);if(a)return a;const l=o.split("-")[0];if(a=Wv(l),a)return a;if("en"===l)return Gv;throw new Error(`Missing locale data for the locale "${i}".`)}function dE(i){return Pf(i)[Pt.PluralCase]}function Wv(i){return i in tu||(tu[i]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[i]),tu[i]}var Pt=(()=>((Pt=Pt||{})[Pt.LocaleId=0]="LocaleId",Pt[Pt.DayPeriodsFormat=1]="DayPeriodsFormat",Pt[Pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Pt[Pt.DaysFormat=3]="DaysFormat",Pt[Pt.DaysStandalone=4]="DaysStandalone",Pt[Pt.MonthsFormat=5]="MonthsFormat",Pt[Pt.MonthsStandalone=6]="MonthsStandalone",Pt[Pt.Eras=7]="Eras",Pt[Pt.FirstDayOfWeek=8]="FirstDayOfWeek",Pt[Pt.WeekendRange=9]="WeekendRange",Pt[Pt.DateFormat=10]="DateFormat",Pt[Pt.TimeFormat=11]="TimeFormat",Pt[Pt.DateTimeFormat=12]="DateTimeFormat",Pt[Pt.NumberSymbols=13]="NumberSymbols",Pt[Pt.NumberFormats=14]="NumberFormats",Pt[Pt.CurrencyCode=15]="CurrencyCode",Pt[Pt.CurrencySymbol=16]="CurrencySymbol",Pt[Pt.CurrencyName=17]="CurrencyName",Pt[Pt.Currencies=18]="Currencies",Pt[Pt.Directionality=19]="Directionality",Pt[Pt.PluralCase=20]="PluralCase",Pt[Pt.ExtraData=21]="ExtraData",Pt))();const Lf="en-US";let Yv=Lf;function _m(i,o,a,l,d){if(i=C(i),Array.isArray(i))for(let p=0;p<i.length;p++)_m(i[p],o,a,l,d);else{const p=Jt(),v=We();let I=pf(i)?i:C(i.provide),N=yb(i);const z=An(),ne=1048575&z.providerIndexes,pe=z.directiveStart,Te=z.providerIndexes>>20;if(pf(i)||!i.multi){const Ne=new Cu(N,d,gc),$e=Gn(I,o,d?ne:ne+Te,pe);-1===$e?(Fo(Kn(z,v),p,I),iu(p,i,o.length),o.push(I),z.directiveStart++,z.directiveEnd++,d&&(z.providerIndexes+=1048576),a.push(Ne),v.push(Ne)):(a[$e]=Ne,v[$e]=Ne)}else{const Ne=Gn(I,o,ne+Te,pe),$e=Gn(I,o,ne,ne+Te),nt=Ne>=0&&a[Ne],st=$e>=0&&a[$e];if(d&&!st||!d&&!nt){Fo(Kn(z,v),p,I);const gt=function AE(i,o,a,l,d){const p=new Cu(i,a,gc);return p.multi=[],p.index=o,p.componentProviders=0,o_(p,d,l&&!a),p}(d?Xr:bm,a.length,d,l,N);!d&&st&&(a[$e].providerFactory=gt),iu(p,i,o.length,0),o.push(I),z.directiveStart++,z.directiveEnd++,d&&(z.providerIndexes+=1048576),a.push(gt),v.push(gt)}else iu(p,i,Ne>-1?Ne:$e,o_(a[d?$e:Ne],N,!d&&l));!d&&l&&st&&a[$e].componentProviders++}}}function iu(i,o,a,l){const d=pf(o),p=function mA(i){return!!i.useClass}(o);if(d||p){const N=(p?C(o.useClass):o).prototype.ngOnDestroy;if(N){const z=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const ne=z.indexOf(a);-1===ne?z.push(a,[l,N]):z[ne+1].push(l,N)}else z.push(a,N)}}}function o_(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Gn(i,o,a,l){for(let d=a;d<l;d++)if(o[d]===i)return d;return-1}function bm(i,o,a,l){return En(this.multi,[])}function Xr(i,o,a,l){const d=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Hs(a,a[1],this.providerFactory.index,l);p=I.slice(0,v),En(d,p);for(let N=v;N<I.length;N++)p.push(I[N])}else p=[],En(d,p);return p}function En(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function Tc(i,o=[]){return a=>{a.providersResolver=(l,d)=>function Ji(i,o,a){const l=Jt();if(l.firstCreatePass){const d=Pi(i);_m(a,l.data,l.blueprint,d,!0),_m(o,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,o)}}class SE{}class ir{resolveComponentFactory(o){throw function Sr(i){const o=Error(`No component factory found for ${S(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let sa=(()=>{class i{}return i.NULL=new ir,i})();function s_(){return Ac(An(),We())}function Ac(i,o){return new ou(fr(i,o))}let ou=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=s_,i})();function TD(i){return i instanceof ou?i.nativeElement:i}class Zd{}let zf=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function cl(){const i=We(),a=pr(An().index,i);return function OE(i){return i[11]}(zr(a)?a:i)}(),i})(),Em=(()=>{class i{}return i.\u0275prov=ke({token:i,providedIn:"root",factory:()=>null}),i})();class dl{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const As=new dl("13.2.7"),Sc={};function Ss(i,o,a,l,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(pn(p)),ki(p))for(let I=10;I<p.length;I++){const N=p[I],z=N[1].firstChild;null!==z&&Ss(N[1],N,z,l)}const v=a.type;if(8&v)Ss(i,o,a.child,l);else if(32&v){const I=Se(a,o);let N;for(;N=I();)l.push(N)}else if(16&v){const I=D0(o,a);if(Array.isArray(I))l.push(...I);else{const N=dt(o[16]);Ss(N[1],N,I,l,!0)}}a=d?a.projectionNext:a.next}return l}class Kd{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Ss(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ki(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Ty(o,l),ds(a,l))}this._attachedToViewContainer=!1}Cy(this._lView[1],this._lView)}onDestroy(o){bg(this._lView[1],this._lView,null,o)}markForCheck(){lf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){xg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function df(i,o,a){Iu(!0);try{xg(i,o,a)}finally{Iu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new x(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Yh(i,o){ag(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new x(902,"");this._appRef=o}}class Yd extends Kd{constructor(o){super(o),this._view=o}detectChanges(){lb(this._view)}checkNoChanges(){!function SI(i){Iu(!0);try{lb(i)}finally{Iu(!1)}}(this._view)}get context(){return null}}class wm extends sa{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Jn(o);return new Im(a,this.ngModule)}}function hl(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class Im extends SE{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function R0(i){return i.map(k0).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return hl(this.componentDef.inputs)}get outputs(){return hl(this.componentDef.outputs)}create(o,a,l,d){const p=(d=d||this.ngModule)?function Wf(i,o){return{get:(a,l,d)=>{const p=i.get(a,Sc,d);return p!==Sc||l===Sc?p:o.get(a,l,d)}}}(o,d.injector):o,v=p.get(Zd,ga),I=p.get(Em,null),N=v.createRenderer(null,this.componentDef),z=this.componentDef.selectors[0][0]||"div",ne=l?function af(i,o,a){if(bn(i))return i.selectRootElement(o,a===At.ShadowDom);let l="string"==typeof o?i.querySelector(o):o;return l.textContent="",l}(N,l,this.componentDef.encapsulation):Ad(v.createRenderer(null,this.componentDef),z,function a_(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(z)),pe=this.componentDef.onPush?576:528,Te=function Ja(i,o){return{components:[],scheduler:i||wy,clean:hf,playerHandler:o||null,flags:0}}(),Ne=Rd(0,null,null,1,0,null,null,null,null,null),$e=nc(null,Ne,Te,pe,null,null,v,N,I,p);let nt,st;Us($e);try{const gt=function Ju(i,o,a,l,d,p){const v=a[1];a[20]=i;const N=Nd(v,20,2,"#host",null),z=N.mergedAttrs=o.hostAttrs;null!==z&&(Ld(N,z,!0),null!==i&&(mt(d,i,z),null!==N.classes&&Ry(d,i,N.classes),null!==N.styles&&zo(d,i,N.styles)));const ne=l.createRenderer(i,o),pe=nc(a,Z0(o),null,o.onPush?64:16,a[20],N,l,ne,p||null,null);return v.firstCreatePass&&(Fo(Kn(N,a),v,o.type),tb(v,N),uf(N,a.length,1)),Sg(a,pe),a[20]=pe}(ne,this.componentDef,$e,v,N);if(ne)if(l)mt(N,ne,["ng-version",As.full]);else{const{attrs:Ye,classes:Ot}=function P0(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===d?""!==p&&o.push(p,i[++l]):8===d&&a.push(p);else{if(!xn(d))break;d=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Ye&&mt(N,ne,Ye),Ot&&Ot.length>0&&Ry(N,ne,Ot.join(" "))}if(st=On(Ne,20),void 0!==a){const Ye=st.projection=[];for(let Ot=0;Ot<this.ngContentSelectors.length;Ot++){const an=a[Ot];Ye.push(null!=an?Array.from(an):null)}}nt=function gf(i,o,a,l,d){const p=a[1],v=function zy(i,o,a){const l=An();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),ib(i,l,o,Yu(i,o,1,null),a));const d=Hs(o,i,l.directiveStart,l);gr(d,o);const p=fr(l,o);return p&&gr(p,o),d}(p,a,o);if(l.components.push(v),i[8]=v,d&&d.forEach(N=>N(v,o)),o.contentQueries){const N=An();o.contentQueries(1,v,N.directiveStart)}const I=An();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ji(I.index),wI(a[1],I,0,I.directiveStart,I.directiveEnd,o),X0(o,v)),v}(gt,this.componentDef,$e,Te,[nn]),rc(Ne,$e,null)}finally{js()}return new Zf(this.componentType,nt,Ac(st,$e),$e,st)}}class Zf extends class vo{}{constructor(o,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new Yd(d),this.componentType=o}get injector(){return new ls(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Qd{}class kE{}const xc=new Map;class fl extends Qd{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new wm(this);const l=Xn(o);this._bootstrapComponents=go(l.bootstrap),this._r3Injector=Yy(o,a,[{provide:Qd,useValue:this},{provide:sa,useValue:this.componentFactoryResolver}],S(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=Is.THROW_IF_NOT_FOUND,l=He.Default){return o===Is||o===Qd||o===Qa?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class l_ extends kE{constructor(o){super(),this.moduleType=o,null!==Xn(o)&&function RE(i){const o=new Set;!function a(l){const d=Xn(l,!0),p=d.id;null!==p&&(function Fr(i,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${i} - ${S(o)} vs ${S(o.name)}`)}(p,xc.get(p),l),xc.set(p,l));const v=go(d.imports);for(const I of v)o.has(I)||(o.add(I),a(I))}(i)}(o)}create(o){return new fl(this.moduleType,o)}}function UE(i,o,a,l,d,p){const v=o+a;return Yr(i,v,d)?function na(i,o,a){return i[o]=a}(i,v+1,p?l.call(p,d):l(d)):function Yf(i,o){const a=i[o];return a===Ht?void 0:a}(i,v+1)}function qE(i,o){const a=Jt();let l;const d=i+20;a.firstCreatePass?(l=function HE(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const p=l.factory||(l.factory=wr(l.type)),v=vt(gc);try{const I=Ei(!1),N=p();return Ei(I),function ov(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,We(),d,N),N}finally{vt(v)}}function c_(i,o,a){const l=i+20,d=We(),p=function Vi(i,o){return i[o]}(d,l);return function Mc(i,o){return i[1].data[o].pure}(d,l)?UE(d,function Bn(){const i=St.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}(),o,p.transform,a,p):p.transform(a)}function Qf(i){return o=>{setTimeout(i,void 0,o)}}const Si=class d_ extends c.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,p,v;let I=o,N=a||(()=>null),z=l;if(o&&"object"==typeof o){const pe=o;I=null===(d=pe.next)||void 0===d?void 0:d.bind(pe),N=null===(p=pe.error)||void 0===p?void 0:p.bind(pe),z=null===(v=pe.complete)||void 0===v?void 0:v.bind(pe)}this.__isAsync&&(N=Qf(N),I&&(I=Qf(I)),z&&(z=Qf(z)));const ne=super.subscribe({next:I,error:N,complete:z});return o instanceof ee.w0&&o.add(ne),ne}};function Xi(){return this._results[Ud()]()}class Xd{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Ud(),l=Xd.prototype;l[a]||(l[a]=Xi)}get changes(){return this._changes||(this._changes=new Si)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=ai(o);(this._changesDetected=!function jl(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],p=o[l];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let uu=(()=>{class i{}return i.__NG_ELEMENT_ID__=f_,i})();const zE=uu,h_=class extends zE{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=nc(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),rc(a,l,o),new Kd(l)}};function f_(){return Jf(An(),We())}function Jf(i,o){return 4&i.type?new h_(o,i,Ac(i,o)):null}let Xf=(()=>{class i{}return i.__NG_ELEMENT_ID__=MD,i})();function MD(){return ZE(An(),We())}const WE=Xf,p_=class extends WE{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Ac(this._hostTNode,this._hostLView)}get injector(){return new ls(this._hostTNode,this._hostLView)}get parentInjector(){const o=Hi(this._hostTNode,this._hostLView);if(ad(o)){const a=In(o,this._hostLView),l=qi(o);return new ls(a[1].data[l+8],a)}return new ls(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=g_(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,p){const v=o&&!function qo(i){return"function"==typeof i}(o);let I;if(v)I=a;else{const pe=a||{};I=pe.index,l=pe.injector,d=pe.projectableNodes,p=pe.ngModuleRef}const N=v?o:new Im(Jn(o)),z=l||this.parentInjector;if(!p&&null==N.ngModule){const Te=(v?z:this.parentInjector).get(Qd,null);Te&&(p=Te)}const ne=N.create(z,d,void 0,p);return this.insert(ne.hostView,I),ne}insert(o,a){const l=o._lView,d=l[1];if(function ya(i){return ki(i[3])}(l)){const ne=this.indexOf(o);if(-1!==ne)this.detach(ne);else{const pe=l[3],Te=new p_(pe,pe[6],pe[3]);Te.detach(Te.indexOf(o))}}const p=this._adjustIndex(a),v=this._lContainer;!function zu(i,o,a,l){const d=10+l,p=a.length;l>0&&(a[d-1][4]=o),l<p-10?(o[4]=a[d],zs(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function Wu(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(v,o);const I=o[19];null!==I&&I.insertView(i),o[2]|=128}(d,l,v,p);const I=My(p,v),N=l[11],z=Qh(N,v[7]);return null!==z&&function Kh(i,o,a,l,d,p){l[0]=d,l[6]=o,ag(i,l,a,1,d,p)}(d,v[6],N,l,z,I),o.attachToViewContainerRef(),zs(eh(v),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=g_(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Ty(this._lContainer,a);l&&(ds(eh(this._lContainer),a),Cy(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Ty(this._lContainer,a);return l&&null!=ds(eh(this._lContainer),a)?new Kd(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function g_(i){return i[8]}function eh(i){return i[8]||(i[8]=[])}function ZE(i,o){let a;const l=o[i.index];if(ki(l))a=l;else{let d;if(8&i.type)d=pn(l);else{const p=o[11];d=p.createComment("");const v=fr(i,o);mo(p,Qh(p,v),d,function pI(i,o){return bn(i)?i.nextSibling(o):o.nextSibling}(p,v),!1)}o[i.index]=a=ab(l,o,d,i),Sg(o,a)}return new p_(a,i,o)}class lu{constructor(o){this.queryList=o,this.matches=null}clone(){return new lu(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<l;p++){const v=a.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new Cm(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==aa(o,a).matches&&this.queries[a].setDirty()}}class pl{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Am{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new Am(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class gl{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new gl(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,a,YE(a,p)),this.matchTNodeWithReadOption(o,a,Vo(a,o,p,!1,!1))}else l===uu?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Vo(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===ou||d===Xf||d===uu&&4&a.type)this.addMatch(a.index,-2);else{const p=Vo(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function YE(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function tp(i,o,a,l){return-1===a?function QE(i,o){return 11&i.type?Ac(i,o):4&i.type?Jf(i,o):null}(o,i):-2===a?function kD(i,o,a){return a===ou?Ac(o,i):a===uu?Jf(o,i):a===Xf?ZE(o,i):void 0}(i,o,l):Hs(i,i[1],a,o)}function JE(i,o,a,l){const d=o[19].queries[l];if(null===d.matches){const p=i.data,v=a.matches,I=[];for(let N=0;N<v.length;N+=2){const z=v[N];I.push(z<0?null:tp(o,p[z],v[N+1],a.metadata.read))}d.matches=I}return d.matches}function Vn(i,o,a,l){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const v=JE(i,o,d,a);for(let I=0;I<p.length;I+=2){const N=p[I];if(N>0)l.push(v[I/2]);else{const z=p[I+1],ne=o[-N];for(let pe=10;pe<ne.length;pe++){const Te=ne[pe];Te[17]===Te[3]&&Vn(Te[1],Te,z,l)}if(null!==ne[9]){const pe=ne[9];for(let Te=0;Te<pe.length;Te++){const Ne=pe[Te];Vn(Ne[1],Ne,z,l)}}}}}return l}function np(i){const o=We(),a=Jt(),l=Pl();Ta(l+1);const d=aa(a,l);if(i.dirty&&ns(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?Vn(a,o,l,[]):JE(a,o,d,l);i.reset(p,TD),i.notifyOnChanges()}return!0}return!1}function m_(i,o,a,l){const d=Jt();if(d.firstCreatePass){const p=An();(function y_(i,o,a){null===i.queries&&(i.queries=new Am),i.queries.track(new gl(o,a))})(d,new pl(o,a,l),p.index),function th(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function ew(i,o,a){const l=new Xd(4==(4&a));bg(i,o,l,l.destroy),null===o[19]&&(o[19]=new Cm),o[19].queries.push(new lu(l))}(d,We(),a)}function XE(){return function rp(i,o){return i[19].queries[o].queryList}(We(),Pl())}function aa(i,o){return i.queries.getByIndex(o)}function ap(...i){}const D_=new Sn("Application Initializer");let T_=(()=>{class i{constructor(a){this.appInits=a,this.resolve=ap,this.reject=ap,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Ev(p))a.push(p);else if(qb(p)){const v=new Promise((I,N)=>{p.subscribe({complete:I,error:N})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(U(D_,8))},i.\u0275prov=ke({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const C_=new Sn("AppId",{providedIn:"root",factory:function dw(){return`${ml()}${ml()}${ml()}`}});function ml(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Rc=new Sn("Platform Initializer"),hw=new Sn("Platform ID"),fw=new Sn("appBootstrapListener");let A_=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ke({token:i,factory:i.\u0275fac}),i})();const S_=new Sn("LocaleId",{providedIn:"root",factory:()=>ye(S_,He.Optional|He.SkipSelf)||function xi(){return"undefined"!=typeof $localize&&$localize.locale||Lf}()}),pw=new Sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class gw{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let GD=(()=>{class i{compileModuleSync(a){return new l_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=go(Xn(a).declarations).reduce((v,I)=>{const N=Jn(I);return N&&v.push(new Im(N)),v},[]);return new gw(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ke({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const WD=(()=>Promise.resolve(0))();function O_(i){"undefined"==typeof Zone?WD.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class xs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Si(!1),this.onMicrotaskEmpty=new Si(!1),this.onStable=new Si(!1),this.onError=new Si(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function ZD(){let i=tn.requestAnimationFrame,o=tn.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function QD(i){const o=()=>{!function YD(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(tn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,N_(i),i.isCheckStableRunning=!0,M_(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),N_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,v,I)=>{try{return mw(i),a.invokeTask(d,p,v,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),yw(i)}},onInvoke:(a,l,d,p,v,I,N)=>{try{return mw(i),a.invoke(d,p,v,I,N)}finally{i.shouldCoalesceRunChangeDetection&&o(),yw(i)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,N_(i),M_(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!xs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(xs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,KD,ap,ap);try{return p.runTask(v,a,l)}finally{p.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const KD={};function M_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function N_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function mw(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function yw(i){i._nesting--,M_(i)}class JD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Si,this.onMicrotaskEmpty=new Si,this.onStable=new Si,this.onError=new Si}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let k_=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{xs.assertNotInAngularZone(),O_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())O_(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(U(xs))},i.\u0275prov=ke({token:i,factory:i.\u0275fac}),i})(),vw=(()=>{class i{constructor(){this._applications=new Map,R_.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return R_.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ke({token:i,factory:i.\u0275fac}),i})();class _w{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function bw(i){R_=i}let bo,R_=new _w;const Lm=new Sn("AllowMultipleToken");class yl{constructor(o,a){this.name=o,this.token=a}}function Iw(i,o,a=[]){const l=`Platform: ${o}`,d=new Sn(l);return(p=[])=>{let v=vl();if(!v||v.injector.get(Lm,!1))if(i)i(a.concat(p).concat({provide:d,useValue:!0}));else{const I=a.concat(p).concat({provide:d,useValue:!0},{provide:Ng,useValue:"platform"});!function ww(i){if(bo&&!bo.destroyed&&!bo.injector.get(Lm,!1))throw new x(400,"");bo=i.get(_l);const o=i.get(Rc,null);o&&o.forEach(a=>a())}(Is.create({providers:I,name:l}))}return function Dw(i){const o=vl();if(!o)throw new x(401,"");return o}()}}function vl(){return bo&&!bo.destroyed?bo:null}let _l=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const I=function Pc(i,o){let a;return a="noop"===i?new JD:("zone.js"===i?void 0:i)||new xs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),N=[{provide:xs,useValue:I}];return I.run(()=>{const z=Is.create({providers:N,parent:this.injector,name:a.moduleType.name}),ne=a.create(z),pe=ne.injector.get(Dd,null);if(!pe)throw new x(402,"");return I.runOutsideAngular(()=>{const Te=I.onError.subscribe({next:Ne=>{pe.handleError(Ne)}});ne.onDestroy(()=>{cp(this._modules,ne),Te.unsubscribe()})}),function up(i,o,a){try{const l=a();return Ev(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(pe,I,()=>{const Te=ne.injector.get(T_);return Te.runInitializers(),Te.donePromise.then(()=>(function fE(i){me(i,"Expected localeId to be defined"),"string"==typeof i&&(Yv=i.toLowerCase().replace(/_/g,"-"))}(ne.injector.get(S_,Lf)||Lf),this._moduleDoBootstrap(ne),ne))})})}bootstrapModule(a,l=[]){const d=F_({},l);return function Vr(i,o,a){const l=new l_(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get(lp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new x(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new x(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(U(Is))},i.\u0275prov=ke({token:i,factory:i.\u0275fac}),i})();function F_(i,o){return Array.isArray(o)?o.reduce(F_,i):Object.assign(Object.assign({},i),o)}let lp=(()=>{class i{constructor(a,l,d,p,v){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const I=new F.y(z=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{z.next(this._stable),z.complete()})}),N=new F.y(z=>{let ne;this._zone.runOutsideAngular(()=>{ne=this._zone.onStable.subscribe(()=>{xs.assertNotInAngularZone(),O_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,z.next(!0))})})});const pe=this._zone.onUnstable.subscribe(()=>{xs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{z.next(!1)}))});return()=>{ne.unsubscribe(),pe.unsubscribe()}});this.isStable=(0,K.T)(I,N.pipe((0,j.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new x(405,"");let d;d=a instanceof SE?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const p=function P_(i){return i.isBoundToModule}(d)?void 0:this._injector.get(Qd),I=d.create(Is.NULL,[],l||d.selector,p),N=I.location.nativeElement,z=I.injector.get(k_,null),ne=z&&I.injector.get(vw);return z&&ne&&ne.registerApplication(N,z),I.onDestroy(()=>{this.detachView(I.hostView),cp(this.components,I),ne&&ne.unregisterApplication(N)}),this._loadComponent(I),I}tick(){if(this._runningTick)throw new x(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;cp(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(fw,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(U(xs),U(Is),U(Dd),U(sa),U(T_))},i.\u0275prov=ke({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function cp(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let Cw=!0,U_=!1;function Aw(){return U_=!0,Cw}function Fm(){if(U_)throw new Error("Cannot enable prod mode after platform setup.");Cw=!1}let xw=(()=>{class i{}return i.__NG_ELEMENT_ID__=XD,i})();function XD(i){return function eT(i,o,a){if($c(i)&&!a){const l=pr(i.index,o);return new Kd(l,l)}return 47&i.type?new Kd(o[16],o):null}(An(),We(),16==(16&i))}class Vc{constructor(){}supports(o){return Xu(o)}create(o){return new Uc(o)}}const Nw=(i,o)=>o;class Uc{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Nw}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const v=!l||a&&a.currentIndex<hu(l,d,p)?a:l,I=hu(v,d,p),N=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{p||(p=[]);const z=I-d,ne=N-d;if(z!=ne){for(let Te=0;Te<z;Te++){const Ne=Te<p.length?p[Te]:p[Te]=0,$e=Ne+Te;ne<=$e&&$e<z&&(p[Te]=Ne+1)}p[v.previousIndex]=ne-z}}I!==N&&o(v,I,N)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Xu(o))throw new x(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)p=o[I],v=this._trackByFn(I,p),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,p,v,I)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,v,I),l=!0),a=a._next}else d=0,function el(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Ud()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,I=>{v=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,I,v,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new iT(a,l),p,d),o}_verifyReinsertion(o,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new H_),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new H_),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class iT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class hh{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class H_{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new hh,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hu(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class $_{constructor(){}supports(o){return o instanceof Map||tv(o)}create(){return new oT}}class oT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||tv(o)))throw new x(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const l=new sT(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class sT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kw(){return new G_([new Vc])}let G_=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||kw()),deps:[[i,new Mn,new Vt]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new x(901,"")}}return i.\u0275prov=ke({token:i,providedIn:"root",factory:kw}),i})();function W_(){return new Z_([new $_])}let Z_=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||W_()),deps:[[i,new Mn,new Vt]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new x(901,"")}}return i.\u0275prov=ke({token:i,providedIn:"root",factory:W_}),i})();const Pw=Iw(null,"core",[{provide:hw,useValue:"unknown"},{provide:_l,deps:[Is]},{provide:vw,deps:[]},{provide:A_,deps:[]}]);let Lw=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(U(lp))},i.\u0275mod=Qt({type:i}),i.\u0275inj=Ue({}),i})()},3942:(ht,ge,M)=>{"use strict";M.d(ge,{Z:()=>x});var c=M(2090),ee=M(4859),F=M(9681),K=M(1877);class j{constructor(D,L){this._delegate=D,this.firebase=L,(0,F._addComponent)(D,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=D.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(D){this._delegate.automaticDataCollectionEnabled=D}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(D=>{this._delegate.checkDestroyed(),D()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(D,L=F._DEFAULT_ENTRY_NAME){var re;this._delegate.checkDestroyed();const J=this._delegate.container.getProvider(D);return!J.isInitialized()&&"EXPLICIT"===(null===(re=J.getComponent())||void 0===re?void 0:re.instantiationMode)&&J.initialize(),J.getImmediate({identifier:L})}_removeServiceInstance(D,L=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(D).clearInstance(L)}_addComponent(D){(0,F._addComponent)(this._delegate,D)}_addOrOverwriteComponent(D){(0,F._addOrOverwriteComponent)(this._delegate,D)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const R=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),_=function E(){const V=function S(V){const D={},L={__esModule:!0,initializeApp:function Z(W,B={}){const te=F.initializeApp(W,B);if((0,c.r3)(D,te.name))return D[te.name];const Y=new V(te,L);return D[te.name]=Y,Y},app:J,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function $(W){const B=W.name,te=B.replace("-compat","");if(F._registerComponent(W)&&"PUBLIC"===W.type){const Y=(de=J())=>{if("function"!=typeof de[te])throw R.create("invalid-app-argument",{appName:B});return de[te]()};void 0!==W.serviceProps&&(0,c.ZB)(Y,W.serviceProps),L[te]=Y,V.prototype[te]=function(...de){return this._getService.bind(this,B).apply(this,W.multipleInstances?de:[])}}return"PUBLIC"===W.type?L[te]:null},removeApp:function re(W){delete D[W]},useAsService:function H(W,B){return"serverAuth"===B?null:B},modularAPIs:F}};function J(W){if(!(0,c.r3)(D,W=W||F._DEFAULT_ENTRY_NAME))throw R.create("no-app",{appName:W});return D[W]}return L.default=L,Object.defineProperty(L,"apps",{get:function X(){return Object.keys(D).map(W=>D[W])}}),J.App=V,L}(j);return V.INTERNAL=Object.assign(Object.assign({},V.INTERNAL),{createFirebaseNamespace:E,extendNamespace:function D(L){(0,c.ZB)(V,L)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),V}(),T=new K.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){T.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const V=self.firebase.SDK_VERSION;V&&V.indexOf("LITE")>=0&&T.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const x=_;!function A(V){(0,F.registerVersion)("@firebase/app-compat","0.1.32",V)}()},9681:(ht,ge,M)=>{"use strict";M.r(ge),M.d(ge,{FirebaseError:()=>K.ZR,SDK_VERSION:()=>wn,_DEFAULT_ENTRY_NAME:()=>me,_addComponent:()=>Ie,_addOrOverwriteComponent:()=>ke,_apps:()=>xe,_clearComponents:()=>Et,_components:()=>he,_getProvider:()=>Ue,_registerComponent:()=>Re,_removeServiceInstance:()=>Qe,deleteApp:()=>He,getApp:()=>Be,getApps:()=>qe,initializeApp:()=>mn,onLog:()=>vt,registerVersion:()=>ze,setLogLevel:()=>Rt});var c=M(5861),ee=M(4859),F=M(1877),K=M(2090),j=M(8766);class q{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(Ce=>{if(function R(ve){const De=ve.getComponent();return"VERSION"===(null==De?void 0:De.type)}(Ce)){const Ze=Ce.getImmediate();return`${Ze.library}/${Ze.version}`}return null}).filter(Ce=>Ce).join(" ")}}const S="@firebase/app",E="0.7.31",_=new F.Yd("@firebase/app"),me="[DEFAULT]",_e={[S]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},xe=new Map,he=new Map;function Ie(ve,De){try{ve.container.addComponent(De)}catch(Ce){_.debug(`Component ${De.name} failed to register with FirebaseApp ${ve.name}`,Ce)}}function ke(ve,De){ve.container.addOrOverwriteComponent(De)}function Re(ve){const De=ve.name;if(he.has(De))return _.debug(`There were multiple attempts to register component ${De}.`),!1;he.set(De,ve);for(const Ce of xe.values())Ie(Ce,ve);return!0}function Ue(ve,De){const Ce=ve.container.getProvider("heartbeat").getImmediate({optional:!0});return Ce&&Ce.triggerHeartbeat(),ve.container.getProvider(De)}function Qe(ve,De,Ce=me){Ue(ve,De).clearInstance(Ce)}function Et(){he.clear()}const Mt=new K.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Bt{constructor(De,Ce,Ze){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},Ce),this._name=Ce.name,this._automaticDataCollectionEnabled=Ce.automaticDataCollectionEnabled,this._container=Ze,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw Mt.create("app-deleted",{appName:this._name})}}const wn="9.9.3";function mn(ve,De={}){"object"!=typeof De&&(De={name:De});const Ce=Object.assign({name:me,automaticDataCollectionEnabled:!1},De),Ze=Ce.name;if("string"!=typeof Ze||!Ze)throw Mt.create("bad-app-name",{appName:String(Ze)});const rt=xe.get(Ze);if(rt){if((0,K.vZ)(ve,rt.options)&&(0,K.vZ)(Ce,rt.config))return rt;throw Mt.create("duplicate-app",{appName:Ze})}const It=new ee.H0(Ze);for(const un of he.values())It.addComponent(un);const yn=new Bt(ve,Ce,It);return xe.set(Ze,yn),yn}function Be(ve=me){const De=xe.get(ve);if(!De)throw Mt.create("no-app",{appName:ve});return De}function qe(){return Array.from(xe.values())}function He(ve){return it.apply(this,arguments)}function it(){return(it=(0,c.Z)(function*(ve){const De=ve.name;xe.has(De)&&(xe.delete(De),yield Promise.all(ve.container.getProviders().map(Ce=>Ce.delete())),ve.isDeleted=!0)})).apply(this,arguments)}function ze(ve,De,Ce){var Ze;let rt=null!==(Ze=_e[ve])&&void 0!==Ze?Ze:ve;Ce&&(rt+=`-${Ce}`);const It=rt.match(/\s|\//),yn=De.match(/\s|\//);if(It||yn){const un=[`Unable to register library "${rt}" with version "${De}":`];return It&&un.push(`library name "${rt}" contains illegal characters (whitespace or "/")`),It&&yn&&un.push("and"),yn&&un.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void _.warn(un.join(" "))}Re(new ee.wA(`${rt}-version`,()=>({library:rt,version:De}),"VERSION"))}function vt(ve,De){if(null!==ve&&"function"!=typeof ve)throw Mt.create("invalid-log-argument");(0,F.Am)(ve,De)}function Rt(ve){(0,F.Ub)(ve)}const fn="firebase-heartbeat-store";let en=null;function Do(){return en||(en=(0,j.X3)("firebase-heartbeat-database",1,{upgrade:(ve,De)=>{0===De&&ve.createObjectStore(fn)}}).catch(ve=>{throw Mt.create("idb-open",{originalErrorMessage:ve.message})})),en}function ft(){return(ft=(0,c.Z)(function*(ve){var De;try{return(yield Do()).transaction(fn).objectStore(fn).get(ni(ve))}catch(Ce){if(Ce instanceof K.ZR)_.warn(Ce.message);else{const Ze=Mt.create("idb-get",{originalErrorMessage:null===(De=Ce)||void 0===De?void 0:De.message});_.warn(Ze.message)}}})).apply(this,arguments)}function Ft(ve,De){return _r.apply(this,arguments)}function _r(){return(_r=(0,c.Z)(function*(ve,De){var Ce;try{const rt=(yield Do()).transaction(fn,"readwrite");return yield rt.objectStore(fn).put(De,ni(ve)),rt.done}catch(Ze){if(Ze instanceof K.ZR)_.warn(Ze.message);else{const rt=Mt.create("idb-set",{originalErrorMessage:null===(Ce=Ze)||void 0===Ce?void 0:Ce.message});_.warn(rt.message)}}})).apply(this,arguments)}function ni(ve){return`${ve.name}!${ve.options.appId}`}class br{constructor(De){this.container=De,this._heartbeatsCache=null;const Ce=this.container.getProvider("app").getImmediate();this._storage=new Co(Ce),this._heartbeatsCachePromise=this._storage.read().then(Ze=>(this._heartbeatsCache=Ze,Ze))}triggerHeartbeat(){var De=this;return(0,c.Z)(function*(){const Ze=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),rt=Or();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==rt&&!De._heartbeatsCache.heartbeats.some(It=>It.date===rt))return De._heartbeatsCache.heartbeats.push({date:rt,agent:Ze}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(It=>{const yn=new Date(It.date).valueOf();return Date.now()-yn<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,c.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const Ce=Or(),{heartbeatsToSend:Ze,unsentEntries:rt}=function Tt(ve,De=1024){const Ce=[];let Ze=ve.slice();for(const rt of ve){const It=Ce.find(yn=>yn.agent===rt.agent);if(It){if(It.dates.push(rt.date),Ee(Ce)>De){It.dates.pop();break}}else if(Ce.push({agent:rt.agent,dates:[rt.date]}),Ee(Ce)>De){Ce.pop();break}Ze=Ze.slice(1)}return{heartbeatsToSend:Ce,unsentEntries:Ze}}(De._heartbeatsCache.heartbeats),It=(0,K.L)(JSON.stringify({version:2,heartbeats:Ze}));return De._heartbeatsCache.lastSentHeartbeatDate=Ce,rt.length>0?(De._heartbeatsCache.heartbeats=rt,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),It})()}}function Or(){return(new Date).toISOString().substring(0,10)}class Co{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,K.hl)()&&(0,K.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,c.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function At(ve){return ft.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var Ce=this;return(0,c.Z)(function*(){var Ze;if(yield Ce._canUseIndexedDBPromise){const It=yield Ce.read();return Ft(Ce.app,{lastSentHeartbeatDate:null!==(Ze=De.lastSentHeartbeatDate)&&void 0!==Ze?Ze:It.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var Ce=this;return(0,c.Z)(function*(){var Ze;if(yield Ce._canUseIndexedDBPromise){const It=yield Ce.read();return Ft(Ce.app,{lastSentHeartbeatDate:null!==(Ze=De.lastSentHeartbeatDate)&&void 0!==Ze?Ze:It.lastSentHeartbeatDate,heartbeats:[...It.heartbeats,...De.heartbeats]})}})()}}function Ee(ve){return(0,K.L)(JSON.stringify({version:2,heartbeats:ve})).length}!function Ae(ve){Re(new ee.wA("platform-logger",De=>new q(De),"PRIVATE")),Re(new ee.wA("heartbeat",De=>new br(De),"PRIVATE")),ze(S,E,ve),ze(S,E,"esm2017"),ze("fire-js","")}("")},4859:(ht,ge,M)=>{"use strict";M.d(ge,{wA:()=>F,H0:()=>S});var c=M(5861),ee=M(2090);class F{constructor(_,T,C){this.name=_,this.instanceFactory=T,this.type=C,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(_){return this.instantiationMode=_,this}setMultipleInstances(_){return this.multipleInstances=_,this}setServiceProps(_){return this.serviceProps=_,this}setInstanceCreatedCallback(_){return this.onInstanceCreated=_,this}}const K="[DEFAULT]";class j{constructor(_,T){this.name=_,this.container=T,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(_){const T=this.normalizeInstanceIdentifier(_);if(!this.instancesDeferred.has(T)){const C=new ee.BH;if(this.instancesDeferred.set(T,C),this.isInitialized(T)||this.shouldAutoInitialize())try{const k=this.getOrInitializeService({instanceIdentifier:T});k&&C.resolve(k)}catch(k){}}return this.instancesDeferred.get(T).promise}getImmediate(_){var T;const C=this.normalizeInstanceIdentifier(null==_?void 0:_.identifier),k=null!==(T=null==_?void 0:_.optional)&&void 0!==T&&T;if(!this.isInitialized(C)&&!this.shouldAutoInitialize()){if(k)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:C})}catch(A){if(k)return null;throw A}}getComponent(){return this.component}setComponent(_){if(_.name!==this.name)throw Error(`Mismatching Component ${_.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=_,this.shouldAutoInitialize()){if(function R(E){return"EAGER"===E.instantiationMode}(_))try{this.getOrInitializeService({instanceIdentifier:K})}catch(T){}for(const[T,C]of this.instancesDeferred.entries()){const k=this.normalizeInstanceIdentifier(T);try{const A=this.getOrInitializeService({instanceIdentifier:k});C.resolve(A)}catch(A){}}}}clearInstance(_=K){this.instancesDeferred.delete(_),this.instancesOptions.delete(_),this.instances.delete(_)}delete(){var _=this;return(0,c.Z)(function*(){const T=Array.from(_.instances.values());yield Promise.all([...T.filter(C=>"INTERNAL"in C).map(C=>C.INTERNAL.delete()),...T.filter(C=>"_delete"in C).map(C=>C._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(_=K){return this.instances.has(_)}getOptions(_=K){return this.instancesOptions.get(_)||{}}initialize(_={}){const{options:T={}}=_,C=this.normalizeInstanceIdentifier(_.instanceIdentifier);if(this.isInitialized(C))throw Error(`${this.name}(${C}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const k=this.getOrInitializeService({instanceIdentifier:C,options:T});for(const[A,x]of this.instancesDeferred.entries())C===this.normalizeInstanceIdentifier(A)&&x.resolve(k);return k}onInit(_,T){var C;const k=this.normalizeInstanceIdentifier(T),A=null!==(C=this.onInitCallbacks.get(k))&&void 0!==C?C:new Set;A.add(_),this.onInitCallbacks.set(k,A);const x=this.instances.get(k);return x&&_(x,k),()=>{A.delete(_)}}invokeOnInitCallbacks(_,T){const C=this.onInitCallbacks.get(T);if(C)for(const k of C)try{k(_,T)}catch(A){}}getOrInitializeService({instanceIdentifier:_,options:T={}}){let C=this.instances.get(_);if(!C&&this.component&&(C=this.component.instanceFactory(this.container,{instanceIdentifier:(E=_,E===K?void 0:E),options:T}),this.instances.set(_,C),this.instancesOptions.set(_,T),this.invokeOnInitCallbacks(C,_),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,_,C)}catch(k){}var E;return C||null}normalizeInstanceIdentifier(_=K){return this.component?this.component.multipleInstances?_:K:_}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class S{constructor(_){this.name=_,this.providers=new Map}addComponent(_){const T=this.getProvider(_.name);if(T.isComponentSet())throw new Error(`Component ${_.name} has already been registered with ${this.name}`);T.setComponent(_)}addOrOverwriteComponent(_){this.getProvider(_.name).isComponentSet()&&this.providers.delete(_.name),this.addComponent(_)}getProvider(_){if(this.providers.has(_))return this.providers.get(_);const T=new j(_,this);return this.providers.set(_,T),T}getProviders(){return Array.from(this.providers.values())}}},1877:(ht,ge,M)=>{"use strict";M.d(ge,{in:()=>ee,Yd:()=>R,Ub:()=>S,Am:()=>E});const c=[];var ee=(()=>{return(_=ee||(ee={}))[_.DEBUG=0]="DEBUG",_[_.VERBOSE=1]="VERBOSE",_[_.INFO=2]="INFO",_[_.WARN=3]="WARN",_[_.ERROR=4]="ERROR",_[_.SILENT=5]="SILENT",ee;var _})();const F={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},K=ee.INFO,j={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},q=(_,T,...C)=>{if(T<_.logLevel)return;const k=(new Date).toISOString(),A=j[T];if(!A)throw new Error(`Attempted to log a message with an invalid logType (value: ${T})`);console[A](`[${k}]  ${_.name}:`,...C)};class R{constructor(T){this.name=T,this._logLevel=K,this._logHandler=q,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(T){if(!(T in ee))throw new TypeError(`Invalid value "${T}" assigned to \`logLevel\``);this._logLevel=T}setLogLevel(T){this._logLevel="string"==typeof T?F[T]:T}get logHandler(){return this._logHandler}set logHandler(T){if("function"!=typeof T)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=T}get userLogHandler(){return this._userLogHandler}set userLogHandler(T){this._userLogHandler=T}debug(...T){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...T),this._logHandler(this,ee.DEBUG,...T)}log(...T){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...T),this._logHandler(this,ee.VERBOSE,...T)}info(...T){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...T),this._logHandler(this,ee.INFO,...T)}warn(...T){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...T),this._logHandler(this,ee.WARN,...T)}error(...T){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...T),this._logHandler(this,ee.ERROR,...T)}}function S(_){c.forEach(T=>{T.setLogLevel(_)})}function E(_,T){for(const C of c){let k=null;T&&T.level&&(k=F[T.level]),C.userLogHandler=null===_?null:(A,x,...V)=>{const D=V.map(L=>{if(null==L)return null;if("string"==typeof L)return L;if("number"==typeof L||"boolean"==typeof L)return L.toString();if(L instanceof Error)return L.message;try{return JSON.stringify(L)}catch(re){return null}}).filter(L=>L).join(" ");x>=(null!=k?k:A.logLevel)&&_({level:ee[x].toLowerCase(),message:D,args:V,type:A.name})}}}},8766:(ht,ge,M)=>{"use strict";M.d(ge,{Lj:()=>Z,X3:()=>J});var c=M(5861);let F,K;const R=new WeakMap,S=new WeakMap,E=new WeakMap,_=new WeakMap,T=new WeakMap;let A={get(B,te,Y){if(B instanceof IDBTransaction){if("done"===te)return S.get(B);if("objectStoreNames"===te)return B.objectStoreNames||E.get(B);if("store"===te)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return L(B[te])},set:(B,te,Y)=>(B[te]=Y,!0),has:(B,te)=>B instanceof IDBTransaction&&("done"===te||"store"===te)||te in B};function D(B){return"function"==typeof B?function V(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function q(){return K||(K=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(...te){return B.apply(re(this),te),L(R.get(this))}:function(...te){return L(B.apply(re(this),te))}:function(te,...Y){const de=B.call(re(this),te,...Y);return E.set(de,te.sort?te.sort():[te]),L(de)}}(B):(B instanceof IDBTransaction&&function k(B){if(S.has(B))return;const te=new Promise((Y,de)=>{const ue=()=>{B.removeEventListener("complete",be),B.removeEventListener("error",ce),B.removeEventListener("abort",ce)},be=()=>{Y(),ue()},ce=()=>{de(B.error||new DOMException("AbortError","AbortError")),ue()};B.addEventListener("complete",be),B.addEventListener("error",ce),B.addEventListener("abort",ce)});S.set(B,te)}(B),((B,te)=>te.some(Y=>B instanceof Y))(B,function j(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,A):B)}function L(B){if(B instanceof IDBRequest)return function C(B){const te=new Promise((Y,de)=>{const ue=()=>{B.removeEventListener("success",be),B.removeEventListener("error",ce)},be=()=>{Y(L(B.result)),ue()},ce=()=>{de(B.error),ue()};B.addEventListener("success",be),B.addEventListener("error",ce)});return te.then(Y=>{Y instanceof IDBCursor&&R.set(Y,B)}).catch(()=>{}),T.set(te,B),te}(B);if(_.has(B))return _.get(B);const te=D(B);return te!==B&&(_.set(B,te),T.set(te,B)),te}const re=B=>T.get(B);function J(B,te,{blocked:Y,upgrade:de,blocking:ue,terminated:be}={}){const ce=indexedDB.open(B,te),le=L(ce);return de&&ce.addEventListener("upgradeneeded",ie=>{de(L(ce.result),ie.oldVersion,ie.newVersion,L(ce.transaction))}),Y&&ce.addEventListener("blocked",()=>Y()),le.then(ie=>{be&&ie.addEventListener("close",()=>be()),ue&&ie.addEventListener("versionchange",()=>ue())}).catch(()=>{}),le}function Z(B,{blocked:te}={}){const Y=indexedDB.deleteDatabase(B);return te&&Y.addEventListener("blocked",()=>te()),L(Y).then(()=>{})}const X=["get","getKey","getAll","getAllKeys","count"],$=["put","add","delete","clear"],H=new Map;function W(B,te){if(!(B instanceof IDBDatabase)||te in B||"string"!=typeof te)return;if(H.get(te))return H.get(te);const Y=te.replace(/FromIndex$/,""),de=te!==Y,ue=$.includes(Y);if(!(Y in(de?IDBIndex:IDBObjectStore).prototype)||!ue&&!X.includes(Y))return;const be=function(){var ce=(0,c.Z)(function*(le,...ie){const fe=this.transaction(le,ue?"readwrite":"readonly");let me=fe.store;return de&&(me=me.index(ie.shift())),(yield Promise.all([me[Y](...ie),ue&&fe.done]))[0]});return function(ie){return ce.apply(this,arguments)}}();return H.set(te,be),be}!function x(B){A=B(A)}(B=>Z1(W1({},B),{get:(te,Y,de)=>W(te,Y)||B.get(te,Y,de),has:(te,Y)=>!!W(te,Y)||B.has(te,Y)}))},5861:(ht,ge,M)=>{"use strict";function c(F,K,j,q,R,S,E){try{var _=F[S](E),T=_.value}catch(C){return void j(C)}_.done?K(T):Promise.resolve(T).then(q,R)}function ee(F){return function(){var K=this,j=arguments;return new Promise(function(q,R){var S=F.apply(K,j);function E(T){c(S,q,R,E,_,"next",T)}function _(T){c(S,q,R,E,_,"throw",T)}E(void 0)})}}M.d(ge,{Z:()=>ee})}},ht=>{ht(ht.s=6085)}]);