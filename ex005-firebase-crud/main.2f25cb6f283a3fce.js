var EN=Object.defineProperty,wN=Object.defineProperties,IN=Object.getOwnPropertyDescriptors,H1=Object.getOwnPropertySymbols,DN=Object.prototype.hasOwnProperty,TN=Object.prototype.propertyIsEnumerable,$1=(ht,ge,M)=>ge in ht?EN(ht,ge,{enumerable:!0,configurable:!0,writable:!0,value:M}):ht[ge]=M,G1=(ht,ge)=>{for(var M in ge||(ge={}))DN.call(ge,M)&&$1(ht,M,ge[M]);if(H1)for(var M of H1(ge))TN.call(ge,M)&&$1(ht,M,ge[M]);return ht},z1=(ht,ge)=>wN(ht,IN(ge));(self.webpackChunkproject_angular=self.webpackChunkproject_angular||[]).push([[179],{2011:(ht,ge,M)=>{"use strict";M.d(ge,{hO:()=>k,xv:()=>E,Dh:()=>S,GT:()=>q,cc:()=>A,on:()=>_,pX:()=>j});var c=M(5e3),ee=M(127),F=M(5813);ht=M.hmd(ht);const K=["ngOnDestroy"],j=(L,ne,J,Z={})=>new Proxy(L,{get:(X,$)=>J.runOutsideAngular(()=>{var H;if(L[$])return(null===(H=null==Z?void 0:Z.spy)||void 0===H?void 0:H.get)&&Z.spy.get($,L[$]),L[$];if(K.indexOf($)>-1)return()=>{};const W=ne.toPromise().then(B=>{const te=B&&B[$];return"function"==typeof te?te.bind(B):te&&te.then?te.then(Y=>J.run(()=>Y)):J.run(()=>te)});return new Proxy(()=>{},{get:(B,te)=>W[te],apply:(B,te,Y)=>W.then(de=>{var ue;const be=de&&de(...Y);return(null===(ue=null==Z?void 0:Z.spy)||void 0===ue?void 0:ue.apply)&&Z.spy.apply($,Y,be),be})})})}),q=(L,ne)=>{ne.forEach(J=>{Object.getOwnPropertyNames(J.prototype||J).forEach(Z=>{Object.defineProperty(L.prototype,Z,Object.getOwnPropertyDescriptor(J.prototype||J,Z))})})};class R{constructor(ne){return ne}}const S=new c.OlP("angularfire2.app.options"),E=new c.OlP("angularfire2.app.name");function _(L,ne,J){const X="object"==typeof J&&J||{};X.name=X.name||"string"==typeof J&&J||"[DEFAULT]";const H=ee.Z.apps.filter(W=>W&&W.name===X.name)[0]||ne.runOutsideAngular(()=>ee.Z.initializeApp(L,X));try{JSON.stringify(L)!==JSON.stringify(H.options)&&T("error",`${H.name} Firebase App already initialized with different options${ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(W){}return new R(H)}const T=(L,...ne)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[L](...ne)},C={provide:R,useFactory:_,deps:[S,c.R0b,[new c.FiY,E]]};let k=(()=>{class L{constructor(J){ee.Z.registerVersion("angularfire",F.q4.full,"core"),ee.Z.registerVersion("angularfire",F.q4.full,"app-compat"),ee.Z.registerVersion("angular",c.q4F.full,J.toString())}static initializeApp(J,Z){return{ngModule:L,providers:[{provide:S,useValue:J},{provide:E,useValue:Z}]}}}return L.\u0275fac=function(J){return new(J||L)(c.LFG(c.Lbi))},L.\u0275mod=c.oAB({type:L}),L.\u0275inj=c.cJS({providers:[C]}),L})();function A(L,ne,J,Z,X){const[,$,H]=globalThis.\u0275AngularfireInstanceCache.find(W=>W[0]===L)||[];if($)return function x(L,ne){try{return L.toString()===ne.toString()}catch(J){return L===ne}}(X,H)||(I("error",`${ne} was already initialized on the ${J} Firebase App with different settings.${V?" You may need to reload as Firebase is not HMR aware.":""}`),I("warn",{is:X,was:H})),$;{const W=Z();return globalThis.\u0275AngularfireInstanceCache.push([L,W,X]),W}}const V=!!ht.hot,I=(L,...ne)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[L](...ne)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ht,ge,M)=>{"use strict";M.d(ge,{q4:()=>Jt,iC:()=>Ua,HU:()=>Va,vb:()=>kl,JM:()=>xu});var c=M(5e3),ee=M(5867),F=M(5861),K=M(9681),j=M(2090),q=M(4859),R=M(1877),S=M(8766);const E="@firebase/installations",_="0.5.12",C=`w:${_}`,k="FIS_v2",ne=new j.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function J(O){return O instanceof j.ZR&&O.code.includes("request-failed")}function Z({projectId:O}){return`https://firebaseinstallations.googleapis.com/v1/projects/${O}/installations`}function X(O){return{token:O.token,requestStatus:2,expiresIn:de(O.expiresIn),creationTime:Date.now()}}function $(O,U){return H.apply(this,arguments)}function H(){return(H=(0,F.Z)(function*(O,U){const ye=(yield U.json()).error;return ne.create("request-failed",{requestName:O,serverCode:ye.code,serverMessage:ye.message,serverStatus:ye.status})})).apply(this,arguments)}function W({apiKey:O}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O})}function B(O,{refreshToken:U}){const oe=W(O);return oe.append("Authorization",function ue(O){return`${k} ${O}`}(U)),oe}function te(O){return Y.apply(this,arguments)}function Y(){return(Y=(0,F.Z)(function*(O){const U=yield O();return U.status>=500&&U.status<600?O():U})).apply(this,arguments)}function de(O){return Number(O.replace("s","000"))}function be(O,U){return ce.apply(this,arguments)}function ce(){return(ce=(0,F.Z)(function*({appConfig:O,heartbeatServiceProvider:U},{fid:oe}){const ye=Z(O),Oe=W(O),Pe=U.getImmediate({optional:!0});if(Pe){const Ot=yield Pe.getHeartbeatsHeader();Ot&&Oe.append("x-firebase-client",Ot)}const st={method:"POST",headers:Oe,body:JSON.stringify({fid:oe,authVersion:k,appId:O.appId,sdkVersion:C})},_t=yield te(()=>fetch(ye,st));if(_t.ok){const Ot=yield _t.json();return{fid:Ot.fid||oe,registrationStatus:2,refreshToken:Ot.refreshToken,authToken:X(Ot.authToken)}}throw yield $("Create Installation",_t)})).apply(this,arguments)}function le(O){return new Promise(U=>{setTimeout(U,O)})}const fe=/^[cdef][\w-]{21}$/;function _e(){try{const O=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(O),O[0]=112+O[0]%16;const oe=function xe(O){return function ie(O){return btoa(String.fromCharCode(...O)).replace(/\+/g,"-").replace(/\//g,"_")}(O).substr(0,22)}(O);return fe.test(oe)?oe:""}catch(O){return""}}function he(O){return`${O.appName}!${O.appId}`}const De=new Map;function ke(O,U){const oe=he(O);Qe(oe,U),function wt(O,U){const oe=function Mt(){return!It&&"BroadcastChannel"in self&&(It=new BroadcastChannel("[Firebase] FID Change"),It.onmessage=O=>{Qe(O.data.key,O.data.fid)}),It}();oe&&oe.postMessage({key:O,fid:U}),function Bt(){0===De.size&&It&&(It.close(),It=null)}()}(oe,U)}function Qe(O,U){const oe=De.get(O);if(oe)for(const ye of oe)ye(U)}let It=null;const je="firebase-installations-store";let qe=null;function He(){return qe||(qe=(0,S.X3)("firebase-installations-database",1,{upgrade:(O,U)=>{0===U&&O.createObjectStore(je)}})),qe}function it(O,U){return ze.apply(this,arguments)}function ze(){return(ze=(0,F.Z)(function*(O,U){const oe=he(O),Oe=(yield He()).transaction(je,"readwrite"),Pe=Oe.objectStore(je),Ye=yield Pe.get(oe);return yield Pe.put(U,oe),yield Oe.done,(!Ye||Ye.fid!==U.fid)&&ke(O,U.fid),U})).apply(this,arguments)}function vt(O){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,F.Z)(function*(O){const U=he(O),ye=(yield He()).transaction(je,"readwrite");yield ye.objectStore(je).delete(U),yield ye.done})).apply(this,arguments)}function Pt(O,U){return sn.apply(this,arguments)}function sn(){return(sn=(0,F.Z)(function*(O,U){const oe=he(O),Oe=(yield He()).transaction(je,"readwrite"),Pe=Oe.objectStore(je),Ye=yield Pe.get(oe),st=U(Ye);return void 0===st?yield Pe.delete(oe):yield Pe.put(st,oe),yield Oe.done,st&&(!Ye||Ye.fid!==st.fid)&&ke(O,st.fid),st})).apply(this,arguments)}function fn(O){return en.apply(this,arguments)}function en(){return(en=(0,F.Z)(function*(O){let U;const oe=yield Pt(O.appConfig,ye=>{const Oe=Io(ye),Pe=St(O,Oe);return U=Pe.registrationPromise,Pe.installationEntry});return""===oe.fid?{installationEntry:yield U}:{installationEntry:oe,registrationPromise:U}})).apply(this,arguments)}function Io(O){return Do(O||{fid:_e(),registrationStatus:0})}function St(O,U){if(0===U.registrationStatus){if(!navigator.onLine)return{installationEntry:U,registrationPromise:Promise.reject(ne.create("app-offline"))};const oe={fid:U.fid,registrationStatus:1,registrationTime:Date.now()},ye=function ft(O,U){return Lt.apply(this,arguments)}(O,oe);return{installationEntry:oe,registrationPromise:ye}}return 1===U.registrationStatus?{installationEntry:U,registrationPromise:Er(O)}:{installationEntry:U}}function Lt(){return(Lt=(0,F.Z)(function*(O,U){try{const oe=yield be(O,U);return it(O.appConfig,oe)}catch(oe){throw J(oe)&&409===oe.customData.serverCode?yield vt(O.appConfig):yield it(O.appConfig,{fid:U.fid,registrationStatus:0}),oe}})).apply(this,arguments)}function Er(O){return ri.apply(this,arguments)}function ri(){return(ri=(0,F.Z)(function*(O){let U=yield tn(O.appConfig);for(;1===U.registrationStatus;)yield le(100),U=yield tn(O.appConfig);if(0===U.registrationStatus){const{installationEntry:oe,registrationPromise:ye}=yield fn(O);return ye||oe}return U})).apply(this,arguments)}function tn(O){return Pt(O,U=>{if(!U)throw ne.create("installation-not-found");return Do(U)})}function Do(O){return function wr(O){return 1===O.registrationStatus&&O.registrationTime+1e4<Date.now()}(O)?{fid:O.fid,registrationStatus:0}:O}function Mr(O,U){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,F.Z)(function*({appConfig:O,heartbeatServiceProvider:U},oe){const ye=To(O,oe),Oe=B(O,oe),Pe=U.getImmediate({optional:!0});if(Pe){const Ot=yield Pe.getHeartbeatsHeader();Ot&&Oe.append("x-firebase-client",Ot)}const st={method:"POST",headers:Oe,body:JSON.stringify({installation:{sdkVersion:C,appId:O.appId}})},_t=yield te(()=>fetch(ye,st));if(_t.ok)return X(yield _t.json());throw yield $("Generate Auth Token",_t)})).apply(this,arguments)}function To(O,{fid:U}){return`${Z(O)}/${U}/authTokens:generate`}function Ee(O){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,F.Z)(function*(O,U=!1){let oe;const ye=yield Pt(O.appConfig,Pe=>{if(!Dt(Pe))throw ne.create("not-registered");const Ye=Pe.authToken;if(!U&&vn(Ye))return Pe;if(1===Ye.requestStatus)return oe=ve(O,U),Pe;{if(!navigator.onLine)throw ne.create("app-offline");const st=or(Pe);return oe=Ke(O,st),st}});return oe?yield oe:ye.authToken})).apply(this,arguments)}function ve(O,U){return Te.apply(this,arguments)}function Te(){return(Te=(0,F.Z)(function*(O,U){let oe=yield Ce(O.appConfig);for(;1===oe.authToken.requestStatus;)yield le(100),oe=yield Ce(O.appConfig);const ye=oe.authToken;return 0===ye.requestStatus?Ee(O,U):ye})).apply(this,arguments)}function Ce(O){return Pt(O,U=>{if(!Dt(U))throw ne.create("not-registered");return function Yt(O){return 1===O.requestStatus&&O.requestTime+1e4<Date.now()}(U.authToken)?Object.assign(Object.assign({},U),{authToken:{requestStatus:0}}):U})}function Ke(O,U){return rt.apply(this,arguments)}function rt(){return(rt=(0,F.Z)(function*(O,U){try{const oe=yield Mr(O,U),ye=Object.assign(Object.assign({},U),{authToken:oe});return yield it(O.appConfig,ye),oe}catch(oe){if(!J(oe)||401!==oe.customData.serverCode&&404!==oe.customData.serverCode){const ye=Object.assign(Object.assign({},U),{authToken:{requestStatus:0}});yield it(O.appConfig,ye)}else yield vt(O.appConfig);throw oe}})).apply(this,arguments)}function Dt(O){return void 0!==O&&2===O.registrationStatus}function vn(O){return 2===O.requestStatus&&!function un(O){const U=Date.now();return U<O.creationTime||O.creationTime+O.expiresIn<U+36e5}(O)}function or(O){const U={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},O),{authToken:U})}function Oi(){return(Oi=(0,F.Z)(function*(O){const U=O,{installationEntry:oe,registrationPromise:ye}=yield fn(U);return ye?ye.catch(console.error):Ee(U).catch(console.error),oe.fid})).apply(this,arguments)}function ca(){return(ca=(0,F.Z)(function*(O,U=!1){const oe=O;return yield Qn(oe),(yield Ee(oe,U)).token})).apply(this,arguments)}function Qn(O){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,F.Z)(function*(O){const{registrationPromise:U}=yield fn(O);U&&(yield U)})).apply(this,arguments)}function Ms(O){return ne.create("missing-app-config-values",{valueName:O})}const Gr="installations",Tt=O=>{const U=O.getProvider("app").getImmediate(),oe=function dr(O){if(!O||!O.options)throw Ms("App Configuration");if(!O.name)throw Ms("App Name");const U=["projectId","apiKey","appId"];for(const oe of U)if(!O.options[oe])throw Ms(oe);return{appName:O.name,projectId:O.options.projectId,apiKey:O.options.apiKey,appId:O.options.appId}}(U);return{app:U,appConfig:oe,heartbeatServiceProvider:(0,K._getProvider)(U,"heartbeat"),_delete:()=>Promise.resolve()}},_n=O=>{const U=O.getProvider("app").getImmediate(),oe=(0,K._getProvider)(U,Gr).getImmediate();return{getId:()=>function Hr(O){return Oi.apply(this,arguments)}(oe),getToken:Oe=>function Os(O){return ca.apply(this,arguments)}(oe,Oe)}};(function zr(){(0,K._registerComponent)(new q.wA(Gr,Tt,"PUBLIC")),(0,K._registerComponent)(new q.wA("installations-internal",_n,"PRIVATE"))})(),(0,K.registerVersion)(E,_),(0,K.registerVersion)(E,_,"esm2017");const Mi="@firebase/remote-config",Vn=new j.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Np{constructor(U,oe,ye,Oe){this.client=U,this.storage=oe,this.storageCache=ye,this.logger=Oe}isCachedDataFresh(U,oe){if(!oe)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ye=Date.now()-oe,Oe=ye<=U;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ye}. Cache max age millis (minimumFetchIntervalMillis setting): ${U}. Is cache hit: ${Oe}.`),Oe}fetch(U){var oe=this;return(0,F.Z)(function*(){const[ye,Oe]=yield Promise.all([oe.storage.getLastSuccessfulFetchTimestampMillis(),oe.storage.getLastSuccessfulFetchResponse()]);if(Oe&&oe.isCachedDataFresh(U.cacheMaxAgeMillis,ye))return Oe;U.eTag=Oe&&Oe.eTag;const Pe=yield oe.client.fetch(U),Ye=[oe.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Pe.status&&Ye.push(oe.storage.setLastSuccessfulFetchResponse(Pe)),yield Promise.all(Ye),Pe})()}}function Fc(O=navigator){return O.languages&&O.languages[0]||O.language}class Ir{constructor(U,oe,ye,Oe,Pe,Ye){this.firebaseInstallations=U,this.sdkVersion=oe,this.namespace=ye,this.projectId=Oe,this.apiKey=Pe,this.appId=Ye}fetch(U){var oe=this;return(0,F.Z)(function*(){var ye,Oe,Pe;const[Ye,st]=yield Promise.all([oe.firebaseInstallations.getId(),oe.firebaseInstallations.getToken()]),Ot=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${oe.projectId}/namespaces/${oe.namespace}:fetch?key=${oe.apiKey}`,Ft={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":U.eTag||"*"},bt={sdk_version:oe.sdkVersion,app_instance_id:Ye,app_instance_id_token:st,app_id:oe.appId,language_code:Fc()},Mn={method:"POST",headers:Ft,body:JSON.stringify(bt)},Cr=fetch(Ot,Mn),lo=new Promise((Ar,Gi)=>{U.signal.addEventListener(()=>{const sd=new Error("The operation was aborted.");sd.name="AbortError",Gi(sd)})});let co;try{yield Promise.race([Cr,lo]),co=yield Cr}catch(Ar){let Gi="fetch-client-network";throw"AbortError"===(null===(ye=Ar)||void 0===ye?void 0:ye.name)&&(Gi="fetch-timeout"),Vn.create(Gi,{originalErrorMessage:null===(Oe=Ar)||void 0===Oe?void 0:Oe.message})}let Ai=co.status;const od=co.headers.get("ETag")||void 0;let Ou,fs;if(200===co.status){let Ar;try{Ar=yield co.json()}catch(Gi){throw Vn.create("fetch-client-parse",{originalErrorMessage:null===(Pe=Gi)||void 0===Pe?void 0:Pe.message})}Ou=Ar.entries,fs=Ar.state}if("INSTANCE_STATE_UNSPECIFIED"===fs?Ai=500:"NO_CHANGE"===fs?Ai=304:("NO_TEMPLATE"===fs||"EMPTY_CONFIG"===fs)&&(Ou={}),304!==Ai&&200!==Ai)throw Vn.create("fetch-status",{httpStatus:Ai});return{status:Ai,eTag:od,config:Ou}})()}}class kp{constructor(U,oe){this.client=U,this.storage=oe}fetch(U){var oe=this;return(0,F.Z)(function*(){const ye=(yield oe.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return oe.attemptFetch(U,ye)})()}attemptFetch(U,{throttleEndTimeMillis:oe,backoffCount:ye}){var Oe=this;return(0,F.Z)(function*(){yield function Oo(O,U){return new Promise((oe,ye)=>{const Oe=Math.max(U-Date.now(),0),Pe=setTimeout(oe,Oe);O.addEventListener(()=>{clearTimeout(Pe),ye(Vn.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}(U.signal,oe);try{const Pe=yield Oe.client.fetch(U);return yield Oe.storage.deleteThrottleMetadata(),Pe}catch(Pe){if(!function Vc(O){if(!(O instanceof j.ZR&&O.customData))return!1;const U=Number(O.customData.httpStatus);return 429===U||500===U||503===U||504===U}(Pe))throw Pe;const Ye={throttleEndTimeMillis:Date.now()+(0,j.$s)(ye),backoffCount:ye+1};return yield Oe.storage.setThrottleMetadata(Ye),Oe.attemptFetch(U,Ye)}})()}}class Uc{constructor(U,oe,ye,Oe,Pe){this.app=U,this._client=oe,this._storageCache=ye,this._storage=Oe,this._logger=Pe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function fl(O,U){var oe;const ye=O.target.error||void 0;return Vn.create(U,{originalErrorMessage:ye&&(null===(oe=ye)||void 0===oe?void 0:oe.message)})}const Mo="app_namespace_store";class Fp{constructor(U,oe,ye,Oe=function Lp(){return new Promise((O,U)=>{var oe;try{const ye=indexedDB.open("firebase_remote_config",1);ye.onerror=Oe=>{U(fl(Oe,"storage-open"))},ye.onsuccess=Oe=>{O(Oe.target.result)},ye.onupgradeneeded=Oe=>{0===Oe.oldVersion&&Oe.target.result.createObjectStore(Mo,{keyPath:"compositeKey"})}}catch(ye){U(Vn.create("storage-open",{originalErrorMessage:null===(oe=ye)||void 0===oe?void 0:oe.message}))}})}()){this.appId=U,this.appName=oe,this.namespace=ye,this.openDbPromise=Oe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(U){return this.set("last_fetch_status",U)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(U){return this.set("last_successful_fetch_timestamp_millis",U)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(U){return this.set("last_successful_fetch_response",U)}getActiveConfig(){return this.get("active_config")}setActiveConfig(U){return this.set("active_config",U)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(U){return this.set("active_config_etag",U)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(U){return this.set("throttle_metadata",U)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(U){var oe=this;return(0,F.Z)(function*(){const ye=yield oe.openDbPromise;return new Promise((Oe,Pe)=>{var Ye;const _t=ye.transaction([Mo],"readonly").objectStore(Mo),Ot=oe.createCompositeKey(U);try{const Ft=_t.get(Ot);Ft.onerror=bt=>{Pe(fl(bt,"storage-get"))},Ft.onsuccess=bt=>{const Mn=bt.target.result;Oe(Mn?Mn.value:void 0)}}catch(Ft){Pe(Vn.create("storage-get",{originalErrorMessage:null===(Ye=Ft)||void 0===Ye?void 0:Ye.message}))}})})()}set(U,oe){var ye=this;return(0,F.Z)(function*(){const Oe=yield ye.openDbPromise;return new Promise((Pe,Ye)=>{var st;const Ot=Oe.transaction([Mo],"readwrite").objectStore(Mo),Ft=ye.createCompositeKey(U);try{const bt=Ot.put({compositeKey:Ft,value:oe});bt.onerror=Mn=>{Ye(fl(Mn,"storage-set"))},bt.onsuccess=()=>{Pe()}}catch(bt){Ye(Vn.create("storage-set",{originalErrorMessage:null===(st=bt)||void 0===st?void 0:st.message}))}})})()}delete(U){var oe=this;return(0,F.Z)(function*(){const ye=yield oe.openDbPromise;return new Promise((Oe,Pe)=>{var Ye;const _t=ye.transaction([Mo],"readwrite").objectStore(Mo),Ot=oe.createCompositeKey(U);try{const Ft=_t.delete(Ot);Ft.onerror=bt=>{Pe(fl(bt,"storage-delete"))},Ft.onsuccess=()=>{Oe()}}catch(Ft){Pe(Vn.create("storage-delete",{originalErrorMessage:null===(Ye=Ft)||void 0===Ye?void 0:Ye.message}))}})})()}createCompositeKey(U){return[this.appId,this.appName,this.namespace,U].join()}}class jc{constructor(U){this.storage=U}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var U=this;return(0,F.Z)(function*(){const oe=U.storage.getLastFetchStatus(),ye=U.storage.getLastSuccessfulFetchTimestampMillis(),Oe=U.storage.getActiveConfig(),Pe=yield oe;Pe&&(U.lastFetchStatus=Pe);const Ye=yield ye;Ye&&(U.lastSuccessfulFetchTimestampMillis=Ye);const st=yield Oe;st&&(U.activeConfig=st)})()}setLastFetchStatus(U){return this.lastFetchStatus=U,this.storage.setLastFetchStatus(U)}setLastSuccessfulFetchTimestampMillis(U){return this.lastSuccessfulFetchTimestampMillis=U,this.storage.setLastSuccessfulFetchTimestampMillis(U)}setActiveConfig(U){return this.activeConfig=U,this.storage.setActiveConfig(U)}}function cu(){return qc.apply(this,arguments)}function qc(){return(qc=(0,F.Z)(function*(){if(!(0,j.hl)())return!1;try{return yield(0,j.eu)()}catch(O){return!1}})).apply(this,arguments)}!function Ns(){(0,K._registerComponent)(new q.wA("remote-config",function O(U,{instanceIdentifier:oe}){const ye=U.getProvider("app").getImmediate(),Oe=U.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Vn.create("registration-window");if(!(0,j.hl)())throw Vn.create("indexed-db-unavailable");const{projectId:Pe,apiKey:Ye,appId:st}=ye.options;if(!Pe)throw Vn.create("registration-project-id");if(!Ye)throw Vn.create("registration-api-key");if(!st)throw Vn.create("registration-app-id");const _t=new Fp(st,ye.name,oe=oe||"firebase"),Ot=new jc(_t),Ft=new R.Yd(Mi);Ft.logLevel=R.in.ERROR;const bt=new Ir(Oe,K.SDK_VERSION,oe,Pe,Ye,st),Mn=new kp(bt,_t),Cr=new Np(Mn,_t,Ot,Ft),lo=new Uc(ye,Cr,Ot,_t,Ft);return function bn(O){const U=(0,j.m9)(O);U._initializePromise||(U._initializePromise=U._storageCache.loadFromStorage().then(()=>{U._isInitializationComplete=!0}))}(lo),lo},"PUBLIC").setMultipleInstances(!0)),(0,K.registerVersion)(Mi,"0.3.11"),(0,K.registerVersion)(Mi,"0.3.11","esm2017")}();const Hc="/firebase-messaging-sw.js",Dr="/firebase-cloud-messaging-push-scope",Qo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ks="google.c.a.c_id",$c="google.c.a.c_l",Ch="google.c.a.ts",Gc="google.c.a.e";var Rs=(()=>{return(O=Rs||(Rs={})).PUSH_RECEIVED="push-received",O.NOTIFICATION_CLICKED="notification-clicked",Rs;var O})();function kr(O){const U=new Uint8Array(O);return btoa(String.fromCharCode(...U)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zc(O){const oe=(O+"=".repeat((4-O.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ye=atob(oe),Oe=new Uint8Array(ye.length);for(let Pe=0;Pe<ye.length;++Pe)Oe[Pe]=ye.charCodeAt(Pe);return Oe}const Rr="fcm_token_details_db",ii="fcm_token_object_Store";function pl(O){return Wc.apply(this,arguments)}function Wc(){return Wc=(0,F.Z)(function*(O){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Pe=>Pe.name).includes(Rr))return null;let U=null;return(yield(0,S.X3)(Rr,5,{upgrade:(ye=(0,F.Z)(function*(Oe,Pe,Ye,st){var _t;if(Pe<2||!Oe.objectStoreNames.contains(ii))return;const Ot=st.objectStore(ii),Ft=yield Ot.index("fcmSenderId").get(O);if(yield Ot.clear(),Ft)if(2===Pe){const bt=Ft;if(!bt.auth||!bt.p256dh||!bt.endpoint)return;U={token:bt.fcmToken,createTime:null!==(_t=bt.createTime)&&void 0!==_t?_t:Date.now(),subscriptionOptions:{auth:bt.auth,p256dh:bt.p256dh,endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:"string"==typeof bt.vapidKey?bt.vapidKey:kr(bt.vapidKey)}}}else if(3===Pe){const bt=Ft;U={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:kr(bt.auth),p256dh:kr(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:kr(bt.vapidKey)}}}else if(4===Pe){const bt=Ft;U={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:kr(bt.auth),p256dh:kr(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:kr(bt.vapidKey)}}}}),function(Pe,Ye,st,_t){return ye.apply(this,arguments)})})).close(),yield(0,S.Lj)(Rr),yield(0,S.Lj)("fcm_vapid_details_db"),yield(0,S.Lj)("undefined"),gl(U)?U:null;var ye}),Wc.apply(this,arguments)}function gl(O){if(!O||!O.subscriptionOptions)return!1;const{subscriptionOptions:U}=O;return"number"==typeof O.createTime&&O.createTime>0&&"string"==typeof O.token&&O.token.length>0&&"string"==typeof U.auth&&U.auth.length>0&&"string"==typeof U.p256dh&&U.p256dh.length>0&&"string"==typeof U.endpoint&&U.endpoint.length>0&&"string"==typeof U.swScope&&U.swScope.length>0&&"string"==typeof U.vapidKey&&U.vapidKey.length>0}const Fi="firebase-messaging-store";let Ah=null;function En(){return Ah||(Ah=(0,S.X3)("firebase-messaging-database",1,{upgrade:(O,U)=>{0===U&&O.createObjectStore(Fi)}})),Ah}function ga(O){return es.apply(this,arguments)}function es(){return(es=(0,F.Z)(function*(O){const U=fr(O),ye=yield(yield En()).transaction(Fi).objectStore(Fi).get(U);if(ye)return ye;{const Oe=yield pl(O.appConfig.senderId);if(Oe)return yield pn(O,Oe),Oe}})).apply(this,arguments)}function pn(O,U){return ma.apply(this,arguments)}function ma(){return(ma=(0,F.Z)(function*(O,U){const oe=fr(O),Oe=(yield En()).transaction(Fi,"readwrite");return yield Oe.objectStore(Fi).put(U,oe),yield Oe.done,U})).apply(this,arguments)}function du(O){return No.apply(this,arguments)}function No(){return(No=(0,F.Z)(function*(O){const U=fr(O),ye=(yield En()).transaction(Fi,"readwrite");yield ye.objectStore(Fi).delete(U),yield ye.done})).apply(this,arguments)}function fr({appConfig:O}){return O.appId}const On=new j.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Vi(O,U){return pr.apply(this,arguments)}function pr(){return(pr=(0,F.Z)(function*(O,U){var oe;const ye=yield Ls(O),Oe=Fs(U),Pe={method:"POST",headers:ye,body:JSON.stringify(Oe)};let Ye;try{Ye=yield(yield fetch(Ui(O.appConfig),Pe)).json()}catch(st){throw On.create("token-subscribe-failed",{errorInfo:null===(oe=st)||void 0===oe?void 0:oe.toString()})}if(Ye.error)throw On.create("token-subscribe-failed",{errorInfo:Ye.error.message});if(!Ye.token)throw On.create("token-subscribe-no-token");return Ye.token})).apply(this,arguments)}function ts(O,U){return io.apply(this,arguments)}function io(){return(io=(0,F.Z)(function*(O,U){var oe;const ye=yield Ls(O),Oe=Fs(U.subscriptionOptions),Pe={method:"PATCH",headers:ye,body:JSON.stringify(Oe)};let Ye;try{Ye=yield(yield fetch(`${Ui(O.appConfig)}/${U.token}`,Pe)).json()}catch(st){throw On.create("token-update-failed",{errorInfo:null===(oe=st)||void 0===oe?void 0:oe.toString()})}if(Ye.error)throw On.create("token-update-failed",{errorInfo:Ye.error.message});if(!Ye.token)throw On.create("token-update-no-token");return Ye.token})).apply(this,arguments)}function ya(O,U){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,F.Z)(function*(O,U){var oe;const Oe={method:"DELETE",headers:yield Ls(O)};try{const Ye=yield(yield fetch(`${Ui(O.appConfig)}/${U}`,Oe)).json();if(Ye.error)throw On.create("token-unsubscribe-failed",{errorInfo:Ye.error.message})}catch(Pe){throw On.create("token-unsubscribe-failed",{errorInfo:null===(oe=Pe)||void 0===oe?void 0:oe.toString()})}})).apply(this,arguments)}function Ui({projectId:O}){return`https://fcmregistrations.googleapis.com/v1/projects/${O}/registrations`}function Ls(O){return xt.apply(this,arguments)}function xt(){return(xt=(0,F.Z)(function*({appConfig:O,installations:U}){const oe=yield U.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O.apiKey,"x-goog-firebase-installations-auth":`FIS ${oe}`})})).apply(this,arguments)}function Fs({p256dh:O,auth:U,endpoint:oe,vapidKey:ye}){const Oe={web:{endpoint:oe,auth:U,p256dh:O}};return ye!==Qo&&(Oe.web.applicationPubKey=ye),Oe}const hu=6048e5;function va(O){return vl.apply(this,arguments)}function vl(){return(vl=(0,F.Z)(function*(O){const U=yield An(O.swRegistration,O.vapidKey),oe={vapidKey:O.vapidKey,swScope:O.swRegistration.scope,endpoint:U.endpoint,auth:kr(U.getKey("auth")),p256dh:kr(U.getKey("p256dh"))},ye=yield ga(O.firebaseDependencies);if(ye){if(ns(ye.subscriptionOptions,oe))return Date.now()>=ye.createTime+hu?bl(O,{token:ye.token,createTime:Date.now(),subscriptionOptions:oe}):ye.token;try{yield ya(O.firebaseDependencies,ye.token)}catch(Oe){console.warn(Oe)}return Qt(O.firebaseDependencies,oe)}return Qt(O.firebaseDependencies,oe)})).apply(this,arguments)}function _a(O){return _l.apply(this,arguments)}function _l(){return(_l=(0,F.Z)(function*(O){const U=yield ga(O.firebaseDependencies);U&&(yield ya(O.firebaseDependencies,U.token),yield du(O.firebaseDependencies));const oe=yield O.swRegistration.pushManager.getSubscription();return!oe||oe.unsubscribe()})).apply(this,arguments)}function bl(O,U){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,F.Z)(function*(O,U){try{const oe=yield ts(O.firebaseDependencies,U),ye=Object.assign(Object.assign({},U),{token:oe,createTime:Date.now()});return yield pn(O.firebaseDependencies,ye),oe}catch(oe){throw yield _a(O),oe}})).apply(this,arguments)}function Qt(O,U){return fu.apply(this,arguments)}function fu(){return(fu=(0,F.Z)(function*(O,U){const ye={token:yield Vi(O,U),createTime:Date.now(),subscriptionOptions:U};return yield pn(O,ye),ye.token})).apply(this,arguments)}function An(O,U){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,F.Z)(function*(O,U){return(yield O.pushManager.getSubscription())||O.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zc(U)})})).apply(this,arguments)}function ns(O,U){return U.vapidKey===O.vapidKey&&U.endpoint===O.endpoint&&U.auth===O.auth&&U.p256dh===O.p256dh}function oi(O){const U={from:O.from,collapseKey:O.collapse_key,messageId:O.fcmMessageId};return function ba(O,U){if(!U.notification)return;O.notification={};const oe=U.notification.title;oe&&(O.notification.title=oe);const ye=U.notification.body;ye&&(O.notification.body=ye);const Oe=U.notification.image;Oe&&(O.notification.image=Oe)}(U,O),function El(O,U){!U.data||(O.data=U.data)}(U,O),function Vp(O,U){var oe,ye,Oe,Pe,Ye;if(!U.fcmOptions&&!(null===(oe=U.notification)||void 0===oe?void 0:oe.click_action))return;O.fcmOptions={};const st=null!==(Oe=null===(ye=U.fcmOptions)||void 0===ye?void 0:ye.link)&&void 0!==Oe?Oe:null===(Pe=U.notification)||void 0===Pe?void 0:Pe.click_action;st&&(O.fcmOptions.link=st);const _t=null===(Ye=U.fcmOptions)||void 0===Ye?void 0:Ye.analytics_label;_t&&(O.fcmOptions.analyticsLabel=_t)}(U,O),U}function pu(O){return"object"==typeof O&&!!O&&ks in O}function Ea(O,U){const oe=[];for(let ye=0;ye<O.length;ye++)oe.push(O.charAt(ye)),ye<U.length&&oe.push(U.charAt(ye));return oe.join("")}function Un(O){return On.create("missing-app-config-values",{valueName:O})}Ea("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ea("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class oo{constructor(U,oe,ye){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Oe=function gu(O){if(!O||!O.options)throw Un("App Configuration Object");if(!O.name)throw Un("App Name");const U=["projectId","apiKey","appId","messagingSenderId"],{options:oe}=O;for(const ye of U)if(!oe[ye])throw Un(ye);return{appName:O.name,projectId:oe.projectId,apiKey:oe.apiKey,appId:oe.appId,senderId:oe.messagingSenderId}}(U);this.firebaseDependencies={app:U,appConfig:Oe,installations:oe,analyticsProvider:ye}}_delete(){return Promise.resolve()}}function wa(O){return ko.apply(this,arguments)}function ko(){return(ko=(0,F.Z)(function*(O){var U;try{O.swRegistration=yield navigator.serviceWorker.register(Hc,{scope:Dr}),O.swRegistration.update().catch(()=>{})}catch(oe){throw On.create("failed-service-worker-registration",{browserErrorMessage:null===(U=oe)||void 0===U?void 0:U.message})}})).apply(this,arguments)}function wi(O,U){return wl.apply(this,arguments)}function wl(){return(wl=(0,F.Z)(function*(O,U){if(!U&&!O.swRegistration&&(yield wa(O)),U||!O.swRegistration){if(!(U instanceof ServiceWorkerRegistration))throw On.create("invalid-sw-registration");O.swRegistration=U}})).apply(this,arguments)}function mu(O,U){return Il.apply(this,arguments)}function Il(){return(Il=(0,F.Z)(function*(O,U){U?O.vapidKey=U:O.vapidKey||(O.vapidKey=Qo)})).apply(this,arguments)}function Ia(){return(Ia=(0,F.Z)(function*(O,U){if(!navigator)throw On.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw On.create("permission-blocked");return yield mu(O,null==U?void 0:U.vapidKey),yield wi(O,null==U?void 0:U.serviceWorkerRegistration),va(O)})).apply(this,arguments)}function Da(O,U,oe){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,F.Z)(function*(O,U,oe){const ye=Ta(U);(yield O.firebaseDependencies.analyticsProvider.get()).logEvent(ye,{message_id:oe[ks],message_name:oe[$c],message_time:oe[Ch],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ta(O){switch(O){case Rs.NOTIFICATION_CLICKED:return"notification_open";case Rs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Tl(){return(Tl=(0,F.Z)(function*(O,U){const oe=U.data;if(!oe.isFirebaseMessaging)return;O.onMessageHandler&&oe.messageType===Rs.PUSH_RECEIVED&&("function"==typeof O.onMessageHandler?O.onMessageHandler(oi(oe)):O.onMessageHandler.next(oi(oe)));const ye=oe.data;pu(ye)&&"1"===ye[Gc]&&(yield Da(O,oe.messageType,ye))})).apply(this,arguments)}const Us="@firebase/messaging",Zc=O=>{const U=new oo(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),O.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",oe=>function Up(O,U){return Tl.apply(this,arguments)}(U,oe)),U},Bs=O=>{const U=O.getProvider("messaging").getImmediate();return{getToken:ye=>function yu(O,U){return Ia.apply(this,arguments)}(U,ye)}};function js(){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,F.Z)(function*(){try{yield(0,j.eu)()}catch(O){return!1}return"undefined"!=typeof window&&(0,j.hl)()&&(0,j.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Kc(){(0,K._registerComponent)(new q.wA("messaging",Zc,"PUBLIC")),(0,K._registerComponent)(new q.wA("messaging-internal",Bs,"PRIVATE")),(0,K.registerVersion)(Us,"0.9.16"),(0,K.registerVersion)(Us,"0.9.16","esm2017")}();const Yc="analytics",Bp="firebase_id",so="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qs="https://www.googletagmanager.com/gtag/js",ur=new R.Yd("@firebase/analytics");function Oh(O){return Promise.all(O.map(U=>U.catch(oe=>oe)))}function rs(O,U){const oe=document.createElement("script");oe.src=`${qs}?l=${O}&id=${U}`,oe.async=!0,document.head.appendChild(oe)}function Jc(O,U,oe,ye,Oe,Pe){return _u.apply(this,arguments)}function _u(){return(_u=(0,F.Z)(function*(O,U,oe,ye,Oe,Pe){const Ye=ye[Oe];try{if(Ye)yield U[Ye];else{const _t=(yield Oh(oe)).find(Ot=>Ot.measurementId===Oe);_t&&(yield U[_t.appId])}}catch(st){ur.error(st)}O("config",Oe,Pe)})).apply(this,arguments)}function Hs(O,U,oe,ye,Oe){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,F.Z)(function*(O,U,oe,ye,Oe){try{let Pe=[];if(Oe&&Oe.send_to){let Ye=Oe.send_to;Array.isArray(Ye)||(Ye=[Ye]);const st=yield Oh(oe);for(const _t of Ye){const Ot=st.find(bt=>bt.measurementId===_t),Ft=Ot&&U[Ot.appId];if(!Ft){Pe=[];break}Pe.push(Ft)}}0===Pe.length&&(Pe=Object.values(U)),yield Promise.all(Pe),O("event",ye,Oe||{})}catch(Pe){ur.error(Pe)}})).apply(this,arguments)}function Rn(){const O=window.document.getElementsByTagName("script");for(const U of Object.values(O))if(U.src&&U.src.includes(qs))return U;return null}const yt=new j.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Al=new class zn{constructor(U={},oe=1e3){this.throttleMetadata=U,this.intervalMillis=oe}getThrottleMetadata(U){return this.throttleMetadata[U]}setThrottleMetadata(U,oe){this.throttleMetadata[U]=oe}deleteThrottleMetadata(U){delete this.throttleMetadata[U]}};function Xc(O){return new Headers({Accept:"application/json","x-goog-api-key":O})}function qi(O){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,F.Z)(function*(O){var U;const{appId:oe,apiKey:ye}=O,Oe={method:"GET",headers:Xc(ye)},Pe=so.replace("{app-id}",oe),Ye=yield fetch(Pe,Oe);if(200!==Ye.status&&304!==Ye.status){let st="";try{const _t=yield Ye.json();(null===(U=_t.error)||void 0===U?void 0:U.message)&&(st=_t.error.message)}catch(_t){}throw yt.create("config-fetch-failed",{httpStatus:Ye.status,responseMessage:st})}return Ye.json()})).apply(this,arguments)}function Dn(O){return xa.apply(this,arguments)}function xa(){return(xa=(0,F.Z)(function*(O,U=Al,oe){const{appId:ye,apiKey:Oe,measurementId:Pe}=O.options;if(!ye)throw yt.create("no-app-id");if(!Oe){if(Pe)return{measurementId:Pe,appId:ye};throw yt.create("no-api-key")}const Ye=U.getThrottleMetadata(ye)||{backoffCount:0,throttleEndTimeMillis:Date.now()},st=new td;return setTimeout((0,F.Z)(function*(){st.abort()}),void 0!==oe?oe:6e4),Ii({appId:ye,apiKey:Oe,measurementId:Pe},Ye,st,U)})).apply(this,arguments)}function Ii(O,U,oe){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,F.Z)(function*(O,{throttleEndTimeMillis:U,backoffCount:oe},ye,Oe=Al){var Pe,Ye;const{appId:st,measurementId:_t}=O;try{yield bu(ye,U)}catch(Ot){if(_t)return ur.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_t} provided in the "measurementId" field in the local Firebase config. [${null===(Pe=Ot)||void 0===Pe?void 0:Pe.message}]`),{appId:st,measurementId:_t};throw Ot}try{const Ot=yield qi(O);return Oe.deleteThrottleMetadata(st),Ot}catch(Ot){const Ft=Ot;if(!ed(Ft)){if(Oe.deleteThrottleMetadata(st),_t)return ur.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_t} provided in the "measurementId" field in the local Firebase config. [${null==Ft?void 0:Ft.message}]`),{appId:st,measurementId:_t};throw Ot}const bt=503===Number(null===(Ye=null==Ft?void 0:Ft.customData)||void 0===Ye?void 0:Ye.httpStatus)?(0,j.$s)(oe,Oe.intervalMillis,30):(0,j.$s)(oe,Oe.intervalMillis),Mn={throttleEndTimeMillis:Date.now()+bt,backoffCount:oe+1};return Oe.setThrottleMetadata(st,Mn),ur.debug(`Calling attemptFetch again in ${bt} millis`),Ii(O,Mn,ye,Oe)}})).apply(this,arguments)}function bu(O,U){return new Promise((oe,ye)=>{const Oe=Math.max(U-Date.now(),0),Pe=setTimeout(oe,Oe);O.addEventListener(()=>{clearTimeout(Pe),ye(yt.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}function ed(O){if(!(O instanceof j.ZR&&O.customData))return!1;const U=Number(O.customData.httpStatus);return 429===U||500===U||503===U||504===U}class td{constructor(){this.listeners=[]}addEventListener(U){this.listeners.push(U)}abort(){this.listeners.forEach(U=>U())}}let Oa,ka;function Po(){return(Po=(0,F.Z)(function*(O,U,oe,ye,Oe){if(Oe&&Oe.global)O("event",oe,ye);else{const Pe=yield U;O("event",oe,Object.assign(Object.assign({},ye),{send_to:Pe}))}})).apply(this,arguments)}function Ra(O){ka=O}function Fo(O){Oa=O}function $s(){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,F.Z)(function*(){var O;if(!(0,j.hl)())return ur.warn(yt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,j.eu)()}catch(U){return ur.warn(yt.create("indexeddb-unavailable",{errorInfo:null===(O=U)||void 0===O?void 0:O.toString()}).message),!1}return!0})).apply(this,arguments)}function lr(){return(lr=(0,F.Z)(function*(O,U,oe,ye,Oe,Pe,Ye){var st;const _t=Dn(O);_t.then(Cr=>{oe[Cr.measurementId]=Cr.appId,O.options.measurementId&&Cr.measurementId!==O.options.measurementId&&ur.warn(`The measurement ID in the local Firebase config (${O.options.measurementId}) does not match the measurement ID fetched from the server (${Cr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Cr=>ur.error(Cr)),U.push(_t);const Ot=$s().then(Cr=>{if(Cr)return ye.getId()}),[Ft,bt]=yield Promise.all([_t,Ot]);Rn()||rs(Pe,Ft.measurementId),ka&&(Oe("consent","default",ka),Ra(void 0)),Oe("js",new Date);const Mn=null!==(st=null==Ye?void 0:Ye.config)&&void 0!==st?st:{};return Mn.origin="firebase",Mn.update=!0,null!=bt&&(Mn[Bp]=bt),Oe("config",Ft.measurementId,Mn),Oa&&(Oe("set",Oa),Fo(void 0)),Ft.measurementId})).apply(this,arguments)}class as{constructor(U){this.app=U}_delete(){return delete $i[this.app.options.appId],Promise.resolve()}}let $i={},Bn=[];const Gs={};let Di,Xn,Zr="dataLayer",Tr=!1;function xl(O,U,oe){!function wu(){const O=[];if((0,j.ru)()&&O.push("This is a browser extension environment."),(0,j.zI)()||O.push("Cookies are not available."),O.length>0){const U=O.map((ye,Oe)=>`(${Oe+1}) ${ye}`).join(" "),oe=yt.create("invalid-analytics-context",{errorInfo:U});ur.warn(oe.message)}}();const ye=O.options.appId;if(!ye)throw yt.create("no-app-id");if(!O.options.apiKey){if(!O.options.measurementId)throw yt.create("no-api-key");ur.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${O.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$i[ye])throw yt.create("already-exists",{id:ye});if(!Tr){!function vu(O){let U=[];Array.isArray(window[O])?U=window[O]:window[O]=U}(Zr);const{wrappedGtag:Pe,gtagCore:Ye}=function jp(O,U,oe,ye,Oe){let Pe=function(...Ye){window[ye].push(arguments)};return window[Oe]&&"function"==typeof window[Oe]&&(Pe=window[Oe]),window[Oe]=function Cl(O,U,oe,ye){function Pe(){return(Pe=(0,F.Z)(function*(Ye,st,_t){try{"event"===Ye?yield Hs(O,U,oe,st,_t):"config"===Ye?yield Jc(O,U,oe,ye,st,_t):"consent"===Ye?O("consent","update",_t):O("set",st)}catch(Ot){ur.error(Ot)}})).apply(this,arguments)}return function Oe(Ye,st,_t){return Pe.apply(this,arguments)}}(Pe,O,U,oe),{gtagCore:Pe,wrappedGtag:window[Oe]}}($i,Bn,Gs,Zr,"gtag");Xn=Pe,Di=Ye,Tr=!0}return $i[ye]=function Uo(O,U,oe,ye,Oe,Pe,Ye){return lr.apply(this,arguments)}(O,Bn,Gs,U,Di,Zr,oe),new as(O)}function Nh(){return nd.apply(this,arguments)}function nd(){return(nd=(0,F.Z)(function*(){if((0,j.ru)()||!(0,j.zI)()||!(0,j.hl)())return!1;try{return yield(0,j.eu)()}catch(O){return!1}})).apply(this,arguments)}const Du="@firebase/analytics";!function Hp(){(0,K._registerComponent)(new q.wA(Yc,(U,{options:oe})=>xl(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),oe),"PUBLIC")),(0,K._registerComponent)(new q.wA("analytics-internal",function O(U){try{const oe=U.getProvider(Yc).getImmediate();return{logEvent:(ye,Oe,Pe)=>function Iu(O,U,oe,ye){O=(0,j.m9)(O),function Wn(O,U,oe,ye,Oe){return Po.apply(this,arguments)}(Xn,$i[O.app.options.appId],U,oe,ye).catch(Oe=>ur.error(Oe))}(oe,ye,Oe,Pe)}}catch(oe){throw yt.create("interop-component-reg-failed",{reason:oe})}},"PRIVATE")),(0,K.registerVersion)(Du,"0.8.0"),(0,K.registerVersion)(Du,"0.8.0","esm2017")}();var Ol=M(4408),li=M(7565);const ls=new class Ws extends li.v{}(class ui extends Ol.o{constructor(U,oe){super(U,oe),this.scheduler=U,this.work=oe}schedule(U,oe=0){return oe>0?super.schedule(U,oe):(this.delay=oe,this.state=U,this.scheduler.flush(this),this)}execute(U,oe){return oe>0||this.closed?super.execute(U,oe):this._execute(U,oe)}requestAsyncId(U,oe,ye=0){return null!=ye&&ye>0||null==ye&&this.delay>0?super.requestAsyncId(U,oe,ye):U.flush(this)}});var Cu=M(4986),La=M(8505),cs=M(9468),Ml=M(5363);const Jt=new c.GfV("7.4.1"),Au="__angularfire_symbol__analyticsIsSupportedValue",qn="__angularfire_symbol__analyticsIsSupported",qo="__angularfire_symbol__remoteConfigIsSupportedValue",Ci="__angularfire_symbol__remoteConfigIsSupported",rd="__angularfire_symbol__messagingIsSupportedValue",Su="__angularfire_symbol__messagingIsSupported";function xu(O,U,oe){if(U){if(1===U.length)return U[0];const Pe=U.filter(Ye=>Ye.app===oe);if(1===Pe.length)return Pe[0]}return oe.container.getProvider(O).getImmediate({optional:!0})}globalThis[qn]||(globalThis[qn]=Nh().then(O=>globalThis[Au]=O).catch(()=>globalThis[Au]=!1)),globalThis[Su]||(globalThis[Su]=js().then(O=>globalThis[rd]=O).catch(()=>globalThis[rd]=!1)),globalThis[Ci]||(globalThis[Ci]=cu().then(O=>globalThis[qo]=O).catch(()=>globalThis[qo]=!1));const kl=(O,U)=>{const oe=U?[U]:(0,ee.C6)(),ye=[];return oe.forEach(Oe=>{Oe.container.getProvider(O).instances.forEach(Ye=>{ye.includes(Ye)||ye.push(Ye)})}),ye};function Cn(){}class er{constructor(U,oe=ls){this.zone=U,this.delegate=oe}now(){return this.delegate.now()}schedule(U,oe,ye){const Oe=this.zone;return this.delegate.schedule(function(Ye){Oe.runGuarded(()=>{U.apply(this,[Ye])})},oe,ye)}}class $p{constructor(U){this.zone=U,this.task=null}call(U,oe){const ye=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Cn,{},Cn,Cn)),oe.pipe((0,La.b)({next:ye,complete:ye,error:ye})).subscribe(U).add(ye)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Va=(()=>{class O{constructor(oe){this.ngZone=oe,this.outsideAngular=oe.runOutsideAngular(()=>new er(Zone.current)),this.insideAngular=oe.run(()=>new er(Zone.current,Cu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return O.\u0275fac=function(oe){return new(oe||O)(c.LFG(c.R0b))},O.\u0275prov=c.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function ci(){const O=globalThis.\u0275AngularFireScheduler;if(!O)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return O}function Ua(O){return ci(),function Rl(O){return function(oe){return(oe=oe.lift(new $p(O.ngZone))).pipe((0,cs.R)(O.outsideAngular),(0,Ml.Q)(O.insideAngular))}}(ci())(O)}},2090:(ht,ge,M)=>{"use strict";M.d(ge,{BH:()=>k,LL:()=>ce,ZR:()=>be,zI:()=>Y,US:()=>q,tV:()=>E,L:()=>S,$s:()=>wr,r3:()=>Re,Sg:()=>A,ne:()=>He,vZ:()=>It,ZB:()=>T,pd:()=>je,m9:()=>To,z$:()=>x,jU:()=>L,ru:()=>ne,d:()=>Z,xb:()=>Qe,w1:()=>X,hl:()=>B,uI:()=>V,UG:()=>I,b$:()=>J,G6:()=>W,Mn:()=>$,xO:()=>In,zd:()=>yn,eu:()=>te});const K=function(Ee){const Ae=[];let ve=0;for(let Te=0;Te<Ee.length;Te++){let Ce=Ee.charCodeAt(Te);Ce<128?Ae[ve++]=Ce:Ce<2048?(Ae[ve++]=Ce>>6|192,Ae[ve++]=63&Ce|128):55296==(64512&Ce)&&Te+1<Ee.length&&56320==(64512&Ee.charCodeAt(Te+1))?(Ce=65536+((1023&Ce)<<10)+(1023&Ee.charCodeAt(++Te)),Ae[ve++]=Ce>>18|240,Ae[ve++]=Ce>>12&63|128,Ae[ve++]=Ce>>6&63|128,Ae[ve++]=63&Ce|128):(Ae[ve++]=Ce>>12|224,Ae[ve++]=Ce>>6&63|128,Ae[ve++]=63&Ce|128)}return Ae},q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ee,Ae){if(!Array.isArray(Ee))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ve=Ae?this.byteToCharMapWebSafe_:this.byteToCharMap_,Te=[];for(let Ce=0;Ce<Ee.length;Ce+=3){const Ke=Ee[Ce],rt=Ce+1<Ee.length,Dt=rt?Ee[Ce+1]:0,vn=Ce+2<Ee.length,un=vn?Ee[Ce+2]:0;let Hr=(15&Dt)<<2|un>>6,Oi=63&un;vn||(Oi=64,rt||(Hr=64)),Te.push(ve[Ke>>2],ve[(3&Ke)<<4|Dt>>4],ve[Hr],ve[Oi])}return Te.join("")},encodeString(Ee,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?btoa(Ee):this.encodeByteArray(K(Ee),Ae)},decodeString(Ee,Ae){return this.HAS_NATIVE_SUPPORT&&!Ae?atob(Ee):function(Ee){const Ae=[];let ve=0,Te=0;for(;ve<Ee.length;){const Ce=Ee[ve++];if(Ce<128)Ae[Te++]=String.fromCharCode(Ce);else if(Ce>191&&Ce<224){const Ke=Ee[ve++];Ae[Te++]=String.fromCharCode((31&Ce)<<6|63&Ke)}else if(Ce>239&&Ce<365){const vn=((7&Ce)<<18|(63&Ee[ve++])<<12|(63&Ee[ve++])<<6|63&Ee[ve++])-65536;Ae[Te++]=String.fromCharCode(55296+(vn>>10)),Ae[Te++]=String.fromCharCode(56320+(1023&vn))}else{const Ke=Ee[ve++],rt=Ee[ve++];Ae[Te++]=String.fromCharCode((15&Ce)<<12|(63&Ke)<<6|63&rt)}}return Ae.join("")}(this.decodeStringToByteArray(Ee,Ae))},decodeStringToByteArray(Ee,Ae){this.init_();const ve=Ae?this.charToByteMapWebSafe_:this.charToByteMap_,Te=[];for(let Ce=0;Ce<Ee.length;){const Ke=ve[Ee.charAt(Ce++)],Dt=Ce<Ee.length?ve[Ee.charAt(Ce)]:0;++Ce;const un=Ce<Ee.length?ve[Ee.charAt(Ce)]:64;++Ce;const Yt=Ce<Ee.length?ve[Ee.charAt(Ce)]:64;if(++Ce,null==Ke||null==Dt||null==un||null==Yt)throw Error();Te.push(Ke<<2|Dt>>4),64!==un&&(Te.push(Dt<<4&240|un>>2),64!==Yt&&Te.push(un<<6&192|Yt))}return Te},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ee=0;Ee<this.ENCODED_VALS.length;Ee++)this.byteToCharMap_[Ee]=this.ENCODED_VALS.charAt(Ee),this.charToByteMap_[this.byteToCharMap_[Ee]]=Ee,this.byteToCharMapWebSafe_[Ee]=this.ENCODED_VALS_WEBSAFE.charAt(Ee),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ee]]=Ee,Ee>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ee)]=Ee,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ee)]=Ee)}}},S=function(Ee){return function(Ee){const Ae=K(Ee);return q.encodeByteArray(Ae,!0)}(Ee).replace(/\./g,"")},E=function(Ee){try{return q.decodeString(Ee,!0)}catch(Ae){console.error("base64Decode failed: ",Ae)}return null};function T(Ee,Ae){if(!(Ae instanceof Object))return Ae;switch(Ae.constructor){case Date:return new Date(Ae.getTime());case Object:void 0===Ee&&(Ee={});break;case Array:Ee=[];break;default:return Ae}for(const ve in Ae)!Ae.hasOwnProperty(ve)||!C(ve)||(Ee[ve]=T(Ee[ve],Ae[ve]));return Ee}function C(Ee){return"__proto__"!==Ee}class k{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ae,ve)=>{this.resolve=Ae,this.reject=ve})}wrapCallback(Ae){return(ve,Te)=>{ve?this.reject(ve):this.resolve(Te),"function"==typeof Ae&&(this.promise.catch(()=>{}),1===Ae.length?Ae(ve):Ae(ve,Te))}}}function A(Ee,Ae){if(Ee.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Te=Ae||"demo-project",Ce=Ee.iat||0,Ke=Ee.sub||Ee.user_id;if(!Ke)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const rt=Object.assign({iss:`https://securetoken.google.com/${Te}`,aud:Te,iat:Ce,exp:Ce+3600,auth_time:Ce,sub:Ke,user_id:Ke,firebase:{sign_in_provider:"custom",identities:{}}},Ee);return[S(JSON.stringify({alg:"none",type:"JWT"})),S(JSON.stringify(rt)),""].join(".")}function x(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function V(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())}function I(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Ee){return!1}}function L(){return"object"==typeof self&&self.self===self}function ne(){const Ee="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ee&&void 0!==Ee.id}function J(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Z(){return x().indexOf("Electron/")>=0}function X(){const Ee=x();return Ee.indexOf("MSIE ")>=0||Ee.indexOf("Trident/")>=0}function $(){return x().indexOf("MSAppHost/")>=0}function W(){return!I()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B(){return"object"==typeof indexedDB}function te(){return new Promise((Ee,Ae)=>{try{let ve=!0;const Te="validate-browser-context-for-indexeddb-analytics-module",Ce=self.indexedDB.open(Te);Ce.onsuccess=()=>{Ce.result.close(),ve||self.indexedDB.deleteDatabase(Te),Ee(!0)},Ce.onupgradeneeded=()=>{ve=!1},Ce.onerror=()=>{var Ke;Ae((null===(Ke=Ce.error)||void 0===Ke?void 0:Ke.message)||"")}}catch(ve){Ae(ve)}})}function Y(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class be extends Error{constructor(Ae,ve,Te){super(ve),this.code=Ae,this.customData=Te,this.name="FirebaseError",Object.setPrototypeOf(this,be.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ce.prototype.create)}}class ce{constructor(Ae,ve,Te){this.service=Ae,this.serviceName=ve,this.errors=Te}create(Ae,...ve){const Te=ve[0]||{},Ce=`${this.service}/${Ae}`,Ke=this.errors[Ae],rt=Ke?function le(Ee,Ae){return Ee.replace(ie,(ve,Te)=>{const Ce=Ae[Te];return null!=Ce?String(Ce):`<${Te}?>`})}(Ke,Te):"Error";return new be(Ce,`${this.serviceName}: ${rt} (${Ce}).`,Te)}}const ie=/\{\$([^}]+)}/g;function Re(Ee,Ae){return Object.prototype.hasOwnProperty.call(Ee,Ae)}function Qe(Ee){for(const Ae in Ee)if(Object.prototype.hasOwnProperty.call(Ee,Ae))return!1;return!0}function It(Ee,Ae){if(Ee===Ae)return!0;const ve=Object.keys(Ee),Te=Object.keys(Ae);for(const Ce of ve){if(!Te.includes(Ce))return!1;const Ke=Ee[Ce],rt=Ae[Ce];if(Mt(Ke)&&Mt(rt)){if(!It(Ke,rt))return!1}else if(Ke!==rt)return!1}for(const Ce of Te)if(!ve.includes(Ce))return!1;return!0}function Mt(Ee){return null!==Ee&&"object"==typeof Ee}function In(Ee){const Ae=[];for(const[ve,Te]of Object.entries(Ee))Array.isArray(Te)?Te.forEach(Ce=>{Ae.push(encodeURIComponent(ve)+"="+encodeURIComponent(Ce))}):Ae.push(encodeURIComponent(ve)+"="+encodeURIComponent(Te));return Ae.length?"&"+Ae.join("&"):""}function yn(Ee){const Ae={};return Ee.replace(/^\?/,"").split("&").forEach(Te=>{if(Te){const[Ce,Ke]=Te.split("=");Ae[decodeURIComponent(Ce)]=decodeURIComponent(Ke)}}),Ae}function je(Ee){const Ae=Ee.indexOf("?");if(!Ae)return"";const ve=Ee.indexOf("#",Ae);return Ee.substring(Ae,ve>0?ve:void 0)}function He(Ee,Ae){const ve=new it(Ee,Ae);return ve.subscribe.bind(ve)}class it{constructor(Ae,ve){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ve,this.task.then(()=>{Ae(this)}).catch(Te=>{this.error(Te)})}next(Ae){this.forEachObserver(ve=>{ve.next(Ae)})}error(Ae){this.forEachObserver(ve=>{ve.error(Ae)}),this.close(Ae)}complete(){this.forEachObserver(Ae=>{Ae.complete()}),this.close()}subscribe(Ae,ve,Te){let Ce;if(void 0===Ae&&void 0===ve&&void 0===Te)throw new Error("Missing Observer.");Ce=function vt(Ee,Ae){if("object"!=typeof Ee||null===Ee)return!1;for(const ve of Ae)if(ve in Ee&&"function"==typeof Ee[ve])return!0;return!1}(Ae,["next","error","complete"])?Ae:{next:Ae,error:ve,complete:Te},void 0===Ce.next&&(Ce.next=Rt),void 0===Ce.error&&(Ce.error=Rt),void 0===Ce.complete&&(Ce.complete=Rt);const Ke=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ce.error(this.finalError):Ce.complete()}catch(rt){}}),this.observers.push(Ce),Ke}unsubscribeOne(Ae){void 0===this.observers||void 0===this.observers[Ae]||(delete this.observers[Ae],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ae){if(!this.finalized)for(let ve=0;ve<this.observers.length;ve++)this.sendOne(ve,Ae)}sendOne(Ae,ve){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ae])try{ve(this.observers[Ae])}catch(Te){"undefined"!=typeof console&&console.error&&console.error(Te)}})}close(Ae){this.finalized||(this.finalized=!0,void 0!==Ae&&(this.finalError=Ae),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rt(){}function wr(Ee,Ae=1e3,ve=2){const Te=Ae*Math.pow(ve,Ee),Ce=Math.round(.5*Te*(Math.random()-.5)*2);return Math.min(144e5,Te+Ce)}function To(Ee){return Ee&&Ee._delegate?Ee._delegate:Ee}},6465:(ht,ge,M)=>{"use strict";var c=M(5e3);let ee=null;function F(){return ee}const R=new c.OlP("DocumentToken");let S=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function E(){return(0,c.LFG)(T)}()},providedIn:"platform"}),n})();const _=new c.OlP("Location Initialized");let T=(()=>{class n extends S{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){C()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){C()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(R))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function k(){return new T((0,c.LFG)(R))}()},providedIn:"platform"}),n})();function C(){return!!window.history.pushState}function A(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function x(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function V(n){return n&&"?"!==n[0]?"?"+n:n}let I=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function L(n){const e=(0,c.LFG)(R).location;return new J((0,c.LFG)(S),e&&e.origin||"")}()},providedIn:"root"}),n})();const ne=new c.OlP("appBaseHref");let J=(()=>{class n extends I{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return A(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+V(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const h=this.prepareExternalUrl(s+V(u));this._platformLocation.pushState(t,r,h)}replaceState(t,r,s,u){const h=this.prepareExternalUrl(s+V(u));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(S),c.LFG(ne,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Z=(()=>{class n extends I{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=A(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let h=this.prepareExternalUrl(s+V(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,s,u){let h=this.prepareExternalUrl(s+V(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(S),c.LFG(ne,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),X=(()=>{class n{constructor(t,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const s=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=x(W(s)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+V(r))}normalize(t){return n.stripTrailingSlash(function H(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,W(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._platformStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+V(r)),s)}replaceState(t,r="",s=null){this._platformStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+V(r)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformStrategy).historyGo)||void 0===s||s.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=V,n.joinWithSlash=A,n.stripTrailingSlash=x,n.\u0275fac=function(t){return new(t||n)(c.LFG(I),c.LFG(S))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function $(){return new X((0,c.LFG)(I),(0,c.LFG)(S))}()},providedIn:"root"}),n})();function W(n){return n.replace(/\/index.html$/,"")}class So{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let sr=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,h)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new So(s.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,h),Yo(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Yo(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Yo(n,e){n.context.$implicit=e.item}let hr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new bn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){uu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){uu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class bn{constructor(){this.$implicit=null,this.ngIf=null}}function uu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}let Gc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function Xo(n){return"server"===n}let gl=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new Ps((0,c.LFG)(R),window)}),n})();class Ps{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Fi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const h=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(h)return h}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ml(this.window.history)||ml(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function ml(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class es extends class ga extends class q{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function j(n){ee||(ee=n)}(new es)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ma(){return pn=pn||document.querySelector("base"),pn?pn.getAttribute("href"):null}();return null==t?null:function No(n){du=du||document.createElement("a"),du.setAttribute("href",n);const e=du.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){pn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ha(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let du,pn=null;const fr=new c.OlP("TRANSITION_ID"),On=[{provide:c.ip1,useFactory:function yl(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=F(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[fr,R,c.zs3],multi:!0}];class Vi{static init(){(0,c.VLi)(new Vi)}addToWindow(e){c.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const s=c.dqk.getAllAngularTestabilities();let u=s.length,h=!1;const m=function(w){h=h||w,u--,0==u&&r(h)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const s=e.getTestability(t);return null!=s?s:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let pr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const ts=new c.OlP("EventManagerPlugins");let io=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const h=s[u];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ts),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class ya{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=F().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let Ei=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Ui=(()=>{class n extends Ei{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const h=this._doc.createElement("style");h.textContent=u,s.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ls),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ls))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(R))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Ls(n){F().remove(n)}const xt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Fs=/%COMP%/g;function Ze(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?Ze(n,s,t):(s=s.replace(Fs,n),t.push(s))}return t}function Qt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let An=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Vs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new ba(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case c.ifc.ShadowDom:return new El(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=Ze(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(io),c.LFG(Ui),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Vs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(xt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=xt[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=xt[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,s&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Qt(r)):this.eventManager.addEventListener(e,t,Qt(r))}}class ba extends Vs{constructor(e,t,r,s){super(e),this.component=r;const u=Ze(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function _l(n){return"_ngcontent-%COMP%".replace(Fs,n)}(s+"-"+r.id),this.hostAttr=function bl(n){return"_nghost-%COMP%".replace(Fs,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class El extends Vs{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ze(s.id,s.styles,[]);for(let h=0;h<u.length;h++){const m=document.createElement("style");m.textContent=u[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Vp=(()=>{class n extends ya{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(R))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const pu=["alt","control","meta","shift"],gu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Un={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},oo={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wa=(()=>{class n extends ya{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),h=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,u.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let h="";if(pu.forEach(w=>{const P=r.indexOf(w);P>-1&&(r.splice(P,1),h+=w+".")}),h+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=s,m.fullKey=h,m}static getEventFullKey(t){let r="",s=function ko(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Un.hasOwnProperty(e)&&(e=Un[e]))}return gu[e]||e}(t);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),pu.forEach(u=>{u!=s&&oo[u](t)&&(r+=u+".")}),r+=s,r}static eventCallback(t,r,s){return u=>{n.getEventFullKey(u)===t&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(R))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const yu=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function wi(){es.makeCurrent(),Vi.init()},multi:!0},{provide:R,useFactory:function mu(){return(0,c.RDi)(document),document},deps:[]}]),Ia=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function wl(){return new c.qLn},deps:[]},{provide:ts,useClass:Vp,multi:!0,deps:[R,c.R0b,c.Lbi]},{provide:ts,useClass:wa,multi:!0,deps:[R]},{provide:An,useClass:An,deps:[io,Ui,c.AFp]},{provide:c.FYo,useExisting:An},{provide:Ei,useExisting:Ui},{provide:Ui,useClass:Ui,deps:[R]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:io,useClass:io,deps:[ts,c.R0b]},{provide:class En{},useClass:pr,deps:[]}];let Da=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:fr,useExisting:c.AFp},On]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:Ia,imports:[Gc,c.hGG]}),n})();"undefined"!=typeof window&&window;let Hs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):c.LFG(Cl),r},providedIn:"root"}),n})(),Cl=(()=>{class n extends Hs{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case c.q3G.NONE:return r;case c.q3G.HTML:return(0,c.qzn)(r,"HTML")?(0,c.z3N)(r):(0,c.EiD)(this._doc,String(r)).toString();case c.q3G.STYLE:return(0,c.qzn)(r,"Style")?(0,c.z3N)(r):r;case c.q3G.SCRIPT:if((0,c.qzn)(r,"Script"))return(0,c.z3N)(r);throw new Error("unsafe value used in a script context");case c.q3G.URL:return(0,c.yhl)(r),(0,c.qzn)(r,"URL")?(0,c.z3N)(r):(0,c.mCW)(String(r));case c.q3G.RESOURCE_URL:if((0,c.qzn)(r,"ResourceURL"))return(0,c.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,c.JVY)(t)}bypassSecurityTrustStyle(t){return(0,c.L6k)(t)}bypassSecurityTrustScript(t){return(0,c.eBb)(t)}bypassSecurityTrustUrl(t){return(0,c.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,c.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(R))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ro(n){return new Cl(n.get(R))}(c.LFG(c.zs3)),r},providedIn:"root"}),n})();var Rn=M(8996),Sa=M(7669);function yt(...n){const e=(0,Sa.yG)(n);return(0,Rn.D)(n,e)}var si=M(7579);class ai extends si.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var zn=M(8306);const{isArray:Al}=Array,{getPrototypeOf:Xc,prototype:qi,keys:Sl}=Object;function Dn(n){if(1===n.length){const e=n[0];if(Al(e))return{args:e,keys:null};if(function xa(n){return n&&"object"==typeof n&&Xc(n)===qi}(e)){const t=Sl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ii=M(4671),Wt=M(4004);const{isArray:bu}=Array;function td(n){return(0,Wt.U)(e=>function ed(n,e){return bu(e)?n(...e):n(e)}(n,e))}function Oa(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var Wn=M(5403),Po=M(9672);function Lo(n,e,t){n?(0,Po.f)(t,n,e):e()}var Ma=M(576);function is(n,e){const t=(0,Ma.m)(n)?n:()=>n,r=s=>s.error(t());return new zn.y(e?s=>e.schedule(r,0,s):r)}const os=(0,M(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ss=M(8189);function Ra(...n){return function ka(){return(0,ss.J)(1)}()((0,Rn.D)(n,(0,Sa.yG)(n)))}var Fo=M(8421);function $s(n){return new zn.y(e=>{(0,Fo.Xf)(n()).subscribe(e)})}var Vo=M(515),Uo=M(727),lr=M(4482);function as(){return(0,lr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Wn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class $i extends zn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,lr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Uo.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Wn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Uo.w0.EMPTY)}return e}refCount(){return as()(this)}}function Bn(n,e){return(0,lr.e)((t,r)=>{let s=null,u=0,h=!1;const m=()=>h&&!s&&r.complete();t.subscribe((0,Wn.x)(r,w=>{null==s||s.unsubscribe();let P=0;const Q=u++;(0,Fo.Xf)(n(w,Q)).subscribe(s=(0,Wn.x)(r,se=>r.next(e?e(w,se,Q,P++):se),()=>{s=null,m()}))},()=>{h=!0,m()}))})}function Gs(n){return n<=0?()=>Vo.E:(0,lr.e)((e,t)=>{let r=0;e.subscribe((0,Wn.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Zr(...n){const e=(0,Sa.yG)(n);return(0,lr.e)((t,r)=>{(e?Ra(n,t,e):Ra(n,t)).subscribe(r)})}function Bo(n,e,t,r,s){return(u,h)=>{let m=t,w=e,P=0;u.subscribe((0,Wn.x)(h,Q=>{const se=P++;w=m?n(w,Q,se):(m=!0,Q),r&&h.next(w)},s&&(()=>{m&&h.next(w),h.complete()})))}}function Di(n,e){return(0,lr.e)(Bo(n,e,arguments.length>=2,!0))}function Xn(n,e){return(0,lr.e)((t,r)=>{let s=0;t.subscribe((0,Wn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}function Tr(n){return(0,lr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Wn.x)(t,void 0,void 0,h=>{u=(0,Fo.Xf)(n(h,Tr(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}var jn=M(5577);function wu(n,e){return(0,Ma.m)(e)?(0,jn.z)(n,e,1):(0,jn.z)(n,1)}function xl(n){return n<=0?()=>Vo.E:(0,lr.e)((e,t)=>{let r=[];e.subscribe((0,Wn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Sn(n=Mh){return(0,lr.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Mh(){return new os}function Nh(n){return(0,lr.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Pa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xn((s,u)=>n(s,u,r)):Ii.y,Gs(1),t?Nh(e):Sn(()=>new os))}var Ti=M(8505);class us{constructor(e,t){this.id=e,this.url=t}}class zs extends us{constructor(e,t,r="imperative",s=null){super(e,t),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Iu extends us{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Pn extends us{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Du extends us{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class jo extends us{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hp extends us{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ol extends us{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ui extends us{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class li extends us{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ws{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ls{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Tu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cu{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class La{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cs{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ml{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Jt="primary";class Au{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qn(n){return new Au(n)}const qo="ngNavigationCancelingError";function Ci(n){const e=Error("NavigationCancelingError: "+n);return e[qo]=!0,e}function Su(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const h=r[u],m=n[u];if(h.startsWith(":"))s[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function ao(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Nl(n[s],e[s]))return!1;return!0}function Nl(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function kh(n){return Array.prototype.concat.apply([],n)}function xu(n){return n.length>0?n[n.length-1]:null}function Cn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function er(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,Rn.D)(Promise.resolve(n)):yt(n)}const Va={exact:function Rh(n,e,t){if(!ye(n.segments,e.segments)||!Ho(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Rh(n.children[r],e.children[r],t))return!1;return!0},subset:Ua},ci={exact:function uo(n,e){return ao(n,e)},subset:function id(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Nl(n[t],e[t]))},ignored:()=>!0};function ds(n,e,t){return Va[t.paths](n.root,e.root,t.matrixParams)&&ci[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ua(n,e,t){return Rl(n,e,e.segments,t)}function Rl(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!ye(s,t)||e.hasChildren()||!Ho(s,t,r))}if(n.segments.length===t.length){if(!ye(n.segments,t)||!Ho(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Ua(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ye(n.segments,s)&&Ho(n.segments,s,r)&&n.children[Jt])&&Rl(n.children[Jt],e,u,r)}}function Ho(n,e,t){return e.every((r,s)=>ci[t](n[s].parameters,r.parameters))}class hs{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qn(this.queryParams)),this._queryParamMap}toString(){return st.serialize(this)}}class O{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Cn(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _t(this)}}class U{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qn(this.parameters)),this._parameterMap}toString(){return Ai(this)}}function ye(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Pe{}class Ye{parse(e){const t=new by(e);return new hs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ot(e.root,!0)}`,r=function Ou(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${bt(t)}=${bt(s)}`).join("&"):`${bt(t)}=${bt(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Mn(n){return encodeURI(n)}(e.fragment)}`:""}`}}const st=new Ye;function _t(n){return n.segments.map(e=>Ai(e)).join("/")}function Ot(n,e){if(!n.hasChildren())return _t(n);if(e){const t=n.children[Jt]?Ot(n.children[Jt],!1):"",r=[];return Cn(n.children,(s,u)=>{u!==Jt&&r.push(`${u}:${Ot(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Oe(n,e){let t=[];return Cn(n.children,(r,s)=>{s===Jt&&(t=t.concat(e(r,s)))}),Cn(n.children,(r,s)=>{s!==Jt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Jt?[Ot(n.children[Jt],!1)]:[`${s}:${Ot(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Jt]?`${_t(n)}/${t[0]}`:`${_t(n)}/(${t.join("//")})`}}function Ft(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bt(n){return Ft(n).replace(/%3B/gi,";")}function Cr(n){return Ft(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lo(n){return decodeURIComponent(n)}function co(n){return lo(n.replace(/\+/g,"%20"))}function Ai(n){return`${Cr(n.path)}${function od(n){return Object.keys(n).map(e=>`;${Cr(e)}=${Cr(n[e])}`).join("")}(n.parameters)}`}const fs=/^[^\/()?;=#]+/;function Ar(n){const e=n.match(fs);return e?e[0]:""}const Gi=/^[^=?&#]+/,Gp=/^[^&#]+/;class by{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new O([],{}):new O([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Jt]=new O(e,t)),r}parseSegment(){const e=Ar(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new U(lo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ar(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Ar(this.remaining);s&&(r=s,this.capture(r))}e[lo(t)]=lo(r)}parseQueryParam(e){const t=function sd(n){const e=n.match(Gi);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function zp(n){const e=n.match(Gp);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const s=co(t),u=co(r);if(e.hasOwnProperty(s)){let h=e[s];Array.isArray(h)||(h=[h],e[s]=h),h.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ar(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Jt);const h=this.parseChildren();t[u]=1===Object.keys(h).length?h[Jt]:new O([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Wp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ph(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Ph(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Mu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Mu(e,this._root).map(t=>t.value)}}function Ph(n,e){if(n===e.value)return e;for(const t of e.children){const r=Ph(n,t);if(r)return r}return null}function Mu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Mu(n,t);if(r.length)return r.unshift(e),r}return[]}class ps{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function gs(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ad extends Wp{constructor(e,t){super(e),this.snapshot=t,ld(this,e)}toString(){return this.snapshot.toString()}}function Ba(n,e){const t=function Ey(n,e){const h=new Zs([],{},{},"",{},Jt,e,null,n.root,-1,{});return new Lh("",new ps(h,[]))}(n,e),r=new ai([new U("",{})]),s=new ai({}),u=new ai({}),h=new ai({}),m=new ai(""),w=new ja(r,s,h,m,u,Jt,e,t.root);return w.snapshot=t.root,new ad(new ps(w,[]),t)}class ja{constructor(e,t,r,s,u,h,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=h,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Wt.U)(e=>qn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Wt.U)(e=>qn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function wy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function ud(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Zs{constructor(e,t,r,s,u,h,m,w,P,Q,se){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=h,this.component=m,this.routeConfig=w,this._urlSegment=P,this._lastPathIndex=Q,this._resolve=se}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Lh extends Wp{constructor(e,t){super(t),this.url=e,ld(this,t)}toString(){return Fh(this._root)}}function ld(n,e){e.value._routerState=n,e.children.forEach(t=>ld(n,t))}function Fh(n){const e=n.children.length>0?` { ${n.children.map(Fh).join(", ")} } `:"";return`${n.value}${e}`}function ms(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ao(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ao(e.params,t.params)||n.params.next(t.params),function Fa(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ao(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ao(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Vh(n,e){const t=ao(n.params,e.params)&&function oe(n,e){return ye(n,e)&&n.every((t,r)=>ao(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Vh(n.parent,e.parent))}function Pl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Iy(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Pl(n,r,s);return Pl(n,r)})}(n,e,t);return new ps(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const h=u.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(m=>Pl(n,m)),h}}const r=function Dy(n){return new ja(new ai(n.url),new ai(n.params),new ai(n.queryParams),new ai(n.fragment),new ai(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Pl(n,u));return new ps(r,s)}}function ho(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Nu(n){return"object"==typeof n&&null!=n&&n.outlets}function Ll(n,e,t,r,s){let u={};if(r&&Cn(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(P=>`${P}`):`${m}`}),n===e)return new hs(t,u,s);const h=Kp(n,e,t);return new hs(h,u,s)}function Kp(n,e,t){const r={};return Cn(n.children,(s,u)=>{r[u]=s===e?t:Kp(s,e,t)}),new O(n.segments,r)}class Uh{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ho(r[0]))throw new Error("Root segment cannot have matrix parameters");const s=r.find(Nu);if(s&&s!==xu(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Xp(n,e,t){if(n||(n=new O([],{})),0===n.segments.length&&n.hasChildren())return cd(n,e,t);const r=function y0(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const h=n.segments[s],m=t[r];if(Nu(m))break;const w=`${m}`,P=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&P&&"object"==typeof P&&void 0===P.outlets){if(!po(w,P,h))return u;r+=2}else{if(!po(w,{},h))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new O(n.segments.slice(0,r.pathIndex),{});return u.children[Jt]=new O(n.segments.slice(r.pathIndex),n.children),cd(u,0,s)}return r.match&&0===s.length?new O(n.segments,{}):r.match&&!n.hasChildren()?eg(n,e,t):r.match?cd(n,0,s):eg(n,e,t)}function cd(n,e,t){if(0===t.length)return new O(n.segments,{});{const r=function Jp(n){return Nu(n[0])?n[0].outlets:{[Jt]:n}}(t),s={};return Cn(r,(u,h)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[h]=Xp(n.children[h],e,u))}),Cn(n.children,(u,h)=>{void 0===r[h]&&(s[h]=u)}),new O(n.segments,s)}}function eg(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Nu(u)){const w=fo(u.outlets);return new O(r,w)}if(0===s&&ho(t[0])){r.push(new U(n.segments[e].path,Bh(t[0]))),s++;continue}const h=Nu(u)?u.outlets[Jt]:`${u}`,m=s<t.length-1?t[s+1]:null;h&&m&&ho(m)?(r.push(new U(h,Bh(m))),s+=2):(r.push(new U(h,{})),s++)}return new O(r,{})}function fo(n){const e={};return Cn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=eg(new O([],{}),0,t))}),e}function Bh(n){const e={};return Cn(n,(t,r)=>e[r]=`${t}`),e}function po(n,e,t){return n==t.path&&ao(e,t.parameters)}class tg{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ms(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=gs(t);e.children.forEach(u=>{const h=u.value.outlet;this.deactivateRoutes(u,s[h],r),delete s[h]}),Cn(s,(u,h)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const h=r.getContext(s.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=gs(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],s);if(r&&r.outlet){const h=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=gs(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=gs(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new cs(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Cu(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(ms(s),s===u)if(s.component){const h=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const h=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),ms(m.route.value),this.activateChildRoutes(e,null,h.children)}else{const m=function dd(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),w=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=s,h.resolver=w,h.outlet&&h.outlet.activateWith(s,w),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class hd{constructor(e,t){this.routes=e,this.module=t}}function Ha(n){return"function"==typeof n}function ku(n){return n instanceof hs}const fd=Symbol("INITIAL_VALUE");function Ru(){return Bn(n=>function Eu(...n){const e=(0,Sa.yG)(n),t=(0,Sa.jO)(n),{args:r,keys:s}=Dn(n);if(0===r.length)return(0,Rn.D)([],e);const u=new zn.y(function Hi(n,e,t=Ii.y){return r=>{Lo(e,()=>{const{length:s}=n,u=new Array(s);let h=s,m=s;for(let w=0;w<s;w++)Lo(e,()=>{const P=(0,Rn.D)(n[w],e);let Q=!1;P.subscribe((0,Wn.x)(r,se=>{u[w]=se,Q||(Q=!0,m--),m||r.next(t(u.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,s?h=>Oa(s,h):Ii.y));return t?u.pipe(td(t)):u}(n.map(e=>e.pipe(Gs(1),Zr(fd)))).pipe(Di((e,t)=>{let r=!1;return t.reduce((s,u,h)=>s!==fd?s:(u===fd&&(r=!0),r||!1!==u&&h!==t.length-1&&!ku(u)?s:u),e)},fd),Xn(e=>e!==fd),(0,Wt.U)(e=>ku(e)?e:!0===e),Gs(1)))}class Cy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Pu,this.attachRef=null}}class Pu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Cy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Ul=(()=>{class n{constructor(t,r,s,u,h){this.parentContexts=t,this.location=r,this.resolver=s,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=u||Jt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new Ay(t,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Pu),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Ay{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ja?this.route:e===Pu?this.childContexts:this.parent.get(e,t)}}let Hh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[Ul],encapsulation:2}),n})();function $a(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];pd(r,$h(e,r))}}function pd(n,e){n.children&&$a(n.children,e)}function $h(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Gh(n){const e=n.children&&n.children.map(Gh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Jt&&(t.component=Hh),t}function an(n){return n.outlet||Jt}function zh(n,e){const t=n.filter(r=>an(r)===e);return t.push(...n.filter(r=>an(r)!==e)),t}const rg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Lu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},rg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Su)(t,n,e);if(!u)return Object.assign({},rg);const h={};Cn(u.posParams,(w,P)=>{h[P]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},h),u.consumed[u.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Fu(n,e,t,r,s="corrected"){if(t.length>0&&function Oy(n,e,t){return t.some(r=>Ks(n,e,r)&&an(r)!==Jt)}(n,t,r)){const h=new O(e,function xy(n,e,t,r){const s={};s[Jt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&an(u)!==Jt){const h=new O([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,s[an(u)]=h}return s}(n,e,r,new O(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function My(n,e,t){return t.some(r=>Ks(n,e,r))}(n,t,r)){const h=new O(n.segments,function Sy(n,e,t,r,s,u){const h={};for(const m of r)if(Ks(n,t,m)&&!s[an(m)]){const w=new O([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,h[an(m)]=w}return Object.assign(Object.assign({},s),h)}(n,e,t,r,n.children,s));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const u=new O(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Ks(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ny(n,e,t,r){return!!(an(n)===r||r!==Jt&&Ks(e,t,n))&&("**"===n.path||Lu(e,n,t).matched)}function ig(n,e,t){return 0===e.length&&!n.children[t]}class Ys{constructor(e){this.segmentGroup=e||null}}class Pr{constructor(e){this.urlTree=e}}function Ga(n){return is(new Ys(n))}function Wh(n){return is(new Pr(n))}class gd{constructor(e,t,r,s,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=Fu(this.urlTree.root,[],[],this.config).segmentGroup,t=new O(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Jt).pipe((0,Wt.U)(u=>this.createUrlTree(Bl(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Tr(u=>{if(u instanceof Pr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Ys?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Jt).pipe((0,Wt.U)(s=>this.createUrlTree(Bl(s),e.queryParams,e.fragment))).pipe(Tr(s=>{throw s instanceof Ys?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const s=e.segments.length>0?new O([],{[Jt]:e}):e;return new hs(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Wt.U)(u=>new O([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,Rn.D)(s).pipe(wu(u=>{const h=r.children[u],m=zh(t,u);return this.expandSegmentGroup(e,m,h,u).pipe((0,Wt.U)(w=>({segment:w,outlet:u})))}),Di((u,h)=>(u[h.outlet]=h.segment,u),{}),function nd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Xn((s,u)=>n(s,u,r)):Ii.y,xl(1),t?Nh(e):Sn(()=>new os))}())}expandSegment(e,t,r,s,u,h){return(0,Rn.D)(r).pipe(wu(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,h).pipe(Tr(P=>{if(P instanceof Ys)return yt(null);throw P}))),Pa(m=>!!m),Tr((m,w)=>{if(m instanceof os||"EmptyError"===m.name)return ig(t,s,u)?yt(new O([],{})):Ga(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,h,m){return Ny(s,t,u,h)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,h):Ga(t):Ga(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,h){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Wh(u):this.lineralizeSegments(r,u).pipe((0,jn.z)(h=>{const m=new O(h,{});return this.expandSegment(e,m,t,h,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,h){const{matched:m,consumedSegments:w,remainingSegments:P,positionalParamSegments:Q}=Lu(t,s,u);if(!m)return Ga(t);const se=this.applyRedirectCommands(w,s.redirectTo,Q);return s.redirectTo.startsWith("/")?Wh(se):this.lineralizeSegments(s,se).pipe((0,jn.z)(Ie=>this.expandSegment(e,t,r,Ie.concat(P),h,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?yt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Wt.U)(se=>(r._loadedConfig=se,new O(s,{})))):yt(new O(s,{}));const{matched:h,consumedSegments:m,remainingSegments:w}=Lu(t,r,s);return h?this.getChildConfig(e,r,s).pipe((0,jn.z)(Q=>{const se=Q.module,Ie=Q.routes,{segmentGroup:Me,slicedSegments:Le}=Fu(t,m,w,Ie),et=new O(Me.segments,Me.children);if(0===Le.length&&et.hasChildren())return this.expandChildren(se,Ie,et).pipe((0,Wt.U)(on=>new O(m,on)));if(0===Ie.length&&0===Le.length)return yt(new O(m,{}));const ut=an(r)===u;return this.expandSegment(se,et,Ie,Le,ut?Jt:u,!0).pipe((0,Wt.U)(Zt=>new O(m.concat(Zt.segments),Zt.children)))})):Ga(t)}getChildConfig(e,t,r){return t.children?yt(new hd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?yt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,jn.z)(s=>s?this.configLoader.load(e.injector,t).pipe((0,Wt.U)(u=>(t._loadedConfig=u,u))):function gr(n){return is(Ci(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):yt(new hd([],e))}runCanLoadGuards(e,t,r){const s=t.canLoad;return s&&0!==s.length?yt(s.map(h=>{const m=e.get(h);let w;if(function jh(n){return n&&Ha(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!Ha(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return er(w)})).pipe(Ru(),(0,Ti.b)(h=>{if(!ku(h))return;const m=Ci(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,Wt.U)(h=>!0===h)):yt(!0)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return yt(r);if(s.numberOfChildren>1||!s.children[Jt])return is(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));s=s.children[Jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new hs(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Cn(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let h={};return Cn(t.children,(m,w)=>{h[w]=this.createSegmentGroup(e,m,r,s)}),new O(u,h)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}function Bl(n){const e={};for(const r of Object.keys(n.children)){const u=Bl(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function ky(n){if(1===n.numberOfChildren&&n.children[Jt]){const e=n.children[Jt];return new O(n.segments.concat(e.segments),e.children)}return n}(new O(n.segments,e))}class di{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class vs{constructor(e,t){this.component=e,this.route=t}}function sg(n,e,t){const r=n._root;return Wa(r,e?e._root:null,t,[r.value])}function Vu(n,e,t){const r=function Kh(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Wa(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=gs(e);return n.children.forEach(h=>{(function ug(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,h=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(h&&u.routeConfig===h.routeConfig){const w=function Ry(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ye(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ye(n.url,e.url)||!ao(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vh(n,e)||!ao(n.queryParams,e.queryParams);default:return!Vh(n,e)}}(h,u,u.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new di(r)):(u.data=h.data,u._resolvedData=h._resolvedData),Wa(n,e,u.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new vs(m.outlet.component,h))}else h&&hi(e,m,s),s.canActivateChecks.push(new di(r)),Wa(n,null,u.component?m?m.children:null:t,r,s)})(h,u[h.value.outlet],t,r.concat([h.value]),s),delete u[h.value.outlet]}),Cn(u,(h,m)=>hi(h,t.getContext(m),s)),s}function hi(n,e,t){const r=gs(n),s=n.value;Cn(r,(u,h)=>{hi(u,s.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new vs(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class dg{}function $o(n){return new zn.y(e=>e.error(n))}class hg{constructor(e,t,r,s,u,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h}recognize(){const e=Fu(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Jt);if(null===t)return null;const r=new Zs([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Jt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new ps(r,t),u=new Lh(this.url,s);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=wy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const h=t.children[u],m=zh(e,u),w=this.processSegmentGroup(m,h,u);if(null===w)return null;r.push(...w)}const s=pg(r);return function fg(n){n.sort((e,t)=>e.value.outlet===Jt?-1:t.value.outlet===Jt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}processSegment(e,t,r,s){for(const u of e){const h=this.processSegmentAgainstRoute(u,t,r,s);if(null!==h)return h}return ig(t,r,s)?[]:null}processSegmentAgainstRoute(e,t,r,s){if(e.redirectTo||!Ny(e,t,r,s))return null;let u,h=[],m=[];if("**"===e.path){const Me=r.length>0?xu(r).parameters:{};u=new Zs(r,Me,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),an(e),e.component,e,Za(t),go(t)+r.length,f(e))}else{const Me=Lu(t,e,r);if(!Me.matched)return null;h=Me.consumedSegments,m=Me.remainingSegments,u=new Zs(h,Me.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),an(e),e.component,e,Za(t),go(t)+h.length,f(e))}const w=function Fy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:P,slicedSegments:Q}=Fu(t,h,m,w.filter(Me=>void 0===Me.redirectTo),this.relativeLinkResolution);if(0===Q.length&&P.hasChildren()){const Me=this.processChildren(w,P);return null===Me?null:[new ps(u,Me)]}if(0===w.length&&0===Q.length)return[new ps(u,[])];const se=an(e)===s,Ie=this.processSegment(w,P,Q,se?Jt:s);return null===Ie?null:[new ps(u,Ie)]}}function Jh(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function pg(n){const e=[],t=new Set;for(const r of n){if(!Jh(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=pg(r.children);e.push(new ps(r.value,s))}return e.filter(r=>!t.has(r))}function Za(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function go(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y(n){return n.data||{}}function f(n){return n.resolve||{}}function Se(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function tt(n){return Bn(e=>{const t=n(e);return t?(0,Rn.D)(t).pipe((0,Wt.U)(()=>e)):yt(e)})}class At extends class Nt{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ln=new c.OlP("ROUTES");class pi{constructor(e,t,r,s){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=s}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const s=this.loadModuleFactory(t.loadChildren).pipe((0,Wt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=u.create(e);return new hd(kh(h.injector.get(Ln,void 0,c.XFs.Self|c.XFs.Optional)).map(Gh),h)}),Tr(u=>{throw t._loader$=void 0,u}));return t._loader$=new $i(s,()=>new si.x).pipe(as()),t._loader$}loadModuleFactory(e){return er(e()).pipe((0,jn.z)(t=>t instanceof c.YKP?yt(t):(0,Rn.D)(this.compiler.compileModuleAsync(t))))}}class Vy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Qs(n){throw n}function yd(n,e,t){return e.parse("/")}function vd(n,e){return yt(null)}const Xh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_d={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Sr=(()=>{class n{constructor(t,r,s,u,h,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new si.x,this.errorHandler=Qs,this.malformedUriErrorHandler=yd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:vd,afterPreactivation:vd},this.urlHandlingStrategy=new Vy,this.routeReuseStrategy=new At,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(c.h0i),this.console=h.get(c.c2e);const se=h.get(c.R0b);this.isNgZoneEnabled=se instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function $p(){return new hs(new O([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new pi(h,m,Ie=>this.triggerEvent(new Ws(Ie)),Ie=>this.triggerEvent(new ls(Ie))),this.routerState=Ba(this.currentUrlTree,this.rootComponentType),this.transitions=new ai({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Xn(s=>0!==s.id),(0,Wt.U)(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Bn(s=>{let u=!1,h=!1;return yt(s).pipe((0,Ti.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Bn(m=>{const w=this.browserUrlTree.toString(),P=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||P)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return tf(m.source)&&(this.browserUrlTree=m.extractedUrl),yt(m).pipe(Bn(se=>{const Ie=this.transitions.getValue();return r.next(new zs(se.id,this.serializeUrl(se.extractedUrl),se.source,se.restoredState)),Ie!==this.transitions.getValue()?Vo.E:Promise.resolve(se)}),function og(n,e,t,r){return Bn(s=>function za(n,e,t,r,s){return new gd(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,Wt.U)(u=>Object.assign(Object.assign({},s),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ti.b)(se=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:se.urlAfterRedirects})}),function g(n,e,t,r,s){return(0,jn.z)(u=>function jl(n,e,t,r,s="emptyOnly",u="legacy"){try{const h=new hg(n,e,t,r,s,u).recognize();return null===h?$o(new dg):yt(h)}catch(h){return $o(h)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,s).pipe((0,Wt.U)(h=>Object.assign(Object.assign({},u),{targetSnapshot:h}))))}(this.rootComponentType,this.config,se=>this.serializeUrl(se),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ti.b)(se=>{if("eager"===this.urlUpdateStrategy){if(!se.extras.skipLocationChange){const Me=this.urlHandlingStrategy.merge(se.urlAfterRedirects,se.rawUrl);this.setBrowserUrl(Me,se)}this.browserUrlTree=se.urlAfterRedirects}const Ie=new jo(se.id,this.serializeUrl(se.extractedUrl),this.serializeUrl(se.urlAfterRedirects),se.targetSnapshot);r.next(Ie)}));if(P&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Ie,extractedUrl:Me,source:Le,restoredState:et,extras:ut}=m,Gt=new zs(Ie,this.serializeUrl(Me),Le,et);r.next(Gt);const Zt=Ba(Me,this.rootComponentType).snapshot;return yt(Object.assign(Object.assign({},m),{targetSnapshot:Zt,urlAfterRedirects:Me,extras:Object.assign(Object.assign({},ut),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Vo.E}),tt(m=>{const{targetSnapshot:w,id:P,extractedUrl:Q,rawUrl:se,extras:{skipLocationChange:Ie,replaceUrl:Me}}=m;return this.hooks.beforePreactivation(w,{navigationId:P,appliedUrlTree:Q,rawUrlTree:se,skipLocationChange:!!Ie,replaceUrl:!!Me})}),(0,Ti.b)(m=>{const w=new Hp(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,Wt.U)(m=>Object.assign(Object.assign({},m),{guards:sg(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function lg(n,e){return(0,jn.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:h}}=t;return 0===h.length&&0===u.length?yt(Object.assign(Object.assign({},t),{guardsResult:!0})):function Py(n,e,t,r){return(0,Rn.D)(n).pipe((0,jn.z)(s=>function Qh(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?yt(u.map(m=>{const w=Vu(m,e,s);let P;if(function v0(n){return n&&Ha(n.canDeactivate)}(w))P=er(w.canDeactivate(n,e,t,r));else{if(!Ha(w))throw new Error("Invalid CanDeactivate guard");P=er(w(n,e,t,r))}return P.pipe(Pa())})).pipe(Ru()):yt(!0)}(s.component,s.route,t,e,r)),Pa(s=>!0!==s,!0))}(h,r,s,n).pipe((0,jn.z)(m=>m&&function ng(n){return"boolean"==typeof n}(m)?function md(n,e,t,r){return(0,Rn.D)(e).pipe(wu(s=>Ra(function cg(n,e){return null!==n&&e&&e(new Tu(n)),yt(!0)}(s.route.parent,r),function Ly(n,e){return null!==n&&e&&e(new La(n)),yt(!0)}(s.route,r),function Yh(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(h=>function ag(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>$s(()=>yt(h.guards.map(w=>{const P=Vu(w,h.node,t);let Q;if(function qh(n){return n&&Ha(n.canActivateChild)}(P))Q=er(P.canActivateChild(r,n));else{if(!Ha(P))throw new Error("Invalid CanActivateChild guard");Q=er(P(r,n))}return Q.pipe(Pa())})).pipe(Ru())));return yt(u).pipe(Ru())}(n,s.path,t),function fi(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return yt(!0);const s=r.map(u=>$s(()=>{const h=Vu(u,e,t);let m;if(function Vl(n){return n&&Ha(n.canActivate)}(h))m=er(h.canActivate(e,n));else{if(!Ha(h))throw new Error("Invalid CanActivate guard");m=er(h(e,n))}return m.pipe(Pa())}));return yt(s).pipe(Ru())}(n,s.route,t))),Pa(s=>!0!==s,!0))}(r,u,n,e):yt(m)),(0,Wt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,Ti.b)(m=>{if(ku(m.guardsResult)){const P=Ci(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw P.url=m.guardsResult,P}const w=new Ol(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),Xn(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),tt(m=>{if(m.guards.canActivateChecks.length)return yt(m).pipe((0,Ti.b)(w=>{const P=new ui(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(P)}),Bn(w=>{let P=!1;return yt(w).pipe(function b(n,e){return(0,jn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return yt(t);let u=0;return(0,Rn.D)(s).pipe(wu(h=>function G(n,e,t,r){return function ae(n,e,t,r){const s=Se(n);if(0===s.length)return yt({});const u={};return(0,Rn.D)(s).pipe((0,jn.z)(h=>function Ve(n,e,t,r){const s=Vu(n,e,r);return er(s.resolve?s.resolve(e,t):s(e,t))}(n[h],e,t,r).pipe((0,Ti.b)(m=>{u[h]=m}))),xl(1),(0,jn.z)(()=>Se(u).length===s.length?yt(u):Vo.E))}(n._resolve,n,e,r).pipe((0,Wt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),wy(n,t).resolve),null)))}(h.route,r,n,e)),(0,Ti.b)(()=>u++),xl(1),(0,jn.z)(h=>u===s.length?yt(t):Vo.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ti.b)({next:()=>P=!0,complete:()=>{P||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,Ti.b)(w=>{const P=new li(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(P)}))}),tt(m=>{const{targetSnapshot:w,id:P,extractedUrl:Q,rawUrl:se,extras:{skipLocationChange:Ie,replaceUrl:Me}}=m;return this.hooks.afterPreactivation(w,{navigationId:P,appliedUrlTree:Q,rawUrlTree:se,skipLocationChange:!!Ie,replaceUrl:!!Me})}),(0,Wt.U)(m=>{const w=function Zp(n,e,t){const r=Pl(n,e._root,t?t._root:void 0);return new ad(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,Ti.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Wt.U)(r=>(new tg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,Ti.b)({next(){u=!0},complete(){u=!0}}),function qp(n){return(0,lr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||h||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===s.id&&(this.currentNavigation=null)}),Tr(m=>{if(h=!0,function rd(n){return n&&n[qo]}(m)){const w=ku(m.url);w||(this.navigated=!0,this.restoreHistory(s,!0));const P=new Pn(s.id,this.serializeUrl(s.extractedUrl),m.message);r.next(P),w?setTimeout(()=>{const Q=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),se={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||tf(s.source)};this.scheduleNavigation(Q,"imperative",null,se,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const w=new Du(s.id,this.serializeUrl(s.extractedUrl),m);r.next(w);try{s.resolve(this.errorHandler(m))}catch(P){s.reject(P)}}return Vo.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var s;const u={replaceUrl:!0},h=(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null;if(h){const w=Object.assign({},h);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,h,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){$a(t),this.config=t.map(Gh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:h,queryParamsHandling:m,preserveFragment:w}=r,P=s||this.routerState.root,Q=w?this.currentUrlTree.fragment:h;let se=null;switch(m){case"merge":se=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":se=this.currentUrlTree.queryParams;break;default:se=u||null}return null!==se&&(se=this.removeEmptyProps(se)),function ys(n,e,t,r,s){if(0===t.length)return Ll(e.root,e.root,e.root,r,s);const u=function Ty(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Uh(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,h)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Cn(u.outlets,(w,P)=>{m[P]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===h?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new Uh(t,e,r)}(t);if(u.toRoot())return Ll(e.root,e.root,new O([],{}),r,s);const h=function Yp(n,e,t){if(n.isAbsolute)return new Fl(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Fl(u,u===e.root,0)}const r=ho(n.commands[0])?0:1;return function Qp(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new Fl(r,!1,s-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=h.processChildren?cd(h.segmentGroup,h.index,u.commands):Xp(h.segmentGroup,h.index,u.commands);return Ll(e.root,h.segmentGroup,m,r,s)}(P,this.currentUrlTree,t,se,null!=Q?Q:null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=ku(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function ef(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?Object.assign({},Xh):!1===r?Object.assign({},_d):r,ku(t))return ds(this.currentUrlTree,t,s);const u=this.parseUrl(t);return ds(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Iu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,h){var m,w;if(this.disposed)return Promise.resolve(!1);let P,Q,se;h?(P=h.resolve,Q=h.reject,se=h.promise):se=new Promise((Le,et)=>{P=Le,Q=et});const Ie=++this.navigationId;let Me;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),Me=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):Me=0,this.setTransition({id:Ie,targetPageId:Me,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:P,reject:Q,promise:se,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),se.catch(Le=>Promise.reject(Le))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){var s,u;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===h?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const s=new Pn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function tf(n){return"imperative"!==n}let bd=(()=>{class n{constructor(t,r,s,u,h){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=h,this.commands=null,this.onChanges=new si.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,s=this.el.nativeElement;null!==t?r.setAttribute(s,"tabindex",t):r.removeAttribute(s,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Bu(this.skipLocationChange),replaceUrl:Bu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Bu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Sr),c.Y36(ja),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})(),Uu=(()=>{class n{constructor(t,r,s){this.router=t,this.route=r,this.locationStrategy=s,this.commands=null,this.href=null,this.onChanges=new si.x,this.subscription=t.events.subscribe(u=>{u instanceof Iu&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,s,u,h){if(0!==t||r||s||u||h||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:Bu(this.skipLocationChange),replaceUrl:Bu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Bu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Sr),c.Y36(ja),c.Y36(I))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})();function Bu(n){return""===n||!!n}let Uy=(()=>{class n{constructor(t,r,s,u,h,m){this.router=t,this.element=r,this.renderer=s,this.cdr=u,this.link=h,this.linkWithHref=m,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new c.vpe,this.routerEventsSubscription=t.events.subscribe(w=>{w instanceof Iu&&this.update()})}ngAfterContentInit(){yt(this.links.changes,this.linksWithHrefs.changes,yt(null)).pipe((0,ss.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(s=>!!s).map(s=>s.onChanges);this.linkInputChangesSubscription=(0,Rn.D)(r).pipe((0,ss.J)()).subscribe(s=>{this.isActive!==this.isLinkActive(this.router)(s)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(s=>!!s)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function By(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>!!s.urlTree&&t.isActive(s.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Sr),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.sBO),c.Y36(bd,8),c.Y36(Uu,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,s){if(1&t&&(c.Suo(s,bd,5),c.Suo(s,Uu,5)),2&t){let u;c.iGM(u=c.CRH())&&(r.links=u),c.iGM(u=c.CRH())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[c.TTD]}),n})();class jy{}class b0{preload(e,t){return yt(null)}}let E0=(()=>{class n{constructor(t,r,s,u){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=new pi(s,r,w=>t.triggerEvent(new Ws(w)),w=>t.triggerEvent(new ls(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(Xn(t=>t instanceof Iu),wu(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const h=u._loadedConfig;s.push(this.processRoutes(h.module,h.routes))}else u.loadChildren&&!u.canLoad?s.push(this.preloadConfig(t,u)):u.children&&s.push(this.processRoutes(t,u.children));return(0,Rn.D)(s).pipe((0,ss.J)(),(0,Wt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?yt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,jn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Sr),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(jy))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),gg=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof zs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Iu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ml&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ml(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const mo=new c.OlP("ROUTER_CONFIGURATION"),Hy=new c.OlP("ROUTER_FORROOT_GUARD"),w0=[X,{provide:Pe,useClass:Ye},{provide:Sr,useFactory:function Gy(n,e,t,r,s,u,h={},m,w){const P=new Sr(null,n,e,t,r,s,kh(u));return m&&(P.urlHandlingStrategy=m),w&&(P.routeReuseStrategy=w),function T0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,P),h.enableTracing&&P.events.subscribe(Q=>{var se,Ie;null===(se=console.group)||void 0===se||se.call(console,`Router Event: ${Q.constructor.name}`),console.log(Q.toString()),console.log(Q),null===(Ie=console.groupEnd)||void 0===Ie||Ie.call(console)}),P},deps:[Pe,Pu,X,c.zs3,c.Sil,Ln,mo,[class ql{},new c.FiY],[class dt{},new c.FiY]]},Pu,{provide:ja,useFactory:function mg(n){return n.routerState.root},deps:[Sr]},E0,b0,class qy{preload(e,t){return t().pipe(Tr(()=>yt(null)))}},{provide:mo,useValue:{enableTracing:!1}}];function tI(){return new c.PXZ("Router",Sr)}let nf=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[w0,$y(t),{provide:Hy,useFactory:D0,deps:[[Sr,new c.FiY,new c.tp0]]},{provide:mo,useValue:r||{}},{provide:I,useFactory:I0,deps:[S,[new c.tBr(ne),new c.FiY],mo]},{provide:gg,useFactory:nI,deps:[Sr,gl,mo]},{provide:jy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:b0},{provide:c.PXZ,multi:!0,useFactory:tI},[Ed,{provide:c.ip1,multi:!0,useFactory:C0,deps:[Ed]},{provide:Wy,useFactory:zy,deps:[Ed]},{provide:c.tb,multi:!0,useExisting:Wy}]]}}static forChild(t){return{ngModule:n,providers:[$y(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Hy,8),c.LFG(Sr,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function nI(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new gg(n,e,t)}function I0(n,e,t={}){return t.useHash?new Z(n,e):new J(n,e)}function D0(n){return"guarded"}function $y(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:Ln,multi:!0,useValue:n}]}let Ed=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new si.x}appInitializer(){return this.injector.get(_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const s=new Promise(m=>r=m),u=this.injector.get(Sr),h=this.injector.get(mo);return"disabled"===h.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?yt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),s})}bootstrapListener(t){const r=this.injector.get(mo),s=this.injector.get(E0),u=this.injector.get(gg),h=this.injector.get(Sr),m=this.injector.get(c.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),s.setUpPreloading(),u.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function C0(n){return n.appInitializer.bind(n)}function zy(n){return n.bootstrapListener.bind(n)}const Wy=new c.OlP("Router Initializer");let rI=(()=>{class n{constructor(t){this.router=t}ngOnInit(){}navigateTo(t){this.router.navigate([t])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Sr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-ex-index"]],decls:6,vars:0,consts:[["routerLinkActive","active","routerLink","/ex001-quill-text-editor"],["routerLinkActive","active","routerLink","/ex002-firebase-crud"]],template:function(t,r){1&t&&(c.TgZ(0,"a",0),c._uU(1,"Ex01 - Quill Text Editor"),c.qZA(),c._UZ(2,"br"),c.TgZ(3,"a",1),c._uU(4,"Ex02 - Firebase CRUD"),c.qZA(),c._UZ(5,"br"))},directives:[Uu,Uy],styles:[""]}),n})(),S0=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),Hl=(()=>{class n extends S0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const Go=new c.OlP("NgValueAccessor"),HC={provide:Go,useExisting:(0,c.Gpc)(()=>wd),multi:!0},iI=new c.OlP("CompositionEventMode");let wd=(()=>{class n extends S0{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function x0(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(iI,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[c._Bn([HC]),c.qOj]}),n})();const xn=new c.OlP("NgValidators"),qu=new c.OlP("NgAsyncValidators");function R0(n){return function ju(n){return null==n||0===n.length}(n.value)?{required:!0}:null}function rf(n){return null}function Jy(n){return null!=n}function Xy(n){const e=(0,c.QGY)(n)?(0,Rn.D)(n):n;return(0,c.CqO)(e),e}function of(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function zo(n,e){return e.map(t=>t(n))}function U0(n){return n.map(e=>function V0(n){return!n.validate}(e)?e:t=>e.validate(t))}function _s(n){return null!=n?function vg(n){if(!n)return null;const e=n.filter(Jy);return 0==e.length?null:function(t){return of(zo(t,e))}}(U0(n)):null}function bg(n){return null!=n?function _g(n){if(!n)return null;const e=n.filter(Jy);return 0==e.length?null:function(t){return function A0(...n){const e=(0,Sa.jO)(n),{args:t,keys:r}=Dn(n),s=new zn.y(u=>{const{length:h}=t;if(!h)return void u.complete();const m=new Array(h);let w=h,P=h;for(let Q=0;Q<h;Q++){let se=!1;(0,Fo.Xf)(t[Q]).subscribe((0,Wn.x)(u,Ie=>{se||(se=!0,P--),m[Q]=Ie},()=>w--,void 0,()=>{(!w||!se)&&(P||u.next(r?Oa(r,m):m),u.complete())}))}});return e?s.pipe(td(e)):s}(zo(t,e).map(Xy)).pipe((0,Wt.U)(of))}}(U0(n)):null}function Eg(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function oI(n){return n._rawValidators}function ev(n){return n._rawAsyncValidators}function B0(n){return n?Array.isArray(n)?n:[n]:[]}function $l(n,e){return Array.isArray(n)?n.includes(e):n===e}function sf(n,e){const t=B0(e);return B0(n).forEach(s=>{$l(t,s)||t.push(s)}),t}function wg(n,e){return B0(e).filter(t=>!$l(n,t))}class Ig{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_s(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=bg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Js extends Ig{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class zi extends Ig{get formDirective(){return null}get path(){return null}}class j0{constructor(e){this._cd=e}is(e){var t,r,s;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(s=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===s?void 0:s[e])}}let Dg=(()=>{class n extends j0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Js,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[c.qOj]}),n})(),af=(()=>{class n extends j0{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(zi,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[c.qOj]}),n})();function Wo(n,e){uf(n,e),e.valueAccessor.writeValue(n.value),function nv(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ka(n,e)})}(n,e),function z0(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function aI(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ka(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function G0(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Id(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),lf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ag(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function uf(n,e){const t=oI(n);null!==e.validator?n.setValidators(Eg(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=ev(n);null!==e.asyncValidator?n.setAsyncValidators(Eg(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();Ag(e._rawValidators,s),Ag(e._rawAsyncValidators,s)}function lf(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=oI(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(h=>h!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=ev(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(h=>h!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Ag(e._rawValidators,r),Ag(e._rawAsyncValidators,r),t}function Ka(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function zl(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Td="VALID",df="INVALID",$u="PENDING",Wl="DISABLED";function Cd(n){return(hf(n)?n.validators:n)||null}function Q0(n){return Array.isArray(n)?_s(n):n||null}function xg(n,e){return(hf(e)?e.asyncValidators:n)||null}function uI(n){return Array.isArray(n)?bg(n):n||null}function hf(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Og=n=>n instanceof Ng,Mg=n=>n instanceof kg,ov=n=>n instanceof lI;function J0(n){return Og(n)?n.value:n.getRawValue()}function X0(n,e){const t=Mg(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[e])throw new c.vHH(1001,"")}function Wi(n,e){Mg(n),n._forEachChild((r,s)=>{if(void 0===e[s])throw new c.vHH(1002,"")})}class sv{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Q0(this._rawValidators),this._composedAsyncValidatorFn=uI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Td}get invalid(){return this.status===df}get pending(){return this.status==$u}get disabled(){return this.status===Wl}get enabled(){return this.status!==Wl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Q0(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=uI(e)}addValidators(e){this.setValidators(sf(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(sf(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(wg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(wg(e,this._rawAsyncValidators))}hasValidator(e){return $l(this._rawValidators,e)}hasAsyncValidator(e){return $l(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=$u,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Wl,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Td,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Td||this.status===$u)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wl:Td}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=$u,this._hasOwnPendingAsyncValidator=!0;const t=Xy(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Y0(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(s=>{r=Mg(r)?r.controls.hasOwnProperty(s)?r.controls[s]:null:ov(r)&&r.at(s)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?Wl:this.errors?df:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($u)?$u:this._anyControlsHaveStatus(df)?df:Td}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){hf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ng extends sv{constructor(e=null,t,r){super(Cd(t),xg(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hf(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){zl(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){zl(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class kg extends sv{constructor(e,t,r){super(Cd(t),xg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Wi(this,e),Object.keys(e).forEach(r=>{X0(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=J0(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class lI extends sv{constructor(e,t,r){super(Cd(t),xg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Wi(this,e),e.forEach((r,s)=>{X0(this,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>J0(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let ff=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const sb={provide:Go,useExisting:(0,c.Gpc)(()=>Lg),multi:!0};let Lg=(()=>{class n extends Hl{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[c._Bn([sb]),c.qOj]}),n})(),ub=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const uv=new c.OlP("NgModelWithFormControlWarning"),pI={provide:zi,useExisting:(0,c.Gpc)(()=>Ad)};let Ad=(()=>{class n extends zi{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(lf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Wo(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Id(t.control||null,t,!1),zl(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Sg(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(Id(r||null,t),Og(s)&&(Wo(s,t),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function W0(n,e){uf(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function rv(n,e){return lf(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){uf(this.form,this),this._oldForm&&lf(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(xn,10),c.Y36(qu,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([pI]),c.qOj,c.TTD]}),n})();const db={provide:Js,useExisting:(0,c.Gpc)(()=>mf)};let mf=(()=>{class n extends Js{constructor(t,r,s,u,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function Hu(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===wd?t=u:function Dd(n){return Object.getPrototypeOf(n.constructor)===Hl}(u)?r=u:s=u}),s||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Gl(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function tv(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(zi,13),c.Y36(xn,10),c.Y36(qu,10),c.Y36(Go,10),c.Y36(uv,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([db]),c.qOj,c.TTD]}),n})();const mI={provide:Go,useExisting:(0,c.Gpc)(()=>yf),multi:!0};function Bg(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let yf=(()=>{class n extends Hl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const s=Bg(this._getOptionId(t),t);this.setProperty("value",s)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function iA(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([mI]),c.qOj]}),n})(),jg=(()=>{class n{constructor(t,r,s){this._element=t,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Bg(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(yf,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const hb={provide:Go,useExisting:(0,c.Gpc)(()=>bs),multi:!0};function lv(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let bs=(()=>{class n extends Hl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const s=t.map(u=>this._getOptionId(u));r=(u,h)=>{u._setSelected(s.indexOf(h.toString())>-1)}}else r=(s,u)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const s=[],u=r.selectedOptions;if(void 0!==u){const h=u;for(let m=0;m<h.length;m++){const P=this._getOptionValue(h[m].value);s.push(P)}}else{const h=r.options;for(let m=0;m<h.length;m++){const w=h[m];if(w.selected){const P=this._getOptionValue(w.value);s.push(P)}}}this.value=s,t(s)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function fb(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[c._Bn([hb]),c.qOj]}),n})(),Sd=(()=>{class n{constructor(t,r,s){this._element=t,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(lv(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(lv(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(bs,9))},n.\u0275dir=c.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Ya=(()=>{class n{constructor(){this._validator=rf}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):rf,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,features:[c.TTD]}),n})();const cv={provide:xn,useExisting:(0,c.Gpc)(()=>xd),multi:!0};let xd=(()=>{class n extends Ya{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function vI(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>R0}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[c._Bn([cv]),c.qOj]}),n})(),wb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ub]]}),n})(),wI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[wb]}),n})(),Ib=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:uv,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[wb]}),n})(),$g=(()=>{class n{group(t,r=null){const s=this._reduceControls(t);let m,u=null,h=null;return null!=r&&(function Es(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,h=null!=r.asyncValidators?r.asyncValidators:null,m=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,h=null!=r.asyncValidator?r.asyncValidator:null)),new kg(s,{asyncValidators:h,updateOn:m,validators:u})}control(t,r,s){return new Ng(t,r,s)}array(t,r,s){const u=t.map(h=>this._createControl(h));return new lI(u,r,s)}_reduceControls(t){const r={};return Object.keys(t).forEach(s=>{r[s]=this._createControl(t[s])}),r}_createControl(t){return Og(t)||Mg(t)||ov(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:Ib}),n})();const Db=[[["","quill-editor-toolbar",""]]],Tb=["[quill-editor-toolbar]"],Gg=new c.OlP("config");let Od=null,DI=(()=>{class n{constructor(t,r,s,u,h,m,w){this.elementRef=t,this.domSanitizer=r,this.doc=s,this.platformId=u,this.renderer=h,this.zone=m,this.config=w,this.format="html",this.required=!1,this.customToolbarPosition="top",this.sanitize=!1,this.style=null,this.strict=!0,this.customOptions=[],this.onEditorCreated=new c.vpe,this.onContentChanged=new c.vpe,this.onSelectionChanged=new c.vpe,this.disabled=!1,this.valueGetter=(P,Q)=>{let se=Q.children[0].innerHTML;("<p><br></p>"===se||"<div><br><div>"===se)&&(se=null);let Ie=se;if("text"===this.format)Ie=P.getText();else if("object"===this.format)Ie=P.getContents();else if("json"===this.format)try{Ie=JSON.stringify(P.getContents())}catch(Me){Ie=P.getText()}return Ie},this.valueSetter=(P,Q)=>{if("html"===this.format)return this.sanitize&&(Q=this.domSanitizer.sanitize(c.q3G.HTML,Q)),P.clipboard.convert(Q);if("json"===this.format)try{return JSON.parse(Q)}catch(se){return[{insert:Q}]}return Q},this.selectionChangeHandler=(P,Q,se)=>{this.zone.run(()=>{this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:Q,range:P,source:se}),!P&&this.onModelTouched&&this.onModelTouched()})},this.textChangeHandler=(P,Q,se)=>{const Ie=this.quillEditor.getText(),Me=this.quillEditor.getContents();let Le=this.editorElem.children[0].innerHTML;("<p><br></p>"===Le||"<div><br><div>"===Le)&&(Le=null),this.zone.run(()=>{const et=this.trackChanges||this.config.trackChanges;(se===Od.sources.USER||et&&"all"===et)&&this.onModelChange&&this.onModelChange(this.valueGetter(this.quillEditor,this.editorElem)),this.onContentChanged.emit({content:Me,delta:P,editor:this.quillEditor,html:Le,oldDelta:Q,source:se,text:Ie})})}}onModelChange(t){}onModelTouched(){}ngAfterViewInit(){if(Xo(this.platformId))return;Od||(Od=M(9971)),this.elementRef.nativeElement.insertAdjacentHTML("top"===this.customToolbarPosition?"beforeend":"afterbegin","<div quill-editor-element></div>"),this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");const t=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),r=this.modules||this.config.modules||{};let s=void 0!==this.placeholder?this.placeholder:this.config.placeholder;void 0===s&&(s="Insert text here ..."),t&&(r.toolbar=t),this.style&&Object.keys(this.style).forEach(Q=>{this.renderer.setStyle(this.editorElem,Q,this.style[Q])}),this.customOptions.forEach(Q=>{const se=Od.import(Q.import);se.whitelist=Q.whitelist,Od.register(se,!0)});let u=this.bounds&&"self"===this.bounds?this.editorElem:this.bounds;u||(u=this.config.bounds?this.config.bounds:this.doc.body);let h=this.debug;!h&&!1!==h&&this.config.debug&&(h=this.config.debug);let m=this.readOnly;!m&&!1!==this.readOnly&&(m=void 0!==this.config.readOnly&&this.config.readOnly);let w=this.scrollingContainer;!w&&null!==this.scrollingContainer&&(w=null===this.config.scrollingContainer||this.config.scrollingContainer?this.config.scrollingContainer:null);let P=this.formats;if(!P&&void 0!==P&&(P=this.config.formats||null===this.config.formats?this.config.formats:[]),this.quillEditor=new Od(this.editorElem,{bounds:u,debug:h,formats:P,modules:r,placeholder:s,readOnly:m,scrollingContainer:w,strict:this.strict,theme:this.theme||(this.config.theme?this.config.theme:"snow")}),this.content){if("object"===this.format)this.quillEditor.setContents(this.content,"silent");else if("text"===this.format)this.quillEditor.setText(this.content,"silent");else if("json"===this.format)try{this.quillEditor.setContents(JSON.parse(this.content),"silent")}catch(Q){this.quillEditor.setText(this.content,"silent")}else{this.sanitize&&(this.content=this.domSanitizer.sanitize(c.q3G.HTML,this.content));const Q=this.quillEditor.clipboard.convert(this.content);this.quillEditor.setContents(Q,"silent")}this.quillEditor.history.clear()}this.setDisabledState(),this.onEditorCreated.emit(this.quillEditor),this.quillEditor.on("selection-change",this.selectionChangeHandler),this.quillEditor.on("text-change",this.textChangeHandler)}ngOnDestroy(){this.quillEditor&&(this.quillEditor.off("selection-change",this.selectionChangeHandler),this.quillEditor.off("text-change",this.textChangeHandler))}ngOnChanges(t){if(this.quillEditor&&(t.readOnly&&this.quillEditor.enable(!t.readOnly.currentValue),t.placeholder&&(this.quillEditor.root.dataset.placeholder=t.placeholder.currentValue),t.style)){const r=t.style.currentValue,s=t.style.previousValue;s&&Object.keys(s).forEach(u=>{this.renderer.removeStyle(this.editorElem,u)}),r&&Object.keys(r).forEach(u=>{this.renderer.setStyle(this.editorElem,u,this.style[u])})}}writeValue(t){if(this.content=t,this.quillEditor){if(t)return void("text"===this.format?this.quillEditor.setText(t):this.quillEditor.setContents(this.valueSetter(this.quillEditor,this.content)));this.quillEditor.setText("")}}setDisabledState(t=this.disabled){this.disabled=t,this.quillEditor&&(t?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}validate(){if(!this.quillEditor)return null;const t={};let r=!0;const s=this.quillEditor.getText().trim().length;return this.minLength&&s&&s<this.minLength&&(t.minLengthError={given:s,minLength:this.minLength},r=!1),this.maxLength&&s>this.maxLength&&(t.maxLengthError={given:s,maxLength:this.maxLength},r=!1),this.required&&!s&&(t.requiredError={empty:!0},r=!1),r?null:t}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Hs),c.Y36(R),c.Y36(c.Lbi),c.Y36(c.Qsj),c.Y36(c.R0b),c.Y36(Gg))},n.\u0275cmp=c.Xpm({type:n,selectors:[["quill-editor"]],inputs:{format:"format",required:"required",customToolbarPosition:"customToolbarPosition",sanitize:"sanitize",style:"style",strict:"strict",customOptions:"customOptions",valueGetter:"valueGetter",valueSetter:"valueSetter",theme:"theme",modules:"modules",debug:"debug",readOnly:"readOnly",placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",formats:"formats",scrollingContainer:"scrollingContainer",bounds:"bounds",trackChanges:"trackChanges"},outputs:{onEditorCreated:"onEditorCreated",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged"},features:[c._Bn([{multi:!0,provide:Go,useExisting:(0,c.Gpc)(()=>n)},{multi:!0,provide:xn,useExisting:(0,c.Gpc)(()=>n)}]),c.TTD],ngContentSelectors:Tb,decls:1,vars:0,template:function(t,r){1&t&&(c.F$t(Db),c.Hsn(0))},encapsulation:2}),n})();const Cb={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},TI={modules:Cb};let Ab=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:Gg,useValue:t||{modules:Cb}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[{provide:Gg,useValue:TI}],imports:[[]]}),n})();function aA(n,e){if(1&n&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&n){const t=c.oxw();let r;c.xp6(1),c.hij("",1e3-(null==(r=t.editorForm.get("editor"))?null:r.value.length)," left")}}let Sb=(()=>{class n{constructor(){this.editorStyle={height:"300px"},this.editorModules={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["xsmall","small",!1,"medium","large","xlarge","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},this.config={toolbar:[["bold","italic","underline"],["code-block"],["link","image","video"]]}}ngOnInit(){this.editorForm=new kg({editor:new Ng("<p><strong>Quill Editor Demo</strong></p>")})}onSubmit(){var t,r;this.editorContent=null===(t=this.editorForm.get("editor"))||void 0===t?void 0:t.value,console.log(null===(r=this.editorForm.get("editor"))||void 0===r?void 0:r.value)}maxLength(t){console.log(t),t.editor.getLength()>1e3&&t.editor.deleteText(1e3,t.editor.getLength()),this.editorContent2=t.editor.root.innerHTML}blur(t){this.editorContent3="Test Blur: "+t.editor.root.innerHTML}selectionChanged(t){this.editorContent4="Test selectionChanged: "+t.editor.root.innerHTML}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-ex001-quill-text-editor"]],decls:26,vars:8,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["href","#",1,"navbar-brand","ml-auto","mr-auto"],[1,"container"],[1,"row","pt-5"],[1,"col-md-8"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","editor"],["placeholder","Write something you like ...","formControlName","editor",3,"onContentChanged","onBlur","onSelectionChanged"],[4,"ngIf"],[1,"btn","btn-primary","mt-3"],[1,"col-md-4","bg-light","p-4"],[1,"my-5",3,"innerHTML"]],template:function(t,r){if(1&t&&(c.TgZ(0,"nav",0)(1,"a",1),c._uU(2,"Quill JS Editor with Angular"),c.qZA()(),c.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"form",5),c.NdJ("ngSubmit",function(){return r.onSubmit()}),c.TgZ(7,"div",6)(8,"label",7)(9,"h3"),c._uU(10,"Editor"),c.qZA()(),c.TgZ(11,"quill-editor",8),c.NdJ("onContentChanged",function(u){return r.maxLength(u)})("onBlur",function(u){return r.blur(u)})("onSelectionChanged",function(u){return r.selectionChanged(u)}),c.qZA(),c.YNc(12,aA,2,1,"span",9),c._UZ(13,"br"),c.TgZ(14,"span"),c._uU(15),c.qZA(),c.TgZ(16,"span"),c._uU(17),c.qZA(),c.TgZ(18,"span"),c._uU(19),c.qZA()(),c.TgZ(20,"button",10),c._uU(21,"Submit"),c.qZA()()(),c.TgZ(22,"div",11)(23,"h3"),c._uU(24,"Output"),c.qZA(),c._UZ(25,"div",12),c.qZA()()()),2&t){let s;c.xp6(6),c.Q6J("formGroup",r.editorForm),c.xp6(5),c.Akn(r.editorStyle),c.xp6(1),c.Q6J("ngIf",null!=(null==(s=r.editorForm.get("editor"))?null:s.value)),c.xp6(3),c.Oqu(r.editorContent2),c.xp6(2),c.Oqu(r.editorContent3),c.xp6(2),c.Oqu(r.editorContent4),c.xp6(6),c.Q6J("innerHTML",r.editorContent,c.oJD)}},directives:[ff,af,Ad,DI,Dg,mf,hr],styles:[""]}),n})();var CI=M(4986),Kr=M(5813);function xb(){return(0,lr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Wn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function hv(n,e){return n===e}var pt,ws=M(2011),Ob=(M(1451),M(3942)),Ge=M(5861),Yr=M(9681),fv=M(4859),Kl=M(1877),nn=M(2090),Mb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ea={},Nb=Nb||{},qt=Mb||self;function Md(){}function pv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Yl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var gv="closure_uid_"+(1e9*Math.random()>>>0),xI=0;function OI(n,e,t){return n.call.apply(n.bind,arguments)}function MI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Qr(n,e,t){return(Qr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?OI:MI).apply(null,arguments)}function Ql(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function tr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,s,u){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return e.prototype[s].apply(r,h)}}function Gu(){this.s=this.s,this.o=this.o}var NI={};Gu.prototype.s=!1,Gu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function SI(n){return Object.prototype.hasOwnProperty.call(n,gv)&&n[gv]||(n[gv]=++xI)}(this);delete NI[n]}},Gu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const kb=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},zg=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,s="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in s&&e.call(t,s[u],u,n)};function Nd(n){return Array.prototype.concat.apply([],arguments)}function Lr(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function na(n){return/^[\s\xa0]*$/.test(n)}var mr,Ef=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Nn(n,e){return-1!=n.indexOf(e)}function wf(n,e){return n<e?-1:n>e?1:0}e:{var Jl=qt.navigator;if(Jl){var Xl=Jl.userAgent;if(Xl){mr=Xl;break e}}mr=""}function zu(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function ec(n){const e={};for(const t in n)e[t]=n[t];return e}var tc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nc(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<tc.length;u++)t=tc[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Wu(n){return Wu[" "](n),n}Wu[" "]=Md;var If,n,Rb=Nn(mr,"Opera"),rc=Nn(mr,"Trident")||Nn(mr,"MSIE"),mv=Nn(mr,"Edge"),Wg=mv||rc,yv=Nn(mr,"Gecko")&&!(Nn(mr.toLowerCase(),"webkit")&&!Nn(mr,"Edge"))&&!(Nn(mr,"Trident")||Nn(mr,"MSIE"))&&!Nn(mr,"Edge"),Pb=Nn(mr.toLowerCase(),"webkit")&&!Nn(mr,"Edge");function vv(){var n=qt.document;return n?n.documentMode:void 0}e:{var Zg="",_v=(n=mr,yv?/rv:([^\);]+)(\)|;)/.exec(n):mv?/Edge\/([\d\.]+)/.exec(n):rc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Pb?/WebKit\/(\S+)/.exec(n):Rb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(_v&&(Zg=_v?_v[1]:""),rc){var Kg=vv();if(null!=Kg&&Kg>parseFloat(Zg)){If=String(Kg);break e}}If=Zg}var kI={};var PI=qt.document&&rc&&(vv()||parseInt(If,10))||void 0,Fb=function(){if(!qt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{qt.addEventListener("test",Md,e),qt.removeEventListener("test",Md,e)}catch(t){}return n}();function gi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Rd(n,e){if(gi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(yv){e:{try{Wu(e.nodeName);var s=!0;break e}catch(u){}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:LI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Rd.Z.h.call(this)}}gi.prototype.h=function(){this.defaultPrevented=!0},tr(Rd,gi);var LI={2:"touch",3:"pen",4:"mouse"};Rd.prototype.h=function(){Rd.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Df="closure_listenable_"+(1e6*Math.random()|0),lA=0;function FI(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=s,this.key=++lA,this.ca=this.fa=!1}function Pd(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Ld(n){this.src=n,this.g={},this.h=0}function bv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=kb(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Pd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Vb(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return s}return-1}Ld.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var h=Vb(n,e,r,s);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new FI(e,this.src,u,!!r,s)).fa=t,n.push(e)),e};var Ub="closure_lm_"+(1e6*Math.random()|0),Bb={};function jb(n,e,t,r,s){if(r&&r.once)return qb(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)jb(n,e[u],t,r,s);return null}return t=Dv(t),n&&n[Df]?n.N(e,t,Yl(r)?!!r.capture:!!r,s):Ev(n,e,t,!1,r,s)}function Ev(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var h=Yl(s)?!!s.capture:!!s,m=Qg(n);if(m||(n[Ub]=m=new Ld(n)),(t=m.add(e,t,r,h,u)).proxy)return t;if(r=function cA(){var e=VI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Fb||(s=h),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(Iv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function qb(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)qb(n,e[u],t,r,s);return null}return t=Dv(t),n&&n[Df]?n.O(e,t,Yl(r)?!!r.capture:!!r,s):Ev(n,e,t,!0,r,s)}function ic(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)ic(n,e[u],t,r,s);else r=Yl(r)?!!r.capture:!!r,t=Dv(t),n&&n[Df]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Vb(u=n.g[e],t,r,s))&&(Pd(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Qg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Vb(e,t,r,s)),(t=-1<n?e[n]:null)&&wv(t))}function wv(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Df])bv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Iv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Qg(e))?(bv(t,n),0==t.h&&(t.src=null,e[Ub]=null)):Pd(n)}}}function Iv(n){return n in Bb?Bb[n]:Bb[n]="on"+n}function VI(n,e){if(n.ca)n=!0;else{e=new Rd(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&wv(n),n=t.call(r,e)}return n}function Qg(n){return(n=n[Ub])instanceof Ld?n:null}var Fd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dv(n){return"function"==typeof n?n:(n[Fd]||(n[Fd]=function(e){return n.handleEvent(e)}),n[Fd])}function xr(){Gu.call(this),this.i=new Ld(this),this.P=this,this.I=null}function Jr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new gi(e,n);else if(e instanceof gi)e.target=e.target||n;else{var s=e;nc(e=new gi(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var h=e.g=t[u];s=Jg(h,r,!0,e)&&s}if(s=Jg(h=e.g=n,r,!0,e)&&s,s=Jg(h,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=Jg(h=e.g=t[u],r,!1,e)&&s}function Jg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var h=e[u];if(h&&!h.ca&&h.capture==t){var m=h.listener,w=h.ia||h.src;h.fa&&bv(n.i,h),s=!1!==m.call(w,r)&&s}}return s&&!r.defaultPrevented}tr(xr,Gu),xr.prototype[Df]=!0,xr.prototype.removeEventListener=function(n,e,t,r){ic(this,n,e,t,r)},xr.prototype.M=function(){if(xr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Pd(t[r]);delete n.g[e],n.h--}}this.I=null},xr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},xr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Tv=qt.JSON.stringify;function UI(){var n=$b;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Tf,Cv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new jI,n=>n.reset());class jI{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Hb(n){qt.setTimeout(()=>{throw n},0)}function Xg(n,e){Tf||function dA(){var n=qt.Promise.resolve(void 0);Tf=function(){n.then(hA)}}(),Cf||(Tf(),Cf=!0),$b.add(n,e)}var Cf=!1,$b=new class BI{constructor(){this.h=this.g=null}add(e,t){const r=Cv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function hA(){for(var n;n=UI();){try{n.h.call(n.g)}catch(t){Hb(t)}var e=Cv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Cf=!1}function Zu(n,e){xr.call(this),this.h=n||1,this.g=e||qt,this.j=Qr(this.kb,this),this.l=Date.now()}function em(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Af(n,e,t){if("function"==typeof n)t&&(n=Qr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Qr(n.handleEvent,n)}return 2147483647<Number(e)?-1:qt.setTimeout(n,e||0)}function tm(n){n.g=Af(()=>{n.g=null,n.i&&(n.i=!1,tm(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}tr(Zu,xr),(pt=Zu.prototype).da=!1,pt.S=null,pt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Jr(this,"tick"),this.da&&(em(this),this.start()))}},pt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pt.M=function(){Zu.Z.M.call(this),em(this),delete this.g};class qI extends Gu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:tm(this)}M(){super.M(),this.g&&(qt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ku(n){Gu.call(this),this.h=n,this.g={}}tr(Ku,Gu);var Sf=[];function nm(n,e,t,r){Array.isArray(t)||(t&&(Sf[0]=t.toString()),t=Sf);for(var s=0;s<t.length;s++){var u=jb(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function HI(n){zu(n.g,function(e,t){this.g.hasOwnProperty(t)&&wv(e)},n),n.g={}}function rm(){this.g=!0}function oc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function xv(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var h=1;h<s.length;h++)s[h]=""}}}return Tv(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Ku.prototype.M=function(){Ku.Z.M.call(this),HI(this)},Ku.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rm.prototype.Aa=function(){this.g=!1},rm.prototype.info=function(){};var Yu={},Ov=null;function Vd(){return Ov=Ov||new xr}function Mv(n){gi.call(this,Yu.Ma,n)}function xf(n){const e=Vd();Jr(e,new Mv(e,n))}function Nv(n,e){gi.call(this,Yu.STAT_EVENT,n),this.stat=e}function mi(n){const e=Vd();Jr(e,new Nv(e,n))}function im(n,e){gi.call(this,Yu.Na,n),this.size=e}function Ud(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return qt.setTimeout(function(){n()},e)}Yu.Ma="serverreachability",tr(Mv,gi),Yu.STAT_EVENT="statevent",tr(Nv,gi),Yu.Na="timingevent",tr(im,gi);var om={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},kv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function sm(){}function Of(){}sm.prototype.h=null;var lm,Bd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function am(){gi.call(this,"d")}function um(){gi.call(this,"c")}function Mf(){}function jd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Ku(this),this.P=zb,this.W=new Zu(n=Wg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Pv}function Pv(){this.i=null,this.g="",this.h=!1}tr(am,gi),tr(um,gi),tr(Mf,sm),Mf.prototype.g=function(){return new XMLHttpRequest},Mf.prototype.i=function(){return{}},lm=new Mf;var zb=45e3,Wb={},cm={};function Lv(n,e,t){n.K=1,n.v=Ki(Is(e)),n.s=t,n.U=!0,Fv(n,null)}function Fv(n,e){n.F=Date.now(),Nf(n),n.A=Is(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),tE(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Pv,n.g=Zn(n.l,t?e:null,!n.s),0<n.O&&(n.L=new qI(Qr(n.Ia,n,n.g),n.O)),nm(n.V,n.g,"readystatechange",n.gb),e=n.H?ec(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),xf(1),function Av(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var h="",m=u.split("&"),w=0;w<m.length;w++){var P=m[w].split("=");if(1<P.length){var Q=P[0];P=P[1];var se=Q.split("_");h=2<=se.length&&"type"==se[1]?h+(Q+"=")+P+"&":h+(Q+"=redacted&")}}else h=null;else h=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Zb(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function yr(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=Kb(n,t),s==cm){4==e&&(n.o=4,mi(14),r=!1),oc(n.j,n.m,null,"[Incomplete Response]");break}if(s==Wb){n.o=4,mi(15),oc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}oc(n.j,n.m,s,null),dm(n,s)}Zb(n)&&s!=cm&&s!=Wb&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,mi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),kt(e),e.L=!0,mi(11))):(oc(n.j,n.m,t,"[Invalid Chunked Response]"),Qu(n),Rf(n))}function Kb(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?cm:(t=Number(e.substring(t,r)),isNaN(t)?Wb:(r+=1)+t>e.length?cm:(e=e.substr(r,t),n.C=r+t,e))}function Nf(n){n.Y=Date.now()+n.P,Yb(n,n.P)}function Yb(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ud(Qr(n.eb,n),e)}function kf(n){n.B&&(qt.clearTimeout(n.B),n.B=null)}function Rf(n){0==n.l.G||n.I||dE(n.l,n)}function Qu(n){kf(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,em(n.W),HI(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function dm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||gm(t.i,n)))if(t.I=n.N,!n.J&&gm(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(P){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0])e:if(t.u)t.ta=s[1],0<t.ta-t.U&&37500>s[2]&&t.N&&0==t.A&&!t.v&&(t.v=Ud(Qr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Dm(t),ia(t)}lE(t),mi(18)}if(1>=$v(t.i)&&t.ka){try{t.ka()}catch(P){}t.ka=void 0}}else uc(t,11)}else if((n.J||t.g==n)&&Dm(t),!na(e))for(s=t.Ca.g.parse(e),e=0;e<s.length;e++){let P=s[e];if(t.U=P[0],P=P[1],2==t.G)if("c"==P[0]){t.J=P[1],t.la=P[2];const Q=P[3];null!=Q&&(t.ma=Q,t.h.info("VER="+t.ma));const se=P[4];null!=se&&(t.za=se,t.h.info("SVER="+t.za));const Ie=P[5];null!=Ie&&"number"==typeof Ie&&0<Ie&&(t.K=r=1.5*Ie,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Me=n.g;if(Me){const Le=Me.g?Me.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Le){var u=r.i;!u.g&&(Nn(Le,"spdy")||Nn(Le,"quic")||Nn(Le,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(mm(u,u.h),u.h=null))}if(r.D){const et=Me.g?Me.g.getResponseHeader("X-HTTP-Session-Id"):null;et&&(r.sa=et,cn(r.F,r.D,et))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=Wf(r,r.H?r.la:null,r.W),h.J){Gv(r.i,h);var m=h,w=r.K;w&&m.setTimeout(w),m.B&&(kf(m),Nf(m)),r.g=h}else t_(r);0<t.l.length&&Ja(t)}else"stop"!=P[0]&&"close"!=P[0]||uc(t,7);else 3==t.G&&("stop"==P[0]||"close"==P[0]?"stop"==P[0]?uc(t,7):Em(t):"noop"!=P[0]&&t.j&&t.j.wa(P),t.A=0)}xf(4)}catch(P){}}function Vv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(pv(n)||"string"==typeof n)zg(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(pv(n)||"string"==typeof n){t=[];for(var r=n.length,s=0;s<r;s++)t.push(s)}else for(s in t=[],r=0,n)t[r++]=s;r=function qd(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(pv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length;for(var u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}}function Hd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Hd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function hm(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];sc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var s={};for(t=e=0;e<n.g.length;)sc(s,r=n.g[e])||(n.g[t++]=r,s[r]=1),e++;n.g.length=t}}function sc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(pt=jd.prototype).setTimeout=function(n){this.P=n},pt.gb=function(n){n=n.target;const e=this.L;e&&3==ra(n)?e.l():this.Ia(n)},pt.Ia=function(n){try{if(n==this.g)e:{const Q=ra(this.g);var e=this.g.Da();const se=this.g.ba();if(!(3>Q)&&(3!=Q||Wg||this.g&&(this.h.h||this.g.ga()||Qv(this.g)))){this.I||4!=Q||7==e||xf(8==e||0>=se?3:2),kf(this);var t=this.g.ba();this.N=t;t:if(Zb(this)){var r=Qv(this.g);n="";var s=r.length,u=4==ra(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Qu(this),Rf(this);var h="";break t}this.h.i=new qt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function Sv(n,e,t,r,s,u,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+h})}(this.j,this.u,this.A,this.m,this.X,Q,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!na(m)){var P=m;break t}}P=null}if(!(t=P)){this.i=!1,this.o=3,mi(12),Qu(this),Rf(this);break e}oc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,dm(this,t)}this.U?(yr(this,Q,h),Wg&&this.i&&3==Q&&(nm(this.V,this.W,"tick",this.fb),this.W.start())):(oc(this.j,this.m,h,null),dm(this,h)),4==Q&&Qu(this),this.i&&!this.I&&(4==Q?dE(this.l,this):(this.i=!1,Nf(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,mi(12)):(this.o=0,mi(13)),Qu(this),Rf(this)}}}catch(Q){}},pt.fb=function(){if(this.g){var n=ra(this.g),e=this.g.ga();this.C<e.length&&(kf(this),yr(this,n,e),this.i&&4!=n&&Nf(this))}},pt.cancel=function(){this.I=!0,Qu(this)},pt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Gb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(xf(3),mi(17)),Qu(this),this.o=2,Rf(this)):Yb(this,this.Y-n)},(pt=Hd.prototype).R=function(){hm(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},pt.T=function(){return hm(this),this.g.concat()},pt.get=function(n,e){return sc(this.h,n)?this.h[n]:e},pt.set=function(n,e){sc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},pt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var s=t[r],u=this.get(s);n.call(e,u,s,this)}};var Uv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ju(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Ju){this.g=void 0!==e?e:n.g,Zi(this,n.j),this.s=n.s,fm(this,n.i),pm(this,n.m),this.l=n.l,e=n.h;var t=new Vf;t.i=e.i,e.g&&(t.g=new Hd(e.g),t.h=e.h),Ds(this,t),this.o=n.o}else n&&(t=String(n).match(Uv))?(this.g=!!e,Zi(this,t[1]||"",!0),this.s=Pf(t[2]||""),fm(this,t[3]||"",!0),pm(this,t[4]),this.l=Pf(t[5]||"",!0),Ds(this,t[6]||"",!0),this.o=Pf(t[7]||"")):(this.g=!!e,this.h=new Vf(null,this.g))}function Is(n){return new Ju(n)}function Zi(n,e,t){n.j=t?Pf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function fm(n,e,t){n.i=t?Pf(e,!0):e}function pm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Ds(n,e,t){e instanceof Vf?(n.h=e,function nE(n,e){e&&!n.j&&(Qa(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(jv(this,r),tE(this,s,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Lf(e,GI)),n.h=new Vf(e,n.g))}function cn(n,e,t){n.h.set(e,t)}function Ki(n){return cn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Pf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Lf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,$I),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function $I(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ju.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Lf(e,Xb,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Lf(e,Xb,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Lf(t,"/"==t.charAt(0)?Ff:Bv,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Lf(t,eE)),n.join("")};var Xb=/[#\/\?@]/g,Bv=/[#\?:]/g,Ff=/[#\?]/g,GI=/[#\?@]/g,eE=/#/g;function Vf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Qa(n){n.g||(n.g=new Hd,n.h=0,n.i&&function fA(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function jv(n,e){Qa(n),e=ac(n,e),sc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,sc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&hm(n)))}function Uf(n,e){return Qa(n),e=ac(n,e),sc(n.g.h,e)}function tE(n,e,t){jv(n,e),0<t.length&&(n.i=null,n.g.set(ac(n,e),Lr(t)),n.h+=t.length)}function ac(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Bf(n){this.l=n||rE,n=qt.PerformanceNavigationTiming?0<(n=qt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(qt.g&&qt.g.Ea&&qt.g.Ea()&&qt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(pt=Vf.prototype).add=function(n,e){Qa(this),this.i=null,n=ac(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},pt.forEach=function(n,e){Qa(this),this.g.forEach(function(t,r){zg(t,function(s){n.call(e,s,r,this)},this)},this)},pt.T=function(){Qa(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var s=n[r],u=0;u<s.length;u++)t.push(e[r]);return t},pt.R=function(n){Qa(this);var e=[];if("string"==typeof n)Uf(this,n)&&(e=Nd(e,this.g.get(ac(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Nd(e,n[t])}return e},pt.set=function(n,e){return Qa(this),this.i=null,Uf(this,n=ac(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},pt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},pt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],s=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var h=s;""!==r[u]&&(h+="="+encodeURIComponent(String(r[u]))),n.push(h)}}return this.i=n.join("&")};var rE=10;function Hv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function $v(n){return n.h?1:n.g?n.g.size:0}function gm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function mm(n,e){n.g?n.g.add(e):n.h=e}function Gv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function zv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Lr(n.i)}function ym(){}function zI(){this.g=new ym}function WI(n,e,t){const r=t||"";try{Vv(n,function(s,u){let h=s;Yl(s)&&(h=Tv(s)),e.push(r+u+"="+encodeURIComponent(h))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function vm(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch(u){}}function jf(n){this.l=n.$b||null,this.j=n.ib||!1}function _m(n,e){xr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Wv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Bf.prototype.cancel=function(){if(this.i=zv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ym.prototype.stringify=function(n){return qt.JSON.stringify(n,void 0)},ym.prototype.parse=function(n){return qt.JSON.parse(n,void 0)},tr(jf,sm),jf.prototype.g=function(){return new _m(this.l,this.j)},jf.prototype.i=function(n){return function(){return n}}({}),tr(_m,xr);var Wv=0;function iE(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function qf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Hf(n)}function Hf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(pt=_m.prototype).open=function(n,e){if(this.readyState!=Wv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Hf(this)},pt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||qt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},pt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qf(this)),this.readyState=Wv},pt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Hf(this)),this.g&&(this.readyState=3,Hf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==qt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;iE(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},pt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?qf(this):Hf(this),3==this.readyState&&iE(this)}},pt.Ua=function(n){this.g&&(this.response=this.responseText=n,qf(this))},pt.Ta=function(n){this.g&&(this.response=n,qf(this))},pt.ha=function(){this.g&&qf(this)},pt.setRequestHeader=function(n,e){this.v.append(n,e)},pt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},pt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(_m.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var KI=qt.JSON.parse;function vr(n){xr.call(this),this.headers=new Hd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=oE,this.K=this.L=!1}tr(vr,xr);var oE="",YI=/^https?$/i,QI=["POST","PUT"];function XI(n){return"content-type"==n.toLowerCase()}function sE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Zv(n),$f(n)}function Zv(n){n.D||(n.D=!0,Jr(n,"complete"),Jr(n,"error"))}function Kv(n){if(n.h&&void 0!==Nb&&(!n.C[1]||4!=ra(n)||2!=n.ba()))if(n.v&&4==ra(n))Af(n.Fa,0,n);else if(Jr(n,"readystatechange"),4==ra(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.H).match(Uv)[1]||null;if(!s&&qt.self&&qt.self.location){var u=qt.self.location.protocol;s=u.substr(0,u.length-1)}r=!YI.test(s?s.toLowerCase():"")}t=r}if(t)Jr(n,"complete"),Jr(n,"success");else{n.m=6;try{var h=2<ra(n)?n.g.statusText:""}catch(w){h=""}n.j=h+" ["+n.ba()+"]",Zv(n)}}finally{$f(n)}}}function $f(n,e){if(n.g){Yv(n);const t=n.g,r=n.C[0]?Md:null;n.g=null,n.C=null,e||Jr(n,"ready");try{t.onreadystatechange=r}catch(s){}}}function Yv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(qt.clearTimeout(n.A),n.A=null)}function ra(n){return n.g?n.g.readyState:0}function Qv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case oE:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function bm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function aE(n){let e="";return zu(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):cn(n,e,t))}function $d(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Jv(n){this.za=0,this.l=[],this.h=new rm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=$d("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=$d("baseRetryDelayMs",5e3,n),this.$a=$d("retryDelaySeedMs",1e4,n),this.Ya=$d("forwardChannelMaxRetries",2,n),this.ra=$d("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Bf(n&&n.concurrentRequestLimit),this.Ca=new zI,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Em(n){if(uE(n),3==n.G){var e=n.V++,t=Is(n.F);cn(t,"SID",n.J),cn(t,"RID",e),cn(t,"TYPE","terminate"),Im(n,t),(e=new jd(n,n.h,e,void 0)).K=2,e.v=Ki(Is(t)),t=!1,qt.navigator&&qt.navigator.sendBeacon&&(t=qt.navigator.sendBeacon(e.v.toString(),"")),!t&&qt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Zn(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Nf(e)}zf(n)}function ia(n){n.g&&(kt(n),n.g.cancel(),n.g=null)}function uE(n){ia(n),n.u&&(qt.clearTimeout(n.u),n.u=null),Dm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&qt.clearTimeout(n.m),n.m=null)}function Xv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Ja(n)}function Ja(n){Hv(n.i)||n.m||(n.m=!0,Xg(n.Ha,n),n.C=0)}function wm(n,e){var t;t=e?e.m:n.V++;const r=Is(n.F);cn(r,"SID",n.J),cn(r,"RID",t),cn(r,"AID",n.U),Im(n,r),n.o&&n.s&&bm(r,n.o,n.s),t=new jd(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=e_(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),mm(n.i,t),Lv(t,r,e)}function Im(n,e){n.j&&Vv({},function(t,r){cn(e,r,t)})}function e_(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Qr(n.j.Oa,n.j,n):null;e:{var s=n.l;let u=-1;for(;;){const h=["count="+t];-1==u?0<t?(u=s[0].h,h.push("ofs="+u)):u=0:h.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let P=s[w].h;const Q=s[w].g;if(P-=u,0>P)u=Math.max(0,s[w].h-100),m=!1;else try{WI(Q,h,"req"+P+"_")}catch(se){r&&r(Q)}}if(m){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function t_(n){n.g||n.u||(n.Y=1,Xg(n.Ga,n),n.A=0)}function lE(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Ud(Qr(n.Ga,n),Gf(n,n.A)),n.A++,0))}function kt(n){null!=n.B&&(qt.clearTimeout(n.B),n.B=null)}function cE(n){n.g=new jd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Is(n.oa);cn(e,"RID","rpc"),cn(e,"SID",n.J),cn(e,"CI",n.N?"0":"1"),cn(e,"AID",n.U),Im(n,e),cn(e,"TYPE","xmlhttp"),n.o&&n.s&&bm(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Ki(Is(e)),t.s=null,t.U=!0,Fv(t,n)}function Dm(n){null!=n.v&&(qt.clearTimeout(n.v),n.v=null)}function dE(n,e){var t=null;if(n.g==e){Dm(n),kt(n),n.g=null;var r=2}else{if(!gm(n.i,e))return;t=e.D,Gv(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;Jr(r=Vd(),new im(r,t,e,s)),Ja(n)}else t_(n);else if(3==(s=e.o)||0==s&&0<n.I||!(1==r&&function pA(n,e){return!($v(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Ud(Qr(n.Ha,n,e),Gf(n,n.C)),n.C++,0)))}(n,e)||2==r&&lE(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:uc(n,5);break;case 4:uc(n,10);break;case 3:uc(n,6);break;default:uc(n,2)}}function Gf(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function uc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Qr(n.jb,n);t||(t=new Ju("//www.google.com/images/cleardot.gif"),qt.location&&"http"==qt.location.protocol||Zi(t,"https"),Ki(t)),function ZI(n,e){const t=new rm;if(qt.Image){const r=new Image;r.onload=Ql(vm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ql(vm,t,r,"TestLoadImage: error",!1,e),r.onabort=Ql(vm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ql(vm,t,r,"TestLoadImage: timeout",!1,e),qt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else mi(2);n.G=0,n.j&&n.j.va(e),zf(n),uE(n)}function zf(n){n.G=0,n.I=-1,n.j&&((0!=zv(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Lr(n.l),n.l.length=0),n.j.ua())}function Wf(n,e,t){let r=function Qb(n){return n instanceof Ju?Is(n):new Ju(n,void 0)}(t);if(""!=r.i)e&&fm(r,e+"."+r.i),pm(r,r.m);else{const s=qt.location;r=function Jb(n,e,t,r){var s=new Ju(null,void 0);return n&&Zi(s,n),e&&fm(s,e),t&&pm(s,t),r&&(s.l=r),s}(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,t)}return n.aa&&zu(n.aa,function(s,u){cn(r,u,s)}),t=n.sa,(e=n.D)&&t&&cn(r,e,t),cn(r,"VER",n.ma),Im(n,r),r}function Zn(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vr(t&&n.Ba&&!n.qa?new jf({ib:!0}):n.qa)).L=n.H,e}function eD(){}function Zf(){if(rc&&!(10<=Number(PI)))throw Error("Environmental error: no available transport.")}function yo(n,e){xr.call(this),this.g=new Jv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!na(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!na(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new lc(this)}function hE(n){am.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function n_(){um.call(this),this.status=1}function lc(n){this.g=n}(pt=vr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():lm.g(),this.C=function Rv(n){return n.h||(n.h=n.i())}(this.u?this.u:lm),this.g.onreadystatechange=Qr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void sE(this,u)}n=t||"";const s=new Hd(this.headers);r&&Vv(r,function(u,h){s.set(h,u)}),r=function ta(n){e:{var e=XI;const t=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<t;s++)if(s in r&&e.call(void 0,r[s],s,n)){e=s;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(s.T()),t=qt.FormData&&n instanceof qt.FormData,!(0<=kb(QI,e))||r||t||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(u,h){this.g.setRequestHeader(h,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Yv(this),0<this.B&&((this.K=function JI(n){return rc&&function RI(){return function kd(n){var e=kI;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Ef(String(If)).split("."),t=Ef("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var s=e[h]||"",u=t[h]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=wf(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||wf(0==s[2].length,0==u[2].length)||wf(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qr(this.pa,this)):this.A=Af(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){sE(this,u)}},pt.pa=function(){void 0!==Nb&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Jr(this,"timeout"),this.abort(8))},pt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Jr(this,"complete"),Jr(this,"abort"),$f(this))},pt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$f(this,!0)),vr.Z.M.call(this)},pt.Fa=function(){this.s||(this.F||this.v||this.l?Kv(this):this.cb())},pt.cb=function(){Kv(this)},pt.ba=function(){try{return 2<ra(this)?this.g.status:-1}catch(n){return-1}},pt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},pt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),KI(e)}},pt.Da=function(){return this.m},pt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(pt=Jv.prototype).ma=8,pt.G=1,pt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},pt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const s=new jd(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=ec(u),nc(u,this.P)):u=this.P),null===this.o&&(s.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=e_(this,s,e),cn(t=Is(this.F),"RID",n),cn(t,"CVER",22),this.D&&cn(t,"X-HTTP-Session-Id",this.D),Im(this,t),this.o&&u&&bm(t,this.o,u),mm(this.i,s),this.Ra&&cn(t,"TYPE","init"),this.ja?(cn(t,"$req",e),cn(t,"SID","null"),s.$=!0,Lv(s,t,null)):Lv(s,t,e),this.G=2}}else 3==this.G&&(n?wm(this,n):0==this.l.length||Hv(this.i)||wm(this))},pt.Ga=function(){if(this.u=null,cE(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Ud(Qr(this.bb,this),n)}},pt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,mi(10),ia(this),cE(this))},pt.ab=function(){null!=this.v&&(this.v=null,ia(this),lE(this),mi(19))},pt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),mi(2)):(this.h.info("Failed to ping google.com"),mi(1))},(pt=eD.prototype).xa=function(){},pt.wa=function(){},pt.va=function(){},pt.ua=function(){},pt.Oa=function(){},Zf.prototype.g=function(n,e){return new yo(n,e)},tr(yo,xr),yo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Xg(Qr(n.hb,n,e))),mi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Wf(n,null,n.W),Ja(n)},yo.prototype.close=function(){Em(this.g)},yo.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Xv(this.g,e)}else this.v?((e={}).__data__=Tv(n),Xv(this.g,e)):Xv(this.g,n)},yo.prototype.M=function(){this.g.j=null,delete this.j,Em(this.g),delete this.g,yo.Z.M.call(this)},tr(hE,am),tr(n_,um),tr(lc,eD),lc.prototype.xa=function(){Jr(this.g,"a")},lc.prototype.wa=function(n){Jr(this.g,new hE(n))},lc.prototype.va=function(n){Jr(this.g,new n_(n))},lc.prototype.ua=function(){Jr(this.g,"b")},Zf.prototype.createWebChannel=Zf.prototype.g,yo.prototype.send=yo.prototype.u,yo.prototype.open=yo.prototype.m,yo.prototype.close=yo.prototype.close,om.NO_ERROR=0,om.TIMEOUT=8,om.HTTP_ERROR=6,kv.COMPLETE="complete",Of.EventType=Bd,Bd.OPEN="a",Bd.CLOSE="b",Bd.ERROR="c",Bd.MESSAGE="d",xr.prototype.listen=xr.prototype.N,vr.prototype.listenOnce=vr.prototype.O,vr.prototype.getLastError=vr.prototype.La,vr.prototype.getLastErrorCode=vr.prototype.Da,vr.prototype.getStatus=vr.prototype.ba,vr.prototype.getResponseJson=vr.prototype.Qa,vr.prototype.getResponseText=vr.prototype.ga,vr.prototype.send=vr.prototype.ea;var fE=ea.createWebChannelTransport=function(){return new Zf},pE=ea.getStatEventTarget=function(){return Vd()},r_=ea.ErrorCode=om,tD=ea.EventType=kv,nD=ea.Event=Yu,Gd=ea.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},rD=ea.FetchXmlHttpFactory=jf,Tm=ea.WebChannel=Of,iD=ea.XhrIo=vr;const Kf="@firebase/firestore";class Or{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Or.UNAUTHENTICATED=new Or(null),Or.GOOGLE_CREDENTIALS=new Or("google-credentials-uid"),Or.FIRST_PARTY=new Or("first-party-uid"),Or.MOCK_USER=new Or("mock-user");let cc="9.9.2";const Xa=new Kl.Yd("@firebase/firestore");function i_(){return Xa.logLevel}function Xe(n,...e){if(Xa.logLevel<=Kl.in.DEBUG){const t=e.map(o_);Xa.debug(`Firestore (${cc}): ${n}`,...t)}}function cr(n,...e){if(Xa.logLevel<=Kl.in.ERROR){const t=e.map(o_);Xa.error(`Firestore (${cc}): ${n}`,...t)}}function dc(n,...e){if(Xa.logLevel<=Kl.in.WARN){const t=e.map(o_);Xa.warn(`Firestore (${cc}): ${n}`,...t)}}function o_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function gt(n="Unexpected state"){const e=`FIRESTORE (${cc}) INTERNAL ASSERTION FAILED: `+n;throw cr(e),new Error(e)}function Ut(n,e){n||gt()}function ct(n,e){return n}const Ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Je extends nn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class oD{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Or.UNAUTHENTICATED))}shutdown(){}}class mA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yA{constructor(e){this.t=e,this.currentUser=Or.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=P=>this.i!==s?(s=this.i,t(P)):Promise.resolve();let h=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Fr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const P=h;e.enqueueRetryable((0,Ge.Z)(function*(){yield P.promise,yield u(r.currentUser)}))},w=P=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=P,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(P=>w(P)),setTimeout(()=>{if(!this.auth){const P=this.t.getImmediate({optional:!0});P?w(P):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Fr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ut("string"==typeof r.accessToken),new oD(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ut(null===e||"string"==typeof e),new Or(e)}}class mE{constructor(e,t,r){this.type="FirstParty",this.user=Or.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class Cm{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new mE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Or.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sD{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.p;return this.p=u.token,Xe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?s(u):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ut("string"==typeof t.token),this.p=t.token,new yE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Qf(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class vE{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Qf(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function zd(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function _E(n){return n+"\0"}class Hn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Je(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Je(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Je(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Je(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hn.fromMillis(Date.now())}static fromDate(e){return Hn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Hn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Vt(e)}static min(){return new Vt(new Hn(0,0))}static max(){return new Vt(new Hn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Jf{constructor(e,t,r){void 0===t?t=0:t>e.length&&gt(),void 0===r?r=e.length-t:r>e.length-t&&gt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Jf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),h=t.get(s);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dn extends Jf{construct(e,t,r){return new dn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Je(Ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new dn(t)}static emptyPath(){return new dn([])}}const Wd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nr extends Jf{construct(e,t,r){return new nr(e,t,r)}static isValidIdentifier(e){return Wd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new nr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Je(Ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new Je(Ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Je(Ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===m?(h=!h,s++):"."!==m||h?(r+=m,s++):(u(),s++)}if(u(),h)throw new Je(Ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nr(t)}static emptyPath(){return new nr([])}}class at{constructor(e){this.path=e}static fromPath(e){return new at(dn.fromString(e))}static fromName(e){return new at(dn.fromString(e).popFirst(5))}static empty(){return new at(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new at(new dn(e.slice()))}}class Am{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Sm(n){return n.fields.find(e=>2===e.kind)}function hc(n){return n.fields.filter(e=>2!==e.kind)}Am.UNKNOWN_ID=-1;class xm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Xf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Xf(0,vo.min())}}function a_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Vt.fromTimestamp(1e9===r?new Hn(t+1,0):new Hn(t,r));return new vo(s,at.empty(),e)}function u_(n){return new vo(n.readTime,n.key,-1)}class vo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new vo(Vt.min(),at.empty(),-1)}static max(){return new vo(Vt.max(),at.empty(),-1)}}function l_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=at.comparator(n.documentKey,e.documentKey),0!==t?t:$t(n.largestBatchId,e.largestBatchId))}const EE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Om{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Xu(n){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,Ge.Z)(function*(n){if(n.code!==Ue.FAILED_PRECONDITION||n.message!==EE)throw n;Xe("LocalStore","Unexpectedly lost primary lease")}),Mm.apply(this,arguments)}class Fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Fe((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Fe?t:Fe.resolve(t)}catch(t){return Fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Fe.reject(t)}static resolve(e){return new Fe((t,r)=>{t(e)})}static reject(e){return new Fe((t,r)=>{r(e)})}static waitFor(e){return new Fe((t,r)=>{let s=0,u=0,h=!1;e.forEach(m=>{++s,m.next(()=>{++u,h&&u===s&&t()},w=>r(w))}),h=!0,u===s&&t()})}static or(e){let t=Fe.resolve(!1);for(const r of e)t=t.next(s=>s?Fe.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new Fe((r,s)=>{const u=e.length,h=new Array(u);let m=0;for(let w=0;w<u;w++){const P=w;t(e[P]).next(Q=>{h[P]=Q,++m,m===u&&r(h)},Q=>s(Q))}})}static doWhile(e,t){return new Fe((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class Nm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Fr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new ep(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const s=km(r.target.error);this.T.reject(new ep(e,s))}}static open(e,t,r,s){try{return new Nm(t,e.transaction(s,r))}catch(u){throw new ep(t,u)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Xe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new lD(t)}}class Ts{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===Ts.v((0,nn.z$)())&&cr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Xe("SimpleDb","Removing database:",e),fc(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,nn.hl)())return!1;if(Ts.S())return!0;const e=(0,nn.z$)(),t=Ts.v(e),r=0<t&&t<10,s=Ts.D(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,Ge.Z)(function*(){return t.db||(Xe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=h=>{r(h.target.result)},u.onblocked=()=>{s(new ep(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=h=>{const m=h.target.error;s("VersionError"===m.name?new Je(Ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Je(Ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new ep(e,m))},u.onupgradeneeded=h=>{Xe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.P.M(h.target.result,u.transaction,h.oldVersion,t.version).next(()=>{Xe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.O&&(t.db.onversionchange=r=>t.O(r)),t.db})()}F(e){this.O=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,Ge.Z)(function*(){const h="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.k(e);const w=Nm.open(u.db,e,h?"readonly":"readwrite",r),P=s(w).next(Q=>(w.R(),Q)).catch(Q=>(w.abort(Q),Fe.reject(Q))).toPromise();return P.catch(()=>{}),yield w.A,P}catch(w){const P=w,Q="FirebaseError"!==P.name&&m<3;if(Xe("SimpleDb","Transaction failed with error:",P.message,"Retrying:",Q),u.close(),!Q)return Promise.reject(P)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class uD{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return fc(this.$.delete())}}class ep extends Je{constructor(e,t){super(Ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function el(n){return"IndexedDbTransactionError"===n.name}class lD{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Xe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Xe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fc(r)}add(e){return Xe("SimpleDb","ADD",this.store.name,e,e),fc(this.store.add(e))}get(e){return fc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Xe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Xe("SimpleDb","DELETE",this.store.name,e),fc(this.store.delete(e))}count(){return Xe("SimpleDb","COUNT",this.store.name),fc(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.G(s,(h,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new Fe((u,h)=>{s.onerror=m=>{h(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new Fe((s,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{s(h.target.result)}})}W(e,t){Xe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const s=this.cursor(r);return this.G(s,(u,h,m)=>m.delete())}J(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.G(s,t)}Y(e){const t=this.cursor({});return new Fe((r,s)=>{t.onerror=u=>{const h=km(u.target.error);s(h)},t.onsuccess=u=>{const h=u.target.result;h?e(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}G(e,t){const r=[];return new Fe((s,u)=>{e.onerror=h=>{u(h.target.error)},e.onsuccess=h=>{const m=h.target.result;if(!m)return void s();const w=new uD(m),P=t(m.primaryKey,m.value,w);if(P instanceof Fe){const Q=P.catch(se=>(w.done(),Fe.reject(se)));r.push(Q)}w.isDone?s():null===w.U?m.continue():m.continue(w.U)}}).next(()=>Fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fc(n){return new Fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=km(r.target.error);t(s)}})}let c_=!1;function km(n){const e=Ts.v((0,nn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Je("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return c_||(c_=!0,setTimeout(()=>{throw r},0)),r}}return n}class cD{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Xe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ge.Z)(function*(){t.task=null;try{Xe("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){el(r)?Xe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Xu(r)}yield t.Z(1)}))}}class dD{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let s=t,u=!0;return Fe.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(h=>{if(null!==h&&!r.has(h))return Xe("IndexBackiller",`Processing collection: ${h}`),this.nt(e,h,s).next(m=>{s-=m,r.add(h)});u=!1})).next(()=>t-s)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const h=u.changes;return this.localStore.indexManager.updateIndexEntries(e,h).next(()=>this.st(s,u)).next(m=>(Xe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>h.size)}))}st(e,t){let r=e;return t.changes.forEach((s,u)=>{const h=u_(u);l_(h,r)>0&&(r=h)}),new vo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Si{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function wE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Si.ot=-1;class $n{constructor(e,t){this.comparator=e,this.root=t||Vr.EMPTY}insert(e,t){return new $n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vr.BLACK,null,null))}remove(e){return new $n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zd(this.root,e,this.comparator,!0)}}class Zd{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vr{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=null!=r?r:Vr.RED,this.left=null!=s?s:Vr.EMPTY,this.right=null!=u?u:Vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Vr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Vr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const e=this.left.check();if(e!==this.right.check())throw gt();return e+(this.isRed()?0:1)}}Vr.EMPTY=null,Vr.RED=!0,Vr.BLACK=!1,Vr.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Vr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wn{constructor(e){this.comparator=e,this.data=new $n(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new DE(this.data.getIterator())}getIteratorFrom(e){return new DE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wn(this.comparator);return t.data=e,t}}class DE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Kd(n){return n.hasNext()?n.getNext():void 0}class xi{constructor(e){this.fields=e,e.sort(nr.comparator)}static empty(){return new xi([])}unionWith(e){let t=new wn(nr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new xi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new _r(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new _r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const fD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eu(n){if(Ut(!!n),"string"==typeof n){let e=0;const t=fD.exec(n);if(Ut(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rr(n.seconds),nanos:rr(n.nanos)}}function rr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function tl(n){return"string"==typeof n?_r.fromBase64String(n):_r.fromUint8Array(n)}function TE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function CE(n){const e=n.mapValue.fields.__previous_value__;return TE(e)?CE(e):e}function nl(n){const e=eu(n.mapValue.fields.__local_write_time__.timestampValue);return new Hn(e.seconds,e.nanos)}class pD{constructor(e,t,r,s,u,h,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Yi{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Yi&&e.projectId===this.projectId&&e.database===this.database}}function tu(n){return null==n}function tp(n){return 0===n&&1/n==-1/0}function gD(n){return"number"==typeof n&&Number.isInteger(n)&&!tp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const nu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Rm={nullValue:"NULL_VALUE"};function gc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?TE(n)?4:SE(n)?9007199254740991:10:gt()}function oa(n,e){if(n===e)return!0;const t=gc(n);if(t!==gc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nl(n).isEqual(nl(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=eu(r.timestampValue),h=eu(s.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,tl(n.bytesValue).isEqual(tl(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return rr(r.geoPointValue.latitude)===rr(s.geoPointValue.latitude)&&rr(r.geoPointValue.longitude)===rr(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return rr(r.integerValue)===rr(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=rr(r.doubleValue),h=rr(s.doubleValue);return u===h?tp(u)===tp(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return zd(n.arrayValue.values||[],e.arrayValue.values||[],oa);case 10:return function(r,s){const u=r.mapValue.fields||{},h=s.mapValue.fields||{};if(wE(u)!==wE(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===h[m]||!oa(u[m],h[m])))return!1;return!0}(n,e);default:return gt()}var s}function np(n,e){return void 0!==(n.values||[]).find(t=>oa(t,e))}function ru(n,e){if(n===e)return 0;const t=gc(n),r=gc(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(s,u){const h=rr(s.integerValue||s.doubleValue),m=rr(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return d_(n.timestampValue,e.timestampValue);case 4:return d_(nl(n),nl(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(s,u){const h=tl(s),m=tl(u);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const h=s.split("/"),m=u.split("/");for(let w=0;w<h.length&&w<m.length;w++){const P=$t(h[w],m[w]);if(0!==P)return P}return $t(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const h=$t(rr(s.latitude),rr(u.latitude));return 0!==h?h:$t(rr(s.longitude),rr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const h=s.values||[],m=u.values||[];for(let w=0;w<h.length&&w<m.length;++w){const P=ru(h[w],m[w]);if(P)return P}return $t(h.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===nu.mapValue&&u===nu.mapValue)return 0;if(s===nu.mapValue)return 1;if(u===nu.mapValue)return-1;const h=s.fields||{},m=Object.keys(h),w=u.fields||{},P=Object.keys(w);m.sort(),P.sort();for(let Q=0;Q<m.length&&Q<P.length;++Q){const se=$t(m[Q],P[Q]);if(0!==se)return se;const Ie=ru(h[m[Q]],w[P[Q]]);if(0!==Ie)return Ie}return $t(m.length,P.length)}(n.mapValue,e.mapValue);default:throw gt()}}function d_(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=eu(n),r=eu(e),s=$t(t.seconds,r.seconds);return 0!==s?s:$t(t.nanos,r.nanos)}function rl(n){return Yd(n)}function Yd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=eu(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?tl(n.bytesValue).toBase64():"referenceValue"in n?at.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const h of r.values||[])u?u=!1:s+=",",s+=Yd(h);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",h=!0;for(const m of s)h?h=!1:u+=",",u+=`${m}:${Yd(r.fields[m])}`;return u+"}"}(n.mapValue):gt();var e}function Cs(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function h_(n){return!!n&&"integerValue"in n}function Qd(n){return!!n&&"arrayValue"in n}function f_(n){return!!n&&"nullValue"in n}function AE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Pm(n){return!!n&&"mapValue"in n}function mc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=mc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=mc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function SE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function vA(n){return"nullValue"in n?Rm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Cs(Yi.empty(),at.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:gt()}function mD(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Cs(Yi.empty(),at.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?nu:gt()}function xE(n,e){const t=ru(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function yc(n,e){const t=ru(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ur{constructor(e){this.value=e}static empty(){return new Ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Pm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mc(t)}setAll(e){let t=nr.emptyPath(),r={},s=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=m.popLast()}h?r[m.lastSegment()]=mc(h):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Pm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Pm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){pc(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Ur(mc(this.value))}}function vc(n){const e=[];return pc(n.fields,(t,r)=>{const s=new nr([t]);if(Pm(r)){const u=vc(r.mapValue).fields;if(0===u.length)e.push(s);else for(const h of u)e.push(s.child(h))}else e.push(s)}),new xi(e)}class Fn{constructor(e,t,r,s,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=h}static newInvalidDocument(e){return new Fn(e,0,Vt.min(),Vt.min(),Ur.empty(),0)}static newFoundDocument(e,t,r){return new Fn(e,1,t,Vt.min(),r,0)}static newNoDocument(e,t){return new Fn(e,2,t,Vt.min(),Ur.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,Vt.min(),Ur.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class OE{constructor(e,t=null,r=[],s=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=h,this.endAt=m,this.ut=null}}function ME(n,e=null,t=[],r=[],s=null,u=null,h=null){return new OE(n,e,t,r,s,u,h)}function Jd(n){const e=ct(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+rl(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),tu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>rl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>rl(r)).join(",")),e.ut=t}return e.ut}function Lm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!LE(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!oa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!g_(n.startAt,e.startAt)&&g_(n.endAt,e.endAt)}function rp(n){return at.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Xd(n,e){return n.filters.filter(t=>t instanceof Xr&&t.field.isEqual(e))}function kE(n,e,t){let r=Rm,s=!0;for(const u of Xd(n,e)){let h=Rm,m=!0;switch(u.op){case"<":case"<=":h=vA(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,m=!1;break;case"!=":case"not-in":h=Rm}xE({value:r,inclusive:s},{value:h,inclusive:m})<0&&(r=h,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];xE({value:r,inclusive:s},{value:h,inclusive:t.inclusive})<0&&(r=h,s=t.inclusive);break}return{value:r,inclusive:s}}function RE(n,e,t){let r=nu,s=!0;for(const u of Xd(n,e)){let h=nu,m=!0;switch(u.op){case">=":case">":h=mD(u.value),m=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,m=!1;break;case"!=":case"not-in":h=nu}yc({value:r,inclusive:s},{value:h,inclusive:m})>0&&(r=h,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];yc({value:r,inclusive:s},{value:h,inclusive:t.inclusive})>0&&(r=h,s=t.inclusive);break}return{value:r,inclusive:s}}class Xr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new yD(e,t,r):"array-contains"===t?new bD(e,r):"in"===t?new ED(e,r):"not-in"===t?new wD(e,r):"array-contains-any"===t?new ip(e,r):new Xr(e,t,r)}static ct(e,t,r){return"in"===t?new vD(e,r):new _D(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(ru(t,this.value)):null!==t&&gc(this.value)===gc(t)&&this.at(ru(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class yD extends Xr{constructor(e,t,r){super(e,t,r),this.key=at.fromName(r.referenceValue)}matches(e){const t=at.comparator(e.key,this.key);return this.at(t)}}class vD extends Xr{constructor(e,t){super(e,"in",t),this.keys=PE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _D extends Xr{constructor(e,t){super(e,"not-in",t),this.keys=PE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function PE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>at.fromName(r.referenceValue))}class bD extends Xr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qd(t)&&np(t.arrayValue,this.value)}}class ED extends Xr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&np(this.value.arrayValue,t)}}class wD extends Xr{constructor(e,t){super(e,"not-in",t)}matches(e){if(np(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!np(this.value.arrayValue,t)}}class ip extends Xr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>np(this.value.arrayValue,r))}}class iu{constructor(e,t){this.position=e,this.inclusive=t}}class _c{constructor(e,t="asc"){this.field=e,this.dir=t}}function LE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function p_(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],h=n.position[s];if(r=u.field.isKeyField()?at.comparator(at.fromName(h.referenceValue),t.key):ru(h,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function g_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!oa(n.position[t],e.position[t]))return!1;return!0}class ou{constructor(e,t=null,r=[],s=[],u=null,h="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=w,this.lt=null,this.ft=null}}function FE(n,e,t,r,s,u,h,m){return new ou(n,e,t,r,s,u,h,m)}function eh(n){return new ou(n)}function VE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function m_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function y_(n){for(const e of n.filters)if(e.ht())return e.field;return null}function v_(n){return null!==n.collectionGroup}function sa(n){const e=ct(n);if(null===e.lt){e.lt=[];const t=y_(e),r=m_(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new _c(t)),e.lt.push(new _c(nr.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.lt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new _c(nr.keyField(),u))}}}return e.lt}function Qi(n){const e=ct(n);if(!e.ft)if("F"===e.limitType)e.ft=ME(e.path,e.collectionGroup,sa(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of sa(e))t.push(new _c(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new iu(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new iu(e.startAt.position,e.startAt.inclusive):null;e.ft=ME(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.ft}function th(n,e,t){return new ou(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ji(n,e){return Lm(Qi(n),Qi(e))&&n.limitType===e.limitType}function UE(n){return`${Jd(Qi(n))}|lt:${n.limitType}`}function op(n){return`Query(target=${function NE(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${rl(r.value)}`;var r}).join(", ")}]`),tu(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>rl(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>rl(t)).join(",")),`Target(${e})`}(Qi(n))}; limitType=${n.limitType})`}function bc(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):at.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,h){const m=p_(s,u,h);return s.inclusive?m<=0:m<0}(t.startAt,sa(t),r)||t.endAt&&!function(s,u,h){const m=p_(s,u,h);return s.inclusive?m>=0:m>0}(t.endAt,sa(t),r)));var t,r}function BE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jE(n){return(e,t)=>{let r=!1;for(const s of sa(n)){const u=ID(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function ID(n,e,t){const r=n.field.isKeyField()?at.comparator(e.key,t.key):function(s,u,h){const m=u.data.field(s),w=h.data.field(s);return null!==m&&null!==w?ru(m,w):gt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return gt()}}function sp(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tp(e)?"-0":e}}function ap(n){return{integerValue:""+n}}function qE(n,e){return gD(e)?ap(e):sp(n,e)}class Fm{constructor(){this._=void 0}}function HE(n,e,t){return n instanceof Ec?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof wc?GE(n,e):n instanceof nh?Um(n,e):function(r,s){const u=Vm(r,s),h=__(u)+__(r._t);return h_(u)&&h_(r._t)?ap(h):sp(r.wt,h)}(n,e)}function $E(n,e,t){return n instanceof wc?GE(n,e):n instanceof nh?Um(n,e):t}function Vm(n,e){return n instanceof il?h_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ec extends Fm{}class wc extends Fm{constructor(e){super(),this.elements=e}}function GE(n,e){const t=Bm(e);for(const r of n.elements)t.some(s=>oa(s,r))||t.push(r);return{arrayValue:{values:t}}}class nh extends Fm{constructor(e){super(),this.elements=e}}function Um(n,e){let t=Bm(e);for(const r of n.elements)t=t.filter(s=>!oa(s,r));return{arrayValue:{values:t}}}class il extends Fm{constructor(e,t){super(),this.wt=e,this._t=t}}function __(n){return rr(n.integerValue||n.doubleValue)}function Bm(n){return Qd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ic{constructor(e,t){this.field=e,this.transform=t}}class TD{constructor(e,t){this.version=e,this.transformResults=t}}class Kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class up{}function qm(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ih(n.key,Kn.none()):new rh(n.key,n.data,Kn.none());{const t=n.data,r=Ur.empty();let s=new wn(nr.comparator);for(let u of e.fields)if(!s.has(u)){let h=t.field(u);null===h&&u.length>1&&(u=u.popLast(),h=t.field(u)),null===h?r.delete(u):r.set(u,h),s=s.add(u)}return new aa(n.key,r,new xi(s.toArray()),Kn.none())}}function zE(n,e,t){n instanceof rh?function(r,s,u){const h=r.value.clone(),m=ZE(r.fieldTransforms,s,u.transformResults);h.setAll(m),s.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof aa?function(r,s,u){if(!jm(r.precondition,s))return void s.convertToUnknownDocument(u.version);const h=ZE(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(E_(r)),m.setAll(h),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function lp(n,e,t,r){return n instanceof rh?function(s,u,h,m){if(!jm(s.precondition,u))return h;const w=s.value.clone(),P=w_(s.fieldTransforms,m,u);return w.setAll(P),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof aa?function(s,u,h,m){if(!jm(s.precondition,u))return h;const w=w_(s.fieldTransforms,m,u),P=u.data;return P.setAll(E_(s)),P.setAll(w),u.convertToFoundDocument(u.version,P).setHasLocalMutations(),null===h?null:h.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(Q=>Q.field))}(n,e,t,r):(h=t,jm(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h);var u,h}function WE(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=Vm(r.transform,s||null);null!=u&&(null===t&&(t=Ur.empty()),t.set(r.field,u))}return t||null}function b_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&zd(t,r,(s,u)=>function DD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof wc&&r instanceof wc||t instanceof nh&&r instanceof nh?zd(t.elements,r.elements,oa):t instanceof il&&r instanceof il?oa(t._t,r._t):t instanceof Ec&&r instanceof Ec);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class rh extends up{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class aa extends up{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function E_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function ZE(n,e,t){const r=new Map;Ut(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],h=u.transform,m=e.data.field(u.field);r.set(u.field,$E(h,m,t[s]))}return r}function w_(n,e,t){const r=new Map;for(const s of n){const u=s.transform,h=t.data.field(s.field);r.set(s.field,HE(u,h,e))}return r}class ih extends up{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ei extends up{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class oh{constructor(e){this.count=e}}var br,hn;function CD(n){switch(n){default:return gt();case Ue.CANCELLED:case Ue.UNKNOWN:case Ue.DEADLINE_EXCEEDED:case Ue.RESOURCE_EXHAUSTED:case Ue.INTERNAL:case Ue.UNAVAILABLE:case Ue.UNAUTHENTICATED:return!1;case Ue.INVALID_ARGUMENT:case Ue.NOT_FOUND:case Ue.ALREADY_EXISTS:case Ue.PERMISSION_DENIED:case Ue.FAILED_PRECONDITION:case Ue.ABORTED:case Ue.OUT_OF_RANGE:case Ue.UNIMPLEMENTED:case Ue.DATA_LOSS:return!0}}function sh(n){if(void 0===n)return cr("GRPC error has no .code"),Ue.UNKNOWN;switch(n){case br.OK:return Ue.OK;case br.CANCELLED:return Ue.CANCELLED;case br.UNKNOWN:return Ue.UNKNOWN;case br.DEADLINE_EXCEEDED:return Ue.DEADLINE_EXCEEDED;case br.RESOURCE_EXHAUSTED:return Ue.RESOURCE_EXHAUSTED;case br.INTERNAL:return Ue.INTERNAL;case br.UNAVAILABLE:return Ue.UNAVAILABLE;case br.UNAUTHENTICATED:return Ue.UNAUTHENTICATED;case br.INVALID_ARGUMENT:return Ue.INVALID_ARGUMENT;case br.NOT_FOUND:return Ue.NOT_FOUND;case br.ALREADY_EXISTS:return Ue.ALREADY_EXISTS;case br.PERMISSION_DENIED:return Ue.PERMISSION_DENIED;case br.FAILED_PRECONDITION:return Ue.FAILED_PRECONDITION;case br.ABORTED:return Ue.ABORTED;case br.OUT_OF_RANGE:return Ue.OUT_OF_RANGE;case br.UNIMPLEMENTED:return Ue.UNIMPLEMENTED;case br.DATA_LOSS:return Ue.DATA_LOSS;default:return gt()}}(hn=br||(br={}))[hn.OK=0]="OK",hn[hn.CANCELLED=1]="CANCELLED",hn[hn.UNKNOWN=2]="UNKNOWN",hn[hn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hn[hn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hn[hn.NOT_FOUND=5]="NOT_FOUND",hn[hn.ALREADY_EXISTS=6]="ALREADY_EXISTS",hn[hn.PERMISSION_DENIED=7]="PERMISSION_DENIED",hn[hn.UNAUTHENTICATED=16]="UNAUTHENTICATED",hn[hn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hn[hn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hn[hn.ABORTED=10]="ABORTED",hn[hn.OUT_OF_RANGE=11]="OUT_OF_RANGE",hn[hn.UNIMPLEMENTED=12]="UNIMPLEMENTED",hn[hn.INTERNAL=13]="INTERNAL",hn[hn.UNAVAILABLE=14]="UNAVAILABLE",hn[hn.DATA_LOSS=15]="DATA_LOSS";class ol{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){pc(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return IE(this.inner)}size(){return this.innerSize}}const I_=new $n(at.comparator);function Xi(){return I_}const D_=new $n(at.comparator);function cp(...n){let e=D_;for(const t of n)e=e.insert(t.key,t);return e}function KE(n){let e=D_;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Zo(){return ah()}function T_(){return ah()}function ah(){return new ol(n=>n.toString(),(n,e)=>n.isEqual(e))}const Hm=new $n(at.comparator),C_=new wn(at.comparator);function Xt(...n){let e=C_;for(const t of n)e=e.add(t);return e}const YE=new wn($t);function $m(){return YE}class uh{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,sl.createSynthesizedTargetChangeForCurrentChange(e,t)),new uh(Vt.min(),r,$m(),Xi(),Xt())}}class sl{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new sl(_r.EMPTY_BYTE_STRING,t,Xt(),Xt(),Xt())}}class dp{constructor(e,t,r,s){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=s}}class QE{constructor(e,t){this.targetId=e,this.It=t}}class Gm{constructor(e,t,r=_r.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class zm{constructor(){this.Tt=0,this.Et=XE(),this.At=_r.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Xt(),t=Xt(),r=Xt();return this.Et.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:gt()}}),new sl(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=XE()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class _A{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=Xi(),this.Bt=JE(),this.Lt=new wn($t)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:gt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,s)=>{this.jt(s)&&t(s)})}zt(e){const t=e.targetId,r=e.It.count,s=this.Ht(t);if(s){const u=s.target;if(rp(u))if(0===r){const h=new at(u.path);this.Kt(t,h,Fn.newNoDocument(h,Vt.min()))}else Ut(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((u,h)=>{const m=this.Ht(h);if(m){if(u.current&&rp(m.target)){const w=new at(m.target.path);null!==this.$t.get(w)||this.Xt(h,w)||this.Kt(h,w,Fn.newNoDocument(w,e))}u.vt&&(t.set(h,u.St()),u.Dt())}});let r=Xt();this.Bt.forEach((u,h)=>{let m=!0;h.forEachWhile(w=>{const P=this.Ht(w);return!P||2===P.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.$t.forEach((u,h)=>h.setReadTime(e));const s=new uh(e,t,this.Lt,this.$t,r);return this.$t=Xi(),this.Bt=JE(),this.Lt=new wn($t),s}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const s=this.Qt(e);this.Xt(e,t)?s.Ct(t,1):s.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new zm,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new wn($t),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Xe("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new zm),this.Ot.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}function JE(){return new $n(at.comparator)}function XE(){return new $n(at.comparator)}const ew={asc:"ASCENDING",desc:"DESCENDING"},tw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class AD{constructor(e,t){this.databaseId=e,this.dt=t}}function lh(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A_(n,e){return n.dt?e.toBase64():e.toUint8Array()}function SD(n,e){return lh(n,e.toTimestamp())}function Br(n){return Ut(!!n),Vt.fromTimestamp(function(e){const t=eu(e);return new Hn(t.seconds,t.nanos)}(n))}function Wm(n,e){return(t=n,new dn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function nw(n){const e=dn.fromString(n);return Ut(N_(e)),e}function ch(n,e){return Wm(n.databaseId,e.path)}function As(n,e){const t=nw(e);if(t.get(1)!==n.databaseId.projectId)throw new Je(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Je(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new at(rw(t))}function Zm(n,e){return Wm(n.databaseId,e)}function S_(n){const e=nw(n);return 4===e.length?dn.emptyPath():rw(e)}function hp(n){return new dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rw(n){return Ut(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function xD(n,e,t){return{name:ch(n,e),fields:t.value.mapValue.fields}}function x_(n,e,t){const r=As(n,e.name),s=Br(e.updateTime),u=new Ur({mapValue:{fields:e.fields}}),h=Fn.newFoundDocument(r,s,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Km(n,e){let t;if(e instanceof rh)t={update:xD(n,e.key,e.value)};else if(e instanceof ih)t={delete:ch(n,e.key)};else if(e instanceof aa)t={update:xD(n,e.key,e.data),updateMask:sw(e.fieldMask)};else{if(!(e instanceof ei))return gt();t={verify:ch(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const h=u.transform;if(h instanceof Ec)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof wc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof nh)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof il)return{fieldPath:u.field.canonicalString(),increment:h._t};throw gt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:SD(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:gt()),t;var s}function iw(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Kn.updateTime(Br(s.updateTime)):void 0!==s.exists?Kn.exists(s.exists):Kn.none():Kn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,h){let m=null;"setToServerValue"in h?(Ut("REQUEST_TIME"===h.setToServerValue),m=new Ec):"appendMissingElements"in h?m=new wc(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new nh(h.removeAllFromArray.values||[]):"increment"in h?m=new il(u,h.increment):gt();const w=nr.fromServerFormat(h.fieldPath);return new Ic(w,m)}(n,s)):[];var s;if(e.update){const s=As(n,e.update.name),u=new Ur({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new xi((e.updateMask.fieldPaths||[]).map(P=>nr.fromServerFormat(P)));return new aa(s,u,h,t,r)}return new rh(s,u,t,r)}if(e.delete){const s=As(n,e.delete);return new ih(s,t)}if(e.verify){const s=As(n,e.verify);return new ei(s,t)}return gt()}function OD(n,e){return{documents:[Zm(n,e.path)]}}function MD(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Zm(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Zm(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0===w.length)return;const P=w.map(Q=>function(se){if("=="===se.op){if(AE(se.value))return{unaryFilter:{field:Dc(se.field),op:"IS_NAN"}};if(f_(se.value))return{unaryFilter:{field:Dc(se.field),op:"IS_NULL"}}}else if("!="===se.op){if(AE(se.value))return{unaryFilter:{field:Dc(se.field),op:"IS_NOT_NAN"}};if(f_(se.value))return{unaryFilter:{field:Dc(se.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dc(se.field),op:O_(se.op),value:se.value}}}(Q));return 1===P.length?P[0]:{compositeFilter:{op:"AND",filters:P}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(w){if(0!==w.length)return w.map(P=>{return{field:Dc((Q=P).field),direction:ow(Q.dir)};var Q})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=(P=e.limit,n.dt||tu(P)?P:{value:P});var P,m,w;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function ND(n){let e=S_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ut(1===r);const Q=t.from[0];Q.allDescendants?s=Q.collectionId:e=e.child(Q.collectionId)}let u=[];t.where&&(u=kD(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(Q=>{return new _c(Tc((se=Q).field),function(Ie){switch(Ie){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(se.direction));var se}));let m=null;t.limit&&(m=function(Q){let se;return se="object"==typeof Q?Q.value:Q,tu(se)?null:se}(t.limit));let w=null;var Q;t.startAt&&(w=new iu((Q=t.startAt).values||[],!!Q.before));let P=null;return t.endAt&&(P=function(Q){return new iu(Q.values||[],!Q.before)}(t.endAt)),FE(e,s,h,u,m,"F",w,P)}function kD(n){return n?void 0!==n.unaryFilter?[M_(n)]:void 0!==n.fieldFilter?[IA(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>kD(e)).reduce((e,t)=>e.concat(t)):gt():[]}function ow(n){return ew[n]}function O_(n){return tw[n]}function Dc(n){return{fieldPath:n.canonicalString()}}function Tc(n){return nr.fromServerFormat(n.fieldPath)}function IA(n){return Xr.create(Tc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(n.fieldFilter.op),n.fieldFilter.value)}function M_(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Tc(n.unaryFilter.field);return Xr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Tc(n.unaryFilter.field);return Xr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Tc(n.unaryFilter.field);return Xr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Tc(n.unaryFilter.field);return Xr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}function sw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function N_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function yi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=k_(e)),e=DA(n.get(t),e);return k_(e)}function DA(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function k_(n){return n+"\x01\x01"}function ua(n){const e=n.length;if(Ut(e>=2),2===e)return Ut("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),dn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const h=n.indexOf("\x01",u);switch((h<0||h>t)&&gt(),n.charAt(h+1)){case"\x01":const m=n.substring(u,h);let w;0===s.length?w=m:(s+=m,w=s,s=""),r.push(w);break;case"\x10":s+=n.substring(u,h),s+="\0";break;case"\x11":s+=n.substring(u,h+1);break;default:gt()}u=h+2}return new dn(r)}const Qm=["userId","batchId"];function Jm(n,e){return[n,yi(e)]}function RD(n,e,t){return[n,yi(e),t]}const TA={},CA=["prefixPath","collectionGroup","readTime","documentId"],PD=["prefixPath","collectionGroup","documentId"],LD=["collectionGroup","readTime","prefixPath","documentId"],FD=["canonicalId","targetId"],AA=["targetId","path"],VD=["path","targetId"],R_=["collectionId","parent"],UD=["indexId","uid"],Ss=["uid","sequenceNumber"],BD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],P_=["indexId","uid","orderedDocumentKey"],jD=["userId","collectionPath","documentId"],qD=["userId","collectionPath","largestBatchId"],L_=["userId","collectionGroup","largestBatchId"],F_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],aw=[...F_,"documentOverlays"],uw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],V_=uw,lw=[...V_,"indexConfiguration","indexState","indexEntries"];class U_ extends Om{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function jr(n,e){const t=ct(n);return Ts.N(t.ee,e)}class fp{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&zE(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=lp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=lp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=T_();return this.mutations.forEach(s=>{const u=e.get(s.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=t.has(s.key)?null:m;const w=qm(h,m);null!==w&&r.set(s.key,w),h.isValidDocument()||h.convertToNoDocument(Vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Xt())}isEqual(e){return this.batchId===e.batchId&&zd(this.mutations,e.mutations,(t,r)=>b_(t,r))&&zd(this.baseMutations,e.baseMutations,(t,r)=>b_(t,r))}}class _o{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ut(e.mutations.length===r.length);let s=Hm;const u=e.mutations;for(let h=0;h<u.length;h++)s=s.insert(u[h].key,r[h].version);return new _o(e,t,r,s)}}class B_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Cc{constructor(e,t,r,s,u=Vt.min(),h=Vt.min(),m=_r.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(e){return new Cc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Cc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Cc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class cw{constructor(e){this.ne=e}}function hw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Xm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ch(s=n.ne,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:lh(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:al(e.version)};else{if(!e.isUnknownDocument())return gt();r.unknownDocument={path:t.path.toArray(),version:al(e.version)}}var s,u;return r}function Xm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function al(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ac(n){const e=new Hn(n.seconds,n.nanoseconds);return Vt.fromTimestamp(e)}function dh(n,e){const t=(e.baseMutations||[]).map(u=>iw(n.ne,u));for(let u=0;u<e.mutations.length-1;++u){const h=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(h.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>iw(n.ne,u)),s=Hn.fromMillis(e.localWriteTimeMs);return new fp(e.batchId,s,t,r)}function hh(n){const e=Ac(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ac(n.lastLimboFreeSnapshotVersion):Vt.min();let r;var s;return void 0!==n.query.documents?(Ut(1===(s=n.query).documents.length),r=Qi(eh(S_(s.documents[0])))):r=Qi(ND(n.query)),new Cc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,_r.fromBase64String(n.resumeToken))}function j_(n,e){const t=al(e.snapshotVersion),r=al(e.lastLimboFreeSnapshotVersion);let s;s=rp(e.target)?OD(n.ne,e.target):MD(n.ne,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Jd(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function q_(n){const e=ND({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?th(e,e.limit,"L"):e}function H_(n,e){return new B_(e.largestBatchId,iw(n.ne,e.overlayMutation))}function $_(n,e){const t=e.path.lastSegment();return[n,yi(e.path.popLast()),t]}function ey(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:al(r.readTime),documentKey:yi(r.documentKey.path),largestBatchId:r.largestBatchId}}class G_{getBundleMetadata(e,t){return z_(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Ac(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return z_(e).put({bundleId:(r=t).id,createTime:al(Br(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return fw(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:q_(s.bundledQuery),readTime:Ac(s.readTime)};var s})}saveNamedQuery(e,t){return fw(e).put({name:(r=t).name,readTime:al(Br(r.readTime)),bundledQuery:r.bundledQuery});var r}}function z_(n){return jr(n,"bundles")}function fw(n){return jr(n,"namedQueries")}class pp{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new pp(e,t.uid||"")}getOverlay(e,t){return fh(e).get($_(this.userId,t)).next(r=>r?H_(this.wt,r):null)}getOverlays(e,t){const r=Zo();return Fe.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,h)=>{const m=new B_(t,h);s.push(this.ie(e,m))}),Fe.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(h=>s.add(yi(h.getCollectionPath())));const u=[];return s.forEach(h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(fh(e).W("collectionPathOverlayIndex",m))}),Fe.waitFor(u)}getOverlaysForCollection(e,t,r){const s=Zo(),u=yi(t),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return fh(e).K("collectionPathOverlayIndex",h).next(m=>{for(const w of m){const P=H_(this.wt,w);s.set(P.getKey(),P)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=Zo();let h;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fh(e).J({index:"collectionGroupOverlayIndex",range:m},(w,P,Q)=>{const se=H_(this.wt,P);u.size()<s||se.largestBatchId===h?(u.set(se.getKey(),se),h=se.largestBatchId):Q.done()}).next(()=>u)}ie(e,t){return fh(e).put(function(r,s,u){const[h,m,w]=$_(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Km(r.ne,u.mutation)}}(this.wt,this.userId,t))}}function fh(n){return jr(n,"documentOverlays")}class Sc{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(rr(e.integerValue));else if("doubleValue"in e){const r=rr(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),tp(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(tl(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?SE(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):gt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const s of Object.keys(r))this.le(s,t),this.oe(r[s],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const s of r)this.oe(s,t)}_e(e,t){this.ce(t,37),at.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function HD(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function $D(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=HD(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Sc.ye=new Sc;class SA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const s=t.codePointAt(0);this.Ie(240|s>>>18),this.Ie(128|63&s>>>12),this.Ie(128|63&s>>>6),this.Ie(128|63&s)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const s=t.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}ve(e){const t=this.Ve(e),r=$D(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}De(e){const t=this.Ve(e),r=$D(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class pw{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class GD{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class gp{constructor(){this.Oe=new SA,this.Fe=new pw(this.Oe),this.$e=new GD(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class xc{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new xc(this.indexId,this.documentKey,this.arrayValue,r)}}function ph(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=zD(n.arrayValue,e.arrayValue),0!==t?t:(t=zD(n.directionalValue,e.directionalValue),0!==t?t:at.comparator(n.documentKey,e.documentKey)))}function zD(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class xA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=Sm(e);if(void 0!==t&&!this.Qe(t))return!1;const r=hc(e);let s=0,u=0;for(;s<r.length&&this.Qe(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Ke){const h=r[s];if(!this.je(this.Ke,h)||!this.We(this.Ue[u++],h))return!1;++s}for(;s<r.length;++s){const h=r[s];if(u>=this.Ue.length||!this.We(this.Ue[u++],h))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class OA{constructor(){this.ze=new gw}addToCollectionParentIndex(e,t){return this.ze.add(t),Fe.resolve()}getCollectionParents(e,t){return Fe.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return Fe.resolve()}deleteFieldIndex(e,t){return Fe.resolve()}getDocumentsMatchingTarget(e,t){return Fe.resolve(null)}getIndexType(e,t){return Fe.resolve(0)}getFieldIndexes(e,t){return Fe.resolve([])}getNextCollectionGroupToUpdate(e){return Fe.resolve(null)}getMinOffset(e,t){return Fe.resolve(vo.min())}getMinOffsetFromCollectionGroup(e,t){return Fe.resolve(vo.min())}updateCollectionGroup(e,t,r){return Fe.resolve()}updateIndexEntries(e,t){return Fe.resolve()}}class gw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new wn(dn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new wn(dn.comparator)).toArray()}}const ty=new Uint8Array(0);class ny{constructor(e,t){this.user=e,this.databaseId=t,this.He=new gw,this.Je=new ol(r=>Jd(r),(r,s)=>Lm(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const u={collectionId:r,parent:yi(s)};return mw(e).put(u)}return Fe.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[_E(t),""],!1,!0);return mw(e).K(s).next(u=>{for(const h of u){if(h.collectionId!==t)break;r.push(ua(h.parent))}return r})}addFieldIndex(e,t){const r=yp(e),s={indexId:(h=t).indexId,collectionGroup:h.collectionGroup,fields:h.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var h;delete s.indexId;const u=r.add(s);if(t.indexState){const h=xs(e);return u.next(m=>{h.put(ey(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=yp(e),s=xs(e),u=mp(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=mp(e);let s=!0;const u=new Map;return Fe.forEach(this.Ye(t),h=>this.Xe(e,h).next(m=>{s&&(s=!!m),u.set(h,m)})).next(()=>{if(s){let h=Xt();const m=[];return Fe.forEach(u,(w,P)=>{var Q;Xe("IndexedDbIndexManager",`Using index ${Q=w,`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map(on=>`${on.fieldPath}:${on.kind}`).join(",")}`} to execute ${Jd(t)}`);const se=function(on,zt){const Kt=Sm(zt);if(void 0===Kt)return null;for(const ln of Xd(on,Kt.fieldPath))switch(ln.op){case"array-contains-any":return ln.value.arrayValue.values||[];case"array-contains":return[ln.value]}return null}(P,w),Ie=function(on,zt){const Kt=new Map;for(const ln of hc(zt))for(const ni of Xd(on,ln.fieldPath))switch(ni.op){case"==":case"in":Kt.set(ln.fieldPath.canonicalString(),ni.value);break;case"not-in":case"!=":return Kt.set(ln.fieldPath.canonicalString(),ni.value),Array.from(Kt.values())}return null}(P,w),Me=function(on,zt){const Kt=[];let ln=!0;for(const ni of hc(zt)){const p0=0===ni.kind?kE(on,ni.fieldPath,on.startAt):RE(on,ni.fieldPath,on.startAt);Kt.push(p0.value),ln&&(ln=p0.inclusive)}return new iu(Kt,ln)}(P,w),Le=function(on,zt){const Kt=[];let ln=!0;for(const ni of hc(zt)){const p0=0===ni.kind?RE(on,ni.fieldPath,on.endAt):kE(on,ni.fieldPath,on.endAt);Kt.push(p0.value),ln&&(ln=p0.inclusive)}return new iu(Kt,ln)}(P,w),et=this.Ze(w,P,Me),ut=this.Ze(w,P,Le),Gt=this.tn(w,P,Ie),Zt=this.en(w.indexId,se,et,Me.inclusive,ut,Le.inclusive,Gt);return Fe.forEach(Zt,on=>r.j(on,t.limit).next(zt=>{zt.forEach(Kt=>{const ln=at.fromSegments(Kt.documentKey);h.has(ln)||(h=h.add(ln),m.push(ln))})}))}).next(()=>m)}return Fe.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,s,u,h,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),P=w/(null!=t?t.length:1),Q=[];for(let se=0;se<w;++se){const Ie=t?this.nn(t[se/P]):ty,Me=this.sn(e,Ie,r[se%P],s),Le=this.rn(e,Ie,u[se%P],h),et=m.map(ut=>this.sn(e,Ie,ut,!0));Q.push(...this.createRange(Me,Le,et))}return Q}sn(e,t,r,s){const u=new xc(e,at.empty(),t,r);return s?u:u.Le()}rn(e,t,r,s){const u=new xc(e,at.empty(),t,r);return s?u.Le():u}Xe(e,t){const r=new xA(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let h=null;for(const m of u)r.Ge(m)&&(!h||m.fields.length>h.fields.length)&&(h=m);return h})}getIndexType(e,t){let r=2;return Fe.forEach(this.Ye(t),s=>this.Xe(e,s).next(u=>{u?0!==r&&u.fields.length<function(h){let m=new wn(nr.comparator),w=!1;for(const P of h.filters){const Q=P;Q.field.isKeyField()||("array-contains"===Q.op||"array-contains-any"===Q.op?w=!0:m=m.add(Q.field))}for(const P of h.orderBy)P.field.isKeyField()||(m=m.add(P.field));return m.size+(w?1:0)}(s)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new gp;for(const s of hc(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const h=r.Be(s.kind);Sc.ye.re(u,h)}return r.Me()}nn(e){const t=new gp;return Sc.ye.re(e,t.Be(0)),t.Me()}un(e,t){const r=new gp;return Sc.ye.re(Cs(this.databaseId,t),r.Be(function(s){const u=hc(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Me()}tn(e,t,r){if(null===r)return[];let s=[];s.push(new gp);let u=0;for(const h of hc(e)){const m=r[u++];for(const w of s)if(this.cn(t,h.fieldPath)&&Qd(m))s=this.an(s,h,m);else{const P=w.Be(h.kind);Sc.ye.re(m,P)}}return this.hn(s)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Me();return t}an(e,t,r){const s=[...e],u=[];for(const h of r.arrayValue.values||[])for(const m of s){const w=new gp;w.seed(m.Me()),Sc.ye.re(h,w.Be(t.kind)),u.push(w)}return u}cn(e,t){return!!e.filters.find(r=>r instanceof Xr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=yp(e),s=xs(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(u=>{const h=[];return Fe.forEach(u,m=>s.get([m.indexId,this.uid]).next(w=>{h.push(function(P,Q){const se=Q?new Xf(Q.sequenceNumber,new vo(Ac(Q.readTime),new at(ua(Q.documentKey)),Q.largestBatchId)):Xf.empty(),Ie=P.fields.map(([Me,Le])=>new xm(nr.fromServerFormat(Me),Le));return new Am(P.indexId,P.collectionGroup,Ie,se)}(m,w))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:$t(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=yp(e),u=xs(e);return this.ln(e).next(h=>s.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>Fe.forEach(m,w=>u.put(ey(w.indexId,this.user,h,r)))))}updateIndexEntries(e,t){const r=new Map;return Fe.forEach(t,(s,u)=>{const h=r.get(s.collectionGroup);return(h?Fe.resolve(h):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),Fe.forEach(m,w=>this.fn(e,s,w).next(P=>{const Q=this.dn(u,w);return P.isEqual(Q)?Fe.resolve():this._n(e,u,w,P,Q)}))))})}wn(e,t,r,s){return mp(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,s){return mp(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const s=mp(e);let u=new wn(ph);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(h,m)=>{u=u.add(new xc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}dn(e,t){let r=new wn(ph);const s=this.on(t,e);if(null==s)return r;const u=Sm(t);if(null!=u){const h=e.data.field(u.fieldPath);if(Qd(h))for(const m of h.arrayValue.values||[])r=r.add(new xc(t.indexId,e.key,this.nn(m),s))}else r=r.add(new xc(t.indexId,e.key,ty,s));return r}_n(e,t,r,s,u){Xe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(m,w,P,Q,se){const Ie=m.getIterator(),Me=w.getIterator();let Le=Kd(Ie),et=Kd(Me);for(;Le||et;){let ut=!1,Gt=!1;if(Le&&et){const Zt=P(Le,et);Zt<0?Gt=!0:Zt>0&&(ut=!0)}else null!=Le?Gt=!0:ut=!0;ut?(Q(et),et=Kd(Me)):Gt?(se(Le),Le=Kd(Ie)):(Le=Kd(Ie),et=Kd(Me))}}(s,u,ph,m=>{h.push(this.wn(e,t,r,m))},m=>{h.push(this.mn(e,t,r,m))}),Fe.waitFor(h)}ln(e){let t=1;return xs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,m)=>ph(h,m)).filter((h,m,w)=>!m||0!==ph(h,w[m-1]));const s=[];s.push(e);for(const h of r){const m=ph(h,e),w=ph(h,t);if(0===m)s[0]=e.Le();else if(m>0&&w<0)s.push(h),s.push(h.Le());else if(w>0)break}s.push(t);const u=[];for(let h=0;h<s.length;h+=2)u.push(IDBKeyRange.bound([s[h].indexId,this.uid,s[h].arrayValue,s[h].directionalValue,ty,[]],[s[h+1].indexId,this.uid,s[h+1].arrayValue,s[h+1].directionalValue,ty,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(W_)}getMinOffset(e,t){return Fe.mapArray(this.Ye(t),r=>this.Xe(e,r).next(s=>s||gt())).next(W_)}}function mw(n){return jr(n,"collectionParents")}function mp(n){return jr(n,"indexEntries")}function yp(n){return jr(n,"indexConfiguration")}function xs(n){return jr(n,"indexState")}function W_(n){Ut(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;l_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new vo(e.readTime,e.documentKey,t)}const ry={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class vi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new vi(e,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function yw(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],h=IDBKeyRange.only(t.batchId);let m=0;const w=r.J({range:h},(Q,se,Ie)=>(m++,Ie.delete()));u.push(w.next(()=>{Ut(1===m)}));const P=[];for(const Q of t.mutations){const se=RD(e,Q.key.path,t.batchId);u.push(s.delete(se)),P.push(Q.key)}return Fe.waitFor(u).next(()=>P)}function gh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw gt();e=n.noDocument}return JSON.stringify(e).length}vi.DEFAULT_COLLECTION_PERCENTILE=10,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vi.DEFAULT=new vi(41943040,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vi.DISABLED=new vi(-1,0,0);class mh{constructor(e,t,r,s){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=s,this.gn={}}static se(e,t,r,s){Ut(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new mh(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Oc(e).J({index:"userMutationsIndex",range:r},(s,u,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=_p(e),h=Oc(e);return h.add({}).next(m=>{Ut("number"==typeof m);const w=new fp(m,t,r,s),P=function(Ie,Me,Le){const et=Le.baseMutations.map(Gt=>Km(Ie.ne,Gt)),ut=Le.mutations.map(Gt=>Km(Ie.ne,Gt));return{userId:Me,batchId:Le.batchId,localWriteTimeMs:Le.localWriteTime.toMillis(),baseMutations:et,mutations:ut}}(this.wt,this.userId,w),Q=[];let se=new wn((Ie,Me)=>$t(Ie.canonicalString(),Me.canonicalString()));for(const Ie of s){const Me=RD(this.userId,Ie.key.path,m);se=se.add(Ie.key.path.popLast()),Q.push(h.put(P)),Q.push(u.put(Me,TA))}return se.forEach(Ie=>{Q.push(this.indexManager.addToCollectionParentIndex(e,Ie))}),e.addOnCommittedListener(()=>{this.gn[m]=w.keys()}),Fe.waitFor(Q).next(()=>w)})}lookupMutationBatch(e,t){return Oc(e).get(t).next(r=>r?(Ut(r.userId===this.userId),dh(this.wt,r)):null)}yn(e,t){return this.gn[t]?Fe.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.gn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Oc(e).J({index:"userMutationsIndex",range:s},(h,m,w)=>{m.userId===this.userId&&(Ut(m.batchId>=r),u=dh(this.wt,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Oc(e).J({index:"userMutationsIndex",range:t,reverse:!0},(s,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Oc(e).K("userMutationsIndex",t).next(r=>r.map(s=>dh(this.wt,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Jm(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return _p(e).J({range:s},(h,m,w)=>{const[P,Q,se]=h,Ie=ua(Q);if(P===this.userId&&t.path.isEqual(Ie))return Oc(e).get(se).next(Me=>{if(!Me)throw gt();Ut(Me.userId===this.userId),u.push(dh(this.wt,Me))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn($t);const s=[];return t.forEach(u=>{const h=Jm(this.userId,u.path),m=IDBKeyRange.lowerBound(h),w=_p(e).J({range:m},(P,Q,se)=>{const[Ie,Me,Le]=P,et=ua(Me);Ie===this.userId&&u.path.isEqual(et)?r=r.add(Le):se.done()});s.push(w)}),Fe.waitFor(s).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=Jm(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new wn($t);return _p(e).J({range:h},(w,P,Q)=>{const[se,Ie,Me]=w,Le=ua(Ie);se===this.userId&&r.isPrefixOf(Le)?Le.length===s&&(m=m.add(Me)):Q.done()}).next(()=>this.pn(e,m))}pn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Oc(e).get(u).next(h=>{if(null===h)throw gt();Ut(h.userId===this.userId),r.push(dh(this.wt,h))}))}),Fe.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return yw(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),Fe.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Fe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return _p(e).J({range:r},(u,h,m)=>{if(u[0]===this.userId){const w=ua(u[1]);s.push(w)}else m.done()}).next(()=>{Ut(0===s.length)})})}containsKey(e,t){return vp(e,this.userId,t)}Tn(e){return WD(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function vp(n,e,t){const r=Jm(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return _p(n).J({range:u,H:!0},(m,w,P)=>{const[Q,se,Ie]=m;Q===e&&se===s&&(h=!0),P.done()}).next(()=>h)}function Oc(n){return jr(n,"mutations")}function _p(n){return jr(n,"documentMutations")}function WD(n){return jr(n,"mutationQueues")}class yh{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new yh(0)}static Rn(){return new yh(-1)}}class vw{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new yh(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Vt.fromTimestamp(new Hn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Pn(e,s)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>vh(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Ut(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return vh(e).J((h,m)=>{const w=hh(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(s++,u.push(this.removeTargetData(e,w)))}).next(()=>Fe.waitFor(u)).next(()=>s)}forEachTarget(e,t){return vh(e).J((r,s)=>{const u=hh(s);t(u)})}bn(e){return _w(e).get("targetGlobalKey").next(t=>(Ut(null!==t),t))}Pn(e,t){return _w(e).put("targetGlobalKey",t)}vn(e,t){return vh(e).put(j_(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Jd(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return vh(e).J({range:s,index:"queryTargetsIndex"},(h,m,w)=>{const P=hh(m);Lm(t,P.target)&&(u=P,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=ul(e);return t.forEach(h=>{const m=yi(h.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,h))}),Fe.waitFor(s)}removeMatchingKeys(e,t,r){const s=ul(e);return Fe.forEach(t,u=>{const h=yi(u.path);return Fe.waitFor([s.delete([r,h]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=ul(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=ul(e);let u=Xt();return s.J({range:r,H:!0},(h,m,w)=>{const P=ua(h[1]),Q=new at(P);u=u.add(Q)}).next(()=>u)}containsKey(e,t){const r=yi(t.path),s=IDBKeyRange.bound([r],[_E(r)],!1,!0);let u=0;return ul(e).J({index:"documentTargetsIndex",H:!0,range:s},([h,m],w,P)=>{0!==h&&(u++,P.done())}).next(()=>u>0)}te(e,t){return vh(e).get(t).next(r=>r?hh(r):null)}}function vh(n){return jr(n,"targets")}function _w(n){return jr(n,"targetGlobal")}function ul(n){return jr(n,"targetDocuments")}function bw([n,e],[t,r]){const s=$t(n,t);return 0===s?$t(e,r):s}class Ew{constructor(e){this.Sn=e,this.buffer=new wn(bw),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();bw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ww{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Xe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ge.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){el(r)?Xe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Xu(r)}yield t.kn(3e5)}))}}class Iw{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.On(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Fe.resolve(Si.ot);const r=new Ew(t);return this.Mn.forEachTarget(e,s=>r.xn(s.sequenceNumber)).next(()=>this.Mn.Fn(e,s=>r.xn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector","Garbage collection skipped; disabled"),Fe.resolve(ry)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ry):this.$n(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,t){let r,s,u,h,m,w,P;const Q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(se=>(se>this.params.maximumSequenceNumbersToCollect?(Xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${se}`),s=this.params.maximumSequenceNumbersToCollect):s=se,h=Date.now(),this.nthSequenceNumber(e,s))).next(se=>(r=se,m=Date.now(),this.removeTargets(e,r,t))).next(se=>(u=se,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(se=>(P=Date.now(),i_()<=Kl.in.DEBUG&&Xe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-Q}ms\n\tDetermined least recently used ${s} in `+(m-h)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${se} documents in `+(P-w)+`ms\nTotal Duration: ${P-Q}ms`),Fe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:se})))}}class ZD{constructor(e,t){this.db=e,this.garbageCollector=new Iw(this,t)}On(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,s)=>t(s))}addReference(e,t,r){return iy(e,r)}removeReference(e,t,r){return iy(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return iy(e,t)}Un(e,t){return function(r,s){let u=!1;return WD(r).Y(h=>vp(r,h,s).next(m=>(m&&(u=!0),Fe.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Ln(e,(h,m)=>{if(m<=t){const w=this.Un(e,h).next(P=>{if(!P)return u++,r.getEntry(e,h).next(()=>(r.removeEntry(h,Vt.min()),ul(e).delete([0,yi(h.path)])))});s.push(w)}}).next(()=>Fe.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return iy(e,t)}Ln(e,t){const r=ul(e);let s,u=Si.ot;return r.J({index:"documentTargetsIndex"},([h,m],{path:w,sequenceNumber:P})=>{0===h?(u!==Si.ot&&t(new at(ua(s)),u),u=P,s=w):u=Si.ot}).next(()=>{u!==Si.ot&&t(new at(ua(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function iy(n,e){return ul(n).put((r=n.currentSequenceNumber,{targetId:0,path:yi(e.path),sequenceNumber:r}));var r}class Z_{constructor(){this.changes=new ol(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class K_{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Mc(e).put(r)}removeEntry(e,t,r){return Mc(e).delete(function(s,u){const h=s.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],Xm(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=Fn.newInvalidDocument(t);return Mc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bp(t))},(s,u)=>{r=this.Kn(t,u)}).next(()=>r)}Gn(e,t){let r={size:0,document:Fn.newInvalidDocument(t)};return Mc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(bp(t))},(s,u)=>{r={document:this.Kn(t,u),size:gh(u)}}).next(()=>r)}getEntries(e,t){let r=Xi();return this.Qn(e,t,(s,u)=>{const h=this.Kn(s,u);r=r.insert(s,h)}).next(()=>r)}jn(e,t){let r=Xi(),s=new $n(at.comparator);return this.Qn(e,t,(u,h)=>{const m=this.Kn(u,h);r=r.insert(u,m),s=s.insert(u,gh(h))}).next(()=>({documents:r,Wn:s}))}Qn(e,t,r){if(t.isEmpty())return Fe.resolve();let s=new wn(QD);t.forEach(w=>s=s.add(w));const u=IDBKeyRange.bound(bp(s.first()),bp(s.last())),h=s.getIterator();let m=h.getNext();return Mc(e).J({index:"documentKeyIndex",range:u},(w,P,Q)=>{const se=at.fromSegments([...P.prefixPath,P.collectionGroup,P.documentId]);for(;m&&QD(m,se)<0;)r(m,null),m=h.getNext();m&&m.isEqual(se)&&(r(m,P),m=h.hasNext()?h.getNext():null),m?Q.q(bp(m)):Q.done()}).next(()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),Xm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Mc(e).K(IDBKeyRange.bound(s,u,!0)).next(h=>{let m=Xi();for(const w of h){const P=this.Kn(at.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(P.key,P)}return m})}getAllFromCollectionGroup(e,t,r,s){let u=Xi();const h=YD(t,r),m=YD(t,vo.max());return Mc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,m,!0)},(w,P,Q)=>{const se=this.Kn(at.fromSegments(P.prefixPath.concat(P.collectionGroup,P.documentId)),P);u=u.insert(se.key,se),u.size===s&&Q.done()}).next(()=>u)}newChangeBuffer(e){return new Dw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return oy(e).get("remoteDocumentGlobalKey").next(t=>(Ut(!!t),t))}qn(e,t){return oy(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function dw(n,e){let t;if(e.document)t=x_(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=at.fromSegments(e.noDocument.path),s=Ac(e.noDocument.readTime);t=Fn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return gt();{const r=at.fromSegments(e.unknownDocument.path),s=Ac(e.unknownDocument.version);t=Fn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Hn(r[0],r[1]);return Vt.fromTimestamp(s)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Vt.min()))return r}return Fn.newInvalidDocument(e)}}function KD(n){return new K_(n)}class Dw extends Z_{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new ol(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new wn((u,h)=>$t(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const m=this.Hn.get(u);if(t.push(this.zn.removeEntry(e,u,m.readTime)),h.isValidDocument()){const w=hw(this.zn.wt,h);s=s.add(u.path.popLast()),r+=gh(w)-m.size,t.push(this.zn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=hw(this.zn.wt,h.convertToNoDocument(Vt.min()));t.push(this.zn.addEntry(e,u,w))}}),s.forEach(u=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.zn.updateMetadata(e,r)),Fe.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:s})=>(s.forEach((u,h)=>{this.Hn.set(u,{size:h,readTime:r.get(u).readTime})}),r))}}function oy(n){return jr(n,"remoteDocumentGlobal")}function Mc(n){return jr(n,"remoteDocumentsV14")}function bp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function YD(n,e){const t=e.documentKey.path.toArray();return[n,Xm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function QD(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=$t(t[u],r[u]),s)return s;return s=$t(t.length,r.length),s||(s=$t(t[t.length-2],r[r.length-2]),s||$t(t[t.length-1],r[r.length-1]))}class MA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Tw{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.getBaseDocument(e,t,r))).next(s=>(null!==r&&lp(r.mutation,s,xi.empty(),Hn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Xt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Xt()){const s=Zo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let h=cp();return u.forEach((m,w)=>{h=h.insert(m,w.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const r=Zo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Xt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((h,m)=>{t.set(h,m)})})}computeViews(e,t,r,s){let u=Xi();const h=ah(),m=ah();return t.forEach((w,P)=>{const Q=r.get(P.key);s.has(P.key)&&(void 0===Q||Q.mutation instanceof aa)?u=u.insert(P.key,P):void 0!==Q&&(h.set(P.key,Q.mutation.getFieldMask()),lp(Q.mutation,P,Q.mutation.getFieldMask(),Hn.now()))}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((P,Q)=>h.set(P,Q)),t.forEach((P,Q)=>{var se;return m.set(P,new MA(Q,null!==(se=h.get(P))&&void 0!==se?se:null))}),m))}recalculateAndSaveOverlays(e,t){const r=ah();let s=new $n((h,m)=>h-m),u=Xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const m of h)m.keys().forEach(w=>{const P=t.get(w);if(null===P)return;let Q=r.get(w)||xi.empty();Q=m.applyToLocalView(P,Q),r.set(w,Q);const se=(s.get(m.batchId)||Xt()).add(w);s=s.insert(m.batchId,se)})}).next(()=>{const h=[],m=s.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),P=w.key,Q=w.value,se=T_();Q.forEach(Ie=>{if(!u.has(Ie)){const Me=qm(t.get(Ie),r.get(Ie));null!==Me&&se.set(Ie,Me),u=u.add(Ie)}}),h.push(this.documentOverlayCache.saveOverlays(e,P,se))}return Fe.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return at.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):v_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const h=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):Fe.resolve(Zo());let m=-1,w=u;return h.next(P=>Fe.forEach(P,(Q,se)=>(m<se.largestBatchId&&(m=se.largestBatchId),u.get(Q)?Fe.resolve():this.getBaseDocument(e,Q,se).next(Ie=>{w=w.insert(Q,Ie)}))).next(()=>this.populateOverlays(e,P,u)).next(()=>this.computeViews(e,w,P,Xt())).next(Q=>({batchId:m,changes:KE(Q)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new at(t)).next(r=>{let s=cp();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=cp();return this.indexManager.getCollectionParents(e,s).next(h=>Fe.forEach(h,m=>{const w=(P=t,Q=m.child(s),new ou(Q,null,P.explicitOrderBy.slice(),P.filters.slice(),P.limit,P.limitType,P.startAt,P.endAt));var P,Q;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(P=>{P.forEach((Q,se)=>{u=u.insert(Q,se)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,w)=>{const P=w.getKey();null===s.get(P)&&(s=s.insert(P,Fn.newInvalidDocument(P)))});let h=cp();return s.forEach((m,w)=>{const P=u.get(m);void 0!==P&&lp(P.mutation,w,xi.empty(),Hn.now()),bc(t,w)&&(h=h.insert(m,w))}),h})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):Fe.resolve(Fn.newInvalidDocument(t))}}class JD{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return Fe.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Br(r.createTime)}),Fe.resolve()}getNamedQuery(e,t){return Fe.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:q_(r.bundledQuery),readTime:Br(r.readTime)}),Fe.resolve();var r}}class NA{constructor(){this.overlays=new $n(at.comparator),this.Xn=new Map}getOverlay(e,t){return Fe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Zo();return Fe.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.ie(e,t,u)}),Fe.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Xn.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.Xn.delete(r)),Fe.resolve()}getOverlaysForCollection(e,t,r){const s=Zo(),u=t.length+1,h=new at(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const w=m.getNext().value,P=w.getKey();if(!t.isPrefixOf(P.path))break;P.path.length===u&&w.largestBatchId>r&&s.set(w.getKey(),w)}return Fe.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new $n((P,Q)=>P-Q);const h=this.overlays.getIterator();for(;h.hasNext();){const P=h.getNext().value;if(P.getKey().getCollectionGroup()===t&&P.largestBatchId>r){let Q=u.get(P.largestBatchId);null===Q&&(Q=Zo(),u=u.insert(P.largestBatchId,Q)),Q.set(P.getKey(),P)}}const m=Zo(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((P,Q)=>m.set(P,Q)),!(m.size()>=s)););return Fe.resolve(m)}ie(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const h=this.Xn.get(s.largestBatchId).delete(r.key);this.Xn.set(s.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new B_(t,r));let u=this.Xn.get(t);void 0===u&&(u=Xt(),this.Xn.set(t,u)),this.Xn.set(t,u.add(r.key))}}class Cw{constructor(){this.Zn=new wn(ti.ts),this.es=new wn(ti.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new ti(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new ti(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new at(new dn([])),r=new ti(t,e),s=new ti(t,e+1),u=[];return this.es.forEachInRange([r,s],h=>{this.rs(h),u.push(h.key)}),u}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new at(new dn([])),r=new ti(t,e),s=new ti(t,e+1);let u=Xt();return this.es.forEachInRange([r,s],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new ti(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ti{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return at.comparator(e.key,t.key)||$t(e.ls,t.ls)}static ns(e,t){return $t(e.ls,t.ls)||at.comparator(e.key,t.key)}}class kA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new wn(ti.ts)}checkEmpty(e){return Fe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.fs;this.fs++;const h=new fp(u,t,r,s);this.mutationQueue.push(h);for(const m of s)this.ds=this.ds.add(new ti(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return Fe.resolve(h)}lookupMutationBatch(e,t){return Fe.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ws(t+1),u=s<0?0:s;return Fe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return Fe.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return Fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ti(t,0),s=new ti(t,Number.POSITIVE_INFINITY),u=[];return this.ds.forEachInRange([r,s],h=>{const m=this._s(h.ls);u.push(m)}),Fe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wn($t);return t.forEach(s=>{const u=new ti(s,0),h=new ti(s,Number.POSITIVE_INFINITY);this.ds.forEachInRange([u,h],m=>{r=r.add(m.ls)})}),Fe.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;at.isDocumentKey(u)||(u=u.child(""));const h=new ti(new at(u),0);let m=new wn($t);return this.ds.forEachWhile(w=>{const P=w.key.path;return!!r.isPrefixOf(P)&&(P.length===s&&(m=m.add(w.ls)),!0)},h),Fe.resolve(this.gs(m))}gs(e){const t=[];return e.forEach(r=>{const s=this._s(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Ut(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return Fe.forEach(t.mutations,s=>{const u=new ti(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new ti(t,0),s=this.ds.firstAfterOrEqual(r);return Fe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return Fe.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class RA{constructor(e){this.ps=e,this.docs=new $n(at.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,h=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Fe.resolve(r?r.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let r=Xi();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Fn.newInvalidDocument(s))}),Fe.resolve(r)}getAllFromCollection(e,t,r){let s=Xi();const u=new at(t.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:w}}=h.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||l_(u_(w),r)<=0||(s=s.insert(w.key,w.mutableCopy()))}return Fe.resolve(s)}getAllFromCollectionGroup(e,t,r,s){gt()}Is(e,t){return Fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new XD(this)}getSize(e){return Fe.resolve(this.size)}}class XD extends Z_{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.zn.addEntry(e,s)):this.zn.removeEntry(r)}),Fe.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class PA{constructor(e){this.persistence=e,this.Ts=new ol(t=>Jd(t),Lm),this.lastRemoteSnapshotVersion=Vt.min(),this.highestTargetId=0,this.Es=0,this.As=new Cw,this.targetCount=0,this.Rs=yh.An()}forEachTarget(e,t){return this.Ts.forEach((r,s)=>t(s)),Fe.resolve()}getLastRemoteSnapshotVersion(e){return Fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Fe.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),Fe.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new yh(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,Fe.resolve()}updateTargetData(e,t){return this.vn(t),Fe.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Fe.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Ts.forEach((h,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Ts.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),Fe.waitFor(u).next(()=>s)}getTargetCount(e){return Fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return Fe.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),Fe.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(h=>{u.push(s.markPotentiallyOrphaned(e,h))}),Fe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),Fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return Fe.resolve(r)}containsKey(e,t){return Fe.resolve(this.As.containsKey(t))}}class eT{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Si(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new PA(this),this.indexManager=new OA,this.remoteDocumentCache=new RA(r=>this.referenceDelegate.Ss(r)),this.wt=new cw(t),this.Ds=new JD(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new NA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new kA(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Xe("MemoryPersistence","Starting transaction:",e);const s=new LA(this.Ps.next());return this.referenceDelegate.Cs(),r(s).next(u=>this.referenceDelegate.xs(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Ns(e,t){return Fe.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class LA extends Om{constructor(e){super(),this.currentSequenceNumber=e}}class Y_{constructor(e){this.persistence=e,this.ks=new Cw,this.Ms=null}static Os(e){return new Y_(e)}get Fs(){if(this.Ms)return this.Ms;throw gt()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),Fe.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),Fe.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),Fe.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(s=>this.Fs.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Fs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Ms=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fe.forEach(this.Fs,r=>{const s=at.fromPath(r);return this.$s(e,s).next(u=>{u||t.removeEntry(s,Vt.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return Fe.or([()=>Fe.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class i{constructor(e){this.wt=e}M(e,t,r,s){const u=new Nm("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qm,{unique:!0}),m.createObjectStore("documentMutations"),o(e),function(m){m.createObjectStore("remoteDocuments")}(e));let h=Fe.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),o(e)),h=h.next(()=>function(m){const w=m.store("targetGlobal"),P={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Vt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",P)}(u))),r<4&&s>=4&&(0!==r&&(h=h.next(()=>function(m,w){return w.store("mutations").K().next(P=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Qm,{unique:!0});const Q=w.store("mutations"),se=P.map(Ie=>Q.put(Ie));return Fe.waitFor(se)})}(e,u))),h=h.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(h=h.next(()=>this.Bs(u))),r<6&&s>=6&&(h=h.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(u)))),r<7&&s>=7&&(h=h.next(()=>this.Us(u))),r<8&&s>=8&&(h=h.next(()=>this.qs(e,u))),r<9&&s>=9&&(h=h.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(h=h.next(()=>this.Ks(u))),r<11&&s>=11&&(h=h.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(h=h.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:jD});w.createIndex("collectionPathOverlayIndex",qD,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",L_,{unique:!1})}(e)})),r<13&&s>=13&&(h=h.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:CA});w.createIndex("documentKeyIndex",PD),w.createIndex("collectionGroupIndex",LD)}(e)).next(()=>this.Gs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(h=h.next(()=>this.Qs(e,u))),r<15&&s>=15&&(h=h.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:UD}).createIndex("sequenceNumberIndex",Ss,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:BD}).createIndex("documentKeyIndex",P_,{unique:!1})}(e))),h}Ls(e){let t=0;return e.store("remoteDocuments").J((r,s)=>{t+=gh(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(s=>Fe.forEach(s,u=>{const h=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",h).next(m=>Fe.forEach(m,w=>{Ut(w.userId===u.userId);const P=dh(this.wt,w);return yw(e,u.userId,P).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.J((h,m)=>{const w=new dn(h),P=[0,yi(w)];u.push(t.get(P).next(Q=>Q?Fe.resolve():t.put({targetId:0,path:yi(w),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>Fe.waitFor(u))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:R_});const r=t.store("collectionParents"),s=new gw,u=h=>{if(s.add(h)){const m=h.lastSegment(),w=h.popLast();return r.put({collectionId:m,parent:yi(w)})}};return t.store("remoteDocuments").J({H:!0},(h,m)=>{const w=new dn(h);return u(w.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([h,m,w],P)=>{const Q=ua(m);return u(Q.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,s)=>{const u=hh(s),h=j_(this.wt,u);return t.put(h)})}Gs(e,t){const r=t.store("remoteDocuments"),s=[];return r.J((u,h)=>{const m=t.store("remoteDocumentsV14"),w=(P=h,P.document?new at(dn.fromString(P.document.name).popFirst(5)):P.noDocument?at.fromSegments(P.noDocument.path):P.unknownDocument?at.fromSegments(P.unknownDocument.path):gt()).path.toArray();var P;const Q={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};s.push(m.put(Q))}).next(()=>Fe.waitFor(s))}Qs(e,t){const r=t.store("mutations"),s=KD(this.wt),u=new eT(Y_.Os,this.wt.ne);return r.K().next(h=>{const m=new Map;return h.forEach(w=>{var P;let Q=null!==(P=m.get(w.userId))&&void 0!==P?P:Xt();dh(this.wt,w).keys().forEach(se=>Q=Q.add(se)),m.set(w.userId,Q)}),Fe.forEach(m,(w,P)=>{const Q=new Or(P),se=pp.se(this.wt,Q),Ie=u.getIndexManager(Q),Me=mh.se(Q,this.wt,Ie,u.referenceDelegate);return new Tw(s,Me,se,Ie).recalculateAndSaveOverlaysForDocumentKeys(new U_(t,Si.ot),w).next()})})}}function o(n){n.createObjectStore("targetDocuments",{keyPath:AA}).createIndex("documentTargetsIndex",VD,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",FD,{unique:!0}),n.createObjectStore("targetGlobal")}const a="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class l{constructor(e,t,r,s,u,h,m,w,P,Q,se=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=u,this.window=h,this.document=m,this.Ws=P,this.zs=Q,this.Hs=se,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=Ie=>Promise.resolve(),!l.V())throw new Je(Ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZD(this,s),this.ei=t+"main",this.wt=new cw(w),this.ni=new Ts(this.ei,this.Hs,new i(this.wt)),this.Vs=new vw(this.referenceDelegate,this.wt),this.remoteDocumentCache=KD(this.wt),this.Ds=new G_,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===Q&&cr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Je(Ue.FAILED_PRECONDITION,a);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Si(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,Ge.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Ge.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>p(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(el(e))return Xe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Xe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return d(e).get("owner").next(t=>Fe.resolve(this.di(t)))}_i(e){return p(e).delete(this.clientId)}wi(){var e=this;return(0,Ge.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=jr(r,"clientMetadata");return s.K().next(u=>{const h=e.gi(u,18e5),m=u.filter(w=>-1===h.indexOf(w));return Fe.forEach(m,w=>s.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?Fe.resolve(!0):d(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Je(Ue.FAILED_PRECONDITION,a);return!1}}return!(!this.networkEnabled||!this.inForeground)||p(e).K().next(r=>void 0===this.gi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const h=!this.inForeground&&s.inForeground,m=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||h&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Xe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ge.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new U_(t,Si.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>p(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return mh.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ny(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return pp.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Xe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(h=this.Hs)?lw:14===h?V_:13===h?uw:12===h?aw:11===h?F_:void gt();var h;let m;return this.ni.runTransaction(e,s,u,w=>(m=new U_(w,this.Ps?this.Ps.next():Si.ot),"readwrite-primary"===t?this.ai(m).next(P=>!!P||this.hi(m)).next(P=>{if(!P)throw cr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Je(Ue.FAILED_PRECONDITION,EE);return r(m)}).next(P=>this.fi(m).next(()=>P)):this.bi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}bi(e){return d(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Je(Ue.FAILED_PRECONDITION,a)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return d(e).put("owner",t)}static V(){return Ts.V()}li(e){const t=d(e);return t.get("owner").next(r=>this.di(r)?(Xe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Fe.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(cr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,nn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Xe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return cr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){cr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function d(n){return jr(n,"owner")}function p(n){return jr(n,"clientMetadata")}function v(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class D{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=s}static Vi(e,t){let r=Xt(),s=Xt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new D(e,t.fromCache,r,s)}}class N{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ci(e,t).next(u=>u||this.xi(e,t,s,r)).next(u=>u||this.Ni(e,t))}Ci(e,t){if(VE(t))return Fe.resolve(null);let r=Qi(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=th(t,null,"F"),r=Qi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const h=Xt(...u);return this.Di.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const P=this.ki(t,m);return this.Mi(t,P,h,w.readTime)?this.Ci(e,th(t,null,"F")):this.Oi(e,P,t,w)}))})))}xi(e,t,r,s){return VE(t)||s.isEqual(Vt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(u=>{const h=this.ki(t,u);return this.Mi(t,h,r,s)?this.Ni(e,t):(i_()<=Kl.in.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),op(t)),this.Oi(e,h,t,a_(s,-1)))})}ki(e,t){let r=new wn(jE(e));return t.forEach((s,u)=>{bc(e,u)&&(r=r.add(u))}),r}Mi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Ni(e,t){return i_()<=Kl.in.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",op(t)),this.Di.getDocumentsMatchingQuery(e,t,vo.min())}Oi(e,t,r,s){return this.Di.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(h=>{u=u.insert(h.key,h)}),u))}}class z{constructor(e,t,r,s){this.persistence=e,this.Fi=t,this.wt=s,this.$i=new $n($t),this.Bi=new ol(u=>Jd(u),Lm),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tw(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function re(n,e,t,r){return new z(n,e,t,r)}function pe(n,e){return we.apply(this,arguments)}function we(){return we=(0,Ge.Z)(function*(n,e){const t=ct(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const h=[],m=[];let w=Xt();for(const P of s){h.push(P.batchId);for(const Q of P.mutations)w=w.add(Q.key)}for(const P of u){m.push(P.batchId);for(const Q of P.mutations)w=w.add(Q.key)}return t.localDocuments.getDocuments(r,w).next(P=>({Ki:P,removedBatchIds:h,addedBatchIds:m}))})})}),we.apply(this,arguments)}function Ne(n,e){const t=ct(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Ui.newChangeBuffer({trackRemovals:!0});return function(h,m,w,P){const Q=w.batch,se=Q.keys();let Ie=Fe.resolve();return se.forEach(Me=>{Ie=Ie.next(()=>P.getEntry(m,Me)).next(Le=>{const et=w.docVersions.get(Me);Ut(null!==et),Le.version.compareTo(et)<0&&(Q.applyToRemoteDocument(Le,w),Le.isValidDocument()&&(Le.setReadTime(w.commitVersion),P.addEntry(Le)))})}),Ie.next(()=>h.mutationQueue.removeMutationBatch(m,Q))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let m=Xt();for(let w=0;w<h.mutationResults.length;++w)h.mutationResults[w].transformResults.length>0&&(m=m.add(h.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function $e(n){const e=ct(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function nt(n,e){const t=ct(n),r=e.snapshotVersion;let s=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.Ui.newChangeBuffer({trackRemovals:!0});s=t.$i;const m=[];e.targetChanges.forEach((Q,se)=>{const Ie=s.get(se);if(!Ie)return;m.push(t.Vs.removeMatchingKeys(u,Q.removedDocuments,se).next(()=>t.Vs.addMatchingKeys(u,Q.addedDocuments,se)));let Me=Ie.withSequenceNumber(u.currentSequenceNumber);var Le,et,ut;e.targetMismatches.has(se)?Me=Me.withResumeToken(_r.EMPTY_BYTE_STRING,Vt.min()).withLastLimboFreeSnapshotVersion(Vt.min()):Q.resumeToken.approximateByteSize()>0&&(Me=Me.withResumeToken(Q.resumeToken,r)),s=s.insert(se,Me),et=Me,ut=Q,(0===(Le=Ie).resumeToken.approximateByteSize()||et.snapshotVersion.toMicroseconds()-Le.snapshotVersion.toMicroseconds()>=3e8||ut.addedDocuments.size+ut.modifiedDocuments.size+ut.removedDocuments.size>0)&&m.push(t.Vs.updateTargetData(u,Me))});let w=Xi(),P=Xt();if(e.documentUpdates.forEach(Q=>{e.resolvedLimboDocuments.has(Q)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,Q))}),m.push(ot(u,h,e.documentUpdates).next(Q=>{w=Q.Gi,P=Q.Qi})),!r.isEqual(Vt.min())){const Q=t.Vs.getLastRemoteSnapshotVersion(u).next(se=>t.Vs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(Q)}return Fe.waitFor(m).next(()=>h.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,P)).next(()=>w)}).then(u=>(t.$i=s,u))}function ot(n,e,t){let r=Xt(),s=Xt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let h=Xi();return t.forEach((m,w)=>{const P=u.get(m);w.isFoundDocument()!==P.isFoundDocument()&&(s=s.add(m)),w.isNoDocument()&&w.version.isEqual(Vt.min())?(e.removeEntry(m,w.readTime),h=h.insert(m,w)):!P.isValidDocument()||w.version.compareTo(P.version)>0||0===w.version.compareTo(P.version)&&P.hasPendingWrites?(e.addEntry(w),h=h.insert(m,w)):Xe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",P.version," Watch version:",w.version)}),{Gi:h,Qi:s}})}function mt(n,e){const t=ct(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function We(n,e){const t=ct(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Vs.getTargetData(r,e).next(u=>u?(s=u,Fe.resolve(s)):t.Vs.allocateTargetId(r).next(h=>(s=new Cc(e,h,0,r.currentSequenceNumber),t.Vs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.$i.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function Et(n,e,t){return rn.apply(this,arguments)}function rn(){return rn=(0,Ge.Z)(function*(n,e,t){const r=ct(n),s=r.$i.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,s)))}catch(h){if(!el(h))throw h;Xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.$i=r.$i.remove(e),r.Bi.delete(s.target)}),rn.apply(this,arguments)}function gn(n,e,t){const r=ct(n);let s=Vt.min(),u=Xt();return r.persistence.runTransaction("Execute query","readonly",h=>function(m,w,P){const Q=ct(m),se=Q.Bi.get(P);return void 0!==se?Fe.resolve(Q.$i.get(se)):Q.Vs.getTargetData(w,P)}(r,h,Qi(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(h,m.targetId).next(w=>{u=w})}).next(()=>r.Fi.getDocumentsMatchingQuery(h,e,t?s:Vt.min(),t?u:Xt())).next(m=>(sy(r,BE(e),m),{documents:m,ji:u})))}function eo(n,e){const t=ct(n),r=ct(t.Vs),s=t.$i.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.te(u,e).next(h=>h?h.target:null))}function ll(n,e){const t=ct(n),r=t.Li.get(e)||Vt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Ui.getAllFromCollectionGroup(s,e,a_(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(sy(t,e,s),s))}function sy(n,e,t){let r=Vt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Li.set(e,r)}function Ep(){return Ep=(0,Ge.Z)(function*(n,e,t,r){const s=ct(n);let u=Xt(),h=Xi();for(const P of t){const Q=e.Wi(P.metadata.name);P.document&&(u=u.add(Q));const se=e.zi(P);se.setReadTime(e.Hi(P.metadata.readTime)),h=h.insert(Q,se)}const m=s.Ui.newChangeBuffer({trackRemovals:!0}),w=yield We(s,(P=r,Qi(eh(dn.fromString(`__bundle__/docs/${P}`)))));var P;return s.persistence.runTransaction("Apply bundle documents","readwrite",P=>ot(P,m,h).next(Q=>(m.apply(P),Q)).next(Q=>s.Vs.removeMatchingKeysForTargetId(P,w.targetId).next(()=>s.Vs.addMatchingKeys(P,u,w.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(P,Q.Gi,Q.Qi)).next(()=>Q.Gi)))}),Ep.apply(this,arguments)}function J_(n,e){return wp.apply(this,arguments)}function wp(){return wp=(0,Ge.Z)(function*(n,e,t=Xt()){const r=yield We(n,Qi(q_(e.bundledQuery))),s=ct(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const h=Br(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return s.Ds.saveNamedQuery(u,e);const m=r.withResumeToken(_r.EMPTY_BYTE_STRING,h);return s.$i=s.$i.insert(m.targetId,m),s.Vs.updateTargetData(u,m).next(()=>s.Vs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Vs.addMatchingKeys(u,t,r.targetId)).next(()=>s.Ds.saveNamedQuery(u,e))})}),wp.apply(this,arguments)}function ay(n,e){return`firestore_clients_${n}_${e}`}function uy(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ip(n,e){return`firestore_targets_${n}_${e}`}class _h{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Ji(e,t,r){const s=JSON.parse(r);let u,h="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return h&&s.error&&(h="string"==typeof s.error.message&&"string"==typeof s.error.code,h&&(u=new Je(s.error.code,s.error.message))),h?new _h(e,t,s.state,u):(cr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class X_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Je(r.error.code,r.error.message))),u?new X_(e,r.state,s):(cr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Aw{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=$m();for(let h=0;s&&h<r.activeTargetIds.length;++h)s=gD(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return s?new Aw(e,u):(cr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class tT{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new tT(t.clientId,t.onlineState):(cr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class nT{constructor(){this.activeTargetIds=$m()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rT{constructor(e,t,r,s,u){this.window=e,this.js=t,this.persistenceKey=r,this.tr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new $n($t),this.started=!1,this.ir=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.rr=ay(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new nT),this.cr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ge.Z)(function*(){const t=yield e.syncEngine.Ri();for(const s of t){if(s===e.tr)continue;const u=e.getItem(ay(e.persistenceKey,s));if(u){const h=Aw.Ji(s,u);h&&(e.sr=e.sr.insert(h.clientId,h))}}e._r();const r=e.storage.getItem(e.lr);if(r){const s=e.wr(r);s&&e.mr(s)}for(const s of e.ir)e.nr(s);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Ip(this.persistenceKey,e));if(r){const s=X_.Ji(e,r);s&&(t=s.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ip(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.pr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Xe("SharedClientState","READ",e,t),t}setItem(e,t){Xe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Xe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Xe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void cr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const s=t.Rr(r.key);return t.br(s,null)}{const s=t.Pr(r.key,r.newValue);if(s)return t.br(s.clientId,s)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const s=t.vr(r.key,r.newValue);if(s)return t.Vr(s)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const s=t.Sr(r.key,r.newValue);if(s)return t.Dr(s)}}else if(r.key===t.lr){if(null!==r.newValue){const s=t.wr(r.newValue);if(s)return t.mr(s)}}else if(r.key===t.ur){const s=function(u){let h=Si.ot;if(null!=u)try{const m=JSON.parse(u);Ut("number"==typeof m),h=m}catch(m){cr("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(r.newValue);s!==Si.ot&&t.sequenceNumberHandler(s)}else if(r.key===t.dr){const s=t.Cr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Nr(u)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const s=new _h(this.currentUser,e,t,r),u=uy(this.persistenceKey,this.currentUser,e);this.setItem(u,s.Yi())}pr(e){const t=uy(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const s=Ip(this.persistenceKey,e),u=new X_(e,t,r);this.setItem(s,u.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return Aw.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),s=Number(r[1]);return _h.Ji(new Or(void 0!==r[2]?r[2]:null),s,t)}Sr(e,t){const r=this.hr.exec(e),s=Number(r[1]);return X_.Ji(s,t)}wr(e){return tT.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Xe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),s=this.gr(this.sr),u=this.gr(r),h=[],m=[];return u.forEach(w=>{s.has(w)||h.push(w)}),s.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Or(h,m).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=$m();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class FA{constructor(){this.Fr=new nT,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new nT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Q1{Br(e){}shutdown(){}}class VA{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const J1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class X1{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class ex extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,s,u){const h=this.oo(e,t);Xe("RestConnection","Sending: ",h,r);const m={};return this.uo(m,s,u),this.co(e,h,m,r).then(w=>(Xe("RestConnection","Received: ",w),w),w=>{throw dc("RestConnection",`${e} failed with error: `,w,"url: ",h,"request:",r),w})}ao(e,t,r,s,u,h){return this.ro(e,t,r,s,u)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+cc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}oo(e,t){return`${this.so}/v1/${t}:${J1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,s){return new Promise((u,h)=>{const m=new iD;m.listenOnce(tD.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case r_.NO_ERROR:const P=m.getResponseJson();Xe("Connection","XHR received:",JSON.stringify(P)),u(P);break;case r_.TIMEOUT:Xe("Connection",'RPC "'+e+'" timed out'),h(new Je(Ue.DEADLINE_EXCEEDED,"Request time out"));break;case r_.HTTP_ERROR:const Q=m.getStatus();if(Xe("Connection",'RPC "'+e+'" failed with status:',Q,"response text:",m.getResponseText()),Q>0){const se=m.getResponseJson().error;if(se&&se.status&&se.message){const Ie=function(Me){const Le=Me.toLowerCase().replace(/_/g,"-");return Object.values(Ue).indexOf(Le)>=0?Le:Ue.UNKNOWN}(se.status);h(new Je(Ie,se.message))}else h(new Je(Ue.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Je(Ue.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{Xe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(s);m.send(t,"POST",w,r,15)})}ho(e,t,r){const s=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=fE(),h=pE(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new rD({})),this.uo(m.initMessageHeaders,t,r),(0,nn.uI)()||(0,nn.b$)()||(0,nn.d)()||(0,nn.w1)()||(0,nn.Mn)()||(0,nn.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=s.join("");Xe("Connection","Creating WebChannel: "+w,m);const P=u.createWebChannel(w,m);let Q=!1,se=!1;const Ie=new X1({jr:Le=>{se?Xe("Connection","Not sending because WebChannel is closed:",Le):(Q||(Xe("Connection","Opening WebChannel transport."),P.open(),Q=!0),Xe("Connection","WebChannel sending:",Le),P.send(Le))},Wr:()=>P.close()}),Me=(Le,et,ut)=>{Le.listen(et,Gt=>{try{ut(Gt)}catch(Zt){setTimeout(()=>{throw Zt},0)}})};return Me(P,Tm.EventType.OPEN,()=>{se||Xe("Connection","WebChannel transport opened.")}),Me(P,Tm.EventType.CLOSE,()=>{se||(se=!0,Xe("Connection","WebChannel transport closed"),Ie.eo())}),Me(P,Tm.EventType.ERROR,Le=>{se||(se=!0,dc("Connection","WebChannel transport errored:",Le),Ie.eo(new Je(Ue.UNAVAILABLE,"The operation could not be completed")))}),Me(P,Tm.EventType.MESSAGE,Le=>{var et;if(!se){const ut=Le.data[0];Ut(!!ut);const Gt=ut,Zt=Gt.error||(null===(et=Gt[0])||void 0===et?void 0:et.error);if(Zt){Xe("Connection","WebChannel received error:",Zt);const on=Zt.status;let zt=function(ln){const ni=br[ln];if(void 0!==ni)return sh(ni)}(on),Kt=Zt.message;void 0===zt&&(zt=Ue.INTERNAL,Kt="Unknown error status: "+on+" with message "+Zt.message),se=!0,Ie.eo(new Je(zt,Kt)),P.close()}else Xe("Connection","WebChannel received:",ut),Ie.no(ut)}}),Me(h,nD.STAT_EVENT,Le=>{Le.stat===Gd.PROXY?Xe("Connection","Detected buffering proxy"):Le.stat===Gd.NOPROXY&&Xe("Connection","Detected no buffering proxy")}),setTimeout(()=>{Ie.Zr()},0),Ie}}function UA(){return"undefined"!=typeof window?window:null}function Sw(){return"undefined"!=typeof document?document:null}function e0(n){return new AD(n,!0)}class iT{constructor(e,t,r=1e3,s=1.5,u=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=s,this._o=u,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),s=Math.max(0,t-r);s>0&&Xe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,s,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class BA{constructor(e,t,r,s,u,h,m,w){this.js=e,this.Ao=r,this.Ro=s,this.bo=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new iT(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ge.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,Ge.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,Ge.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===Ue.RESOURCE_EXHAUSTED?(cr(t.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===Ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Po===t&&this.Uo(r,s)},r=>{e(()=>{const s=new Je(Ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(s)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(s=>{r(()=>this.qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}xo(){var e=this;this.state=5,this.So.Io((0,Ge.Z)(function*(){e.state=0,e.start()}))}qo(e){return Xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tx extends BA{constructor(e,t,r,s,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,h),this.wt=u}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function EA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:gt(),s=e.targetChange.targetIds||[],u=function(w,P){return w.dt?(Ut(void 0===P||"string"==typeof P),_r.fromBase64String(P||"")):(Ut(void 0===P||P instanceof Uint8Array),_r.fromUint8Array(P||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(w){const P=void 0===w.code?Ue.UNKNOWN:sh(w.code);return new Je(P,w.message||"")}(h);t=new Gm(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=As(n,r.document.name),u=Br(r.document.updateTime),h=new Ur({mapValue:{fields:r.document.fields}}),m=Fn.newFoundDocument(s,u,h);t=new dp(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,s=As(n,r.document),u=r.readTime?Br(r.readTime):Vt.min(),h=Fn.newNoDocument(s,u);t=new dp([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,s=As(n,r.document);t=new dp([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return gt();{const r=e.filter,u=new oh(r.count||0);t=new QE(r.targetId,u)}}var w;return t}(this.wt,e),r=function(s){if(!("targetChange"in s))return Vt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?Vt.min():u.readTime?Br(u.readTime):Vt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=hp(this.wt),t.addTarget=function(s,u){let h;const m=u.target;return h=rp(m)?{documents:OD(s,m)}:{query:MD(s,m)},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?h.resumeToken=A_(s,u.resumeToken):u.snapshotVersion.compareTo(Vt.min())>0&&(h.readTime=lh(s,u.snapshotVersion.toTimestamp())),h}(this.wt,e);const r=function Ym(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return gt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=hp(this.wt),t.removeTarget=e,this.Oo(t)}}class nx extends BA{constructor(e,t,r,s,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,h),this.wt=u,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function wA(n,e){return n&&n.length>0?(Ut(void 0!==e),n.map(t=>function(r,s){let u=Br(r.updateTime?r.updateTime:s);return u.isEqual(Vt.min())&&(u=Br(s)),new TD(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Br(e.commitTime);return this.listener.Jo(r,t)}return Ut(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=hp(this.wt),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Km(this.wt,r))};this.Oo(t)}}class rx extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=s,this.Zo=!1}tu(){if(this.Zo)throw new Je(Ue.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.bo.ro(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Je(Ue.UNKNOWN,s.toString())})}ao(e,t,r,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.bo.ao(e,t,r,u,h,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Je(Ue.UNKNOWN,u.toString())})}terminate(){this.Zo=!0}}class ix{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(cr(t),this.su=!1):Xe("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class ox{constructor(e,t,r,s,u){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br(m=>{r.enqueueAndForget((0,Ge.Z)(function*(){var w;bh(h)&&(Xe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,Ge.Z)(function*(P){const Q=ct(P);Q.lu.add(4),yield ly(Q),Q._u.set("Unknown"),Q.lu.delete(4),yield t0(Q)}),function(P){return w.apply(this,arguments)})(h))}))}),this._u=new ix(r,s)}}function t0(n){return oT.apply(this,arguments)}function oT(){return oT=(0,Ge.Z)(function*(n){if(bh(n))for(const e of n.fu)yield e(!0)}),oT.apply(this,arguments)}function ly(n){return sT.apply(this,arguments)}function sT(){return sT=(0,Ge.Z)(function*(n){for(const e of n.fu)yield e(!1)}),sT.apply(this,arguments)}function xw(n,e){const t=ct(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),lT(t)?uT(t):dy(t).Co()&&aT(t,e))}function n0(n,e){const t=ct(n),r=dy(t);t.hu.delete(e),r.Co()&&jA(t,e),0===t.hu.size&&(r.Co()?r.ko():bh(t)&&t._u.set("Unknown"))}function aT(n,e){n.wu.Nt(e.targetId),dy(n).Qo(e)}function jA(n,e){n.wu.Nt(e),dy(n).jo(e)}function uT(n){n.wu=new _A({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),dy(n).start(),n._u.iu()}function lT(n){return bh(n)&&!dy(n).Do()&&n.hu.size>0}function bh(n){return 0===ct(n).lu.size}function qA(n){n.wu=void 0}function sx(n){return cT.apply(this,arguments)}function cT(){return cT=(0,Ge.Z)(function*(n){n.hu.forEach((e,t)=>{aT(n,e)})}),cT.apply(this,arguments)}function ax(n,e){return dT.apply(this,arguments)}function dT(){return dT=(0,Ge.Z)(function*(n,e){qA(n),lT(n)?(n._u.uu(e),uT(n)):n._u.set("Unknown")}),dT.apply(this,arguments)}function ux(n,e,t){return hT.apply(this,arguments)}function hT(){return hT=(0,Ge.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof Gm&&2===e.state&&e.cause)try{yield(r=(0,Ge.Z)(function*(s,u){const h=u.cause;for(const m of u.targetIds)s.hu.has(m)&&(yield s.remoteSyncer.rejectListen(m,h),s.hu.delete(m),s.wu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ow(n,r)}else if(e instanceof dp?n.wu.Ut(e):e instanceof QE?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Vt.min()))try{const r=yield $e(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const h=s.wu.Yt(u);return h.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const P=s.hu.get(w);P&&s.hu.set(w,P.withResumeToken(m.resumeToken,u))}}),h.targetMismatches.forEach(m=>{const w=s.hu.get(m);if(!w)return;s.hu.set(m,w.withResumeToken(_r.EMPTY_BYTE_STRING,w.snapshotVersion)),jA(s,m);const P=new Cc(w.target,m,1,w.sequenceNumber);aT(s,P)}),s.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Xe("RemoteStore","Failed to raise snapshot:",r),yield Ow(n,r)}var r}),hT.apply(this,arguments)}function Ow(n,e,t){return fT.apply(this,arguments)}function fT(){return fT=(0,Ge.Z)(function*(n,e,t){if(!el(e))throw e;n.lu.add(1),yield ly(n),n._u.set("Offline"),t||(t=()=>$e(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ge.Z)(function*(){Xe("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield t0(n)}))}),fT.apply(this,arguments)}function HA(n,e){return e().catch(t=>Ow(n,t,e))}function cy(n){return pT.apply(this,arguments)}function pT(){return pT=(0,Ge.Z)(function*(n){const e=ct(n),t=Eh(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;lx(e);)try{const s=yield mt(e.localStore,r);if(null===s){0===e.au.length&&t.ko();break}r=s.batchId,cx(e,s)}catch(s){yield Ow(e,s)}$A(e)&&GA(e)}),pT.apply(this,arguments)}function lx(n){return bh(n)&&n.au.length<10}function cx(n,e){n.au.push(e);const t=Eh(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function $A(n){return bh(n)&&!Eh(n).Do()&&n.au.length>0}function GA(n){Eh(n).start()}function dx(n){return gT.apply(this,arguments)}function gT(){return gT=(0,Ge.Z)(function*(n){Eh(n).Xo()}),gT.apply(this,arguments)}function hx(n){return mT.apply(this,arguments)}function mT(){return mT=(0,Ge.Z)(function*(n){const e=Eh(n);for(const t of n.au)e.Ho(t.mutations)}),mT.apply(this,arguments)}function fx(n,e,t){return yT.apply(this,arguments)}function yT(){return yT=(0,Ge.Z)(function*(n,e,t){const r=n.au.shift(),s=_o.from(r,e,t);yield HA(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield cy(n)}),yT.apply(this,arguments)}function px(n,e){return vT.apply(this,arguments)}function vT(){return vT=(0,Ge.Z)(function*(n,e){var t;e&&Eh(n).zo&&(yield(t=(0,Ge.Z)(function*(r,s){if(CD(u=s.code)&&u!==Ue.ABORTED){const h=r.au.shift();Eh(r).No(),yield HA(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,s)),yield cy(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),$A(n)&&GA(n)}),vT.apply(this,arguments)}function zA(n,e){return _T.apply(this,arguments)}function _T(){return _T=(0,Ge.Z)(function*(n,e){const t=ct(n);t.asyncQueue.verifyOperationInProgress(),Xe("RemoteStore","RemoteStore received new credentials");const r=bh(t);t.lu.add(3),yield ly(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield t0(t)}),_T.apply(this,arguments)}function bT(n,e){return ET.apply(this,arguments)}function ET(){return ET=(0,Ge.Z)(function*(n,e){const t=ct(n);e?(t.lu.delete(2),yield t0(t)):e||(t.lu.add(2),yield ly(t),t._u.set("Unknown"))}),ET.apply(this,arguments)}function dy(n){return n.mu||(n.mu=function(e,t,r){const s=ct(e);return s.tu(),new tx(t,s.bo,s.authCredentials,s.appCheckCredentials,s.wt,r)}(n.datastore,n.asyncQueue,{zr:sx.bind(null,n),Jr:ax.bind(null,n),Go:ux.bind(null,n)}),n.fu.push(function(){var e=(0,Ge.Z)(function*(t){t?(n.mu.No(),lT(n)?uT(n):n._u.set("Unknown")):(yield n.mu.stop(),qA(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Eh(n){return n.gu||(n.gu=function(e,t,r){const s=ct(e);return s.tu(),new nx(t,s.bo,s.authCredentials,s.appCheckCredentials,s.wt,r)}(n.datastore,n.asyncQueue,{zr:dx.bind(null,n),Jr:px.bind(null,n),Yo:hx.bind(null,n),Jo:fx.bind(null,n)}),n.fu.push(function(){var e=(0,Ge.Z)(function*(t){t?(n.gu.No(),yield cy(n)):(yield n.gu.stop(),n.au.length>0&&(Xe("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class wT{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,s,u){const h=Date.now()+r,m=new wT(e,t,h,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Je(Ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hy(n,e){if(cr("AsyncQueue",`${e}: ${n}`),el(n))return new Je(Ue.UNAVAILABLE,`${e}: ${n}`);throw n}class fy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||at.comparator(t.key,r.key):(t,r)=>at.comparator(t.key,r.key),this.keyedMap=cp(),this.sortedSet=new $n(this.comparator)}static emptySet(e){return new fy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new fy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class WA{constructor(){this.yu=new $n(at.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):gt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class py{constructor(e,t,r,s,u,h,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,s){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new py(e,t,fy.emptySet(t),u,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ji(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class gx{constructor(){this.Iu=void 0,this.listeners=[]}}class mx{constructor(){this.queries=new ol(e=>UE(e),Ji),this.onlineState="Unknown",this.Tu=new Set}}function IT(n,e){return DT.apply(this,arguments)}function DT(){return DT=(0,Ge.Z)(function*(n,e){const t=ct(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new gx),s)try{u.Iu=yield t.onListen(r)}catch(h){const m=hy(h,`Initialization of query '${op(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Eu(t.onlineState),u.Iu&&e.Au(u.Iu)&&AT(t)}),DT.apply(this,arguments)}function TT(n,e){return CT.apply(this,arguments)}function CT(){return CT=(0,Ge.Z)(function*(n,e){const t=ct(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const h=u.listeners.indexOf(e);h>=0&&(u.listeners.splice(h,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),CT.apply(this,arguments)}function yx(n,e){const t=ct(n);let r=!1;for(const s of e){const h=t.queries.get(s.query);if(h){for(const m of h.listeners)m.Au(s)&&(r=!0);h.Iu=s}}r&&AT(t)}function vx(n,e,t){const r=ct(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function AT(n){n.Tu.forEach(e=>{e.next()})}class ST{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new py(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=py.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class _x{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class ZA{constructor(e){this.wt=e}Wi(e){return As(this.wt,e)}zi(e){return e.metadata.exists?x_(this.wt,e.document,!1):Fn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Br(e)}}class bx{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=KA(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=dn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new ZA(this.wt);for(const s of e)if(s.metadata.queries){const u=r.Wi(s.metadata.name);for(const h of s.metadata.queries){const m=(t.get(h)||Xt()).add(u);t.set(h,m)}}return t}complete(){var e=this;return(0,Ge.Z)(function*(){const t=yield function Q_(n,e,t,r){return Ep.apply(this,arguments)}(e.localStore,new ZA(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const s of e.queries)yield J_(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function KA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class YA{constructor(e){this.key=e}}class QA{constructor(e){this.key=e}}class JA{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Xt(),this.mutatedKeys=Xt(),this.Lu=jE(e),this.Uu=new fy(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new WA,s=t?t.Uu:this.Uu;let u=t?t.mutatedKeys:this.mutatedKeys,h=s,m=!1;const w="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,P="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((Q,se)=>{const Ie=s.get(Q),Me=bc(this.query,se)?se:null,Le=!!Ie&&this.mutatedKeys.has(Ie.key),et=!!Me&&(Me.hasLocalMutations||this.mutatedKeys.has(Me.key)&&Me.hasCommittedMutations);let ut=!1;Ie&&Me?Ie.data.isEqual(Me.data)?Le!==et&&(r.track({type:3,doc:Me}),ut=!0):this.Qu(Ie,Me)||(r.track({type:2,doc:Me}),ut=!0,(w&&this.Lu(Me,w)>0||P&&this.Lu(Me,P)<0)&&(m=!0)):!Ie&&Me?(r.track({type:0,doc:Me}),ut=!0):Ie&&!Me&&(r.track({type:1,doc:Ie}),ut=!0,(w||P)&&(m=!0)),ut&&(Me?(h=h.add(Me),u=et?u.add(Q):u.delete(Q)):(h=h.delete(Q),u=u.delete(Q)))}),null!==this.query.limit)for(;h.size>this.query.limit;){const Q="F"===this.query.limitType?h.last():h.first();h=h.delete(Q.key),u=u.delete(Q.key),r.track({type:1,doc:Q})}return{Uu:h,Gu:r,Mi:m,mutatedKeys:u}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const u=e.Gu.pu();u.sort((P,Q)=>function(se,Ie){const Me=Le=>{switch(Le){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return Me(se)-Me(Ie)}(P.type,Q.type)||this.Lu(P.doc,Q.doc)),this.ju(r);const h=t?this.Wu():[],m=0===this.Bu.size&&this.current?1:0,w=m!==this.$u;return this.$u=m,0!==u.length||w?{snapshot:new py(this.query,e.Uu,s,u,e.mutatedKeys,0===m,w,!1),zu:h}:{zu:h}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new WA,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Xt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new QA(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new YA(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Xt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return py.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Ex{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class wx{constructor(e){this.key=e,this.Xu=!1}}class Ix{constructor(e,t,r,s,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Zu={},this.tc=new ol(m=>UE(m),Ji),this.ec=new Map,this.nc=new Set,this.sc=new $n(at.comparator),this.ic=new Map,this.rc=new Cw,this.oc={},this.uc=new Map,this.cc=yh.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function Dx(n,e){return xT.apply(this,arguments)}function xT(){return xT=(0,Ge.Z)(function*(n,e){const t=JT(n);let r,s;const u=t.tc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.Yu();else{const h=yield We(t.localStore,Qi(e));t.isPrimaryClient&&xw(t.remoteStore,h);const m=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,s=yield OT(t,e,r,"current"===m)}return s}),xT.apply(this,arguments)}function OT(n,e,t,r){return MT.apply(this,arguments)}function MT(){return MT=(0,Ge.Z)(function*(n,e,t,r){n.hc=(Q,se,Ie)=>{return(Me=(0,Ge.Z)(function*(Le,et,ut,Gt){let Zt=et.view.Ku(ut);Zt.Mi&&(Zt=yield gn(Le.localStore,et.query,!1).then(({documents:Kt})=>et.view.Ku(Kt,Zt)));const on=Gt&&Gt.targetChanges.get(et.targetId),zt=et.view.applyChanges(Zt,Le.isPrimaryClient,on);return jT(Le,et.targetId,zt.zu),zt.snapshot}),function(Le,et,ut,Gt){return Me.apply(this,arguments)})(n,Q,se,Ie);var Me};const s=yield gn(n.localStore,e,!0),u=new JA(e,s.ji),h=u.Ku(s.documents),m=sl.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(h,n.isPrimaryClient,m);jT(n,t,w.zu);const P=new Ex(e,t,u);return n.tc.set(e,P),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),w.snapshot}),MT.apply(this,arguments)}function Tx(n,e){return NT.apply(this,arguments)}function NT(){return NT=(0,Ge.Z)(function*(n,e){const t=ct(n),r=t.tc.get(e),s=t.ec.get(r.targetId);if(s.length>1)return t.ec.set(r.targetId,s.filter(u=>!Ji(u,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Et(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),n0(t.remoteStore,r.targetId),gy(t,r.targetId)}).catch(Xu))):(gy(t,r.targetId),yield Et(t.localStore,r.targetId,!0))}),NT.apply(this,arguments)}function kT(){return kT=(0,Ge.Z)(function*(n,e,t){const r=XT(n);try{const s=yield function(u,h){const m=ct(u),w=Hn.now(),P=h.reduce((Ie,Me)=>Ie.add(Me.key),Xt());let Q,se;return m.persistence.runTransaction("Locally write mutations","readwrite",Ie=>{let Me=Xi(),Le=Xt();return m.Ui.getEntries(Ie,P).next(et=>{Me=et,Me.forEach((ut,Gt)=>{Gt.isValidDocument()||(Le=Le.add(ut))})}).next(()=>m.localDocuments.getOverlayedDocuments(Ie,Me)).next(et=>{Q=et;const ut=[];for(const Gt of h){const Zt=WE(Gt,Q.get(Gt.key).overlayedDocument);null!=Zt&&ut.push(new aa(Gt.key,Zt,vc(Zt.value.mapValue),Kn.exists(!0)))}return m.mutationQueue.addMutationBatch(Ie,w,ut,h)}).next(et=>{se=et;const ut=et.applyToLocalDocumentSet(Q,Le);return m.documentOverlayCache.saveOverlays(Ie,et.batchId,ut)})}).then(()=>({batchId:se.batchId,changes:KE(Q)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,h,m){let w=u.oc[u.currentUser.toKey()];w||(w=new $n($t)),w=w.insert(h,m),u.oc[u.currentUser.toKey()]=w}(r,s.batchId,t),yield Nc(r,s.changes),yield cy(r.remoteStore)}catch(s){const u=hy(s,"Failed to persist write");t.reject(u)}}),kT.apply(this,arguments)}function XA(n,e){return RT.apply(this,arguments)}function RT(){return RT=(0,Ge.Z)(function*(n,e){const t=ct(n);try{const r=yield nt(t.localStore,e);e.targetChanges.forEach((s,u)=>{const h=t.ic.get(u);h&&(Ut(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?h.Xu=!0:s.modifiedDocuments.size>0?Ut(h.Xu):s.removedDocuments.size>0&&(Ut(h.Xu),h.Xu=!1))}),yield Nc(t,r,e)}catch(r){yield Xu(r)}}),RT.apply(this,arguments)}function eS(n,e,t){const r=ct(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.tc.forEach((u,h)=>{const m=h.view.Eu(e);m.snapshot&&s.push(m.snapshot)}),function(u,h){const m=ct(u);m.onlineState=h;let w=!1;m.queries.forEach((P,Q)=>{for(const se of Q.listeners)se.Eu(h)&&(w=!0)}),w&&AT(m)}(r.eventManager,e),s.length&&r.Zu.Go(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ax(n,e,t){return PT.apply(this,arguments)}function PT(){return PT=(0,Ge.Z)(function*(n,e,t){const r=ct(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.ic.get(e),u=s&&s.key;if(u){let h=new $n(at.comparator);h=h.insert(u,Fn.newNoDocument(u,Vt.min()));const m=Xt().add(u),w=new uh(Vt.min(),new Map,new wn($t),h,m);yield XA(r,w),r.sc=r.sc.remove(u),r.ic.delete(e),qT(r)}else yield Et(r.localStore,e,!1).then(()=>gy(r,e,t)).catch(Xu)}),PT.apply(this,arguments)}function Sx(n,e){return LT.apply(this,arguments)}function LT(){return LT=(0,Ge.Z)(function*(n,e){const t=ct(n),r=e.batch.batchId;try{const s=yield Ne(t.localStore,e);BT(t,r,null),UT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Nc(t,s)}catch(s){yield Xu(s)}}),LT.apply(this,arguments)}function xx(n,e,t){return FT.apply(this,arguments)}function FT(){return FT=(0,Ge.Z)(function*(n,e,t){const r=ct(n);try{const s=yield function(u,h){const m=ct(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let P;return m.mutationQueue.lookupMutationBatch(w,h).next(Q=>(Ut(null!==Q),P=Q.keys(),m.mutationQueue.removeMutationBatch(w,Q))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,P,h)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,P)).next(()=>m.localDocuments.getDocuments(w,P))})}(r.localStore,e);BT(r,e,t),UT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Nc(r,s)}catch(s){yield Xu(s)}}),FT.apply(this,arguments)}function VT(){return VT=(0,Ge.Z)(function*(n,e){const t=ct(n);bh(t.remoteStore)||Xe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const h=ct(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.uc.get(r)||[];s.push(e),t.uc.set(r,s)}catch(r){const s=hy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),VT.apply(this,arguments)}function UT(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function BT(n,e,t){const r=ct(n);let s=r.oc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.oc[r.currentUser.toKey()]=s}}function gy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||tS(n,r)})}function tS(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(n0(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),qT(n))}function jT(n,e,t){for(const r of t)r instanceof YA?(n.rc.addReference(r.key,e),Mx(n,r)):r instanceof QA?(Xe("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||tS(n,r.key)):gt()}function Mx(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Xe("SyncEngine","New document in limbo: "+t),n.nc.add(r),qT(n))}function qT(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new at(dn.fromString(e)),r=n.cc.next();n.ic.set(r,new wx(t)),n.sc=n.sc.insert(t,r),xw(n.remoteStore,new Cc(Qi(eh(t.path)),r,2,Si.ot))}}function Nc(n,e,t){return HT.apply(this,arguments)}function HT(){return HT=(0,Ge.Z)(function*(n,e,t){const r=ct(n),s=[],u=[],h=[];var m;r.tc.isEmpty()||(r.tc.forEach((m,w)=>{h.push(r.hc(w,e,t).then(P=>{if(P){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,P.fromCache?"not-current":"current"),s.push(P);const Q=D.Vi(w.targetId,P);u.push(Q)}}))}),yield Promise.all(h),r.Zu.Go(s),yield(m=(0,Ge.Z)(function*(w,P){const Q=ct(w);try{yield Q.persistence.runTransaction("notifyLocalViewChanges","readwrite",se=>Fe.forEach(P,Ie=>Fe.forEach(Ie.Pi,Me=>Q.persistence.referenceDelegate.addReference(se,Ie.targetId,Me)).next(()=>Fe.forEach(Ie.vi,Me=>Q.persistence.referenceDelegate.removeReference(se,Ie.targetId,Me)))))}catch(se){if(!el(se))throw se;Xe("LocalStore","Failed to update sequence numbers: "+se)}for(const se of P){const Ie=se.targetId;if(!se.fromCache){const Me=Q.$i.get(Ie),et=Me.withLastLimboFreeSnapshotVersion(Me.snapshotVersion);Q.$i=Q.$i.insert(Ie,et)}}}),function(w,P){return m.apply(this,arguments)})(r.localStore,u))}),HT.apply(this,arguments)}function Nx(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,Ge.Z)(function*(n,e){const t=ct(n);if(!t.currentUser.isEqual(e)){Xe("SyncEngine","User change. New user:",e.toKey());const r=yield pe(t.localStore,e);t.currentUser=e,(s=t).uc.forEach(h=>{h.forEach(m=>{m.reject(new Je(Ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Nc(t,r.Ki)}var s}),$T.apply(this,arguments)}function kx(n,e){const t=ct(n),r=t.ic.get(e);if(r&&r.Xu)return Xt().add(r.key);{let s=Xt();const u=t.ec.get(e);if(!u)return s;for(const h of u){const m=t.tc.get(h);s=s.unionWith(m.view.qu)}return s}}function Rx(n,e){return GT.apply(this,arguments)}function GT(){return GT=(0,Ge.Z)(function*(n,e){const t=ct(n),r=yield gn(t.localStore,e.query,!0),s=e.view.Ju(r);return t.isPrimaryClient&&jT(t,e.targetId,s.zu),s}),GT.apply(this,arguments)}function Px(n,e){return zT.apply(this,arguments)}function zT(){return zT=(0,Ge.Z)(function*(n,e){const t=ct(n);return ll(t.localStore,e).then(r=>Nc(t,r))}),zT.apply(this,arguments)}function Lx(n,e,t,r){return WT.apply(this,arguments)}function WT(){return WT=(0,Ge.Z)(function*(n,e,t,r){const s=ct(n),u=yield function(h,m){const w=ct(h),P=ct(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",Q=>P.yn(Q,m).next(se=>se?w.localDocuments.getDocuments(Q,se):Fe.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield cy(s.remoteStore):"acknowledged"===t||"rejected"===t?(BT(s,e,r||null),UT(s,e),m=e,ct(ct(s.localStore).mutationQueue).In(m)):gt(),yield Nc(s,u)):Xe("SyncEngine","Cannot apply mutation batch with id: "+e)}),WT.apply(this,arguments)}function ZT(){return ZT=(0,Ge.Z)(function*(n,e){const t=ct(n);if(JT(t),XT(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield nS(t,r.toArray());t.ac=!0,yield bT(t.remoteStore,!0);for(const u of s)xw(t.remoteStore,u)}else if(!1===e&&!1!==t.ac){const r=[];let s=Promise.resolve();t.ec.forEach((u,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):s=s.then(()=>(gy(t,h),Et(t.localStore,h,!0))),n0(t.remoteStore,h)}),yield s,yield nS(t,r),function(u){const h=ct(u);h.ic.forEach((m,w)=>{n0(h.remoteStore,w)}),h.rc.cs(),h.ic=new Map,h.sc=new $n(at.comparator)}(t),t.ac=!1,yield bT(t.remoteStore,!1)}}),ZT.apply(this,arguments)}function nS(n,e,t){return KT.apply(this,arguments)}function KT(){return KT=(0,Ge.Z)(function*(n,e,t){const r=ct(n),s=[],u=[];for(const h of e){let m;const w=r.ec.get(h);if(w&&0!==w.length){m=yield We(r.localStore,Qi(w[0]));for(const P of w){const Q=r.tc.get(P),se=yield Rx(r,Q);se.snapshot&&u.push(se.snapshot)}}else{const P=yield eo(r.localStore,h);m=yield We(r.localStore,P),yield OT(r,rS(P),h,!1)}s.push(m)}return r.Zu.Go(u),s}),KT.apply(this,arguments)}function rS(n){return FE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Vx(n){const e=ct(n);return ct(ct(e.localStore).persistence).Ri()}function Ux(n,e,t,r){return YT.apply(this,arguments)}function YT(){return YT=(0,Ge.Z)(function*(n,e,t,r){const s=ct(n);if(s.ac)return void Xe("SyncEngine","Ignoring unexpected query state notification.");const u=s.ec.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const h=yield ll(s.localStore,BE(u[0])),m=uh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Nc(s,h,m);break}case"rejected":yield Et(s.localStore,e,!0),gy(s,e,r);break;default:gt()}}),YT.apply(this,arguments)}function Bx(n,e,t){return QT.apply(this,arguments)}function QT(){return QT=(0,Ge.Z)(function*(n,e,t){const r=JT(n);if(r.ac){for(const s of e){if(r.ec.has(s)){Xe("SyncEngine","Adding an already active target "+s);continue}const u=yield eo(r.localStore,s),h=yield We(r.localStore,u);yield OT(r,rS(u),h.targetId,!1),xw(r.remoteStore,h)}for(const s of t)r.ec.has(s)&&(yield Et(r.localStore,s,!1).then(()=>{n0(r.remoteStore,s),gy(r,s)}).catch(Xu))}}),QT.apply(this,arguments)}function JT(n){const e=ct(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=XA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ax.bind(null,e),e.Zu.Go=yx.bind(null,e.eventManager),e.Zu.lc=vx.bind(null,e.eventManager),e}function XT(n){const e=ct(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Sx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xx.bind(null,e),e}class iS{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ge.Z)(function*(){t.wt=e0(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return re(this.persistence,new N,e.initialUser,this.wt)}_c(e){return new eT(Y_.Os,this.wt)}dc(e){return new FA}terminate(){var e=this;return(0,Ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class oS extends iS{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ge.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield XT(r.yc.syncEngine),yield cy(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return re(this.persistence,new N,e.initialUser,this.wt)}mc(e,t){return new ww(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new dD(t,this.persistence);return new cD(e.asyncQueue,r)}_c(e){const t=v(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?vi.withCacheSize(this.cacheSizeBytes):vi.DEFAULT;return new l(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,UA(),Sw(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new FA}}class qx extends oS{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ge.Z)(function*(){yield t().call(r,e);const s=r.yc.syncEngine;r.sharedClientState instanceof rT&&(r.sharedClientState.syncEngine={kr:Lx.bind(null,s),Mr:Ux.bind(null,s),Or:Bx.bind(null,s),Ri:Vx.bind(null,s),Nr:Px.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var u=(0,Ge.Z)(function*(h){yield function Fx(n,e){return ZT.apply(this,arguments)}(r.yc.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start():h||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(h&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():h||r.indexBackfillerScheduler.stop())});return function(h){return u.apply(this,arguments)}}())})()}dc(e){const t=UA();if(!rT.V(t))throw new Je(Ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=v(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new rT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class eC{initialize(e,t){var r=this;return(0,Ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>eS(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=Nx.bind(null,r.syncEngine),yield bT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new mx}createDatastore(e){const t=e0(e.databaseInfo.databaseId),r=new ex(e.databaseInfo);return new rx(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>eS(this.syncEngine,m,0),h=VA.V()?new VA:new Q1,new ox(t,r,s,u,h);var t,r,s,u,h}createSyncEngine(e,t){return function(r,s,u,h,m,w,P){const Q=new Ix(r,s,u,h,m,w);return P&&(Q.ac=!0),Q}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ge.Z)(function*(t){const r=ct(t);Xe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield ly(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function sS(n,e=10240){let t=0;return{read:()=>(0,Ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Mw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Hx{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Fr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Ge.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Ge.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Ge.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),s=Number(r);isNaN(s)&&e.Pc(`length string (${r}) is not valid number`);const u=yield e.vc(s);return new _x(JSON.parse(u),t.length+s)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Ge.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,Ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Ge.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class $x{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Je(Ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,Ge.Z)(function*(u,h){const m=ct(u),w=hp(m.wt)+"/documents",P={documents:h.map(Me=>ch(m.wt,Me))},Q=yield m.ao("BatchGetDocuments",w,P,h.length),se=new Map;Q.forEach(Me=>{const Le=function bA(n,e){return"found"in e?function(t,r){Ut(!!r.found);const s=As(t,r.found.name),u=Br(r.found.updateTime),h=new Ur({mapValue:{fields:r.found.fields}});return Fn.newFoundDocument(s,u,h)}(n,e):"missing"in e?function(t,r){Ut(!!r.missing),Ut(!!r.readTime);const s=As(t,r.missing),u=Br(r.readTime);return Fn.newNoDocument(s,u)}(n,e):gt()}(m.wt,Me);se.set(Le.key.toString(),Le)});const Ie=[];return h.forEach(Me=>{const Le=se.get(Me.toString());Ut(!!Le),Ie.push(Le)}),Ie}),function(u,h){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ih(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=at.fromPath(s);e.mutations.push(new ei(u,e.precondition(u)))}),yield(r=(0,Ge.Z)(function*(s,u){const h=ct(s),m=hp(h.wt)+"/documents",w={writes:u.map(P=>Km(h.wt,P))};yield h.ro("Commit",m,w)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gt();t=Vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Je(Ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Kn.updateTime(t):Kn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Vt.min()))throw new Je(Ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kn.updateTime(t)}return Kn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Gx{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Dc=r.maxAttempts,this.So=new iT(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Ge.Z)(function*(){const t=new $x(e.datastore),r=e.xc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Nc(u)}))}).catch(s=>{e.Nc(s)})}))}xc(e){try{const t=this.updateFunction(e);return!tu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!CD(t)}return!1}}class zx{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Or.UNAUTHENTICATED,this.clientId=vE.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,Ge.Z)(function*(m){Xe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(Xe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,Ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Je(Ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=hy(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function aS(n,e){return tC.apply(this,arguments)}function tC(){return tC=(0,Ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Xe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,Ge.Z)(function*(u){r.isEqual(u)||(yield pe(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),tC.apply(this,arguments)}function uS(n,e){return nC.apply(this,arguments)}function nC(){return nC=(0,Ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield rC(n);Xe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>zA(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>zA(e.remoteStore,u)),n.onlineComponents=e}),nC.apply(this,arguments)}function rC(n){return iC.apply(this,arguments)}function iC(){return iC=(0,Ge.Z)(function*(n){return n.offlineComponents||(Xe("FirestoreClient","Using default OfflineComponentProvider"),yield aS(n,new iS)),n.offlineComponents}),iC.apply(this,arguments)}function Nw(n){return oC.apply(this,arguments)}function oC(){return oC=(0,Ge.Z)(function*(n){return n.onlineComponents||(Xe("FirestoreClient","Using default OnlineComponentProvider"),yield uS(n,new eC)),n.onlineComponents}),oC.apply(this,arguments)}function lS(n){return rC(n).then(e=>e.persistence)}function kw(n){return rC(n).then(e=>e.localStore)}function cS(n){return Nw(n).then(e=>e.remoteStore)}function sC(n){return Nw(n).then(e=>e.syncEngine)}function my(n){return aC.apply(this,arguments)}function aC(){return aC=(0,Ge.Z)(function*(n){const e=yield Nw(n),t=e.eventManager;return t.onListen=Dx.bind(null,e.syncEngine),t.onUnlisten=Tx.bind(null,e.syncEngine),t}),aC.apply(this,arguments)}function dS(n,e,t={}){const r=new Fr;return n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function(s,u,h,m,w){const P=new Mw({next:se=>{u.enqueueAndForget(()=>TT(s,Q));const Ie=se.docs.has(h);!Ie&&se.fromCache?w.reject(new Je(Ue.UNAVAILABLE,"Failed to get document because the client is offline.")):Ie&&se.fromCache&&m&&"server"===m.source?w.reject(new Je(Ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(se)},error:se=>w.reject(se)}),Q=new ST(eh(h.path),P,{includeMetadataChanges:!0,Du:!0});return IT(s,Q)}(yield my(n),n.asyncQueue,e,t,r)})),r.promise}function hS(n,e,t={}){const r=new Fr;return n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function(s,u,h,m,w){const P=new Mw({next:se=>{u.enqueueAndForget(()=>TT(s,Q)),se.fromCache&&"server"===m.source?w.reject(new Je(Ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(se)},error:se=>w.reject(se)}),Q=new ST(h,P,{includeMetadataChanges:!0,Du:!0});return IT(s,Q)}(yield my(n),n.asyncQueue,e,t,r)})),r.promise}const fS=new Map;function uC(n,e,t){if(!t)throw new Je(Ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function pS(n,e,t,r){if(!0===e&&!0===r)throw new Je(Ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function gS(n){if(!at.isDocumentKey(n))throw new Je(Ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mS(n){if(at.isDocumentKey(n))throw new Je(Ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Rw(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":gt()}function mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Je(Ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rw(n);throw new Je(Ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function yS(n,e){if(e<=0)throw new Je(Ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class vS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Je(Ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Je(Ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,pS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class r0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vS({}),this._settingsFrozen=!1,e instanceof Yi?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Je(Ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yi(s.options.projectId)}(e))}get app(){if(!this._app)throw new Je(Ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Je(Ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new gA;switch(t.type){case"gapi":const r=t.client;return Ut(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new Cm(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Je(Ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=fS.get(e);t&&(Xe("ComponentProvider","Removing Datastore"),fS.delete(e),t.terminate())}(this),Promise.resolve()}}class Yn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yn(this.firestore,e,this._key)}}class to{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new to(this.firestore,e,this._query)}}class cl extends to{constructor(e,t,r){super(e,t,eh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yn(this.firestore,null,new at(e))}withConverter(e){return new cl(this.firestore,e,this._path)}}function _S(n,e,...t){if(n=(0,nn.m9)(n),uC("collection","path",e),n instanceof r0){const r=dn.fromString(e,...t);return mS(r),new cl(n,null,r)}{if(!(n instanceof Yn||n instanceof cl))throw new Je(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return mS(r),new cl(n.firestore,null,r)}}function Pw(n,e,...t){if(n=(0,nn.m9)(n),1===arguments.length&&(e=vE.I()),uC("doc","path",e),n instanceof r0){const r=dn.fromString(e,...t);return gS(r),new Yn(n,null,new at(r))}{if(!(n instanceof Yn||n instanceof cl))throw new Je(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return gS(r),new Yn(n.firestore,n instanceof cl?n.converter:null,new at(r))}}function bS(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),(n instanceof Yn||n instanceof cl)&&(e instanceof Yn||e instanceof cl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ES(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),n instanceof to&&e instanceof to&&n.firestore===e.firestore&&Ji(n._query,e._query)&&n.converter===e.converter}class rO{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new iT(this,"async_queue_retry"),this.Kc=()=>{const t=Sw();t&&Xe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Sw();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=Sw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Fr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return(0,Ge.Z)(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(t){if(!el(t))throw t;Xe("AsyncQueue","Operation failed with retryable error: "+t)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,cr("INTERNAL UNHANDLED ERROR: ",function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),h}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Mc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const s=wT.createAndSchedule(this,e,t,r,u=>this.Wc(u));return this.$c.push(s),s}Gc(){this.Bc&&gt()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ge.Z)(function*(){let t;do{t=e.Mc,yield t}while(t!==e.Mc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function lC(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class iO{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ir extends r0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new rO,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||wS(this),this._firestoreClient.terminate()}}function qr(n){return n._firestoreClient||wS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function wS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new pD(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new zx(n._authCredentials,n._appCheckCredentials,n._queue,r)}function IS(n,e,t){const r=new Fr;return n.asyncQueue.enqueue((0,Ge.Z)(function*(){try{yield aS(n,t),yield uS(n,e),r.resolve()}catch(s){const u=s;if(!("FirebaseError"===(h=u).name?h.code===Ue.FAILED_PRECONDITION||h.code===Ue.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code))throw u;dc("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var h})).then(()=>r.promise)}function DS(n){if(n._initialized||n._terminated)throw new Je(Ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class kc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Je(Ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class dl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dl(_r.fromBase64String(e))}catch(t){throw new Je(Ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new dl(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Dp{constructor(e){this._methodName=e}}class Lw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Je(Ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Je(Ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const pO=/^__.*__$/;class gO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new aa(e,this.data,this.fieldMask,t,this.fieldTransforms):new rh(e,this.data,t,this.fieldTransforms)}}class TS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new aa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class Fw{constructor(e,t,r,s,u,h){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=s,void 0===u&&this.Xc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new Fw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ta({path:r,na:!1});return s.sa(e),s}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ta({path:r,na:!1});return s.Xc(),s}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return Bw(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(CS(this.Zc)&&pO.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class mO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||e0(e)}aa(e,t,r,s=!1){return new Fw({Zc:e,methodName:t,ca:r,path:nr.emptyPath(),na:!1,ua:s},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Tp(n){const e=n._freezeSettings(),t=e0(n._databaseId);return new mO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Vw(n,e,t,r,s,u={}){const h=n.aa(u.merge||u.mergeFields?2:0,e,t,s);fC("Data must be an object, but it was:",h,r);const m=xS(r,h);let w,P;if(u.merge)w=new xi(h.fieldMask),P=h.fieldTransforms;else if(u.mergeFields){const Q=[];for(const se of u.mergeFields){const Ie=pC(e,se,t);if(!h.contains(Ie))throw new Je(Ue.INVALID_ARGUMENT,`Field '${Ie}' is specified in your field mask but missing from your input data.`);MS(Q,Ie)||Q.push(Ie)}w=new xi(Q),P=h.fieldTransforms.filter(se=>w.covers(se.field))}else w=null,P=h.fieldTransforms;return new gO(new Ur(m),w,P)}class o0 extends Dp{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof o0}}function AS(n,e,t){return new Fw({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class cC extends Dp{_toFieldTransform(e){return new Ic(e.path,new Ec)}isEqual(e){return e instanceof cC}}class yO extends Dp{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=AS(this,e,!0),r=this.ha.map(u=>Cp(u,t)),s=new wc(r);return new Ic(e.path,s)}isEqual(e){return this===e}}class vO extends Dp{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=AS(this,e,!0),r=this.ha.map(u=>Cp(u,t)),s=new nh(r);return new Ic(e.path,s)}isEqual(e){return this===e}}class _O extends Dp{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new il(e.wt,qE(e.wt,this.la));return new Ic(e.path,t)}isEqual(e){return this===e}}function dC(n,e,t,r){const s=n.aa(1,e,t);fC("Data must be an object, but it was:",s,r);const u=[],h=Ur.empty();pc(r,(w,P)=>{const Q=Uw(e,w,t);P=(0,nn.m9)(P);const se=s.ia(Q);if(P instanceof o0)u.push(Q);else{const Ie=Cp(P,se);null!=Ie&&(u.push(Q),h.set(Q,Ie))}});const m=new xi(u);return new TS(h,m,s.fieldTransforms)}function hC(n,e,t,r,s,u){const h=n.aa(1,e,t),m=[pC(e,r,t)],w=[s];if(u.length%2!=0)throw new Je(Ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ie=0;Ie<u.length;Ie+=2)m.push(pC(e,u[Ie])),w.push(u[Ie+1]);const P=[],Q=Ur.empty();for(let Ie=m.length-1;Ie>=0;--Ie)if(!MS(P,m[Ie])){const Me=m[Ie];let Le=w[Ie];Le=(0,nn.m9)(Le);const et=h.ia(Me);if(Le instanceof o0)P.push(Me);else{const ut=Cp(Le,et);null!=ut&&(P.push(Me),Q.set(Me,ut))}}const se=new xi(P);return new TS(Q,se,h.fieldTransforms)}function SS(n,e,t,r=!1){return Cp(t,n.aa(r?4:3,e))}function Cp(n,e){if(OS(n=(0,nn.m9)(n)))return fC("Unsupported field value:",e,n),xS(n,e);if(n instanceof Dp)return function(t,r){if(!CS(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const h of t){let m=Cp(h,r.ra(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,nn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return qE(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Hn.fromDate(t);return{timestampValue:lh(r.wt,s)}}if(t instanceof Hn){const s=new Hn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:lh(r.wt,s)}}if(t instanceof Lw)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof dl)return{bytesValue:A_(r.wt,t._byteString)};if(t instanceof Yn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.oa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Wm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${Rw(t)}`)}(n,e)}function xS(n,e){const t={};return IE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pc(n,(r,s)=>{const u=Cp(s,e.ea(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function OS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Hn||n instanceof Lw||n instanceof dl||n instanceof Yn||n instanceof Dp)}function fC(n,e,t){if(!OS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Rw(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function pC(n,e,t){if((e=(0,nn.m9)(e))instanceof kc)return e._internalPath;if("string"==typeof e)return Uw(n,e);throw Bw("Field path arguments must be of type string or ",n,!1,void 0,t)}const bO=new RegExp("[~\\*/\\[\\]]");function Uw(n,e,t){if(e.search(bO)>=0)throw Bw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new kc(...e.split("."))._internalPath}catch(r){throw Bw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Bw(n,e,t,r,s){const u=r&&!r.isEmpty(),h=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||h)&&(w+=" (found",u&&(w+=` in field ${r}`),h&&(w+=` in document ${s}`),w+=")"),new Je(Ue.INVALID_ARGUMENT,m+n+w)}function MS(n,e){return n.some(t=>t.isEqual(e))}class s0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Yn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new EO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class EO extends s0{data(){return super.data()}}function jw(n,e){return"string"==typeof e?Uw(n,e):e instanceof kc?e._internalPath:e._delegate._internalPath}class Ap{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rc extends s0{constructor(e,t,r,s,u,h){super(e,t,r,s,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new a0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(jw("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class a0 extends Rc{data(e={}){return super.data(e)}}class wh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ap(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new a0(this._firestore,this._userDataWriter,r.key,r,new Ap(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Je(Ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new a0(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Ap(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>s||3!==h.type).map(h=>{const m=new a0(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Ap(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,P=-1;return 0!==h.type&&(w=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),1!==h.type&&(u=u.add(h.doc),P=u.indexOf(h.doc.key)),{type:wO(h.type),doc:m,oldIndex:w,newIndex:P}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function wO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}function NS(n,e){return n instanceof Rc&&e instanceof Rc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof wh&&e instanceof wh&&n._firestore===e._firestore&&ES(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function kS(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Je(Ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u0{}function Ih(n,...e){for(const t of e)n=t._apply(n);return n}class IO extends u0{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=Tp(e.firestore),r=function(s,u,h,m,w,P,Q){let se;if(w.isKeyField()){if("array-contains"===P||"array-contains-any"===P)throw new Je(Ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${P}' queries on documentId().`);if("in"===P||"not-in"===P){US(Q,P);const Me=[];for(const Le of Q)Me.push(VS(m,s,Le));se={arrayValue:{values:Me}}}else se=VS(m,s,Q)}else"in"!==P&&"not-in"!==P&&"array-contains-any"!==P||US(Q,P),se=SS(h,"where",Q,"in"===P||"not-in"===P);const Ie=Xr.create(w,P,se);return function(Me,Le){if(Le.ht()){const ut=y_(Me);if(null!==ut&&!ut.isEqual(Le.field))throw new Je(Ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ut.toString()}' and '${Le.field.toString()}'`);const Gt=m_(Me);null!==Gt&&BS(0,Le.field,Gt)}const et=function(ut,Gt){for(const Zt of ut.filters)if(Gt.indexOf(Zt.op)>=0)return Zt.op;return null}(Me,function(ut){switch(ut){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Le.op));if(null!==et)throw new Je(Ue.INVALID_ARGUMENT,et===Le.op?`Invalid query. You cannot use more than one '${Le.op.toString()}' filter.`:`Invalid query. You cannot use '${Le.op.toString()}' filters with '${et.toString()}' filters.`)}(s,Ie),Ie}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new to(e.firestore,e.converter,function(s,u){const h=s.filters.concat([u]);return new ou(s.path,s.collectionGroup,s.explicitOrderBy.slice(),h,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class TO extends u0{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Je(Ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Je(Ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new _c(s,u);return function(m,w){if(null===m_(m)){const P=y_(m);null!==P&&BS(0,P,w.field)}}(r,h),h}(e._query,this.fa,this.wa);return new to(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new ou(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class RS extends u0{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new to(e.firestore,e.converter,th(e._query,this.ma,this.ga))}}class PS extends u0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=FS(e,this.type,this.ya,this.pa);return new to(e.firestore,e.converter,(s=t,new ou((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class LS extends u0{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=FS(e,this.type,this.ya,this.pa);return new to(e.firestore,e.converter,(s=t,new ou((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function FS(n,e,t,r){if(t[0]=(0,nn.m9)(t[0]),t[0]instanceof s0)return function(s,u,h,m,w){if(!m)throw new Je(Ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const P=[];for(const Q of sa(s))if(Q.field.isKeyField())P.push(Cs(u,m.key));else{const se=m.data.field(Q.field);if(TE(se))throw new Je(Ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===se){const Ie=Q.field.canonicalString();throw new Je(Ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ie}' (used as the orderBy) does not exist.`)}P.push(se)}return new iu(P,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Tp(n.firestore);return function(u,h,m,w,P,Q){const se=u.explicitOrderBy;if(P.length>se.length)throw new Je(Ue.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ie=[];for(let Me=0;Me<P.length;Me++){const Le=P[Me];if(se[Me].field.isKeyField()){if("string"!=typeof Le)throw new Je(Ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof Le}`);if(!v_(u)&&-1!==Le.indexOf("/"))throw new Je(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${Le}' contains a slash.`);const et=u.path.child(dn.fromString(Le));if(!at.isDocumentKey(et))throw new Je(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${et}' is not because it contains an odd number of segments.`);const ut=new at(et);Ie.push(Cs(h,ut))}else{const et=SS(m,w,Le);Ie.push(et)}}return new iu(Ie,Q)}(n._query,n.firestore._databaseId,s,e,t,r)}}function VS(n,e,t){if("string"==typeof(t=(0,nn.m9)(t))){if(""===t)throw new Je(Ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!v_(e)&&-1!==t.indexOf("/"))throw new Je(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dn.fromString(t));if(!at.isDocumentKey(r))throw new Je(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cs(n,new at(r))}if(t instanceof Yn)return Cs(n,t._key);throw new Je(Ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rw(t)}.`)}function US(n,e){if(!Array.isArray(n)||0===n.length)throw new Je(Ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Je(Ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function BS(n,e,t){if(!t.isEqual(e))throw new Je(Ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const kO={maxAttempts:5};class gC{convertValue(e,t="none"){switch(gc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gt()}}convertObject(e,t){const r={};return pc(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Lw(rr(e.latitude),rr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=CE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nl(e));default:return null}}convertTimestamp(e){const t=eu(e);return new Hn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dn.fromString(e);Ut(N_(r));const s=new Yi(r.get(1),r.get(3)),u=new at(r.popFirst(5));return s.isEqual(t)||cr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function qw(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class RO extends gC{constructor(e){super(),this.firestore=e}convertBytes(e){return new dl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}}class jS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tp(e)}set(e,t,r){this._verifyNotCommitted();const s=Dh(e,this._firestore),u=qw(s.converter,t,r),h=Vw(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(h.toMutation(s._key,Kn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Dh(e,this._firestore);let h;return h="string"==typeof(t=(0,nn.m9)(t))||t instanceof kc?hC(this._dataReader,"WriteBatch.update",u._key,t,r,s):dC(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,Kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Dh(e,this._firestore);return this._mutations=this._mutations.concat(new ih(t._key,Kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Je(Ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Dh(n,e){if((n=(0,nn.m9)(n)).firestore!==e)throw new Je(Ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Sp extends gC{constructor(e){super(),this.firestore=e}convertBytes(e){return new dl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yn(this.firestore,null,t)}}function qS(n,e,t){n=mn(n,Yn);const r=mn(n.firestore,ir),s=qw(n.converter,e,t);return yy(r,[Vw(Tp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Kn.none())])}function HS(n,e,t,...r){n=mn(n,Yn);const s=mn(n.firestore,ir),u=Tp(s);let h;return h="string"==typeof(e=(0,nn.m9)(e))||e instanceof kc?hC(u,"updateDoc",n._key,e,t,r):dC(u,"updateDoc",n._key,e),yy(s,[h.toMutation(n._key,Kn.exists(!0))])}function $S(n,...e){var t,r,s;n=(0,nn.m9)(n);let u={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||lC(e[h])||(u=e[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges};if(lC(e[h])){const se=e[h];e[h]=null===(t=se.next)||void 0===t?void 0:t.bind(se),e[h+1]=null===(r=se.error)||void 0===r?void 0:r.bind(se),e[h+2]=null===(s=se.complete)||void 0===s?void 0:s.bind(se)}let w,P,Q;if(n instanceof Yn)P=mn(n.firestore,ir),Q=eh(n._key.path),w={next:se=>{e[h]&&e[h](mC(P,n,se))},error:e[h+1],complete:e[h+2]};else{const se=mn(n,to);P=mn(se.firestore,ir),Q=se._query;const Ie=new Sp(P);w={next:Me=>{e[h]&&e[h](new wh(P,Ie,se,Me))},error:e[h+1],complete:e[h+2]},kS(n._query)}return function(se,Ie,Me,Le){const et=new Mw(Le),ut=new ST(Ie,et,Me);return se.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return IT(yield my(se),ut)})),()=>{et.Tc(),se.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return TT(yield my(se),ut)}))}}(qr(P),Q,m,w)}function yy(n,e){return function(t,r){const s=new Fr;return t.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function Cx(n,e,t){return kT.apply(this,arguments)}(yield sC(t),r,s)})),s.promise}(qr(n),e)}function mC(n,e,t){const r=t.docs.get(e._key),s=new Sp(n);return new Rc(n,s,e._key,r,new Ap(t.hasPendingWrites,t.fromCache),e.converter)}class $O extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Tp(e)}get(e){const t=Dh(e,this._firestore),r=new RO(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return gt();const u=s[0];if(u.isFoundDocument())return new s0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new s0(this._firestore,r,t._key,null,t.converter);throw gt()})}set(e,t,r){const s=Dh(e,this._firestore),u=qw(s.converter,t,r),h=Vw(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,h),this}update(e,t,r,...s){const u=Dh(e,this._firestore);let h;return h="string"==typeof(t=(0,nn.m9)(t))||t instanceof kc?hC(this._dataReader,"Transaction.update",u._key,t,r,s):dC(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,h),this}delete(e){const t=Dh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Dh(e,this._firestore),r=new Sp(this._firestore);return super.get(e).then(s=>new Rc(this._firestore,r,t._key,s._document,new Ap(!1,!1),t.converter))}}function yC(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Je("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function zS(){if("undefined"==typeof Uint8Array)throw new Je("unimplemented","Uint8Arrays are not available in this environment.")}function WS(){if(!function hD(){return"undefined"!=typeof atob}())throw new Je("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){cc=Yr.SDK_VERSION,(0,Yr._registerComponent)(new fv.wA("firestore",(t,{options:r})=>{const s=t.getProvider("app").getImmediate(),u=new ir(s,new yA(t.getProvider("auth-internal")),new sD(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Yr.registerVersion)(Kf,"3.4.14",n),(0,Yr.registerVersion)(Kf,"3.4.14","esm2017")}();class l0{constructor(e){this._delegate=e}static fromBase64String(e){return WS(),new l0(dl.fromBase64String(e))}static fromUint8Array(e){return zS(),new l0(dl.fromUint8Array(e))}toBase64(){return WS(),this._delegate.toBase64()}toUint8Array(){return zS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vC(n){return function XO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class eM{enableIndexedDbPersistence(e,t){return function sO(n,e){DS(n=mn(n,ir));const t=qr(n),r=n._freezeSettings(),s=new eC;return IS(t,s,new oS(s,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function aO(n){DS(n=mn(n,ir));const e=qr(n),t=n._freezeSettings(),r=new eC;return IS(e,r,new qx(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function uO(n){if(n._initialized&&!n._terminated)throw new Je(Ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Fr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ge.Z)(function*(){try{yield(t=(0,Ge.Z)(function*(r){if(!Ts.V())return Promise.resolve();const s=r+"main";yield Ts.delete(s)}),function(r){return t.apply(this,arguments)})(v(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ZS{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Yi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&dc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function tO(n,e,t,r={}){var s;const u=(n=mn(n,r0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&dc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=Or.MOCK_USER;else{h=(0,nn.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Je(Ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Or(w)}n._authCredentials=new mA(new oD(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function cO(n){return function Wx(n){return n.asyncQueue.enqueue((0,Ge.Z)(function*(){const e=yield lS(n),t=yield cS(n);return e.setNetworkEnabled(!0),function(r){const s=ct(r);return s.lu.delete(0),t0(s)}(t)}))}(qr(n=mn(n,ir)))}(this._delegate)}disableNetwork(){return function dO(n){return function Zx(n){return n.asyncQueue.enqueue((0,Ge.Z)(function*(){const e=yield lS(n),t=yield cS(n);return e.setNetworkEnabled(!1),(r=(0,Ge.Z)(function*(s){const u=ct(s);u.lu.add(0),yield ly(u),u._u.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(qr(n=mn(n,ir)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,pS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function lO(n){return function(e){const t=new Fr;return e.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function Ox(n,e){return VT.apply(this,arguments)}(yield sC(e),t)})),t.promise}(qr(n=mn(n,ir)))}(this._delegate)}onSnapshotsInSync(e){return function HO(n,e){return function Qx(n,e){const t=new Mw(e);return n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return r=yield my(n),s=t,ct(r).Tu.add(s),void s.next();var r,s})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return r=yield my(n),s=t,void ct(r).Tu.delete(s);var r,s}))}}(qr(n=mn(n,ir)),lC(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Je("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vy(this,_S(this._delegate,e))}catch(t){throw bo(t,"collection()","Firestore.collection()")}}doc(e){try{return new la(this,Pw(this._delegate,e))}catch(t){throw bo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Eo(this,function nO(n,e){if(n=mn(n,r0),uC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Je(Ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new to(n,null,(t=e,new ou(dn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw bo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function GO(n,e,t){n=mn(n,ir);const r=Object.assign(Object.assign({},kO),t);return function(s){if(s.maxAttempts<1)throw new Je(Ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function Jx(n,e,t){const r=new Fr;return n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){const s=yield(u=n,Nw(u).then(h=>h.datastore));var u;new Gx(n.asyncQueue,s,t,e,r).run()})),r.promise}(qr(n),s=>e(new $O(n,s)),r)}(this._delegate,t=>e(new KS(this,t)))}batch(){return qr(this._delegate),new YS(new jS(this._delegate,e=>yy(this._delegate,e)))}loadBundle(e){return function hO(n,e){const t=qr(n=mn(n,ir)),r=new iO;return function Xx(n,e,t,r){const s=function(u,h){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,P){if(w instanceof Uint8Array)return sS(w,P);if(w instanceof ArrayBuffer)return sS(new Uint8Array(w),P);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new Hx(w,h);var w}(t,e0(e));n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){!function jx(n,e,t){const r=ct(n);var s;(s=(0,Ge.Z)(function*(u,h,m){try{const w=yield h.getMetadata();if(yield function(Ie,Me){const Le=ct(Ie),et=Br(Me.createTime);return Le.persistence.runTransaction("hasNewerBundle","readonly",ut=>Le.Ds.getBundleMetadata(ut,Me.id)).then(ut=>!!ut&&ut.createTime.compareTo(et)>=0)}(u.localStore,w))return yield h.close(),m._completeWith({taskState:"Success",documentsLoaded:(Ie=w).totalDocuments,bytesLoaded:Ie.totalBytes,totalDocuments:Ie.totalDocuments,totalBytes:Ie.totalBytes}),Promise.resolve(new Set);m._updateProgress(KA(w));const P=new bx(w,u.localStore,h.wt);let Q=yield h.fc();for(;Q;){const Ie=yield P.Nu(Q);Ie&&m._updateProgress(Ie),Q=yield h.fc()}const se=yield P.complete();return yield Nc(u,se.Ou,void 0),yield function(Ie,Me){const Le=ct(Ie);return Le.persistence.runTransaction("Save bundle","readwrite",et=>Le.Ds.saveBundleMetadata(et,Me))}(u.localStore,w),m._completeWith(se.progress),Promise.resolve(se.Mu)}catch(w){return dc("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var Ie}),function(u,h,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield sC(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function fO(n,e){return function eO(n,e){return n.asyncQueue.enqueue((0,Ge.Z)(function*(){return function(t,r){const s=ct(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.Ds.getNamedQuery(u,r))}(yield kw(n),e)}))}(qr(n=mn(n,ir)),e).then(t=>t?new to(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Eo(this,t):null)}}class Hw extends gC{constructor(e){super(),this.firestore=e}convertBytes(e){return new l0(new dl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return la.forKey(t,this.firestore,null)}}class KS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Hw(e)}get(e){const t=Op(e);return this._delegate.get(t).then(r=>new c0(this._firestore,new Rc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Op(e);return r?(yC("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Op(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Op(e);return this._delegate.delete(t),this}}class YS{constructor(e){this._delegate=e}set(e,t,r){const s=Op(e);return r?(yC("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Op(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Op(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class xp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new a0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new d0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=xp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new xp(e,new Hw(e),t),s.set(t,u)),u}}xp.INSTANCES=new WeakMap;class la{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Hw(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Je("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new la(t,new Yn(t._delegate,r,new at(e)))}static forKey(e,t,r){return new la(t,new Yn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new vy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vy(this.firestore,_S(this._delegate,e))}catch(t){throw bo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,nn.m9)(e))instanceof Yn&&bS(this._delegate,e)}set(e,t){t=yC("DocumentReference.set",t);try{return t?qS(this._delegate,e,t):qS(this._delegate,e)}catch(r){throw bo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?HS(this._delegate,e):HS(this._delegate,e,t,...r)}catch(s){throw bo(s,"updateDoc()","DocumentReference.update()")}}delete(){return function jO(n){return yy(mn(n.firestore,ir),[new ih(n._key,Kn.none())])}(this._delegate)}onSnapshot(...e){const t=QS(e),r=JS(e,s=>new c0(this.firestore,new Rc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return $S(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function LO(n){n=mn(n,Yn);const e=mn(n.firestore,ir),t=qr(e),r=new Sp(e);return function Kx(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return(r=(0,Ge.Z)(function*(s,u,h){try{const m=yield function(w,P){const Q=ct(w);return Q.persistence.runTransaction("read document","readonly",se=>Q.localDocuments.getDocument(se,P))}(s,u);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new Je(Ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=hy(m,`Failed to get document '${u} from cache`);h.reject(w)}}),function(s,u,h){return r.apply(this,arguments)})(yield kw(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Rc(e,r,n._key,s,new Ap(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function FO(n){n=mn(n,Yn);const e=mn(n.firestore,ir);return dS(qr(e),n._key,{source:"server"}).then(t=>mC(e,n,t))}(this._delegate):function PO(n){n=mn(n,Yn);const e=mn(n.firestore,ir);return dS(qr(e),n._key).then(t=>mC(e,n,t))}(this._delegate),t.then(r=>new c0(this.firestore,new Rc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new la(this.firestore,this._delegate.withConverter(e?xp.getInstance(this.firestore,e):null))}}function bo(n,e,t){return n.message=n.message.replace(e,t),n}function QS(n){for(const e of n)if("object"==typeof e&&!vC(e))return e;return{}}function JS(n,e){var t,r;let s;return s=vC(n[0])?n[0]:vC(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class c0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new la(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return NS(this._delegate,e._delegate)}}class d0 extends c0{data(e){const t=this._delegate.data(e);return function gE(n,e){n||gt()}(void 0!==t),t}}class Eo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Hw(e)}where(e,t,r){try{return new Eo(this.firestore,Ih(this._delegate,function DO(n,e,t){const r=e,s=jw("where",n);return new IO(s,r,t)}(e,t,r)))}catch(s){throw bo(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Eo(this.firestore,Ih(this._delegate,function CO(n,e="asc"){const t=e,r=jw("orderBy",n);return new TO(r,t)}(e,t)))}catch(r){throw bo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Eo(this.firestore,Ih(this._delegate,function AO(n){return yS("limit",n),new RS("limit",n,"F")}(e)))}catch(t){throw bo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Eo(this.firestore,Ih(this._delegate,function SO(n){return yS("limitToLast",n),new RS("limitToLast",n,"L")}(e)))}catch(t){throw bo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Eo(this.firestore,Ih(this._delegate,function xO(...n){return new PS("startAt",n,!0)}(...e)))}catch(t){throw bo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Eo(this.firestore,Ih(this._delegate,function OO(...n){return new PS("startAfter",n,!1)}(...e)))}catch(t){throw bo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Eo(this.firestore,Ih(this._delegate,function MO(...n){return new LS("endBefore",n,!1)}(...e)))}catch(t){throw bo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Eo(this.firestore,Ih(this._delegate,function NO(...n){return new LS("endAt",n,!0)}(...e)))}catch(t){throw bo(t,"endAt()","Query.endAt()")}}isEqual(e){return ES(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function UO(n){n=mn(n,to);const e=mn(n.firestore,ir),t=qr(e),r=new Sp(e);return function Yx(n,e){const t=new Fr;return n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return(r=(0,Ge.Z)(function*(s,u,h){try{const m=yield gn(s,u,!0),w=new JA(u,m.ji),P=w.Ku(m.documents),Q=w.applyChanges(P,!1);h.resolve(Q.snapshot)}catch(m){const w=hy(m,`Failed to execute query '${u} against cache`);h.reject(w)}}),function(s,u,h){return r.apply(this,arguments)})(yield kw(n),e,t);var r})),t.promise}(t,n._query).then(s=>new wh(e,r,n,s))}(this._delegate):"server"===(null==e?void 0:e.source)?function BO(n){n=mn(n,to);const e=mn(n.firestore,ir),t=qr(e),r=new Sp(e);return hS(t,n._query,{source:"server"}).then(s=>new wh(e,r,n,s))}(this._delegate):function VO(n){n=mn(n,to);const e=mn(n.firestore,ir),t=qr(e),r=new Sp(e);return kS(n._query),hS(t,n._query).then(s=>new wh(e,r,n,s))}(this._delegate),t.then(r=>new _C(this.firestore,new wh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=QS(e),r=JS(e,s=>new _C(this.firestore,new wh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return $S(this._delegate,t,r)}withConverter(e){return new Eo(this.firestore,this._delegate.withConverter(e?xp.getInstance(this.firestore,e):null))}}class nM{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new d0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class _C{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Eo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new d0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nM(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new d0(this._firestore,r))})}isEqual(e){return NS(this._delegate,e._delegate)}}class vy extends Eo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new la(this.firestore,e):null}doc(e){try{return new la(this.firestore,void 0===e?Pw(this._delegate):Pw(this._delegate,e))}catch(t){throw bo(t,"doc()","CollectionReference.doc()")}}add(e){return function qO(n,e){const t=mn(n.firestore,ir),r=Pw(n),s=qw(n.converter,e);return yy(t,[Vw(Tp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Kn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new la(this.firestore,t))}isEqual(e){return bS(this._delegate,e._delegate)}withConverter(e){return new vy(this.firestore,this._delegate.withConverter(e?xp.getInstance(this.firestore,e):null))}}function Op(n){return mn(n,Yn)}class bC{constructor(...e){this._delegate=new kc(...e)}static documentId(){return new bC(nr.keyField().canonicalString())}isEqual(e){return(e=(0,nn.m9)(e))instanceof kc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Mp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function WO(){return new cC("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Mp(e)}static delete(){const e=function zO(){return new o0("deleteField")}();return e._methodName="FieldValue.delete",new Mp(e)}static arrayUnion(...e){const t=function ZO(...n){return new yO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Mp(t)}static arrayRemove(...e){const t=function KO(...n){return new vO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Mp(t)}static increment(e){const t=function YO(n){return new _O("increment",n)}(e);return t._methodName="FieldValue.increment",new Mp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const rM={Firestore:ZS,GeoPoint:Lw,Timestamp:Hn,Blob:l0,Transaction:KS,WriteBatch:YS,DocumentReference:la,DocumentSnapshot:c0,Query:Eo,QueryDocumentSnapshot:d0,QuerySnapshot:_C,CollectionReference:vy,FieldPath:bC,FieldValue:Mp,setLogLevel:function tM(n){!function Yf(n){Xa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function oM(n){(function iM(n,e){n.INTERNAL.registerComponent(new fv.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},rM)))})(n,(e,t)=>new ZS(e,t,new eM)),n.registerVersion("@firebase/firestore-compat","0.1.23")}(Ob.Z);var sM=M(6451),$w=M(5363),aM=M(6063);class uM extends si.x{constructor(e=1/0,t=1/0,r=aM.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:h}=this;t||(r.push(e),!s&&r.push(u.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let h=0;h<u.length&&!e.closed;h+=r?1:2)e.next(u[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const h=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=h;w+=2)m=w;m&&r.splice(0,m+1)}}}var lM=M(3099);function XS(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,lM.B)({connector:()=>new uM(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function e1(n,e){return(0,Ma.m)(e)?Bn(()=>n,e):Bn(()=>n)}var EC=M(9468);M(5867);const n1=new Map,pM={activated:!1,tokenObservers:[]},gM={initialized:!1,enabled:!1};function _i(n){return n1.get(n)||pM}function su(n,e){n1.set(n,e)}function zw(){return gM}class bM{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ge.Z)(function*(){t.stop();try{t.pending=new nn.BH,yield function EM(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new nn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const wo=new nn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function i1(n){if(!_i(n).activated)throw wo.create("use-before-activation",{appName:n.name})}function TC(n,e){return CC.apply(this,arguments)}function CC(){return CC=(0,Ge.Z)(function*({url:n,body:e},t){var r,s;const u={"Content-Type":"application/json"},h=t.getImmediate({optional:!0});if(h){const Me=yield h.getHeartbeatsHeader();Me&&(u["X-Firebase-Client"]=Me)}const m={method:"POST",body:JSON.stringify(e),headers:u};let w,P;try{w=yield fetch(n,m)}catch(Me){throw wo.create("fetch-network-error",{originalErrorMessage:null===(r=Me)||void 0===r?void 0:r.message})}if(200!==w.status)throw wo.create("fetch-status-error",{httpStatus:w.status});try{P=yield w.json()}catch(Me){throw wo.create("fetch-parse-error",{originalErrorMessage:null===(s=Me)||void 0===s?void 0:s.message})}const Q=P.ttl.match(/^([\d.]+)(s)$/);if(!Q||!Q[2]||isNaN(Number(Q[1])))throw wo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${P.ttl}`});const se=1e3*Number(Q[1]),Ie=Date.now();return{token:P.token,expireTimeMillis:Ie+se,issuedAtTimeMillis:Ie}}),CC.apply(this,arguments)}function TM(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const h0="firebase-app-check-store";let Kw=null;function s1(){return Kw||(Kw=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=s=>{n(s.target.result)},r.onerror=s=>{var u;e(wo.create("storage-open",{originalErrorMessage:null===(u=s.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=s=>{0===s.oldVersion&&s.target.result.createObjectStore(h0,{keyPath:"compositeKey"})}}catch(r){e(wo.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Kw)}function AC(){return AC=(0,Ge.Z)(function*(n,e){const r=(yield s1()).transaction(h0,"readwrite"),u=r.objectStore(h0).put({compositeKey:n,value:e});return new Promise((h,m)=>{u.onsuccess=w=>{h()},r.onerror=w=>{var P;m(wo.create("storage-set",{originalErrorMessage:null===(P=w.target.error)||void 0===P?void 0:P.message}))}})}),AC.apply(this,arguments)}const f0=new Kl.Yd("@firebase/app-check");function c1(n,e){return(0,nn.hl)()?function xM(n,e){return function a1(n,e){return AC.apply(this,arguments)}(function l1(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{f0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function d1(){return zw().enabled}function h1(){return MC.apply(this,arguments)}function MC(){return MC=(0,Ge.Z)(function*(){const n=zw();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),MC.apply(this,arguments)}const PM={error:"UNKNOWN_ERROR"};function LM(n){return nn.US.encodeString(JSON.stringify(n),!1)}function Yw(n){return NC.apply(this,arguments)}function NC(){return NC=(0,Ge.Z)(function*(n,e=!1){const t=n.app;i1(t);const r=_i(t);let u,s=r.token;if(!s){const w=yield r.cachedTokenPromise;w&&Qw(w)&&(s=w)}if(!e&&s&&Qw(s))return{token:s.token};let m,h=!1;if(d1()){r.exchangeTokenPromise||(r.exchangeTokenPromise=TC(TM(t,yield h1()),n.heartbeatServiceProvider).then(P=>(r.exchangeTokenPromise=void 0,P)),h=!0);const w=yield r.exchangeTokenPromise;return yield c1(t,w),su(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),h=!0),s=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?f0.warn(w.message):f0.error(w),u=w}return s?(m={token:s.token},su(t,Object.assign(Object.assign({},r),{token:s})),yield c1(t,s)):m=VM(u),h&&p1(t,m),m}),NC.apply(this,arguments)}function RC(n,e){const t=_i(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),su(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function f1(n){const{app:e}=n,t=_i(e);let r=t.tokenRefresher;r||(r=function FM(n){const{app:e}=n;return new bM((0,Ge.Z)(function*(){let r;if(r=_i(e).token?yield Yw(n,!0):yield Yw(n),r.error)throw r.error}),()=>!0,()=>{const t=_i(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),su(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function p1(n,e){const t=_i(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(s){}}function Qw(n){return n.expireTimeMillis-Date.now()>0}function VM(n){return{token:LM(PM),error:n}}class UM{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=_i(this.app);for(const t of e)RC(this.app,t.next);return Promise.resolve()}}const w1="app-check-internal";!function XM(){(0,Yr._registerComponent)(new fv.wA("app-check",n=>function BM(n,e){return new UM(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(w1).initialize()})),(0,Yr._registerComponent)(new fv.wA(w1,n=>function jM(n){return{getToken:e=>Yw(n,e),addTokenListener:e=>function kC(n,e,t,r){const{app:s}=n,u=_i(s),h={next:t,error:r,type:e};if(su(s,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,h]})),u.token&&Qw(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),f1(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>f1(n))}(n,"INTERNAL",e),removeTokenListener:e=>RC(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Yr.registerVersion)("@firebase/app-check","0.5.12")}();class VC{constructor(){return(0,Kr.vb)("app-check")}}"undefined"!=typeof window&&window;var iN=M(127);const D1=new c.OlP("angularfire2.auth.use-emulator"),T1=new c.OlP("angularfire2.auth.settings"),C1=new c.OlP("angularfire2.auth.tenant-id"),A1=new c.OlP("angularfire2.auth.langugage-code"),S1=new c.OlP("angularfire2.auth.use-device-language"),x1=new c.OlP("angularfire.auth.persistence"),O1=(n,e,t,r,s,u,h,m)=>(0,ws.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,u&&w.useDeviceLanguage(),h)for(const[P,Q]of Object.entries(h))w.settings[P]=Q;return m&&w.setPersistence(m),w},[t,r,s,u,h,m]);let M1=(()=>{class n{constructor(t,r,s,u,h,m,w,P,Q,se,Ie,Me){const Le=new si.x,et=yt(void 0).pipe((0,$w.Q)(h.outsideAngular),Bn(()=>u.runOutsideAngular(()=>Promise.resolve().then(M.bind(M,1451)))),(0,Wt.U)(()=>(0,ws.on)(t,u,r)),(0,Wt.U)(ut=>O1(ut,u,m,P,Q,se,w,Ie)),XS({bufferSize:1,refCount:!1}));if(Xo(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=yt(null);else{et.pipe(Pa()).subscribe();const Gt=et.pipe(Bn(zt=>zt.getRedirectResult().then(Kt=>Kt,()=>null)),Kr.iC,XS({bufferSize:1,refCount:!1})),Zt=et.pipe(Bn(zt=>new zn.y(Kt=>({unsubscribe:u.runOutsideAngular(()=>zt.onAuthStateChanged(ln=>Kt.next(ln),ln=>Kt.error(ln),()=>Kt.complete()))})))),on=et.pipe(Bn(zt=>new zn.y(Kt=>({unsubscribe:u.runOutsideAngular(()=>zt.onIdTokenChanged(ln=>Kt.next(ln),ln=>Kt.error(ln),()=>Kt.complete()))}))));this.authState=Gt.pipe(e1(Zt),(0,EC.R)(h.outsideAngular),(0,$w.Q)(h.insideAngular)),this.user=Gt.pipe(e1(on),(0,EC.R)(h.outsideAngular),(0,$w.Q)(h.insideAngular)),this.idToken=this.user.pipe(Bn(zt=>zt?(0,Rn.D)(zt.getIdToken()):yt(null))),this.idTokenResult=this.user.pipe(Bn(zt=>zt?(0,Rn.D)(zt.getIdTokenResult()):yt(null))),this.credential=(0,sM.T)(Gt,Le,this.authState.pipe(Xn(zt=>!zt))).pipe((0,Wt.U)(zt=>(null==zt?void 0:zt.user)?zt:null),(0,EC.R)(h.outsideAngular),(0,$w.Q)(h.insideAngular))}return(0,ws.pX)(this,et,u,{spy:{apply:(ut,Gt,Zt)=>{(ut.startsWith("signIn")||ut.startsWith("createUser"))&&Zt.then(on=>Le.next(on))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ws.Dh),c.LFG(ws.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Kr.HU),c.LFG(D1,8),c.LFG(T1,8),c.LFG(C1,8),c.LFG(A1,8),c.LFG(S1,8),c.LFG(x1,8),c.LFG(VC,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function N1(n,e){return function sN(n,e=CI.z){return new zn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function BC(n,e){return N1(n,e).pipe((0,Wt.U)(t=>({payload:t,type:"query"})))}function Xw(n,e){return BC(n,e).pipe(Zr(void 0),xb(),(0,Wt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,m)=>{const w=s.find(Q=>Q.doc.ref.isEqual(h.ref)),P=null==t?void 0:t.payload.docs.find(Q=>Q.ref.isEqual(h.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(h.metadata)||!w&&P&&JSON.stringify(P.metadata)===JSON.stringify(h.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),u}))}function k1(n,e,t){return Xw(n,t).pipe(Di((r,s)=>function uN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function lN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return jC(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jC(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jC(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function uA(n,e=Ii.y){return n=null!=n?n:hv,(0,lr.e)((t,r)=>{let s,u=!0;t.subscribe((0,Wn.x)(r,h=>{const m=e(h);(u||!n(s,m))&&(u=!1,s=m,r.next(h))}))})}(),(0,Wt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function jC(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function R1(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class P1{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Xw(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Wt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Zr(void 0),xb(),Xn(([r,s])=>s.length>0||!r),(0,Wt.U)(([r,s])=>s),Kr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Di((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=R1(e);return k1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kr.iC)}valueChanges(e={}){return BC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Kr.iC)}get(e){return(0,Rn.D)(this.query.get(e)).pipe(Kr.iC)}add(e){return this.ref.add(e)}doc(e){return new L1(this.ref.doc(e),this.afs)}}class L1{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=U1(r,t);return new P1(s,u,this.afs)}snapshotChanges(){return function aN(n,e){return N1(n,e).pipe(Zr(void 0),xb(),(0,Wt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Kr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Rn.D)(this.ref.get(e)).pipe(Kr.iC)}}class cN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Xw(this.query,this.afs.schedulers.outsideAngular).pipe((0,Wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Xn(t=>t.length>0),Kr.iC):Xw(this.query,this.afs.schedulers.outsideAngular).pipe(Kr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Di((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=R1(e);return k1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kr.iC)}valueChanges(e={}){return BC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Wt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Kr.iC)}get(e){return(0,Rn.D)(this.query.get(e)).pipe(Kr.iC)}}const F1=new c.OlP("angularfire2.enableFirestorePersistence"),V1=new c.OlP("angularfire2.firestore.persistenceSettings"),dN=new c.OlP("angularfire2.firestore.settings"),hN=new c.OlP("angularfire2.firestore.use-emulator");function U1(n,e=(t=>t)){return{query:e(n),ref:n}}let B1=(()=>{class n{constructor(t,r,s,u,h,m,w,P,Q,se,Ie,Me,Le,et,ut,Gt,Zt){this.schedulers=w;const on=(0,ws.on)(t,m,r),zt=Q;se&&O1(on,m,Ie,Le,et,ut,Me,Gt),[this.firestore,this.persistenceEnabled$]=(0,ws.cc)(`${on.name}.firestore`,"AngularFirestore",on.name,()=>{const Kt=m.runOutsideAngular(()=>on.firestore());if(u&&Kt.settings(u),zt&&Kt.useEmulator(...zt),s&&!Xo(h)){const ln=()=>{try{return(0,Rn.D)(Kt.enablePersistence(P||void 0).then(()=>!0,()=>!1))}catch(ni){return"undefined"!=typeof console&&console.warn(ni),yt(!1)}};return[Kt,m.runOutsideAngular(ln)]}return[Kt,yt(!1)]},[u,zt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:h}=U1(s,r),m=this.schedulers.ngZone.run(()=>u);return new P1(m,h,this)}collectionGroup(t,r){const s=r||(h=>h),u=this.firestore.collectionGroup(t);return new cN(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new L1(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ws.Dh),c.LFG(ws.xv,8),c.LFG(F1,8),c.LFG(dN,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(Kr.HU),c.LFG(V1,8),c.LFG(hN,8),c.LFG(M1,8),c.LFG(D1,8),c.LFG(T1,8),c.LFG(C1,8),c.LFG(A1,8),c.LFG(S1,8),c.LFG(x1,8),c.LFG(VC,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fN=(()=>{class n{constructor(){iN.Z.registerVersion("angularfire",Kr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:F1,useValue:!0},{provide:V1,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[B1]}),n})(),qC=(()=>{class n{constructor(t){this.angularFirestore=t}getStudentDoc(t){return this.angularFirestore.collection("student-collection").doc(t).valueChanges()}getStudentList(){return this.angularFirestore.collection("student-collection").snapshotChanges()}createStudent(t){return new Promise((r,s)=>{this.angularFirestore.collection("student-collection").add(t).then(u=>{console.log(u)},u=>s(u))})}deleteStudent(t){return this.angularFirestore.collection("student-collection").doc(t.id).delete()}updateStudent(t,r){return this.angularFirestore.collection("student-collection").doc(r).update({name:t.name,email:t.email,course:t.course,fees:t.fees})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(B1))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pN=(()=>{class n{constructor(t,r,s){this.studentCrudService=t,this.formBuilder=r,this.router=s,this.studentForm=this.formBuilder.group({name:[""],email:[""],course:[""],fees:[""]})}ngOnInit(){}onSubmit(){this.studentCrudService.createStudent(this.studentForm.value),this.router.navigate(["ex002-firebase-crud/list-student"])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(qC),c.Y36($g),c.Y36(Sr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-create-student"]],decls:33,vars:2,consts:[[1,"container"],[1,"row","mt-3"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","name","placeholder","Full Name","required","",1,"form-control"],["type","email","formControlName","email","placeholder","Email","required","",1,"form-control"],["for","name"],["formControlName","course","placeholder","","required","",1,"form-control","form-select","form-select-lg","mb-3"],["value","Java","selected",""],["value","Python"],["value","PHP"],["value","JavaScript"],["type","number","formControlName","fees","placeholder","Fees","required","",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","reset",1,"btn","btn-danger"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"form",2),c.NdJ("ngSubmit",function(){return r.onSubmit()}),c.TgZ(3,"div",3)(4,"label"),c._uU(5,"Name"),c.qZA(),c._UZ(6,"input",4),c.qZA(),c.TgZ(7,"div",3)(8,"label"),c._uU(9,"Email"),c.qZA(),c._UZ(10,"input",5),c.qZA(),c.TgZ(11,"div",3)(12,"label",6),c._uU(13,"Course"),c.qZA(),c.TgZ(14,"select",7)(15,"option",8),c._uU(16,"Java"),c.qZA(),c.TgZ(17,"option",9),c._uU(18,"Python"),c.qZA(),c.TgZ(19,"option",10),c._uU(20,"PHP"),c.qZA(),c.TgZ(21,"option",11),c._uU(22,"JavaScript"),c.qZA()()(),c.TgZ(23,"div",3)(24,"label"),c._uU(25,"Fees"),c.qZA(),c._UZ(26,"input",12),c.qZA(),c.TgZ(27,"div",3)(28,"button",13),c._uU(29,"Create"),c.qZA(),c._uU(30," \xa0\xa0\xa0\xa0 "),c.TgZ(31,"button",14),c._uU(32,"Reset"),c.qZA()()()()()),2&t&&(c.xp6(2),c.Q6J("formGroup",r.studentForm),c.xp6(26),c.Q6J("disabled",!r.studentForm.valid))},directives:[ff,af,Ad,wd,Dg,mf,xd,yf,jg,Sd,Lg],styles:[""]}),n})(),gN=(()=>{class n{constructor(t,r,s,u){this.studentCrudService=t,this.formBuilder=r,this.activatedRoute=s,this.router=u,this.studentForm=this.formBuilder.group({name:[""],email:[""],course:[""],fees:[""]})}ngOnInit(){var t;const r=null!==(t=this.activatedRoute.snapshot.paramMap.get("id"))&&void 0!==t?t:"0";this.studentCrudService.getStudentDoc(r).subscribe(s=>{this.studentRef=s,this.studentForm=this.formBuilder.group({name:[this.studentRef.name],email:[this.studentRef.email],course:[this.studentRef.course],fees:[this.studentRef.fees]})})}onSubmit(){var t;const r=null!==(t=this.activatedRoute.snapshot.paramMap.get("id"))&&void 0!==t?t:"0";this.studentCrudService.updateStudent(this.studentForm.value,r),this.router.navigate(["ex002-firebase-crud/list-student"])}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(qC),c.Y36($g),c.Y36(ja),c.Y36(Sr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-edit-student"]],decls:33,vars:1,consts:[[1,"container"],[1,"row","mt-3"],["novalidate","",3,"formGroup","ngSubmit"],[1,"mb-3"],["type","text","formControlName","name","required","",1,"form-control"],["type","email","formControlName","email","required","",1,"form-control"],["for","name"],["formControlName","course","placeholder","","required","",1,"form-control","form-select","form-select-lg","mb-3"],["value","Java","selected",""],["value","Python"],["value","PHP"],["value","JavaScript"],["type","number","formControlName","fees","required","",1,"form-control"],["type","submit",1,"btn","btn-primary"],["type","reset",1,"btn","btn-danger"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"form",2),c.NdJ("ngSubmit",function(){return r.onSubmit()}),c.TgZ(3,"div",3)(4,"label"),c._uU(5,"Name"),c.qZA(),c._UZ(6,"input",4),c.qZA(),c.TgZ(7,"div",3)(8,"label"),c._uU(9,"Email"),c.qZA(),c._UZ(10,"input",5),c.qZA(),c.TgZ(11,"div",3)(12,"label",6),c._uU(13,"Course"),c.qZA(),c.TgZ(14,"select",7)(15,"option",8),c._uU(16,"Java"),c.qZA(),c.TgZ(17,"option",9),c._uU(18,"Python"),c.qZA(),c.TgZ(19,"option",10),c._uU(20,"PHP"),c.qZA(),c.TgZ(21,"option",11),c._uU(22,"JavaScript"),c.qZA()()(),c.TgZ(23,"div",3)(24,"label"),c._uU(25,"Fees"),c.qZA(),c._UZ(26,"input",12),c.qZA(),c.TgZ(27,"div",3)(28,"button",13),c._uU(29,"Update"),c.qZA(),c._uU(30," \xa0\xa0\xa0\xa0 "),c.TgZ(31,"button",14),c._uU(32,"Reset"),c.qZA()()()()()),2&t&&(c.xp6(2),c.Q6J("formGroup",r.studentForm))},directives:[ff,af,Ad,wd,Dg,mf,xd,yf,jg,Sd,Lg],styles:[""]}),n})();function mN(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"tr")(1,"th",6),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._uU(10),c.qZA(),c.TgZ(11,"td")(12,"span",7),c.NdJ("click",function(){const u=c.CHM(t).$implicit;return c.oxw().removeStudent(u)}),c._uU(13,"Delete"),c.qZA(),c._uU(14," \xa0 "),c.TgZ(15,"span",8),c._uU(16,"Edit"),c.qZA()()()}if(2&n){const t=e.$implicit,r=e.index;c.xp6(2),c.Oqu(r+1),c.xp6(2),c.Oqu(t.name),c.xp6(2),c.Oqu(t.email),c.xp6(2),c.Oqu(t.course),c.xp6(2),c.Oqu(t.fees),c.xp6(5),c.MGl("routerLink","/ex002-firebase-crud/edit-student/",t.id,"")}}let j1=(()=>{class n{constructor(t){this.studentCrudService=t}ngOnInit(){this.studentCrudService.getStudentList().subscribe(t=>{this.students=t.map(r=>Object.assign({id:r.payload.doc.id},r.payload.doc.data()))})}removeStudent(t){confirm("Are you sure to delete "+t.name)&&this.studentCrudService.deleteStudent(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(qC))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-list-student"]],decls:20,vars:1,consts:[[1,"container"],["routerLink","/ex002-firebase-crud/create-student/",1,"btn","btn-primary","my-3"],[1,"row"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-primary",3,"routerLink"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"span",1),c._uU(2,"Add"),c.qZA(),c.TgZ(3,"div",2)(4,"table",3)(5,"thead")(6,"th",4),c._uU(7,"#"),c.qZA(),c.TgZ(8,"th",4),c._uU(9,"Name"),c.qZA(),c.TgZ(10,"th",4),c._uU(11,"Email"),c.qZA(),c.TgZ(12,"th",4),c._uU(13,"Course"),c.qZA(),c.TgZ(14,"th",4),c._uU(15,"Fees"),c.qZA(),c.TgZ(16,"th",4),c._uU(17,"Action"),c.qZA()(),c.TgZ(18,"tbody"),c.YNc(19,mN,17,6,"tr",5),c.qZA()()()()),2&t&&(c.xp6(19),c.Q6J("ngForOf",r.students))},directives:[bd,sr],styles:[""]}),n})();const yN=[{path:"",pathMatch:"full",redirectTo:"ex002-firebase-crud"},{path:"ex-index",component:rI},{path:"ex001-quill-text-editor",component:Sb},{path:"ex002-firebase-crud",pathMatch:"full",redirectTo:"ex002-firebase-crud/list-student"},{path:"ex002-firebase-crud/create-student",component:pN},{path:"ex002-firebase-crud/list-student",component:j1},{path:"ex002-firebase-crud/edit-student/:id",component:gN},{path:"**",component:j1}];let vN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[nf.forRoot(yN)],nf]}),n})(),_N=(()=>{class n{constructor(){this.title="project_angular"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[Ul],styles:[""]}),n})();const q1_firebaseConfig={apiKey:"AIzaSyDSfaU2H8Ue1kvnbmTU_Gw9kwNN9uuvI1g",authDomain:"project-angular-ex002.firebaseapp.com",projectId:"project-angular-ex002",storageBucket:"project-angular-ex002.appspot.com",messagingSenderId:"81885975300",appId:"1:81885975300:web:b05035fe136872f0693651"};let bN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[_N]}),n.\u0275inj=c.cJS({providers:[],imports:[[Da,vN,wI,Ib,Ab,ws.hO.initializeApp(q1_firebaseConfig),fN]]}),n})();(0,c.G48)(),yu().bootstrapModule(bN).catch(n=>console.error(n))},5867:(ht,ge,M)=>{"use strict";M.d(ge,{Mq:()=>c.getApp,C6:()=>c.getApps});var c=M(9681);(0,c.registerVersion)("firebase","9.9.3","app")},127:(ht,ge,M)=>{"use strict";M.d(ge,{Z:()=>c.Z});var c=M(3942);c.Z.registerVersion("firebase","9.9.3","app-compat")},1451:(ht,ge,M)=>{"use strict";M.r(ge);var c=M(5861),ee=M(3942),F=M(2090),K=M(9681),j=M(655),q=M(1877),R=M(4859);const x=function k(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},V=function A(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},I=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ne=new q.Yd("@firebase/auth");function J(y,...f){ne.logLevel<=q.in.ERROR&&ne.error(`Auth (${K.SDK_VERSION}): ${y}`,...f)}function Z(y,...f){throw W(y,...f)}function X(y,...f){return W(y,...f)}function $(y,f,g){const b=Object.assign(Object.assign({},V()),{[f]:g});return new F.LL("auth","Firebase",b).create(f,{appName:y.name})}function H(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Z(y,"argument-error"),$(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function W(y,...f){if("string"!=typeof y){const g=f[0],b=[...f.slice(1)];return b[0]&&(b[0].appName=y.name),y._errorFactory.create(g,...b)}return I.create(y,...f)}function B(y,f,...g){if(!y)throw W(f,...g)}function te(y){const f="INTERNAL ASSERTION FAILED: "+y;throw J(f),new Error(f)}function Y(y,f){y||te(f)}const de=new Map;function ue(y){Y(y instanceof Function,"Expected a class definition");let f=de.get(y);return f?(Y(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,de.set(y,f),f)}function le(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ie(){return"http:"===fe()||"https:"===fe()}function fe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class xe{constructor(f,g){this.shortDelay=f,this.longDelay=g,Y(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function me(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ie()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function he(y,f){Y(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class De{static initialize(f,g,b){this.fetchImpl=f,g&&(this.headersImpl=g),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void te("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void te("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void te("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ke={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Re=new xe(3e4,6e4);function Be(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Qe(y,f,g,b){return wt.apply(this,arguments)}function wt(){return(wt=(0,c.Z)(function*(y,f,g,b,G={}){return It(y,G,(0,c.Z)(function*(){let ae={},Se={};b&&("GET"===f?Se=b:ae={body:JSON.stringify(b)});const Ve=(0,F.xO)(Object.assign({key:y.config.apiKey},Se)).slice(1),tt=yield y._getAdditionalHeaders();return tt["Content-Type"]="application/json",y.languageCode&&(tt["X-Firebase-Locale"]=y.languageCode),De.fetch()(yn(y,y.config.apiHost,g,Ve),Object.assign({method:f,headers:tt,referrerPolicy:"no-referrer"},ae))}))})).apply(this,arguments)}function It(y,f,g){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,c.Z)(function*(y,f,g){y._canInitEmulator=!1;const b=Object.assign(Object.assign({},ke),f);try{const G=new je(y),ae=yield Promise.race([g(),G.promise]);G.clearNetworkTimeout();const Se=yield ae.json();if("needConfirmation"in Se)throw qe(y,"account-exists-with-different-credential",Se);if(ae.ok&&!("errorMessage"in Se))return Se;{const Ve=ae.ok?Se.errorMessage:Se.error.message,[tt,dt]=Ve.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===tt)throw qe(y,"credential-already-in-use",Se);if("EMAIL_EXISTS"===tt)throw qe(y,"email-already-in-use",Se);if("USER_DISABLED"===tt)throw qe(y,"user-disabled",Se);const Nt=b[tt]||tt.toLowerCase().replace(/[_\s]+/g,"-");if(dt)throw $(y,Nt,dt);Z(y,Nt)}}catch(G){if(G instanceof F.ZR)throw G;Z(y,"network-request-failed")}})).apply(this,arguments)}function Bt(y,f,g,b){return In.apply(this,arguments)}function In(){return(In=(0,c.Z)(function*(y,f,g,b,G={}){const ae=yield Qe(y,f,g,b,G);return"mfaPendingCredential"in ae&&Z(y,"multi-factor-auth-required",{_serverResponse:ae}),ae})).apply(this,arguments)}function yn(y,f,g,b){const G=`${f}${g}?${b}`;return y.config.emulator?he(y.config,G):`${y.config.apiScheme}://${G}`}class je{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,b)=>{this.timer=setTimeout(()=>b(X(this.auth,"network-request-failed")),Re.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qe(y,f,g){const b={appName:y.name};g.email&&(b.email=g.email),g.phoneNumber&&(b.phoneNumber=g.phoneNumber);const G=X(y,f,b);return G.customData._tokenResponse=g,G}function it(){return(it=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function ze(y,f){return vt.apply(this,arguments)}function vt(){return(vt=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Rt(y,f){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function sn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Io(){return(Io=(0,c.Z)(function*(y,f=!1){const g=(0,F.m9)(y),b=yield g.getIdToken(f),G=ft(b);B(G&&G.exp&&G.auth_time&&G.iat,g.auth,"internal-error");const ae="object"==typeof G.firebase?G.firebase:void 0,Se=null==ae?void 0:ae.sign_in_provider;return{claims:G,token:b,authTime:sn(St(G.auth_time)),issuedAtTime:sn(St(G.iat)),expirationTime:sn(St(G.exp)),signInProvider:Se||null,signInSecondFactor:(null==ae?void 0:ae.sign_in_second_factor)||null}})).apply(this,arguments)}function St(y){return 1e3*Number(y)}function ft(y){var f;const[g,b,G]=y.split(".");if(void 0===g||void 0===b||void 0===G)return J("JWT malformed, contained fewer than 3 sections"),null;try{const ae=(0,F.tV)(b);return ae?JSON.parse(ae):(J("Failed to decode base64 JWT payload"),null)}catch(ae){return J("Caught error parsing JWT payload as JSON",null===(f=ae)||void 0===f?void 0:f.toString()),null}}function Er(y,f){return ri.apply(this,arguments)}function ri(){return(ri=(0,c.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(b){throw b instanceof F.ZR&&tn(b)&&y.auth.currentUser===y&&(yield y.auth.signOut()),b}})).apply(this,arguments)}function tn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Do{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const G=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,G)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const b=this.getInterval(f);this.timerId=setTimeout((0,c.Z)(function*(){yield g.iteration()}),b)}iteration(){var f=this;return(0,c.Z)(function*(){var g;try{yield f.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===(null===(g=b)||void 0===g?void 0:g.code)&&f.schedule(!0))}f.schedule()})()}}class wr{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=sn(this.lastLoginAt),this.creationTime=sn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Mr(y){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,c.Z)(function*(y){var f;const g=y.auth,b=yield y.getIdToken(),G=yield Er(y,Rt(g,{idToken:b}));B(null==G?void 0:G.users.length,g,"internal-error");const ae=G.users[0];y._notifyReloadListener(ae);const Se=(null===(f=ae.providerUserInfo)||void 0===f?void 0:f.length)?ve(ae.providerUserInfo):[],Ve=Ae(y.providerData,Se),Nt=!!y.isAnonymous&&!(y.email&&ae.passwordHash||(null==Ve?void 0:Ve.length)),At={uid:ae.localId,displayName:ae.displayName||null,photoURL:ae.photoUrl||null,email:ae.email||null,emailVerified:ae.emailVerified||!1,phoneNumber:ae.phoneNumber||null,tenantId:ae.tenantId||null,providerData:Ve,metadata:new wr(ae.createdAt,ae.lastLoginAt),isAnonymous:Nt};Object.assign(y,At)})).apply(this,arguments)}function Ee(){return(Ee=(0,c.Z)(function*(y){const f=(0,F.m9)(y);yield Mr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ae(y,f){return[...y.filter(b=>!f.some(G=>G.providerId===b.providerId)),...f]}function ve(y){return y.map(f=>{var{providerId:g}=f,b=(0,j._T)(f,["providerId"]);return{providerId:g,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function Ce(){return(Ce=(0,c.Z)(function*(y,f){const g=yield It(y,{},(0,c.Z)(function*(){const b=(0,F.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:G,apiKey:ae}=y.config,Se=yn(y,G,"/v1/token",`key=${ae}`),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/x-www-form-urlencoded",De.fetch()(Se,{method:"POST",headers:Ve,body:b})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ke{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){B(f.idToken,"internal-error"),B(void 0!==f.idToken,"internal-error"),B(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function Lt(y){const f=ft(y);return B(f,"internal-error"),B(void 0!==f.exp,"internal-error"),B(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var b=this;return(0,c.Z)(function*(){return B(!b.accessToken||b.refreshToken,f,"user-token-expired"),g||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(f,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var b=this;return(0,c.Z)(function*(){const{accessToken:G,refreshToken:ae,expiresIn:Se}=yield function Te(y,f){return Ce.apply(this,arguments)}(f,g);b.updateTokensAndExpiration(G,ae,Number(Se))})()}updateTokensAndExpiration(f,g,b){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(f,g){const{refreshToken:b,accessToken:G,expirationTime:ae}=g,Se=new Ke;return b&&(B("string"==typeof b,"internal-error",{appName:f}),Se.refreshToken=b),G&&(B("string"==typeof G,"internal-error",{appName:f}),Se.accessToken=G),ae&&(B("number"==typeof ae,"internal-error",{appName:f}),Se.expirationTime=ae),Se}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ke,this.toJSON())}_performRefresh(){return te("not implemented")}}function rt(y,f){B("string"==typeof y||void 0===y,"internal-error",{appName:f})}class Dt{constructor(f){var{uid:g,auth:b,stsTokenManager:G}=f,ae=(0,j._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Do(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=b,this.stsTokenManager=G,this.accessToken=G.accessToken,this.displayName=ae.displayName||null,this.email=ae.email||null,this.emailVerified=ae.emailVerified||!1,this.phoneNumber=ae.phoneNumber||null,this.photoURL=ae.photoURL||null,this.isAnonymous=ae.isAnonymous||!1,this.tenantId=ae.tenantId||null,this.providerData=ae.providerData?[...ae.providerData]:[],this.metadata=new wr(ae.createdAt||void 0,ae.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,c.Z)(function*(){const b=yield Er(g,g.stsTokenManager.getToken(g.auth,f));return B(b,g.auth,"internal-error"),g.accessToken!==b&&(g.accessToken=b,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),b})()}getIdTokenResult(f){return function en(y){return Io.apply(this,arguments)}(this,f)}reload(){return function To(y){return Ee.apply(this,arguments)}(this)}_assign(f){this!==f&&(B(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Dt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var b=this;return(0,c.Z)(function*(){let G=!1;f.idToken&&f.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(f),G=!0),g&&(yield Mr(b)),yield b.auth._persistUserIfCurrent(b),G&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var f=this;return(0,c.Z)(function*(){const g=yield f.getIdToken();return yield Er(f,function He(y,f){return it.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var b,G,ae,Se,Ve,tt,dt,Nt;const At=null!==(b=g.displayName)&&void 0!==b?b:void 0,Ln=null!==(G=g.email)&&void 0!==G?G:void 0,pi=null!==(ae=g.phoneNumber)&&void 0!==ae?ae:void 0,ql=null!==(Se=g.photoURL)&&void 0!==Se?Se:void 0,Vy=null!==(Ve=g.tenantId)&&void 0!==Ve?Ve:void 0,Qs=null!==(tt=g._redirectEventId)&&void 0!==tt?tt:void 0,yd=null!==(dt=g.createdAt)&&void 0!==dt?dt:void 0,vd=null!==(Nt=g.lastLoginAt)&&void 0!==Nt?Nt:void 0,{uid:Xh,emailVerified:_d,isAnonymous:Sr,providerData:ef,stsTokenManager:tf}=g;B(Xh&&tf,f,"internal-error");const bd=Ke.fromJSON(this.name,tf);B("string"==typeof Xh,f,"internal-error"),rt(At,f.name),rt(Ln,f.name),B("boolean"==typeof _d,f,"internal-error"),B("boolean"==typeof Sr,f,"internal-error"),rt(pi,f.name),rt(ql,f.name),rt(Vy,f.name),rt(Qs,f.name),rt(yd,f.name),rt(vd,f.name);const Uu=new Dt({uid:Xh,auth:f,email:Ln,emailVerified:_d,displayName:At,isAnonymous:Sr,photoURL:ql,phoneNumber:pi,tenantId:Vy,stsTokenManager:bd,createdAt:yd,lastLoginAt:vd});return ef&&Array.isArray(ef)&&(Uu.providerData=ef.map(Bu=>Object.assign({},Bu))),Qs&&(Uu._redirectEventId=Qs),Uu}static _fromIdTokenResponse(f,g,b=!1){return(0,c.Z)(function*(){const G=new Ke;G.updateFromServerResponse(g);const ae=new Dt({uid:g.localId,auth:f,stsTokenManager:G,isAnonymous:b});return yield Mr(ae),ae})()}}const un=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(g,b){var G=this;return(0,c.Z)(function*(){G.storage[g]=b})()}_get(g){var b=this;return(0,c.Z)(function*(){const G=b.storage[g];return void 0===G?null:G})()}_remove(g){var b=this;return(0,c.Z)(function*(){delete b.storage[g]})()}_addListener(g,b){}_removeListener(g,b){}}return y.type="NONE",y})();function or(y,f,g){return`firebase:${y}:${f}:${g}`}class Yt{constructor(f,g,b){this.persistence=f,this.auth=g,this.userKey=b;const{config:G,name:ae}=this.auth;this.fullUserKey=or(this.userKey,G.apiKey,ae),this.fullPersistenceKey=or("persistence",G.apiKey,ae),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,c.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?Dt._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,c.Z)(function*(){if(g.persistence===f)return;const b=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,b?g.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,b="authUser"){return(0,c.Z)(function*(){if(!g.length)return new Yt(ue(un),f,b);const G=(yield Promise.all(g.map(function(){var dt=(0,c.Z)(function*(Nt){if(yield Nt._isAvailable())return Nt});return function(Nt){return dt.apply(this,arguments)}}()))).filter(dt=>dt);let ae=G[0]||ue(un);const Se=or(b,f.config.apiKey,f.name);let Ve=null;for(const dt of g)try{const Nt=yield dt._get(Se);if(Nt){const At=Dt._fromJSON(f,Nt);dt!==ae&&(Ve=At),ae=dt;break}}catch(Nt){}const tt=G.filter(dt=>dt._shouldAllowMigration);return ae._shouldAllowMigration&&tt.length?(ae=tt[0],Ve&&(yield ae._set(Se,Ve.toJSON())),yield Promise.all(g.map(function(){var dt=(0,c.Z)(function*(Nt){if(Nt!==ae)try{yield Nt._remove(Se)}catch(At){}});return function(Nt){return dt.apply(this,arguments)}}())),new Yt(ae,f,b)):new Yt(ae,f,b)})()}}function Hr(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Qn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Oi(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(no(f))return"Blackberry";if(Jn(f))return"Webos";if(Os(f))return"Safari";if((f.includes("chrome/")||ca(f))&&!f.includes("edge/"))return"Chrome";if(Nr(f))return"Android";{const b=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function Oi(y=(0,F.z$)()){return/firefox\//i.test(y)}function Os(y=(0,F.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function ca(y=(0,F.z$)()){return/crios\//i.test(y)}function Qn(y=(0,F.z$)()){return/iemobile/i.test(y)}function Nr(y=(0,F.z$)()){return/android/i.test(y)}function no(y=(0,F.z$)()){return/blackberry/i.test(y)}function Jn(y=(0,F.z$)()){return/webos/i.test(y)}function $r(y=(0,F.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Co(y=(0,F.z$)()){return $r(y)||Nr(y)||Jn(y)||no(y)||/windows phone/i.test(y)||Qn(y)}function Ms(y,f=[]){let g;switch(y){case"Browser":g=Hr((0,F.z$)());break;case"Worker":g=`${Hr((0,F.z$)())}-${y}`;break;default:g=y}const b=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${K.SDK_VERSION}/${b}`}class Gr{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const b=ae=>new Promise((Se,Ve)=>{try{Se(f(ae))}catch(tt){Ve(tt)}});b.onAbort=g,this.queue.push(b);const G=this.queue.length-1;return()=>{this.queue[G]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,c.Z)(function*(){var b;if(g.auth.currentUser===f)return;const G=[];try{for(const ae of g.queue)yield ae(f),ae.onAbort&&G.push(ae.onAbort)}catch(ae){G.reverse();for(const Se of G)try{Se()}catch(Ve){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(b=ae)||void 0===b?void 0:b.message})}})()}}class lt{constructor(f,g,b){this.app=f,this.heartbeatServiceProvider=g,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _n(this),this.idTokenSubscription=new _n(this),this.beforeStateQueue=new Gr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=I,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(f,g){var b=this;return g&&(this._popupRedirectResolver=ue(g)),this._initializationPromise=this.queue((0,c.Z)(function*(){var G,ae;if(!b._deleted&&(b.persistenceManager=yield Yt.create(b,f),!b._deleted)){if(null===(G=b._popupRedirectResolver)||void 0===G?void 0:G._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(Se){}yield b.initializeCurrentUser(g),b.lastNotifiedUid=(null===(ae=b.currentUser)||void 0===ae?void 0:ae.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,c.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,c.Z)(function*(){var b;const G=yield g.assertedPersistence.getCurrentUser();let ae=G,Se=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Ve=null===(b=g.redirectUser)||void 0===b?void 0:b._redirectEventId,tt=null==ae?void 0:ae._redirectEventId,dt=yield g.tryRedirectSignIn(f);(!Ve||Ve===tt)&&(null==dt?void 0:dt.user)&&(ae=dt.user,Se=!0)}if(!ae)return g.directlySetCurrentUser(null);if(!ae._redirectEventId){if(Se)try{yield g.beforeStateQueue.runMiddleware(ae)}catch(Ve){ae=G,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(Ve))}return ae?g.reloadAndSetCurrentUserOrClear(ae):g.directlySetCurrentUser(null)}return B(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===ae._redirectEventId?g.directlySetCurrentUser(ae):g.reloadAndSetCurrentUserOrClear(ae)})()}tryRedirectSignIn(f){var g=this;return(0,c.Z)(function*(){let b=null;try{b=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(G){yield g._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,c.Z)(function*(){var b;try{yield Mr(f)}catch(G){if("auth/network-request-failed"!==(null===(b=G)||void 0===b?void 0:b.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function _e(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,c.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,c.Z)(function*(){const b=f?(0,F.m9)(f):null;return b&&B(b.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(b&&b._clone(g))})()}_updateCurrentUser(f,g=!1){var b=this;return(0,c.Z)(function*(){if(!b._deleted)return f&&B(b.tenantId===f.tenantId,b,"tenant-id-mismatch"),g||(yield b.beforeStateQueue.runMiddleware(f)),b.queue((0,c.Z)(function*(){yield b.directlySetCurrentUser(f),b.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,c.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,c.Z)(function*(){yield g.assertedPersistence.setPersistence(ue(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new F.LL("auth","Firebase",f())}onAuthStateChanged(f,g,b){return this.registerStateListener(this.authStateSubscription,f,g,b)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,b){return this.registerStateListener(this.idTokenSubscription,f,g,b)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var b=this;return(0,c.Z)(function*(){const G=yield b.getOrInitRedirectPersistenceManager(g);return null===f?G.removeCurrentUser():G.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,c.Z)(function*(){if(!g.redirectPersistenceManager){const b=f&&ue(f)||g._popupRedirectResolver;B(b,g,"argument-error"),g.redirectPersistenceManager=yield Yt.create(g,[ue(b._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,c.Z)(function*(){var b,G;return g._isInitialized&&(yield g.queue((0,c.Z)(function*(){}))),(null===(b=g._currentUser)||void 0===b?void 0:b._redirectEventId)===f?g._currentUser:(null===(G=g.redirectUser)||void 0===G?void 0:G._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,c.Z)(function*(){if(f===g.currentUser)return g.queue((0,c.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,b,G){if(this._deleted)return()=>{};const ae="function"==typeof g?g:g.next.bind(g),Se=this._isInitialized?Promise.resolve():this._initializationPromise;return B(Se,this,"internal-error"),Se.then(()=>ae(this.currentUser)),"function"==typeof g?f.addObserver(g,b,G):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,c.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ms(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,c.Z)(function*(){var g;const b={"X-Client-Version":f.clientVersion};f.app.options.appId&&(b["X-Firebase-gmpid"]=f.app.options.appId);const G=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return G&&(b["X-Firebase-Client"]=G),b})()}}function Tt(y){return(0,F.m9)(y)}class _n{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Mi(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Ni(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class bi{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return te("not implemented")}_getIdTokenResponse(f){return te("not implemented")}_linkToIdToken(f,g){return te("not implemented")}_getReauthenticationResolver(f){return te("not implemented")}}function Vn(y,f){return jt.apply(this,arguments)}function jt(){return(jt=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:resetPassword",Be(y,f))})).apply(this,arguments)}function ha(y,f){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function au(y,f){return So.apply(this,arguments)}function So(){return(So=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:update",Be(y,f))})).apply(this,arguments)}function Yo(){return(Yo=(0,c.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:signInWithPassword",Be(y,f))})).apply(this,arguments)}function xo(y,f){return hr.apply(this,arguments)}function hr(){return(hr=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:sendOobCode",Be(y,f))})).apply(this,arguments)}function bn(y,f){return uu.apply(this,arguments)}function uu(){return(uu=(0,c.Z)(function*(y,f){return xo(y,f)})).apply(this,arguments)}function fa(y,f){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,c.Z)(function*(y,f){return xo(y,f)})).apply(this,arguments)}function ki(y,f){return lu.apply(this,arguments)}function lu(){return(lu=(0,c.Z)(function*(y,f){return xo(y,f)})).apply(this,arguments)}function Lc(y,f){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,c.Z)(function*(y,f){return xo(y,f)})).apply(this,arguments)}function hl(){return(hl=(0,c.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:signInWithEmailLink",Be(y,f))})).apply(this,arguments)}function Fc(){return(Fc=(0,c.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:signInWithEmailLink",Be(y,f))})).apply(this,arguments)}class Ir extends bi{constructor(f,g,b,G=null){super("password",b),this._email=f,this._password=g,this._tenantId=G}static _fromEmailAndPassword(f,g){return new Ir(f,g,"password")}static _fromEmailAndCode(f,g,b=null){return new Ir(f,g,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,c.Z)(function*(){switch(g.signInMethod){case"password":return function sr(y,f){return Yo.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Pi(y,f){return hl.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Z(f,"internal-error")}})()}_linkToIdToken(f,g){var b=this;return(0,c.Z)(function*(){switch(b.signInMethod){case"password":return ha(f,{idToken:g,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function Np(y,f){return Fc.apply(this,arguments)}(f,{idToken:g,email:b._email,oobCode:b._password});default:Z(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Oo(y,f){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,c.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:signInWithIdp",Be(y,f))})).apply(this,arguments)}class ro extends bi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new ro(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Z("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:G}=g,ae=(0,j._T)(g,["providerId","signInMethod"]);if(!b||!G)return null;const Se=new ro(b,G);return Se.idToken=ae.idToken||void 0,Se.accessToken=ae.accessToken||void 0,Se.secret=ae.secret,Se.nonce=ae.nonce,Se.pendingToken=ae.pendingToken||null,Se}_getIdTokenResponse(f){return Oo(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,Oo(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Oo(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,F.xO)(g)}return f}}function Rp(y,f){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:sendVerificationCode",Be(y,f))})).apply(this,arguments)}function Mo(){return(Mo=(0,c.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:signInWithPhoneNumber",Be(y,f))})).apply(this,arguments)}function Bc(){return(Bc=(0,c.Z)(function*(y,f){const g=yield Bt(y,"POST","/v1/accounts:signInWithPhoneNumber",Be(y,f));if(g.temporaryProof)throw qe(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Lp={USER_NOT_FOUND:"user-not-found"};function jc(){return(jc=(0,c.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:signInWithPhoneNumber",Be(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Lp)})).apply(this,arguments)}class Ns extends bi{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Ns({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Ns({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function fl(y,f){return Mo.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function Pp(y,f){return Bc.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Fp(y,f){return jc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:b,verificationCode:G}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:b,code:G}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:b,phoneNumber:G,temporaryProof:ae}=f;return b||g||G||ae?new Ns({verificationId:g,verificationCode:b,phoneNumber:G,temporaryProof:ae}):null}}class cu{constructor(f){var g,b,G,ae,Se,Ve;const tt=(0,F.zd)((0,F.pd)(f)),dt=null!==(g=tt.apiKey)&&void 0!==g?g:null,Nt=null!==(b=tt.oobCode)&&void 0!==b?b:null,At=function Th(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(G=tt.mode)&&void 0!==G?G:null);B(dt&&Nt&&At,"argument-error"),this.apiKey=dt,this.operation=At,this.code=Nt,this.continueUrl=null!==(ae=tt.continueUrl)&&void 0!==ae?ae:null,this.languageCode=null!==(Se=tt.languageCode)&&void 0!==Se?Se:null,this.tenantId=null!==(Ve=tt.tenantId)&&void 0!==Ve?Ve:null}static parseLink(f){const g=function pa(y){const f=(0,F.zd)((0,F.pd)(y)).link,g=f?(0,F.zd)((0,F.pd)(f)).deep_link_id:null,b=(0,F.zd)((0,F.pd)(y)).deep_link_id;return(b?(0,F.zd)((0,F.pd)(b)).link:null)||b||g||f||y}(f);try{return new cu(g)}catch(b){return null}}}let Hc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,b){return Ir._fromEmailAndPassword(g,b)}static credentialWithLink(g,b){const G=cu.parseLink(b);return B(G,"argument-error"),Ir._fromEmailAndCode(g,G.code,G.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Dr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Qo extends Dr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Li extends Qo{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return B("providerId"in g&&"signInMethod"in g,"argument-error"),ro._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return B(f.idToken||f.accessToken,"argument-error"),ro._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Li.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Li.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:b,oauthTokenSecret:G,pendingToken:ae,nonce:Se,providerId:Ve}=f;if(!b&&!G&&!g&&!ae||!Ve)return null;try{return new Li(Ve)._credential({idToken:g,accessToken:b,nonce:Se,pendingToken:ae})}catch(tt){return null}}}let ks=(()=>{class y extends Qo{constructor(){super("facebook.com")}static credential(g){return ro._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(b){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),$c=(()=>{class y extends Qo{constructor(){super("google.com"),this.addScope("profile")}static credential(g,b){return ro._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:b})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:b,oauthAccessToken:G}=g;if(!b&&!G)return null;try{return y.credential(b,G)}catch(ae){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Ch=(()=>{class y extends Qo{constructor(){super("github.com")}static credential(g){return ro._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(b){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Jo extends bi{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Oo(f,this.buildRequest())}_linkToIdToken(f,g){const b=this.buildRequest();return b.idToken=g,Oo(f,b)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Oo(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:b,signInMethod:G,pendingToken:ae}=g;return b&&G&&ae&&b===G?new Jo(b,ae):null}static _create(f,g){return new Jo(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class kr extends Dr{constructor(f){B(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return kr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return kr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Jo.fromJSON(f);return B(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:b}=f;if(!g||!b)return null;try{return Jo._create(b,g)}catch(G){return null}}}let zc=(()=>{class y extends Qo{constructor(){super("twitter.com")}static credential(g,b){return ro._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:b})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:b,oauthTokenSecret:G}=g;if(!b||!G)return null;try{return y.credential(b,G)}catch(ae){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Rr(y,f){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,c.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:signUp",Be(y,f))})).apply(this,arguments)}class ii{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,b,G=!1){return(0,c.Z)(function*(){const ae=yield Dt._fromIdTokenResponse(f,b,G),Se=pl(b);return new ii({user:ae,providerId:Se,_tokenResponse:b,operationType:g})})()}static _forOperation(f,g,b){return(0,c.Z)(function*(){yield f._updateTokensIfNecessary(b,!0);const G=pl(b);return new ii({user:f,providerId:G,_tokenResponse:b,operationType:g})})()}}function pl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function gl(){return(gl=(0,c.Z)(function*(y){var f;const g=Tt(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new ii({user:g.currentUser,providerId:null,operationType:"signIn"});const b=yield Rr(g,{returnSecureToken:!0}),G=yield ii._fromIdTokenResponse(g,"signIn",b,!0);return yield g._updateCurrentUser(G.user),G})).apply(this,arguments)}class Ps extends F.ZR{constructor(f,g,b,G){var ae;super(g.code,g.message),this.operationType=b,this.user=G,Object.setPrototypeOf(this,Ps.prototype),this.customData={appName:f.name,tenantId:null!==(ae=f.tenantId)&&void 0!==ae?ae:void 0,_serverResponse:g.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(f,g,b,G){return new Ps(f,g,b,G)}}function ml(y,f,g,b){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(ae=>{throw"auth/multi-factor-auth-required"===ae.code?Ps._fromErrorAndOperation(y,ae,f,b):ae})}function Fi(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function En(){return(En=(0,c.Z)(function*(y,f){const g=(0,F.m9)(y);yield pn(!0,g,f);const{providerUserInfo:b}=yield ze(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),G=Fi(b||[]);return g.providerData=g.providerData.filter(ae=>G.has(ae.providerId)),G.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function ga(y,f){return es.apply(this,arguments)}function es(){return(es=(0,c.Z)(function*(y,f,g=!1){const b=yield Er(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return ii._forOperation(y,"link",b)})).apply(this,arguments)}function pn(y,f,g){return ma.apply(this,arguments)}function ma(){return(ma=(0,c.Z)(function*(y,f,g){yield Mr(f);const G=!1===y?"provider-already-linked":"no-such-provider";B(Fi(f.providerData).has(g)===y,f.auth,G)})).apply(this,arguments)}function du(y,f){return No.apply(this,arguments)}function No(){return(No=(0,c.Z)(function*(y,f,g=!1){var b;const{auth:G}=y,ae="reauthenticate";try{const Se=yield Er(y,ml(G,ae,f,y),g);B(Se.idToken,G,"internal-error");const Ve=ft(Se.idToken);B(Ve,G,"internal-error");const{sub:tt}=Ve;return B(y.uid===tt,G,"user-mismatch"),ii._forOperation(y,ae,Se)}catch(Se){throw"auth/user-not-found"===(null===(b=Se)||void 0===b?void 0:b.code)&&Z(G,"user-mismatch"),Se}})).apply(this,arguments)}function fr(y,f){return yl.apply(this,arguments)}function yl(){return(yl=(0,c.Z)(function*(y,f,g=!1){const b="signIn",G=yield ml(y,b,f),ae=yield ii._fromIdTokenResponse(y,b,G);return g||(yield y._updateCurrentUser(ae.user)),ae})).apply(this,arguments)}function On(y,f){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,c.Z)(function*(y,f){return fr(Tt(y),f)})).apply(this,arguments)}function pr(y,f){return ts.apply(this,arguments)}function ts(){return(ts=(0,c.Z)(function*(y,f){const g=(0,F.m9)(y);return yield pn(!1,g,f.providerId),ga(g,f)})).apply(this,arguments)}function io(y,f){return ya.apply(this,arguments)}function ya(){return(ya=(0,c.Z)(function*(y,f){return du((0,F.m9)(y),f)})).apply(this,arguments)}function Ei(y,f){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,c.Z)(function*(y,f){return Bt(y,"POST","/v1/accounts:signInWithCustomToken",Be(y,f))})).apply(this,arguments)}function xt(){return(xt=(0,c.Z)(function*(y,f){const g=Tt(y),b=yield Ei(g,{token:f,returnSecureToken:!0}),G=yield ii._fromIdTokenResponse(g,"signIn",b);return yield g._updateCurrentUser(G.user),G})).apply(this,arguments)}class Fs{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?hu._fromServerResponse(f,g):Z(f,"internal-error")}}class hu extends Fs{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new hu(g)}}function va(y,f,g){var b;B((null===(b=g.url)||void 0===b?void 0:b.length)>0,y,"invalid-continue-uri"),B(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(B(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(B(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function _a(){return(_a=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y),G={requestType:"PASSWORD_RESET",email:f};g&&va(b,G,g),yield fa(b,G)})).apply(this,arguments)}function bl(){return(bl=(0,c.Z)(function*(y,f,g){yield Vn((0,F.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Qt(){return(Qt=(0,c.Z)(function*(y,f){yield au((0,F.m9)(y),{oobCode:f})})).apply(this,arguments)}function fu(y,f){return An.apply(this,arguments)}function An(){return(An=(0,c.Z)(function*(y,f){const g=(0,F.m9)(y),b=yield Vn(g,{oobCode:f}),G=b.requestType;switch(B(G,g,"internal-error"),G){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(b.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(b.mfaInfo,g,"internal-error");default:B(b.email,g,"internal-error")}let ae=null;return b.mfaInfo&&(ae=Fs._fromServerResponse(Tt(g),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:ae},operation:G}})).apply(this,arguments)}function ns(){return(ns=(0,c.Z)(function*(y,f){const{data:g}=yield fu((0,F.m9)(y),f);return g.email})).apply(this,arguments)}function ba(){return(ba=(0,c.Z)(function*(y,f,g){const b=Tt(y),G=yield Rr(b,{returnSecureToken:!0,email:f,password:g}),ae=yield ii._fromIdTokenResponse(b,"signIn",G);return yield b._updateCurrentUser(ae.user),ae})).apply(this,arguments)}function pu(){return(pu=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y),G={requestType:"EMAIL_SIGNIN",email:f};B(g.handleCodeInApp,b,"argument-error"),g&&va(b,G,g),yield ki(b,G)})).apply(this,arguments)}function Un(){return(Un=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y),G=Hc.credentialWithLink(f,g||le());return B(G._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),On(b,G)})).apply(this,arguments)}function oo(y,f){return wa.apply(this,arguments)}function wa(){return(wa=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:createAuthUri",Be(y,f))})).apply(this,arguments)}function wi(){return(wi=(0,c.Z)(function*(y,f){const b={identifier:f,continueUri:ie()?le():"http://localhost"},{signinMethods:G}=yield oo((0,F.m9)(y),b);return G||[]})).apply(this,arguments)}function mu(){return(mu=(0,c.Z)(function*(y,f){const g=(0,F.m9)(y),G={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&va(g.auth,G,f);const{email:ae}=yield bn(g.auth,G);ae!==y.email&&(yield y.reload())})).apply(this,arguments)}function yu(){return(yu=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y),ae={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&va(b.auth,ae,g);const{email:Se}=yield Lc(b.auth,ae);Se!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ia(y,f){return Da.apply(this,arguments)}function Da(){return(Da=(0,c.Z)(function*(y,f){return Qe(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ta(){return(Ta=(0,c.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const b=(0,F.m9)(y),ae={idToken:yield b.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},Se=yield Er(b,Ia(b.auth,ae));b.displayName=Se.displayName||null,b.photoURL=Se.photoUrl||null;const Ve=b.providerData.find(({providerId:tt})=>"password"===tt);Ve&&(Ve.displayName=b.displayName,Ve.photoURL=b.photoURL),yield b._updateTokensIfNecessary(Se)})).apply(this,arguments)}function Us(y,f,g){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,c.Z)(function*(y,f,g){const{auth:b}=y,ae={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(ae.email=f),g&&(ae.password=g);const Se=yield Er(y,ha(b,ae));yield y._updateTokensIfNecessary(Se,!0)})).apply(this,arguments)}class Bs{constructor(f,g,b={}){this.isNewUser=f,this.providerId=g,this.profile=b}}class Kc extends Bs{constructor(f,g,b,G){super(f,g,b),this.username=G}}class js extends Bs{constructor(f,g){super(f,"facebook.com",g)}}class Bi extends Kc{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Sh extends Bs{constructor(f,g){super(f,"google.com",g)}}class ar extends Kc{constructor(f,g,b){super(f,"twitter.com",g,b)}}function ji(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Zc(y){var f,g;if(!y)return null;const{providerId:b}=y,G=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},ae=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!b&&(null==y?void 0:y.idToken)){const Se=null===(g=null===(f=ft(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(Se)return new Bs(ae,"anonymous"!==Se&&"custom"!==Se?Se:null)}if(!b)return null;switch(b){case"facebook.com":return new js(ae,G);case"github.com":return new Bi(ae,G);case"google.com":return new Sh(ae,G);case"twitter.com":return new ar(ae,G,y.screenName||null);case"custom":case"anonymous":return new Bs(ae,null);default:return new Bs(ae,b,G)}}(g)}class so{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new so("enroll",f)}static _fromMfaPendingCredential(f){return new so("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,b;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return so._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(b=f.multiFactorSession)||void 0===b?void 0:b.idToken)return so._fromIdtoken(f.multiFactorSession.idToken)}return null}}class qs{constructor(f,g,b){this.session=f,this.hints=g,this.signInResolver=b}static _fromError(f,g){const b=Tt(f),G=g.customData._serverResponse,ae=(G.mfaInfo||[]).map(Ve=>Fs._fromServerResponse(b,Ve));B(G.mfaPendingCredential,b,"internal-error");const Se=so._fromMfaPendingCredential(G.mfaPendingCredential);return new qs(Se,ae,function(){var Ve=(0,c.Z)(function*(tt){const dt=yield tt._process(b,Se);delete G.mfaInfo,delete G.mfaPendingCredential;const Nt=Object.assign(Object.assign({},G),{idToken:dt.idToken,refreshToken:dt.refreshToken});switch(g.operationType){case"signIn":const At=yield ii._fromIdTokenResponse(b,g.operationType,Nt);return yield b._updateCurrentUser(At.user),At;case"reauthenticate":return B(g.user,b,"internal-error"),ii._forOperation(g.user,g.operationType,Nt);default:Z(b,"internal-error")}});return function(tt){return Ve.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,c.Z)(function*(){return g.signInResolver(f)})()}}function Oh(y,f){return Qe(y,"POST","/v2/accounts/mfaEnrollment:start",Be(y,f))}class Jc{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(b=>Fs._fromServerResponse(f.auth,b)))})}static _fromUser(f){return new Jc(f)}getSession(){var f=this;return(0,c.Z)(function*(){return so._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var b=this;return(0,c.Z)(function*(){const G=f,ae=yield b.getSession(),Se=yield Er(b.user,G._process(b.user.auth,ae,g));return yield b.user._updateTokensIfNecessary(Se),b.user.reload()})()}unenroll(f){var g=this;return(0,c.Z)(function*(){var b;const G="string"==typeof f?f:f.uid,ae=yield g.user.getIdToken(),Se=yield Er(g.user,function vu(y,f){return Qe(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Be(y,f))}(g.user.auth,{idToken:ae,mfaEnrollmentId:G}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Ve})=>Ve!==G),yield g.user._updateTokensIfNecessary(Se);try{yield g.user.reload()}catch(Ve){if("auth/user-token-expired"!==(null===(b=Ve)||void 0===b?void 0:b.code))throw Ve}})()}}const _u=new WeakMap,Ro="__sak";class Cl{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Ro,"1"),this.storage.removeItem(Ro),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const si=(()=>{class y extends Cl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,b)=>this.onStorageEvent(g,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function jp(){const y=(0,F.z$)();return Os(y)||$r(y)}()&&function dr(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Co(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const b of Object.keys(this.listeners)){const G=this.storage.getItem(b),ae=this.localCache[b];G!==ae&&g(b,ae,G)}}onStorageEvent(g,b=!1){if(!g.key)return void this.forAllChangedKeys((Ve,tt,dt)=>{this.notifyListeners(Ve,dt)});const G=g.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ve=this.storage.getItem(G);if(g.newValue!==Ve)null!==g.newValue?this.storage.setItem(G,g.newValue):this.storage.removeItem(G);else if(this.localCache[G]===g.newValue&&!b)return}const ae=()=>{const Ve=this.storage.getItem(G);!b&&this.localCache[G]===Ve||this.notifyListeners(G,Ve)},Se=this.storage.getItem(G);!function da(){return(0,F.w1)()&&10===document.documentMode}()||Se===g.newValue||g.newValue===g.oldValue?ae():setTimeout(ae,10)}notifyListeners(g,b){this.localCache[g]=b;const G=this.listeners[g];if(G)for(const ae of Array.from(G))ae(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,b,G)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:b,newValue:G}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,b){var G=()=>super._set,ae=this;return(0,c.Z)(function*(){yield G().call(ae,g,b),ae.localCache[g]=JSON.stringify(b)})()}_get(g){var b=()=>super._get,G=this;return(0,c.Z)(function*(){const ae=yield b().call(G,g);return G.localCache[g]=JSON.stringify(ae),ae})()}_remove(g){var b=()=>super._remove,G=this;return(0,c.Z)(function*(){yield b().call(G,g),delete G.localCache[g]})()}}return y.type="LOCAL",y})(),zn=(()=>{class y extends Cl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,b){}_removeListener(g,b){}}return y.type="SESSION",y})();let Xc=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const b=this.receivers.find(ae=>ae.isListeningto(g));if(b)return b;const G=new y(g);return this.receivers.push(G),G}isListeningto(g){return this.eventTarget===g}handleEvent(g){var b=this;return(0,c.Z)(function*(){const G=g,{eventId:ae,eventType:Se,data:Ve}=G.data,tt=b.handlersMap[Se];if(!(null==tt?void 0:tt.size))return;G.ports[0].postMessage({status:"ack",eventId:ae,eventType:Se});const dt=Array.from(tt).map(function(){var At=(0,c.Z)(function*(Ln){return Ln(G.origin,Ve)});return function(Ln){return At.apply(this,arguments)}}()),Nt=yield function Al(y){return Promise.all(y.map(function(){var f=(0,c.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(b){return{fulfilled:!1,reason:b}}});return function(g){return f.apply(this,arguments)}}()))}(dt);G.ports[0].postMessage({status:"done",eventId:ae,eventType:Se,response:Nt})})()}_subscribe(g,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(b)}_unsubscribe(g,b){this.handlersMap[g]&&b&&this.handlersMap[g].delete(b),(!b||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function qi(y="",f=10){let g="";for(let b=0;b<f;b++)g+=Math.floor(10*Math.random());return y+g}class Sl{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,b=50){var G=this;return(0,c.Z)(function*(){const ae="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ae)throw new Error("connection_unavailable");let Se,Ve;return new Promise((tt,dt)=>{const Nt=qi("",20);ae.port1.start();const At=setTimeout(()=>{dt(new Error("unsupported_event"))},b);Ve={messageChannel:ae,onMessage(Ln){const pi=Ln;if(pi.data.eventId===Nt)switch(pi.data.status){case"ack":clearTimeout(At),Se=setTimeout(()=>{dt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Se),tt(pi.data.response);break;default:clearTimeout(At),clearTimeout(Se),dt(new Error("invalid_response"))}}},G.handlers.add(Ve),ae.port1.addEventListener("message",Ve.onMessage),G.target.postMessage({eventType:f,eventId:Nt,data:g},[ae.port2])}).finally(()=>{Ve&&G.removeMessageHandler(Ve)})})()}}function Dn(){return window}function Ii(){return void 0!==Dn().WorkerGlobalScope&&"function"==typeof Dn().importScripts}function bu(){return(bu=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Oa="firebaseLocalStorageDb",Po="firebaseLocalStorage",Eu="fbase_key";class Hi{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Lo(y,f){return y.transaction([Po],f?"readwrite":"readonly").objectStore(Po)}function is(){const y=indexedDB.open(Oa,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const b=y.result;try{b.createObjectStore(Po,{keyPath:Eu})}catch(G){g(G)}}),y.addEventListener("success",(0,c.Z)(function*(){const b=y.result;b.objectStoreNames.contains(Po)?f(b):(b.close(),yield function Ma(){const y=indexedDB.deleteDatabase(Oa);return new Hi(y).toPromise()}(),f(yield is()))}))})}function Na(y,f,g){return os.apply(this,arguments)}function os(){return(os=(0,c.Z)(function*(y,f,g){const b=Lo(y,!0).put({[Eu]:f,value:g});return new Hi(b).toPromise()})).apply(this,arguments)}function ka(){return(ka=(0,c.Z)(function*(y,f){const g=Lo(y,!1).get(f),b=yield new Hi(g).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Ra(y,f){const g=Lo(y,!0).delete(f);return new Hi(g).toPromise()}const Uo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,c.Z)(function*(){return g.db||(g.db=yield is()),g.db})()}_withRetries(g){var b=this;return(0,c.Z)(function*(){let G=0;for(;;)try{const ae=yield b._openDb();return yield g(ae)}catch(ae){if(G++>3)throw ae;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,c.Z)(function*(){return Ii()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,c.Z)(function*(){g.receiver=Xc._getInstance(function td(){return Ii()?self:null}()),g.receiver._subscribe("keyChanged",function(){var b=(0,c.Z)(function*(G,ae){return{keyProcessed:(yield g._poll()).includes(ae.key)}});return function(G,ae){return b.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var b=(0,c.Z)(function*(G,ae){return["keyChanged"]});return function(G,ae){return b.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,c.Z)(function*(){var b,G;if(g.activeServiceWorker=yield function Wt(){return bu.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Sl(g.activeServiceWorker);const ae=yield g.sender._send("ping",{},800);!ae||(null===(b=ae[0])||void 0===b?void 0:b.fulfilled)&&(null===(G=ae[0])||void 0===G?void 0:G.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var b=this;return(0,c.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function ed(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:g},b.serviceWorkerReceiverAvailable?800:50)}catch(G){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const g=yield is();return yield Na(g,Ro,"1"),yield Ra(g,Ro),!0}catch(g){}return!1})()}_withPendingWrite(g){var b=this;return(0,c.Z)(function*(){b.pendingWrites++;try{yield g()}finally{b.pendingWrites--}})()}_set(g,b){var G=this;return(0,c.Z)(function*(){return G._withPendingWrite((0,c.Z)(function*(){return yield G._withRetries(ae=>Na(ae,g,b)),G.localCache[g]=b,G.notifyServiceWorker(g)}))})()}_get(g){var b=this;return(0,c.Z)(function*(){const G=yield b._withRetries(ae=>function ss(y,f){return ka.apply(this,arguments)}(ae,g));return b.localCache[g]=G,G})()}_remove(g){var b=this;return(0,c.Z)(function*(){return b._withPendingWrite((0,c.Z)(function*(){return yield b._withRetries(G=>Ra(G,g)),delete b.localCache[g],b.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,c.Z)(function*(){const b=yield g._withRetries(Se=>{const Ve=Lo(Se,!1).getAll();return new Hi(Ve).toPromise()});if(!b)return[];if(0!==g.pendingWrites)return[];const G=[],ae=new Set;for(const{fbase_key:Se,value:Ve}of b)ae.add(Se),JSON.stringify(g.localCache[Se])!==JSON.stringify(Ve)&&(g.notifyListeners(Se,Ve),G.push(Se));for(const Se of Object.keys(g.localCache))g.localCache[Se]&&!ae.has(Se)&&(g.notifyListeners(Se,null),G.push(Se));return G})()}notifyListeners(g,b){this.localCache[g]=b;const G=this.listeners[g];if(G)for(const ae of Array.from(G))ae(b)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(b)}_removeListener(g,b){this.listeners[g]&&(this.listeners[g].delete(b),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function lr(y,f){return Qe(y,"POST","/v2/accounts/mfaSignIn:start",Be(y,f))}function Bn(){return(Bn=(0,c.Z)(function*(y){return(yield Qe(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Zr(y){return new Promise((f,g)=>{const b=document.createElement("script");b.setAttribute("src",y),b.onload=f,b.onerror=G=>{const ae=X("internal-error");ae.customData=G,g(ae)},b.type="text/javascript",b.charset="UTF-8",function Gs(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(b)})}function Bo(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Tr=1e12;class jn{constructor(f){this.auth=f,this.counter=Tr,this._widgets=new Map}render(f,g){const b=this.counter;return this._widgets.set(b,new wu(f,this.auth.name,g||{})),this.counter++,b}reset(f){var g;const b=f||Tr;null===(g=this._widgets.get(b))||void 0===g||g.delete(),this._widgets.delete(b)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Tr))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,c.Z)(function*(){var b;return null===(b=g._widgets.get(f||Tr))||void 0===b||b.execute(),""})()}}class wu{constructor(f,g,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const G="string"==typeof f?document.getElementById(f):f;B(G,"argument-error",{appName:g}),this.container=G,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function xl(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<y;b++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Sn=Bo("rcb"),Mh=new xe(3e4,6e4);class nd{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(f=Dn().grecaptcha)||void 0===f?void 0:f.render)}load(f,g=""){return B(function Pa(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Dn().grecaptcha):new Promise((b,G)=>{const ae=Dn().setTimeout(()=>{G(X(f,"network-request-failed"))},Mh.get());Dn()[Sn]=()=>{Dn().clearTimeout(ae),delete Dn()[Sn];const Ve=Dn().grecaptcha;if(!Ve)return void G(X(f,"internal-error"));const tt=Ve.render;Ve.render=(dt,Nt)=>{const At=tt(dt,Nt);return this.counter++,At},this.hostLanguage=g,b(Ve)},Zr(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Sn,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(ae),G(X(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!!(null===(g=Dn().grecaptcha)||void 0===g?void 0:g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ti{load(f){return(0,c.Z)(function*(){return new jn(f)})()}clearedOneInstance(){}}const qp="recaptcha",us={theme:"light",type:"image"};class zs{constructor(f,g=Object.assign({},us),b){this.parameters=g,this.type=qp,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Tt(b),this.isInvisible="invisible"===this.parameters.size,B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const G="string"==typeof f?document.getElementById(f):f;B(G,this.auth,"argument-error"),this.container=G,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ti:new nd,this.validateStartingState()}verify(){var f=this;return(0,c.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),b=f.getAssertedRecaptcha();return b.getResponse(g)||new Promise(ae=>{const Se=Ve=>{!Ve||(f.tokenChangeListeners.delete(Se),ae(Ve))};f.tokenChangeListeners.add(Se),f.isInvisible&&b.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(b=>b(g)),"function"==typeof f)f(g);else if("string"==typeof f){const b=Dn()[f];"function"==typeof b&&b(g)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,c.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const b=document.createElement("div");g.appendChild(b),g=b}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,c.Z)(function*(){B(ie()&&!Ii(),f.auth,"internal-error"),yield function Iu(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function $i(y){return Bn.apply(this,arguments)}(f.auth);B(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Pn{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Ns._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function jo(){return(jo=(0,c.Z)(function*(y,f,g){const b=Tt(y),G=yield Ws(b,f,(0,F.m9)(g));return new Pn(G,ae=>On(b,ae))})).apply(this,arguments)}function Ol(){return(Ol=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y);yield pn(!1,b,"phone");const G=yield Ws(b.auth,f,(0,F.m9)(g));return new Pn(G,ae=>pr(b,ae))})).apply(this,arguments)}function li(){return(li=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y),G=yield Ws(b.auth,f,(0,F.m9)(g));return new Pn(G,ae=>io(b,ae))})).apply(this,arguments)}function Ws(y,f,g){return ls.apply(this,arguments)}function ls(){return(ls=(0,c.Z)(function*(y,f,g){var b;const G=yield g.verify();try{let ae;if(B("string"==typeof G,y,"argument-error"),B(g.type===qp,y,"argument-error"),ae="string"==typeof f?{phoneNumber:f}:f,"session"in ae){const Se=ae.session;if("phoneNumber"in ae)return B("enroll"===Se.type,y,"internal-error"),(yield Oh(y,{idToken:Se.credential,phoneEnrollmentInfo:{phoneNumber:ae.phoneNumber,recaptchaToken:G}})).phoneSessionInfo.sessionInfo;{B("signin"===Se.type,y,"internal-error");const Ve=(null===(b=ae.multiFactorHint)||void 0===b?void 0:b.uid)||ae.multiFactorUid;return B(Ve,y,"missing-multi-factor-info"),(yield lr(y,{mfaPendingCredential:Se.credential,mfaEnrollmentId:Ve,phoneSignInInfo:{recaptchaToken:G}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Se}=yield Rp(y,{phoneNumber:ae.phoneNumber,recaptchaToken:G});return Se}}finally{g._reset()}})).apply(this,arguments)}function Cu(){return(Cu=(0,c.Z)(function*(y,f){yield ga((0,F.m9)(y),f)})).apply(this,arguments)}let La=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Tt(g)}verifyPhoneNumber(g,b){return Ws(this.auth,g,(0,F.m9)(b))}static credential(g,b){return Ns._fromVerification(g,b)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:b,temporaryProof:G}=g;return b&&G?Ns._fromTokenResponse(b,G):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function cs(y,f){return f?ue(f):(B(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ml extends bi{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Oo(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Oo(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Oo(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Jt(y){return fr(y.auth,new Ml(y),y.bypassAuthState)}function Au(y){const{auth:f,user:g}=y;return B(g,f,"internal-error"),du(g,new Ml(y),y.bypassAuthState)}function qn(y){return qo.apply(this,arguments)}function qo(){return(qo=(0,c.Z)(function*(y){const{auth:f,user:g}=y;return B(g,f,"internal-error"),ga(g,new Ml(y),y.bypassAuthState)})).apply(this,arguments)}class Ci{constructor(f,g,b,G,ae=!1){this.auth=f,this.resolver=b,this.user=G,this.bypassAuthState=ae,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,c.Z)(function*(b,G){f.pendingPromise={resolve:b,reject:G};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(ae){f.reject(ae)}});return function(b,G){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,c.Z)(function*(){const{urlResponse:b,sessionId:G,postBody:ae,tenantId:Se,error:Ve,type:tt}=f;if(Ve)return void g.reject(Ve);const dt={auth:g.auth,requestUri:b,sessionId:G,tenantId:Se||void 0,postBody:ae||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(tt)(dt))}catch(Nt){g.reject(Nt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Jt;case"linkViaPopup":case"linkViaRedirect":return qn;case"reauthViaPopup":case"reauthViaRedirect":return Au;default:Z(this.auth,"internal-error")}}resolve(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rd=new xe(2e3,1e4);function Fa(){return(Fa=(0,c.Z)(function*(y,f,g){const b=Tt(y);H(y,f,Dr);const G=cs(b,g);return new kl(b,"signInViaPopup",f,G).executeNotNull()})).apply(this,arguments)}function Nl(){return(Nl=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y);H(b.auth,f,Dr);const G=cs(b.auth,g);return new kl(b.auth,"reauthViaPopup",f,G,b).executeNotNull()})).apply(this,arguments)}function xu(){return(xu=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y);H(b.auth,f,Dr);const G=cs(b.auth,g);return new kl(b.auth,"linkViaPopup",f,G,b).executeNotNull()})).apply(this,arguments)}let kl=(()=>{class y extends Ci{constructor(g,b,G,ae,Se){super(g,b,ae,Se),this.provider=G,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,c.Z)(function*(){const b=yield g.execute();return B(b,g.auth,"internal-error"),b})()}onExecution(){var g=this;return(0,c.Z)(function*(){Y(1===g.filter.length,"Popup operations only handle one event");const b=qi();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],b),g.authWindow.associatedEvent=b,g.resolver._originValidation(g.auth).catch(G=>{g.reject(G)}),g.resolver._isIframeWebStorageSupported(g.auth,G=>{G||g.reject(X(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(X(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var b,G;this.pollId=(null===(G=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===G?void 0:G.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(X(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,rd.get())};g()}}return y.currentPopupAction=null,y})();const er=new Map;class $p extends Ci{constructor(f,g,b=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,b),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,c.Z)(function*(){let b=er.get(g.auth._key());if(!b){try{const ae=(yield function Va(y,f){return ci.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;b=()=>Promise.resolve(ae)}catch(G){b=()=>Promise.reject(G)}er.set(g.auth._key(),b)}return g.bypassAuthState||er.set(g.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,b=this;return(0,c.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(b,f);if("unknown"!==f.type){if(f.eventId){const G=yield b.auth._redirectUserForId(f.eventId);if(G)return b.user=G,g().call(b,f);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function ci(){return(ci=(0,c.Z)(function*(y,f){const g=Rl(f),b=Ua(y);if(!(yield b._isAvailable()))return!1;const G="true"===(yield b._get(g));return yield b._remove(g),G})).apply(this,arguments)}function ds(y,f){return uo.apply(this,arguments)}function uo(){return(uo=(0,c.Z)(function*(y,f){return Ua(y)._set(Rl(f),"true")})).apply(this,arguments)}function id(y,f){er.set(y._key(),f)}function Ua(y){return ue(y._redirectPersistence)}function Rl(y){return or("pendingRedirect",y.config.apiKey,y.name)}function O(){return(O=(0,c.Z)(function*(y,f,g){const b=Tt(y);H(y,f,Dr);const G=cs(b,g);return yield ds(G,b),G._openRedirect(b,f,"signInViaRedirect")})).apply(this,arguments)}function ye(){return(ye=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y);H(b.auth,f,Dr);const G=cs(b.auth,g);yield ds(G,b.auth);const ae=yield bt(b);return G._openRedirect(b.auth,f,"reauthViaRedirect",ae)})).apply(this,arguments)}function Ye(){return(Ye=(0,c.Z)(function*(y,f,g){const b=(0,F.m9)(y);H(b.auth,f,Dr);const G=cs(b.auth,g);yield pn(!1,b,f.providerId),yield ds(G,b.auth);const ae=yield bt(b);return G._openRedirect(b.auth,f,"linkViaRedirect",ae)})).apply(this,arguments)}function _t(){return(_t=(0,c.Z)(function*(y,f){return yield Tt(y)._initializationPromise,Ot(y,f,!1)})).apply(this,arguments)}function Ot(y,f){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,c.Z)(function*(y,f,g=!1){const b=Tt(y),G=cs(b,f),Se=yield new $p(b,G,g).execute();return Se&&!g&&(delete Se.user._redirectEventId,yield b._persistUserIfCurrent(Se.user),yield b._setRedirectUser(null,f)),Se})).apply(this,arguments)}function bt(y){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,c.Z)(function*(y){const f=qi(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class lo{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(f,b)&&(g=!0,this.sendToConsumer(f,b),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function od(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ai(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var b;if(f.error&&!Ai(f)){const G=(null===(b=f.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";g.onError(X(this.auth,G))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const b=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&b}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(co(f))}saveEventToCache(f){this.cachedEventUids.add(co(f)),this.lastProcessedEventTime=Date.now()}}function co(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Ai({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Ou(y){return fs.apply(this,arguments)}function fs(){return(fs=(0,c.Z)(function*(y,f={}){return Qe(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Ar=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gi=/^https?/;function Gp(){return(Gp=(0,c.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Ou(y);for(const g of f)try{if(zp(g))return}catch(b){}Z(y,"unauthorized-domain")})).apply(this,arguments)}function zp(y){const f=le(),{protocol:g,hostname:b}=new URL(f);if(y.startsWith("chrome-extension://")){const Se=new URL(y);return""===Se.hostname&&""===b?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&Se.hostname===b}if(!Gi.test(g))return!1;if(Ar.test(y))return b===y;const G=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+G+"|"+G+")$","i").test(b)}const by=new xe(3e4,6e4);function Wp(){const y=Dn().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Mu=null;function ps(y){return Mu=Mu||function Ph(y){return new Promise((f,g)=>{var b,G,ae;function Se(){Wp(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Wp(),g(X(y,"network-request-failed"))},timeout:by.get()})}if(null===(G=null===(b=Dn().gapi)||void 0===b?void 0:b.iframes)||void 0===G?void 0:G.Iframe)f(gapi.iframes.getContext());else{if(!(null===(ae=Dn().gapi)||void 0===ae?void 0:ae.load)){const Ve=Bo("iframefcb");return Dn()[Ve]=()=>{gapi.load?Se():g(X(y,"network-request-failed"))},Zr(`https://apis.google.com/js/api.js?onload=${Ve}`).catch(tt=>g(tt))}Se()}}).catch(f=>{throw Mu=null,f})}(y),Mu}const gs=new xe(5e3,15e3),Ey={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ja=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wy(y){const f=y.config;B(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?he(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,b={apiKey:f.apiKey,appName:y.name,v:K.SDK_VERSION},G=ja.get(y.config.apiHost);G&&(b.eid=G);const ae=y._getFrameworks();return ae.length&&(b.fw=ae.join(",")),`${g}?${(0,F.xO)(b).slice(1)}`}function Zs(){return Zs=(0,c.Z)(function*(y){const f=yield ps(y),g=Dn().gapi;return B(g,y,"internal-error"),f.open({where:document.body,url:wy(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ey,dontclear:!0},b=>new Promise(function(){var G=(0,c.Z)(function*(ae,Se){yield b.restyle({setHideOnLeave:!1});const Ve=X(y,"network-request-failed"),tt=Dn().setTimeout(()=>{Se(Ve)},gs.get());function dt(){Dn().clearTimeout(tt),ae(b)}b.ping(dt).then(dt,()=>{Se(Ve)})});return function(ae,Se){return G.apply(this,arguments)}}()))}),Zs.apply(this,arguments)}const Lh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Zp{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function ho(y,f,g,b,G,ae){B(y.config.authDomain,y,"auth-domain-config-required"),B(y.config.apiKey,y,"invalid-api-key");const Se={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:b,v:K.SDK_VERSION,eventId:G};if(f instanceof Dr){f.setDefaultLanguage(y.languageCode),Se.providerId=f.providerId||"",(0,F.xb)(f.getCustomParameters())||(Se.customParameters=JSON.stringify(f.getCustomParameters()));for(const[tt,dt]of Object.entries(ae||{}))Se[tt]=dt}if(f instanceof Qo){const tt=f.getScopes().filter(dt=>""!==dt);tt.length>0&&(Se.scopes=tt.join(","))}y.tenantId&&(Se.tid=y.tenantId);const Ve=Se;for(const tt of Object.keys(Ve))void 0===Ve[tt]&&delete Ve[tt];return`${function Nu({config:y}){return y.emulator?he(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,F.xO)(Ve).slice(1)}`}const Ll="webStorageSupport";class Fl extends class Ty{constructor(f){this.factorId=f}_process(f,g,b){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,b);case"signin":return this._finalizeSignIn(f,g.credential);default:return te("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Fl(f)}_finalizeEnroll(f,g,b){return function rs(y,f){return Qe(y,"POST","/v2/accounts/mfaEnrollment:finalize",Be(y,f))}(f,{idToken:g,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function as(y,f){return Qe(y,"POST","/v2/accounts/mfaSignIn:finalize",Be(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Yp=(()=>{class y{constructor(){}static assertion(g){return Fl._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Qp="@firebase/auth";class Xp{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,c.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(b=>{var G;f((null===(G=b)||void 0===G?void 0:G.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function fo(){return window}function qa(){return(qa=(0,c.Z)(function*(y,f,g){var b;const{BuildInfo:G}=fo();Y(f.sessionId,"AuthEvent did not contain a session ID");const ae=yield jh(f.sessionId),Se={};return $r()?Se.ibi=G.packageName:Nr()?Se.apn=G.packageName:Z(y,"operation-not-supported-in-this-environment"),G.displayName&&(Se.appDisplayName=G.displayName),Se.sessionId=ae,ho(y,g,f.type,void 0,null!==(b=f.eventId)&&void 0!==b?b:void 0,Se)})).apply(this,arguments)}function dd(){return(dd=(0,c.Z)(function*(y){const{BuildInfo:f}=fo(),g={};$r()?g.iosBundleId=f.packageName:Nr()?g.androidPackageName=f.packageName:Z(y,"operation-not-supported-in-this-environment"),yield Ou(y,g)})).apply(this,arguments)}function ng(){return(ng=(0,c.Z)(function*(y,f,g){const{cordova:b}=fo();let G=()=>{};try{yield new Promise((ae,Se)=>{let Ve=null;function tt(){var At;ae();const Ln=null===(At=b.plugins.browsertab)||void 0===At?void 0:At.close;"function"==typeof Ln&&Ln(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function dt(){Ve||(Ve=window.setTimeout(()=>{Se(X(y,"redirect-cancelled-by-user"))},2e3))}function Nt(){"visible"===(null==document?void 0:document.visibilityState)&&dt()}f.addPassiveListener(tt),document.addEventListener("resume",dt,!1),Nr()&&document.addEventListener("visibilitychange",Nt,!1),G=()=>{f.removePassiveListener(tt),document.removeEventListener("resume",dt,!1),document.removeEventListener("visibilitychange",Nt,!1),Ve&&window.clearTimeout(Ve)}})}finally{G()}})).apply(this,arguments)}function jh(y){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,c.Z)(function*(y){const f=qh(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(G=>G.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function qh(y){if(Y(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let b=0;b<y.length;b++)g[b]=y.charCodeAt(b);return g}!function y0(y){(0,K._registerComponent)(new R.wA("auth",(f,{options:g})=>{const b=f.getProvider("app").getImmediate(),G=f.getProvider("heartbeat"),{apiKey:ae,authDomain:Se}=b.options;return((Ve,tt)=>{B(ae&&!ae.includes(":"),"invalid-api-key",{appName:Ve.name}),B(!(null==Se?void 0:Se.includes(":")),"argument-error",{appName:Ve.name});const dt={apiKey:ae,authDomain:Se,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ms(y)},Nt=new lt(Ve,tt,dt);return function ce(y,f){const g=(null==f?void 0:f.persistence)||[],b=(Array.isArray(g)?g:[g]).map(ue);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(b,null==f?void 0:f.popupRedirectResolver)}(Nt,g),Nt})(b,G)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,b)=>{f.getProvider("auth-internal").initialize()})),(0,K._registerComponent)(new R.wA("auth-internal",f=>{const g=Tt(f.getProvider("auth").getImmediate());return new Xp(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,K.registerVersion)(Qp,"0.20.5",function cd(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,K.registerVersion)(Qp,"0.20.5","esm2017")}("Browser");class fd extends lo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,c.Z)(function*(){yield f.initPromise})()}}function Pu(y){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,c.Z)(function*(y){const f=yield $a()._get(pd(y));return f&&(yield $a()._remove(pd(y))),f})).apply(this,arguments)}function Hh(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const b=Math.floor(Math.random()*f.length);y.push(f.charAt(b))}return y.join("")}function $a(){return ue(si)}function pd(y){return or("authEvent",y.config.apiKey,y.name)}function an(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,F.zd)(g.join("?"))}function Fu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:X("no-auth-event")}}function Ks(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function ig(y=(0,F.z$)()){return!("file:"!==Ks()&&"ionic:"!==Ks()&&"capacitor:"!==Ks()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zh(){try{const y=self.localStorage,f=qi();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Wh(y=(0,F.z$)()){return function Pr(){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Ga(y=(0,F.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,F.hl)()}catch(y){return gr()&&(0,F.hl)()}return!1}function gr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function za(){return(function Ny(){return"http:"===Ks()||"https:"===Ks()}()||(0,F.ru)()||ig())&&!function Ys(){return(0,F.b$)()||(0,F.UG)()}()&&Zh()&&!gr()}function gd(){return ig()&&"undefined"!=typeof document}function Bl(){return(Bl=(0,c.Z)(function*(){return!!gd()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const di={LOCAL:"local",NONE:"none",SESSION:"session"},vs=B,sg="persistence";function Vu(y){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,c.Z)(function*(y){yield y._initializationPromise;const f=ug(),g=or(sg,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function ug(){var y;try{return(null===(y=function og(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const Ry=B;class hi{constructor(){this.browserResolver=ue(class Kp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zn,this._completeRedirectFn=Ot,this._overrideRedirectResult=id}_openPopup(f,g,b,G){var ae=this;return(0,c.Z)(function*(){var Se;Y(null===(Se=ae.eventManagers[f._key()])||void 0===Se?void 0:Se.manager,"_initialize() not called before _openPopup()");const Ve=ho(f,g,b,le(),G);return function Pl(y,f,g,b=500,G=600){const ae=Math.max((window.screen.availHeight-G)/2,0).toString(),Se=Math.max((window.screen.availWidth-b)/2,0).toString();let Ve="";const tt=Object.assign(Object.assign({},Lh),{width:b.toString(),height:G.toString(),top:ae,left:Se}),dt=(0,F.z$)().toLowerCase();g&&(Ve=ca(dt)?"_blank":g),Oi(dt)&&(f=f||"http://localhost",tt.scrollbars="yes");const Nt=Object.entries(tt).reduce((Ln,[pi,ql])=>`${Ln}${pi}=${ql},`,"");if(function Ko(y=(0,F.z$)()){var f;return $r(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(dt)&&"_self"!==Ve)return function Iy(y,f){const g=document.createElement("a");g.href=y,g.target=f;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(b)}(f||"",Ve),new Zp(null);const At=window.open(f||"",Ve,Nt);B(At,y,"popup-blocked");try{At.focus()}catch(Ln){}return new Zp(At)}(f,Ve,qi())})()}_openRedirect(f,g,b,G){var ae=this;return(0,c.Z)(function*(){return yield ae._originValidation(f),function xa(y){Dn().location.href=y}(ho(f,g,b,le(),G)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:G,promise:ae}=this.eventManagers[g];return G?Promise.resolve(G):(Y(ae,"If manager is not set, promise should be"),ae)}const b=this.initAndGetManager(f);return this.eventManagers[g]={promise:b},b.catch(()=>{delete this.eventManagers[g]}),b}initAndGetManager(f){var g=this;return(0,c.Z)(function*(){const b=yield function ud(y){return Zs.apply(this,arguments)}(f),G=new lo(f);return b.register("authEvent",ae=>(B(null==ae?void 0:ae.authEvent,f,"invalid-auth-event"),{status:G.onEvent(ae.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:G},g.iframes[f._key()]=b,G})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Ll,{type:Ll},G=>{var ae;const Se=null===(ae=null==G?void 0:G[0])||void 0===ae?void 0:ae[Ll];void 0!==Se&&g(!!Se),Z(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function sd(y){return Gp.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Co()||Os()||$r()}}),this.cordovaResolver=ue(class rg{constructor(){this._redirectPersistence=zn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ot,this._overrideRedirectResult=id}_initialize(f){var g=this;return(0,c.Z)(function*(){const b=f._key();let G=g.eventManagers.get(b);return G||(G=new fd(f),g.eventManagers.set(b,G),g.attachCallbackListeners(f,G)),G})()}_openPopup(f){Z(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,b,G){var ae=this;return(0,c.Z)(function*(){!function ku(y){var f,g,b,G,ae,Se,Ve,tt,dt,Nt;const At=fo();B("function"==typeof(null===(f=null==At?void 0:At.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),B(void 0!==(null===(g=null==At?void 0:At.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),B("function"==typeof(null===(ae=null===(G=null===(b=null==At?void 0:At.cordova)||void 0===b?void 0:b.plugins)||void 0===G?void 0:G.browsertab)||void 0===ae?void 0:ae.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(tt=null===(Ve=null===(Se=null==At?void 0:At.cordova)||void 0===Se?void 0:Se.plugins)||void 0===Ve?void 0:Ve.browsertab)||void 0===tt?void 0:tt.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),B("function"==typeof(null===(Nt=null===(dt=null==At?void 0:At.cordova)||void 0===dt?void 0:dt.InAppBrowser)||void 0===Nt?void 0:Nt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Se=yield ae._initialize(f);yield Se.initialized(),Se.resetRedirect(),function Rh(){er.clear()}(),yield ae._originValidation(f);const Ve=function Ru(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Hh(),postBody:null,tenantId:y.tenantId,error:X(y,"no-auth-event")}}(f,b,G);yield function Cy(y,f){return $a()._set(pd(y),f)}(f,Ve);const tt=yield function po(y,f,g){return qa.apply(this,arguments)}(f,Ve,g),dt=yield function hd(y){const{cordova:f}=fo();return new Promise(g=>{f.plugins.browsertab.isAvailable(b=>{let G=null;b?f.plugins.browsertab.openUrl(y):G=f.InAppBrowser.open(y,function Pc(y=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(G)})})}(tt);return function Ha(y,f,g){return ng.apply(this,arguments)}(f,Se,dt)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function tg(y){return dd.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:b,handleOpenURL:G,BuildInfo:ae}=fo(),Se=setTimeout((0,c.Z)(function*(){yield Pu(f),g.onEvent(Fu())}),500),Ve=function(){var Nt=(0,c.Z)(function*(At){clearTimeout(Se);const Ln=yield Pu(f);let pi=null;Ln&&(null==At?void 0:At.url)&&(pi=function Ay(y,f){var g,b;const G=function Gh(y){const f=an(y),g=f.link?decodeURIComponent(f.link):void 0,b=an(g).link,G=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return an(G).link||G||b||g||y}(f);if(G.includes("/__/auth/callback")){const ae=an(G),Se=ae.firebaseError?function $h(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(ae.firebaseError)):null,Ve=null===(b=null===(g=null==Se?void 0:Se.code)||void 0===g?void 0:g.split("auth/"))||void 0===b?void 0:b[1],tt=Ve?X(Ve):null;return tt?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:tt,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:G,postBody:null}}return null}(Ln,At.url)),g.onEvent(pi||Fu())});return function(Ln){return Nt.apply(this,arguments)}}();void 0!==b&&"function"==typeof b.subscribe&&b.subscribe(null,Ve);const tt=G,dt=`${ae.packageName.toLowerCase()}://`;fo().handleOpenURL=function(){var Nt=(0,c.Z)(function*(At){if(At.toLowerCase().startsWith(dt)&&Ve({url:At}),"function"==typeof tt)try{tt(At)}catch(Ln){console.error(Ln)}});return function(At){return Nt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=zn,this._completeRedirectFn=Ot,this._overrideRedirectResult=id}_initialize(f){var g=this;return(0,c.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,b,G){var ae=this;return(0,c.Z)(function*(){return yield ae.selectUnderlyingResolver(),ae.assertedUnderlyingResolver._openPopup(f,g,b,G)})()}_openRedirect(f,g,b,G){var ae=this;return(0,c.Z)(function*(){return yield ae.selectUnderlyingResolver(),ae.assertedUnderlyingResolver._openRedirect(f,g,b,G)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return gd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ry(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,c.Z)(function*(){if(f.underlyingResolver)return;const g=yield function ky(){return Bl.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function lg(y){return y.unwrap()}function md(y){return cg(y)}function cg(y){const{_tokenResponse:f}=y instanceof F.ZR?y.customData:y;if(!f)return null;if(!(y instanceof F.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return La.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let b;switch(g){case"google.com":b=$c;break;case"facebook.com":b=ks;break;case"github.com":b=Ch;break;case"twitter.com":b=zc;break;default:const{oauthIdToken:G,oauthAccessToken:ae,oauthTokenSecret:Se,pendingToken:Ve,nonce:tt}=f;return ae||Se||G||Ve?Ve?g.startsWith("saml.")?Jo._create(g,Ve):ro._fromParams({providerId:g,signInMethod:g,pendingToken:Ve,idToken:G,accessToken:ae}):new Li(g).credential({idToken:G,accessToken:ae,rawNonce:tt}):null}return y instanceof F.ZR?b.credentialFromError(y):b.credentialFromResult(y)}function fi(y,f){return f.catch(g=>{throw g instanceof F.ZR&&function Ly(y,f){var g,b;const G=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(b=f)||void 0===b?void 0:b.code))f.resolver=new dg(y,function ur(y,f){var g;const b=(0,F.m9)(y),G=f;return B(f.customData.operationType,b,"argument-error"),B(null===(g=G.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,b,"argument-error"),qs._fromError(b,G)}(y,f));else if(G){const ae=cg(f),Se=f;ae&&(Se.credential=ae,Se.tenantId=G.tenantId||void 0,Se.email=G.email||void 0,Se.phoneNumber=G.phoneNumber||void 0)}}(y,g),g}).then(g=>{const G=g.user;return{operationType:g.operationType,credential:md(g),additionalUserInfo:ji(g),user:$o.getOrCreate(G)}})}function Yh(y,f){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,c.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:b=>fi(y,g.confirm(b))}})).apply(this,arguments)}class dg{constructor(f,g){this.resolver=g,this.auth=function Py(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return fi(lg(this.auth),this.resolver.resolveSignIn(f))}}class $o{constructor(f){this._delegate=f,this.multiFactor=function Hs(y){const f=(0,F.m9)(y);return _u.has(f)||_u.set(f,Jc._fromUser(f)),_u.get(f)}(f)}static getOrCreate(f){return $o.USER_MAP.has(f)||$o.USER_MAP.set(f,new $o(f)),$o.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,c.Z)(function*(){return fi(g.auth,pr(g._delegate,f))})()}linkWithPhoneNumber(f,g){var b=this;return(0,c.Z)(function*(){return Yh(b.auth,function Hp(y,f,g){return Ol.apply(this,arguments)}(b._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,c.Z)(function*(){return fi(g.auth,function kh(y,f,g){return xu.apply(this,arguments)}(g._delegate,f,hi))})()}linkWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Vu(Tt(g.auth)),function Oe(y,f,g){return function Pe(y,f,g){return Ye.apply(this,arguments)}(y,f,g)}(g._delegate,f,hi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,c.Z)(function*(){return fi(g.auth,io(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Yh(this.auth,function ui(y,f,g){return li.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return fi(this.auth,function ao(y,f,g){return Nl.apply(this,arguments)}(this._delegate,f,hi))}reauthenticateWithRedirect(f){var g=this;return(0,c.Z)(function*(){return yield Vu(Tt(g.auth)),function U(y,f,g){return function oe(y,f,g){return ye.apply(this,arguments)}(y,f,g)}(g._delegate,f,hi)})()}sendEmailVerification(f){return function wl(y,f){return mu.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,c.Z)(function*(){return yield function Ah(y,f){return En.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Up(y,f){return Us((0,F.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Tl(y,f){return Us((0,F.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Tu(y,f){return Cu.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Dl(y,f){return Ta.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Il(y,f,g){return yu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}$o.USER_MAP=new WeakMap;const jl=B;let hg=(()=>{class y{constructor(g,b){if(this.app=g,b.isInitialized())return this._delegate=b.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:G}=g.options;jl(G,"invalid-api-key",{appName:g.name}),jl(G,"invalid-api-key",{appName:g.name});const ae="undefined"!=typeof window?hi:void 0;this._delegate=b.initialize({options:{persistence:Fy(G,g.name),popupRedirectResolver:ae}}),this._delegate._updateErrorMap(x),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?$o.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,b){!function zr(y,f,g){const b=Tt(y);B(b._canInitEmulator,b,"emulator-config-failed"),B(/^https?:\/\//.test(f),b,"invalid-emulator-scheme");const G=!!(null==g?void 0:g.disableWarnings),ae=Mi(f),{host:Se,port:Ve}=function Gn(y){const f=Mi(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const b=g[2].split("@").pop()||"",G=/^(\[[^\]]+\])(:|$)/.exec(b);if(G){const ae=G[1];return{host:ae,port:Ni(b.substr(ae.length+1))}}{const[ae,Se]=b.split(":");return{host:ae,port:Ni(Se)}}}(f);b.config.emulator={url:`${ae}//${Se}${null===Ve?"":`:${Ve}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:Se,port:Ve,protocol:ae.replace(":",""),options:Object.freeze({disableWarnings:G})}),G||function Tn(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,b)}applyActionCode(g){return function Ze(y,f){return Qt.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return fu(this._delegate,g)}confirmPasswordReset(g,b){return function _l(y,f,g){return bl.apply(this,arguments)}(this._delegate,g,b)}createUserWithEmailAndPassword(g,b){var G=this;return(0,c.Z)(function*(){return fi(G._delegate,function oi(y,f,g){return ba.apply(this,arguments)}(G._delegate,g,b))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function ko(y,f){return wi.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Ea(y,f){const g=cu.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,c.Z)(function*(){jl(za(),g._delegate,"operation-not-supported-in-this-environment");const b=yield function st(y,f){return _t.apply(this,arguments)}(g._delegate,hi);return b?fi(g._delegate,Promise.resolve(b)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Sy(y,f){Tt(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,b,G){const{next:ae,error:Se,complete:Ve}=fg(g,b,G);return this._delegate.onAuthStateChanged(ae,Se,Ve)}onIdTokenChanged(g,b,G){const{next:ae,error:Se,complete:Ve}=fg(g,b,G);return this._delegate.onIdTokenChanged(ae,Se,Ve)}sendSignInLinkToEmail(g,b){return function Vp(y,f,g){return pu.apply(this,arguments)}(this._delegate,g,b)}sendPasswordResetEmail(g,b){return function vl(y,f,g){return _a.apply(this,arguments)}(this._delegate,g,b||void 0)}setPersistence(g){var b=this;return(0,c.Z)(function*(){let G;switch(function ag(y,f){vs(Object.values(di).includes(f),y,"invalid-persistence-type"),(0,F.b$)()?vs(f!==di.SESSION,y,"unsupported-persistence-type"):(0,F.UG)()?vs(f===di.NONE,y,"unsupported-persistence-type"):gr()?vs(f===di.NONE||f===di.LOCAL&&(0,F.hl)(),y,"unsupported-persistence-type"):vs(f===di.NONE||Zh(),y,"unsupported-persistence-type")}(b._delegate,g),g){case di.SESSION:G=zn;break;case di.LOCAL:G=(yield ue(Uo)._isAvailable())?Uo:si;break;case di.NONE:G=un;break;default:return Z("argument-error",{appName:b._delegate.name})}return b._delegate.setPersistence(G)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return fi(this._delegate,function Wc(y){return gl.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return fi(this._delegate,On(this._delegate,g))}signInWithCustomToken(g){return fi(this._delegate,function Ls(y,f){return xt.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,b){return fi(this._delegate,function El(y,f,g){return On((0,F.m9)(y),Hc.credential(f,g))}(this._delegate,g,b))}signInWithEmailLink(g,b){return fi(this._delegate,function gu(y,f,g){return Un.apply(this,arguments)}(this._delegate,g,b))}signInWithPhoneNumber(g,b){return Yh(this._delegate,function Du(y,f,g){return jo.apply(this,arguments)}(this._delegate,g,b))}signInWithPopup(g){var b=this;return(0,c.Z)(function*(){return jl(za(),b._delegate,"operation-not-supported-in-this-environment"),fi(b._delegate,function Su(y,f,g){return Fa.apply(this,arguments)}(b._delegate,g,hi))})()}signInWithRedirect(g){var b=this;return(0,c.Z)(function*(){return jl(za(),b._delegate,"operation-not-supported-in-this-environment"),yield Vu(b._delegate),function Ho(y,f,g){return function hs(y,f,g){return O.apply(this,arguments)}(y,f,g)}(b._delegate,g,hi)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Vs(y,f){return ns.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=di,y})();function fg(y,f,g){let b=y;"function"!=typeof y&&({next:b,error:f,complete:g}=y);const G=b;return{next:Se=>G(Se&&$o.getOrCreate(Se)),error:f,complete:g}}function Fy(y,f){const g=function Wa(y,f){const g=ug();if(!g)return[];const b=or(sg,y,f);switch(g.getItem(b)){case di.NONE:return[un];case di.LOCAL:return[Uo,zn];case di.SESSION:return[zn];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(Uo)&&g.push(Uo),"undefined"!=typeof window)for(const b of[si,zn])g.includes(b)||g.push(b);return g.includes(un)||g.push(un),g}class Jh{constructor(){this.providerId="phone",this._delegate=new La(lg(ee.Z.auth()))}static credential(f,g){return La.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Jh.PHONE_SIGN_IN_METHOD=La.PHONE_SIGN_IN_METHOD,Jh.PROVIDER_ID=La.PROVIDER_ID;const pg=B;class _0{constructor(f,g,b=ee.Z.app()){var G;pg(null===(G=b.options)||void 0===G?void 0:G.apiKey,"invalid-api-key",{appName:b.name}),this._delegate=new zs(f,g,b.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function go(y){y.INTERNAL.registerComponent(new R.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),b=f.getProvider("auth");return new hg(g,b)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Hc,FacebookAuthProvider:ks,GithubAuthProvider:Ch,GoogleAuthProvider:$c,OAuthProvider:Li,SAMLAuthProvider:kr,PhoneAuthProvider:Jh,PhoneMultiFactorGenerator:Yp,RecaptchaVerifier:_0,TwitterAuthProvider:zc,Auth:hg,AuthCredential:bi,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.18")}(ee.Z)},9971:function(ht){"undefined"!=typeof self&&self,ht.exports=function(ge){var M={};function c(ee){if(M[ee])return M[ee].exports;var F=M[ee]={i:ee,l:!1,exports:{}};return ge[ee].call(F.exports,F,F.exports,c),F.l=!0,F.exports}return c.m=ge,c.c=M,c.d=function(ee,F,K){c.o(ee,F)||Object.defineProperty(ee,F,{configurable:!1,enumerable:!0,get:K})},c.n=function(ee){var F=ee&&ee.__esModule?function(){return ee.default}:function(){return ee};return c.d(F,"a",F),F},c.o=function(ee,F){return Object.prototype.hasOwnProperty.call(ee,F)},c.p="",c(c.s=109)}([function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=c(17),F=c(18),K=c(19),j=c(45),q=c(46),R=c(47),S=c(48),E=c(49),_=c(12),T=c(32),C=c(33),k=c(31),A=c(1);M.default={Scope:A.Scope,create:A.create,find:A.find,query:A.query,register:A.register,Container:ee.default,Format:F.default,Leaf:K.default,Embed:S.default,Scroll:j.default,Block:R.default,Inline:q.default,Text:E.default,Attributor:{Attribute:_.default,Class:T.default,Style:C.default,Store:k.default}}},function(ge,M,c){"use strict";var k,ee=this&&this.__extends||(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,x){A.__proto__=x}||function(A,x){for(var V in x)x.hasOwnProperty(V)&&(A[V]=x[V])},function(A,x){function V(){this.constructor=A}k(A,x),A.prototype=null===x?Object.create(x):(V.prototype=x.prototype,new V)});Object.defineProperty(M,"__esModule",{value:!0});var F=function(k){function A(x){var V=this;return(V=k.call(this,x="[Parchment] "+x)||this).message=x,V.name=V.constructor.name,V}return ee(A,k),A}(Error);M.ParchmentError=F;var S,K={},j={},q={},R={};function T(k,A){var x;if(void 0===A&&(A=S.ANY),"string"==typeof k)x=R[k]||K[k];else if(k instanceof Text||k.nodeType===Node.TEXT_NODE)x=R.text;else if("number"==typeof k)k&S.LEVEL&S.BLOCK?x=R.block:k&S.LEVEL&S.INLINE&&(x=R.inline);else if(k instanceof HTMLElement){var V=(k.getAttribute("class")||"").split(/\s+/);for(var I in V)if(x=j[V[I]])break;x=x||q[k.tagName]}return null==x?null:A&S.LEVEL&x.scope&&A&S.TYPE&x.scope?x:null}M.DATA_KEY="__blot",function(k){k[k.TYPE=3]="TYPE",k[k.LEVEL=12]="LEVEL",k[k.ATTRIBUTE=13]="ATTRIBUTE",k[k.BLOT=14]="BLOT",k[k.INLINE=7]="INLINE",k[k.BLOCK=11]="BLOCK",k[k.BLOCK_BLOT=10]="BLOCK_BLOT",k[k.INLINE_BLOT=6]="INLINE_BLOT",k[k.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",k[k.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",k[k.ANY=15]="ANY"}(S=M.Scope||(M.Scope={})),M.create=function E(k,A){var x=T(k);if(null==x)throw new F("Unable to create "+k+" blot");var V=x,I=k instanceof Node||k.nodeType===Node.TEXT_NODE?k:V.create(A);return new V(I,A)},M.find=function _(k,A){return void 0===A&&(A=!1),null==k?null:null!=k[M.DATA_KEY]?k[M.DATA_KEY].blot:A?_(k.parentNode,A):null},M.query=T,M.register=function C(){for(var k=[],A=0;A<arguments.length;A++)k[A]=arguments[A];if(k.length>1)return k.map(function(I){return C(I)});var x=k[0];if("string"!=typeof x.blotName&&"string"!=typeof x.attrName)throw new F("Invalid definition");if("abstract"===x.blotName)throw new F("Cannot register abstract class");return R[x.blotName||x.attrName]=x,"string"==typeof x.keyName?K[x.keyName]=x:(null!=x.className&&(j[x.className]=x),null!=x.tagName&&(x.tagName=Array.isArray(x.tagName)?x.tagName.map(function(I){return I.toUpperCase()}):x.tagName.toUpperCase(),(Array.isArray(x.tagName)?x.tagName:[x.tagName]).forEach(function(I){(null==q[I]||null==x.className)&&(q[I]=x)}))),x}},function(ge,M,c){var ee=c(51),F=c(11),K=c(3),j=c(20),q=String.fromCharCode(0),R=function(S){this.ops=Array.isArray(S)?S:null!=S&&Array.isArray(S.ops)?S.ops:[]};R.prototype.insert=function(S,E){var _={};return 0===S.length?this:(_.insert=S,null!=E&&"object"==typeof E&&Object.keys(E).length>0&&(_.attributes=E),this.push(_))},R.prototype.delete=function(S){return S<=0?this:this.push({delete:S})},R.prototype.retain=function(S,E){if(S<=0)return this;var _={retain:S};return null!=E&&"object"==typeof E&&Object.keys(E).length>0&&(_.attributes=E),this.push(_)},R.prototype.push=function(S){var E=this.ops.length,_=this.ops[E-1];if(S=K(!0,{},S),"object"==typeof _){if("number"==typeof S.delete&&"number"==typeof _.delete)return this.ops[E-1]={delete:_.delete+S.delete},this;if("number"==typeof _.delete&&null!=S.insert&&"object"!=typeof(_=this.ops[(E-=1)-1]))return this.ops.unshift(S),this;if(F(S.attributes,_.attributes)){if("string"==typeof S.insert&&"string"==typeof _.insert)return this.ops[E-1]={insert:_.insert+S.insert},"object"==typeof S.attributes&&(this.ops[E-1].attributes=S.attributes),this;if("number"==typeof S.retain&&"number"==typeof _.retain)return this.ops[E-1]={retain:_.retain+S.retain},"object"==typeof S.attributes&&(this.ops[E-1].attributes=S.attributes),this}}return E===this.ops.length?this.ops.push(S):this.ops.splice(E,0,S),this},R.prototype.chop=function(){var S=this.ops[this.ops.length-1];return S&&S.retain&&!S.attributes&&this.ops.pop(),this},R.prototype.filter=function(S){return this.ops.filter(S)},R.prototype.forEach=function(S){this.ops.forEach(S)},R.prototype.map=function(S){return this.ops.map(S)},R.prototype.partition=function(S){var E=[],_=[];return this.forEach(function(T){(S(T)?E:_).push(T)}),[E,_]},R.prototype.reduce=function(S,E){return this.ops.reduce(S,E)},R.prototype.changeLength=function(){return this.reduce(function(S,E){return E.insert?S+j.length(E):E.delete?S-E.delete:S},0)},R.prototype.length=function(){return this.reduce(function(S,E){return S+j.length(E)},0)},R.prototype.slice=function(S,E){S=S||0,"number"!=typeof E&&(E=1/0);for(var _=[],T=j.iterator(this.ops),C=0;C<E&&T.hasNext();){var k;C<S?k=T.next(S-C):(k=T.next(E-C),_.push(k)),C+=j.length(k)}return new R(_)},R.prototype.compose=function(S){var E=j.iterator(this.ops),_=j.iterator(S.ops),T=[],C=_.peek();if(null!=C&&"number"==typeof C.retain&&null==C.attributes){for(var k=C.retain;"insert"===E.peekType()&&E.peekLength()<=k;)k-=E.peekLength(),T.push(E.next());C.retain-k>0&&_.next(C.retain-k)}for(var A=new R(T);E.hasNext()||_.hasNext();)if("insert"===_.peekType())A.push(_.next());else if("delete"===E.peekType())A.push(E.next());else{var x=Math.min(E.peekLength(),_.peekLength()),V=E.next(x),I=_.next(x);if("number"==typeof I.retain){var L={};"number"==typeof V.retain?L.retain=x:L.insert=V.insert;var ne=j.attributes.compose(V.attributes,I.attributes,"number"==typeof V.retain);if(ne&&(L.attributes=ne),A.push(L),!_.hasNext()&&F(A.ops[A.ops.length-1],L)){var J=new R(E.rest());return A.concat(J).chop()}}else"number"==typeof I.delete&&"number"==typeof V.retain&&A.push(I)}return A.chop()},R.prototype.concat=function(S){var E=new R(this.ops.slice());return S.ops.length>0&&(E.push(S.ops[0]),E.ops=E.ops.concat(S.ops.slice(1))),E},R.prototype.diff=function(S,E){if(this.ops===S.ops)return new R;var _=[this,S].map(function(x){return x.map(function(V){if(null!=V.insert)return"string"==typeof V.insert?V.insert:q;throw new Error("diff() called "+(x===S?"on":"with")+" non-document")}).join("")}),T=new R,C=ee(_[0],_[1],E),k=j.iterator(this.ops),A=j.iterator(S.ops);return C.forEach(function(x){for(var V=x[1].length;V>0;){var I=0;switch(x[0]){case ee.INSERT:I=Math.min(A.peekLength(),V),T.push(A.next(I));break;case ee.DELETE:I=Math.min(V,k.peekLength()),k.next(I),T.delete(I);break;case ee.EQUAL:I=Math.min(k.peekLength(),A.peekLength(),V);var L=k.next(I),ne=A.next(I);F(L.insert,ne.insert)?T.retain(I,j.attributes.diff(L.attributes,ne.attributes)):T.push(ne).delete(I)}V-=I}}),T.chop()},R.prototype.eachLine=function(S,E){E=E||"\n";for(var _=j.iterator(this.ops),T=new R,C=0;_.hasNext();){if("insert"!==_.peekType())return;var k=_.peek(),A=j.length(k)-_.peekLength(),x="string"==typeof k.insert?k.insert.indexOf(E,A)-A:-1;if(x<0)T.push(_.next());else if(x>0)T.push(_.next(x));else{if(!1===S(T,_.next(1).attributes||{},C))return;C+=1,T=new R}}T.length()>0&&S(T,{},C)},R.prototype.transform=function(S,E){if(E=!!E,"number"==typeof S)return this.transformPosition(S,E);for(var _=j.iterator(this.ops),T=j.iterator(S.ops),C=new R;_.hasNext()||T.hasNext();)if("insert"!==_.peekType()||!E&&"insert"===T.peekType())if("insert"===T.peekType())C.push(T.next());else{var k=Math.min(_.peekLength(),T.peekLength()),A=_.next(k),x=T.next(k);if(A.delete)continue;x.delete?C.push(x):C.retain(k,j.attributes.transform(A.attributes,x.attributes,E))}else C.retain(j.length(_.next()));return C.chop()},R.prototype.transformPosition=function(S,E){E=!!E;for(var _=j.iterator(this.ops),T=0;_.hasNext()&&T<=S;){var C=_.peekLength(),k=_.peekType();_.next(),"delete"!==k?("insert"===k&&(T<S||!E)&&(S+=C),T+=C):S-=Math.min(C,S-T)}return S},ge.exports=R},function(ge,M){"use strict";var c=Object.prototype.hasOwnProperty,ee=Object.prototype.toString,F=Object.defineProperty,K=Object.getOwnPropertyDescriptor,j=function(_){return"function"==typeof Array.isArray?Array.isArray(_):"[object Array]"===ee.call(_)},q=function(_){if(!_||"[object Object]"!==ee.call(_))return!1;var k,T=c.call(_,"constructor"),C=_.constructor&&_.constructor.prototype&&c.call(_.constructor.prototype,"isPrototypeOf");if(_.constructor&&!T&&!C)return!1;for(k in _);return void 0===k||c.call(_,k)},R=function(_,T){F&&"__proto__"===T.name?F(_,T.name,{enumerable:!0,configurable:!0,value:T.newValue,writable:!0}):_[T.name]=T.newValue},S=function(_,T){if("__proto__"===T){if(!c.call(_,T))return;if(K)return K(_,T).value}return _[T]};ge.exports=function E(){var _,T,C,k,A,x,V=arguments[0],I=1,L=arguments.length,ne=!1;for("boolean"==typeof V&&(ne=V,V=arguments[1]||{},I=2),(null==V||"object"!=typeof V&&"function"!=typeof V)&&(V={});I<L;++I)if(null!=(_=arguments[I]))for(T in _)C=S(V,T),V!==(k=S(_,T))&&(ne&&k&&(q(k)||(A=j(k)))?(A?(A=!1,x=C&&j(C)?C:[]):x=C&&q(C)?C:{},R(V,{name:T,newValue:E(ne,x,k)})):void 0!==k&&R(V,{name:T,newValue:k}));return V}},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.BlockEmbed=M.bubbleFormats=void 0;var ee=function(){function H(W,B){for(var te=0;te<B.length;te++){var Y=B[te];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(W,Y.key,Y)}}return function(W,B,te){return B&&H(W.prototype,B),te&&H(W,te),W}}(),F=function H(W,B,te){null===W&&(W=Function.prototype);var Y=Object.getOwnPropertyDescriptor(W,B);if(void 0===Y){var de=Object.getPrototypeOf(W);return null===de?void 0:H(de,B,te)}if("value"in Y)return Y.value;var ue=Y.get;return void 0===ue?void 0:ue.call(te)},j=V(c(3)),R=V(c(2)),E=V(c(0)),T=V(c(16)),k=V(c(6)),x=V(c(7));function V(H){return H&&H.__esModule?H:{default:H}}function I(H,W){if(!(H instanceof W))throw new TypeError("Cannot call a class as a function")}function L(H,W){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!W||"object"!=typeof W&&"function"!=typeof W?H:W}function ne(H,W){if("function"!=typeof W&&null!==W)throw new TypeError("Super expression must either be null or a function, not "+typeof W);H.prototype=Object.create(W&&W.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(H,W):H.__proto__=W)}var Z=function(H){function W(){return I(this,W),L(this,(W.__proto__||Object.getPrototypeOf(W)).apply(this,arguments))}return ne(W,H),ee(W,[{key:"attach",value:function(){F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"attach",this).call(this),this.attributes=new E.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new R.default).insert(this.value(),(0,j.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(te,Y){var de=E.default.query(te,E.default.Scope.BLOCK_ATTRIBUTE);null!=de&&this.attributes.attribute(de,Y)}},{key:"formatAt",value:function(te,Y,de,ue){this.format(de,ue)}},{key:"insertAt",value:function(te,Y,de){if("string"==typeof Y&&Y.endsWith("\n")){var ue=E.default.create(X.blotName);this.parent.insertBefore(ue,0===te?this:this.next),ue.insertAt(0,Y.slice(0,-1))}else F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertAt",this).call(this,te,Y,de)}}]),W}(E.default.Embed);Z.scope=E.default.Scope.BLOCK_BLOT;var X=function(H){function W(B){I(this,W);var te=L(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,B));return te.cache={},te}return ne(W,H),ee(W,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(E.default.Leaf).reduce(function(te,Y){return 0===Y.length()?te:te.insert(Y.value(),$(Y))},new R.default).insert("\n",$(this))),this.cache.delta}},{key:"deleteAt",value:function(te,Y){F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"deleteAt",this).call(this,te,Y),this.cache={}}},{key:"formatAt",value:function(te,Y,de,ue){Y<=0||(E.default.query(de,E.default.Scope.BLOCK)?te+Y===this.length()&&this.format(de,ue):F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"formatAt",this).call(this,te,Math.min(Y,this.length()-te-1),de,ue),this.cache={})}},{key:"insertAt",value:function(te,Y,de){if(null!=de)return F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertAt",this).call(this,te,Y,de);if(0!==Y.length){var ue=Y.split("\n"),be=ue.shift();be.length>0&&(te<this.length()-1||null==this.children.tail?F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertAt",this).call(this,Math.min(te,this.length()-1),be):this.children.tail.insertAt(this.children.tail.length(),be),this.cache={});var ce=this;ue.reduce(function(le,ie){return(ce=ce.split(le,!0)).insertAt(0,ie),ie.length},te+be.length)}}},{key:"insertBefore",value:function(te,Y){var de=this.children.head;F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"insertBefore",this).call(this,te,Y),de instanceof T.default&&de.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(te,Y){F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"moveChildren",this).call(this,te,Y),this.cache={}}},{key:"optimize",value:function(te){F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"optimize",this).call(this,te),this.cache={}}},{key:"path",value:function(te){return F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"path",this).call(this,te,!0)}},{key:"removeChild",value:function(te){F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"removeChild",this).call(this,te),this.cache={}}},{key:"split",value:function(te){var Y=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Y&&(0===te||te>=this.length()-1)){var de=this.clone();return 0===te?(this.parent.insertBefore(de,this),this):(this.parent.insertBefore(de,this.next),de)}var ue=F(W.prototype.__proto__||Object.getPrototypeOf(W.prototype),"split",this).call(this,te,Y);return this.cache={},ue}}]),W}(E.default.Block);function $(H){var W=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==H||("function"==typeof H.formats&&(W=(0,j.default)(W,H.formats())),null==H.parent||"scroll"==H.parent.blotName||H.parent.statics.scope!==H.statics.scope)?W:$(H.parent,W)}X.blotName="block",X.tagName="P",X.defaultChild="break",X.allowedChildren=[k.default,E.default.Embed,x.default],M.bubbleFormats=$,M.BlockEmbed=Z,M.default=X},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.overload=M.expandConfig=void 0;var ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ce){return typeof ce}:function(ce){return ce&&"function"==typeof Symbol&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},F=function(le,ie){if(Array.isArray(le))return le;if(Symbol.iterator in Object(le))return function ce(le,ie){var fe=[],me=!0,_e=!1,xe=void 0;try{for(var De,he=le[Symbol.iterator]();!(me=(De=he.next()).done)&&(fe.push(De.value),!ie||fe.length!==ie);me=!0);}catch(ke){_e=!0,xe=ke}finally{try{!me&&he.return&&he.return()}finally{if(_e)throw xe}}return fe}(le,ie);throw new TypeError("Invalid attempt to destructure non-iterable instance")},K=function(){function ce(le,ie){for(var fe=0;fe<ie.length;fe++){var me=ie[fe];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(le,me.key,me)}}return function(le,ie,fe){return ie&&ce(le.prototype,ie),fe&&ce(le,fe),le}}();c(50);var q=$(c(2)),S=$(c(14)),_=$(c(8)),C=$(c(9)),A=$(c(0)),x=c(15),V=$(x),L=$(c(3)),J=$(c(10)),X=$(c(34));function $(ce){return ce&&ce.__esModule?ce:{default:ce}}function H(ce,le,ie){return le in ce?Object.defineProperty(ce,le,{value:ie,enumerable:!0,configurable:!0,writable:!0}):ce[le]=ie,ce}function W(ce,le){if(!(ce instanceof le))throw new TypeError("Cannot call a class as a function")}var B=(0,J.default)("quill"),te=function(){function ce(le){var ie=this,fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(W(this,ce),this.options=Y(le,fe),this.container=this.options.container,null==this.container)return B.error("Invalid Quill container",le);this.options.debug&&ce.debug(this.options.debug);var me=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new _.default,this.scroll=A.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new S.default(this.scroll),this.selection=new V.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(_.default.events.EDITOR_CHANGE,function(xe){xe===_.default.events.TEXT_CHANGE&&ie.root.classList.toggle("ql-blank",ie.editor.isBlank())}),this.emitter.on(_.default.events.SCROLL_UPDATE,function(xe,he){var De=ie.selection.lastRange,ke=De&&0===De.length?De.index:void 0;de.call(ie,function(){return ie.editor.update(null,he,ke)},xe)});var _e=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+me+"<p><br></p></div>");this.setContents(_e),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return K(ce,null,[{key:"debug",value:function(ie){!0===ie&&(ie="log"),J.default.level(ie)}},{key:"find",value:function(ie){return ie.__quill||A.default.find(ie)}},{key:"import",value:function(ie){return null==this.imports[ie]&&B.error("Cannot import "+ie+". Are you sure it was registered?"),this.imports[ie]}},{key:"register",value:function(ie,fe){var me=this,_e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof ie){var xe=ie.attrName||ie.blotName;"string"==typeof xe?this.register("formats/"+xe,ie,fe):Object.keys(ie).forEach(function(he){me.register(he,ie[he],fe)})}else null!=this.imports[ie]&&!_e&&B.warn("Overwriting "+ie+" with",fe),this.imports[ie]=fe,(ie.startsWith("blots/")||ie.startsWith("formats/"))&&"abstract"!==fe.blotName?A.default.register(fe):ie.startsWith("modules")&&"function"==typeof fe.register&&fe.register()}}]),K(ce,[{key:"addContainer",value:function(ie){var fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof ie){var me=ie;(ie=document.createElement("div")).classList.add(me)}return this.container.insertBefore(ie,fe),ie}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(ie,fe,me){var _e=this,xe=ue(ie,fe,me),he=F(xe,4);return de.call(this,function(){return _e.editor.deleteText(ie,fe)},me=he[3],ie=he[0],-1*(fe=he[1]))}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var ie=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(ie),this.container.classList.toggle("ql-disabled",!ie)}},{key:"focus",value:function(){var ie=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=ie,this.scrollIntoView()}},{key:"format",value:function(ie,fe){var me=this;return de.call(this,function(){var xe=me.getSelection(!0),he=new q.default;if(null==xe)return he;if(A.default.query(ie,A.default.Scope.BLOCK))he=me.editor.formatLine(xe.index,xe.length,H({},ie,fe));else{if(0===xe.length)return me.selection.format(ie,fe),he;he=me.editor.formatText(xe.index,xe.length,H({},ie,fe))}return me.setSelection(xe,_.default.sources.SILENT),he},arguments.length>2&&void 0!==arguments[2]?arguments[2]:_.default.sources.API)}},{key:"formatLine",value:function(ie,fe,me,_e,xe){var De,he=this,ke=ue(ie,fe,me,_e,xe),Re=F(ke,4);return fe=Re[1],De=Re[2],de.call(this,function(){return he.editor.formatLine(ie,fe,De)},xe=Re[3],ie=Re[0],0)}},{key:"formatText",value:function(ie,fe,me,_e,xe){var De,he=this,ke=ue(ie,fe,me,_e,xe),Re=F(ke,4);return fe=Re[1],De=Re[2],de.call(this,function(){return he.editor.formatText(ie,fe,De)},xe=Re[3],ie=Re[0],0)}},{key:"getBounds",value:function(ie){var me=void 0;me="number"==typeof ie?this.selection.getBounds(ie,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.selection.getBounds(ie.index,ie.length);var _e=this.container.getBoundingClientRect();return{bottom:me.bottom-_e.top,height:me.height,left:me.left-_e.left,right:me.right-_e.left,top:me.top-_e.top,width:me.width}}},{key:"getContents",value:function(){var ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-ie,me=ue(ie,fe),_e=F(me,2);return this.editor.getContents(ie=_e[0],fe=_e[1])}},{key:"getFormat",value:function(){var ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0);return"number"==typeof ie?this.editor.getFormat(ie,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.editor.getFormat(ie.index,ie.length)}},{key:"getIndex",value:function(ie){return ie.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(ie){return this.scroll.leaf(ie)}},{key:"getLine",value:function(ie){return this.scroll.line(ie)}},{key:"getLines",value:function(){var ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof ie?this.scroll.lines(ie.index,ie.length):this.scroll.lines(ie,fe)}},{key:"getModule",value:function(ie){return this.theme.modules[ie]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-ie,me=ue(ie,fe),_e=F(me,2);return this.editor.getText(ie=_e[0],fe=_e[1])}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(ie,fe,me){var _e=this;return de.call(this,function(){return _e.editor.insertEmbed(ie,fe,me)},arguments.length>3&&void 0!==arguments[3]?arguments[3]:ce.sources.API,ie)}},{key:"insertText",value:function(ie,fe,me,_e,xe){var De,he=this,ke=ue(ie,0,me,_e,xe),Re=F(ke,4);return De=Re[2],de.call(this,function(){return he.editor.insertText(ie,fe,De)},xe=Re[3],ie=Re[0],fe.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(ie,fe,me){this.clipboard.dangerouslyPasteHTML(ie,fe,me)}},{key:"removeFormat",value:function(ie,fe,me){var _e=this,xe=ue(ie,fe,me),he=F(xe,4);return fe=he[1],de.call(this,function(){return _e.editor.removeFormat(ie,fe)},me=he[3],ie=he[0])}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(ie){var fe=this;return de.call(this,function(){ie=new q.default(ie);var _e=fe.getLength(),xe=fe.editor.deleteText(0,_e),he=fe.editor.applyDelta(ie),De=he.ops[he.ops.length-1];return null!=De&&"string"==typeof De.insert&&"\n"===De.insert[De.insert.length-1]&&(fe.editor.deleteText(fe.getLength()-1,1),he.delete(1)),xe.compose(he)},arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.default.sources.API)}},{key:"setSelection",value:function(ie,fe,me){if(null==ie)this.selection.setRange(null,fe||ce.sources.API);else{var _e=ue(ie,fe,me),xe=F(_e,4);me=xe[3],this.selection.setRange(new x.Range(ie=xe[0],fe=xe[1]),me),me!==_.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(ie){var fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.default.sources.API,me=(new q.default).insert(ie);return this.setContents(me,fe)}},{key:"update",value:function(){var ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_.default.sources.USER,fe=this.scroll.update(ie);return this.selection.update(ie),fe}},{key:"updateContents",value:function(ie){var fe=this,me=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.default.sources.API;return de.call(this,function(){return ie=new q.default(ie),fe.editor.applyDelta(ie,me)},me,!0)}}]),ce}();function Y(ce,le){if((le=(0,L.default)(!0,{container:ce,modules:{clipboard:!0,keyboard:!0,history:!0}},le)).theme&&le.theme!==te.DEFAULTS.theme){if(le.theme=te.import("themes/"+le.theme),null==le.theme)throw new Error("Invalid theme "+le.theme+". Did you register it?")}else le.theme=X.default;var ie=(0,L.default)(!0,{},le.theme.DEFAULTS);[ie,le].forEach(function(_e){_e.modules=_e.modules||{},Object.keys(_e.modules).forEach(function(xe){!0===_e.modules[xe]&&(_e.modules[xe]={})})});var me=Object.keys(ie.modules).concat(Object.keys(le.modules)).reduce(function(_e,xe){var he=te.import("modules/"+xe);return null==he?B.error("Cannot load "+xe+" module. Are you sure you registered it?"):_e[xe]=he.DEFAULTS||{},_e},{});return null!=le.modules&&le.modules.toolbar&&le.modules.toolbar.constructor!==Object&&(le.modules.toolbar={container:le.modules.toolbar}),le=(0,L.default)(!0,{},te.DEFAULTS,{modules:me},ie,le),["bounds","container","scrollingContainer"].forEach(function(_e){"string"==typeof le[_e]&&(le[_e]=document.querySelector(le[_e]))}),le.modules=Object.keys(le.modules).reduce(function(_e,xe){return le.modules[xe]&&(_e[xe]=le.modules[xe]),_e},{}),le}function de(ce,le,ie,fe){if(this.options.strict&&!this.isEnabled()&&le===_.default.sources.USER)return new q.default;var me=null==ie?null:this.getSelection(),_e=this.editor.delta,xe=ce();if(null!=me&&(!0===ie&&(ie=me.index),null==fe?me=be(me,xe,le):0!==fe&&(me=be(me,ie,fe,le)),this.setSelection(me,_.default.sources.SILENT)),xe.length()>0){var he,ke,De=[_.default.events.TEXT_CHANGE,xe,_e,le];(he=this.emitter).emit.apply(he,[_.default.events.EDITOR_CHANGE].concat(De)),le!==_.default.sources.SILENT&&(ke=this.emitter).emit.apply(ke,De)}return xe}function ue(ce,le,ie,fe,me){var _e={};return"number"==typeof ce.index&&"number"==typeof ce.length?"number"!=typeof le?(me=fe,fe=ie,ie=le,le=ce.length,ce=ce.index):(le=ce.length,ce=ce.index):"number"!=typeof le&&(me=fe,fe=ie,ie=le,le=0),"object"===(void 0===ie?"undefined":ee(ie))?(_e=ie,me=fe):"string"==typeof ie&&(null!=fe?_e[ie]=fe:me=ie),[ce,le,_e,me=me||_.default.sources.API]}function be(ce,le,ie,fe){if(null==ce)return null;var me=void 0,_e=void 0;if(le instanceof q.default){var xe=[ce.index,ce.index+ce.length].map(function(Re){return le.transformPosition(Re,fe!==_.default.sources.USER)}),he=F(xe,2);me=he[0],_e=he[1]}else{var De=[ce.index,ce.index+ce.length].map(function(Re){return Re<le||Re===le&&fe===_.default.sources.USER?Re:ie>=0?Re+ie:Math.max(le,Re+ie)}),ke=F(De,2);me=ke[0],_e=ke[1]}return new x.Range(me,_e-me)}te.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},te.events=_.default.events,te.sources=_.default.sources,te.version="1.3.7",te.imports={delta:q.default,parchment:A.default,"core/module":C.default,"core/theme":X.default},M.expandConfig=Y,M.overload=ue,M.default=te},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function k(A,x){for(var V=0;V<x.length;V++){var I=x[V];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(A,I.key,I)}}return function(A,x,V){return x&&k(A.prototype,x),V&&k(A,V),A}}(),F=function k(A,x,V){null===A&&(A=Function.prototype);var I=Object.getOwnPropertyDescriptor(A,x);if(void 0===I){var L=Object.getPrototypeOf(A);return null===L?void 0:k(L,x,V)}if("value"in I)return I.value;var ne=I.get;return void 0===ne?void 0:ne.call(V)},j=S(c(7)),R=S(c(0));function S(k){return k&&k.__esModule?k:{default:k}}function E(k,A){if(!(k instanceof A))throw new TypeError("Cannot call a class as a function")}function _(k,A){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!=typeof A&&"function"!=typeof A?k:A}var C=function(k){function A(){return E(this,A),_(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return function T(k,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);k.prototype=Object.create(A&&A.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(k,A):k.__proto__=A)}(A,k),ee(A,[{key:"formatAt",value:function(V,I,L,ne){if(A.compare(this.statics.blotName,L)<0&&R.default.query(L,R.default.Scope.BLOT)){var J=this.isolate(V,I);ne&&J.wrap(L,ne)}else F(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,V,I,L,ne)}},{key:"optimize",value:function(V){if(F(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,V),this.parent instanceof A&&A.compare(this.statics.blotName,this.parent.statics.blotName)>0){var I=this.parent.isolate(this.offset(),this.length());this.moveChildren(I),I.wrap(this)}}}],[{key:"compare",value:function(V,I){var L=A.order.indexOf(V),ne=A.order.indexOf(I);return L>=0||ne>=0?L-ne:V===I?0:V<I?-1:1}}]),A}(R.default.Inline);C.allowedChildren=[C,R.default.Embed,j.default],C.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],M.default=C},function(ge,M,c){"use strict";function j(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function q(E,_){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?E:_}Object.defineProperty(M,"__esModule",{value:!0});var S=function(E){function _(){return j(this,_),q(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return function R(E,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(E,_):E.__proto__=_)}(_,E),_}(function K(E){return E&&E.__esModule?E:{default:E}}(c(0)).default.Text);M.default=S},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function x(V,I){for(var L=0;L<I.length;L++){var ne=I[L];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(V,ne.key,ne)}}return function(V,I,L){return I&&x(V.prototype,I),L&&x(V,L),V}}(),F=function x(V,I,L){null===V&&(V=Function.prototype);var ne=Object.getOwnPropertyDescriptor(V,I);if(void 0===ne){var J=Object.getPrototypeOf(V);return null===J?void 0:x(J,I,L)}if("value"in ne)return ne.value;var Z=ne.get;return void 0===Z?void 0:Z.call(L)},j=S(c(54));function S(x){return x&&x.__esModule?x:{default:x}}var C=(0,S(c(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(x){document.addEventListener(x,function(){for(var V=arguments.length,I=Array(V),L=0;L<V;L++)I[L]=arguments[L];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(ne){var J;ne.__quill&&ne.__quill.emitter&&(J=ne.__quill.emitter).handleDOM.apply(J,I)})})});var A=function(x){function V(){!function E(x,V){if(!(x instanceof V))throw new TypeError("Cannot call a class as a function")}(this,V);var I=function _(x,V){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!V||"object"!=typeof V&&"function"!=typeof V?x:V}(this,(V.__proto__||Object.getPrototypeOf(V)).call(this));return I.listeners={},I.on("error",C.error),I}return function T(x,V){if("function"!=typeof V&&null!==V)throw new TypeError("Super expression must either be null or a function, not "+typeof V);x.prototype=Object.create(V&&V.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(x,V):x.__proto__=V)}(V,x),ee(V,[{key:"emit",value:function(){C.log.apply(C,arguments),F(V.prototype.__proto__||Object.getPrototypeOf(V.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(L){for(var ne=arguments.length,J=Array(ne>1?ne-1:0),Z=1;Z<ne;Z++)J[Z-1]=arguments[Z];(this.listeners[L.type]||[]).forEach(function(X){var $=X.node,H=X.handler;(L.target===$||$.contains(L.target))&&H.apply(void 0,[L].concat(J))})}},{key:"listenDOM",value:function(L,ne,J){this.listeners[L]||(this.listeners[L]=[]),this.listeners[L].push({node:ne,handler:J})}}]),V}(j.default);A.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},A.sources={API:"api",SILENT:"silent",USER:"user"},M.default=A},function(ge,M,c){"use strict";function ee(K,j){if(!(K instanceof j))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(M,"__esModule",{value:!0});var F=function K(j){var q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ee(this,K),this.quill=j,this.options=q};F.DEFAULTS={},M.default=F},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=["error","warn","log","info"],F="warn";function K(q){if(ee.indexOf(q)<=ee.indexOf(F)){for(var R,S=arguments.length,E=Array(S>1?S-1:0),_=1;_<S;_++)E[_-1]=arguments[_];(R=console)[q].apply(R,E)}}function j(q){return ee.reduce(function(R,S){return R[S]=K.bind(console,S,q),R},{})}K.level=j.level=function(q){F=q},M.default=j},function(ge,M,c){var ee=Array.prototype.slice,F=c(52),K=c(53),j=ge.exports=function(E,_,T){return T||(T={}),E===_||(E instanceof Date&&_ instanceof Date?E.getTime()===_.getTime():!E||!_||"object"!=typeof E&&"object"!=typeof _?T.strict?E===_:E==_:function S(E,_,T){var C,k;if(q(E)||q(_)||E.prototype!==_.prototype)return!1;if(K(E))return!!K(_)&&(E=ee.call(E),_=ee.call(_),j(E,_,T));if(R(E)){if(!R(_)||E.length!==_.length)return!1;for(C=0;C<E.length;C++)if(E[C]!==_[C])return!1;return!0}try{var A=F(E),x=F(_)}catch(V){return!1}if(A.length!=x.length)return!1;for(A.sort(),x.sort(),C=A.length-1;C>=0;C--)if(A[C]!=x[C])return!1;for(C=A.length-1;C>=0;C--)if(!j(E[k=A[C]],_[k],T))return!1;return typeof E==typeof _}(E,_,T))};function q(E){return null==E}function R(E){return!(!E||"object"!=typeof E||"number"!=typeof E.length||"function"!=typeof E.copy||"function"!=typeof E.slice||E.length>0&&"number"!=typeof E[0])}},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=c(1),F=function(){function K(j,q,R){void 0===R&&(R={}),this.attrName=j,this.keyName=q,this.scope=null!=R.scope?R.scope&ee.Scope.LEVEL|ee.Scope.TYPE&ee.Scope.ATTRIBUTE:ee.Scope.ATTRIBUTE,null!=R.whitelist&&(this.whitelist=R.whitelist)}return K.keys=function(j){return[].map.call(j.attributes,function(q){return q.name})},K.prototype.add=function(j,q){return!!this.canAdd(j,q)&&(j.setAttribute(this.keyName,q),!0)},K.prototype.canAdd=function(j,q){return null!=ee.query(j,ee.Scope.BLOT&(this.scope|ee.Scope.TYPE))&&(null==this.whitelist||("string"==typeof q?this.whitelist.indexOf(q.replace(/["']/g,""))>-1:this.whitelist.indexOf(q)>-1))},K.prototype.remove=function(j){j.removeAttribute(this.keyName)},K.prototype.value=function(j){var q=j.getAttribute(this.keyName);return this.canAdd(j,q)&&q?q:""},K}();M.default=F},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.Code=void 0;var ee=function(X,$){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return function Z(X,$){var H=[],W=!0,B=!1,te=void 0;try{for(var de,Y=X[Symbol.iterator]();!(W=(de=Y.next()).done)&&(H.push(de.value),!$||H.length!==$);W=!0);}catch(ue){B=!0,te=ue}finally{try{!W&&Y.return&&Y.return()}finally{if(B)throw te}}return H}(X,$);throw new TypeError("Invalid attempt to destructure non-iterable instance")},F=function(){function Z(X,$){for(var H=0;H<$.length;H++){var W=$[H];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(X,W.key,W)}}return function(X,$,H){return $&&Z(X.prototype,$),H&&Z(X,H),X}}(),K=function Z(X,$,H){null===X&&(X=Function.prototype);var W=Object.getOwnPropertyDescriptor(X,$);if(void 0===W){var B=Object.getPrototypeOf(X);return null===B?void 0:Z(B,$,H)}if("value"in W)return W.value;var te=W.get;return void 0===te?void 0:te.call(H)},q=x(c(2)),S=x(c(0)),_=x(c(4)),C=x(c(6)),A=x(c(7));function x(Z){return Z&&Z.__esModule?Z:{default:Z}}function V(Z,X){if(!(Z instanceof X))throw new TypeError("Cannot call a class as a function")}function I(Z,X){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!X||"object"!=typeof X&&"function"!=typeof X?Z:X}function L(Z,X){if("function"!=typeof X&&null!==X)throw new TypeError("Super expression must either be null or a function, not "+typeof X);Z.prototype=Object.create(X&&X.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,X):Z.__proto__=X)}var ne=function(Z){function X(){return V(this,X),I(this,(X.__proto__||Object.getPrototypeOf(X)).apply(this,arguments))}return L(X,Z),X}(C.default);ne.blotName="code",ne.tagName="CODE";var J=function(Z){function X(){return V(this,X),I(this,(X.__proto__||Object.getPrototypeOf(X)).apply(this,arguments))}return L(X,Z),F(X,[{key:"delta",value:function(){var H=this,W=this.domNode.textContent;return W.endsWith("\n")&&(W=W.slice(0,-1)),W.split("\n").reduce(function(B,te){return B.insert(te).insert("\n",H.formats())},new q.default)}},{key:"format",value:function(H,W){if(H!==this.statics.blotName||!W){var B=this.descendant(A.default,this.length()-1),Y=ee(B,1)[0];null!=Y&&Y.deleteAt(Y.length()-1,1),K(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"format",this).call(this,H,W)}}},{key:"formatAt",value:function(H,W,B,te){if(0!==W&&null!=S.default.query(B,S.default.Scope.BLOCK)&&(B!==this.statics.blotName||te!==this.statics.formats(this.domNode))){var Y=this.newlineIndex(H);if(!(Y<0||Y>=H+W)){var de=this.newlineIndex(H,!0)+1,ue=Y-de+1,be=this.isolate(de,ue),ce=be.next;be.format(B,te),ce instanceof X&&ce.formatAt(0,H-de+W-ue,B,te)}}}},{key:"insertAt",value:function(H,W,B){if(null==B){var te=this.descendant(A.default,H),Y=ee(te,2);Y[0].insertAt(Y[1],W)}}},{key:"length",value:function(){var H=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?H:H+1}},{key:"newlineIndex",value:function(H){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,H).lastIndexOf("\n");var B=this.domNode.textContent.slice(H).indexOf("\n");return B>-1?H+B:-1}},{key:"optimize",value:function(H){this.domNode.textContent.endsWith("\n")||this.appendChild(S.default.create("text","\n")),K(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"optimize",this).call(this,H);var W=this.next;null!=W&&W.prev===this&&W.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===W.statics.formats(W.domNode)&&(W.optimize(H),W.moveChildren(this),W.remove())}},{key:"replace",value:function(H){K(X.prototype.__proto__||Object.getPrototypeOf(X.prototype),"replace",this).call(this,H),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(W){var B=S.default.find(W);null==B?W.parentNode.removeChild(W):B instanceof S.default.Embed?B.remove():B.unwrap()})}}],[{key:"create",value:function(H){var W=K(X.__proto__||Object.getPrototypeOf(X),"create",this).call(this,H);return W.setAttribute("spellcheck",!1),W}},{key:"formats",value:function(){return!0}}]),X}(_.default);J.blotName="code-block",J.tagName="PRE",J.TAB="  ",M.Code=ne,M.default=J},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ce){return typeof ce}:function(ce){return ce&&"function"==typeof Symbol&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce},F=function(le,ie){if(Array.isArray(le))return le;if(Symbol.iterator in Object(le))return function ce(le,ie){var fe=[],me=!0,_e=!1,xe=void 0;try{for(var De,he=le[Symbol.iterator]();!(me=(De=he.next()).done)&&(fe.push(De.value),!ie||fe.length!==ie);me=!0);}catch(ke){_e=!0,xe=ke}finally{try{!me&&he.return&&he.return()}finally{if(_e)throw xe}}return fe}(le,ie);throw new TypeError("Invalid attempt to destructure non-iterable instance")},K=function(){function ce(le,ie){for(var fe=0;fe<ie.length;fe++){var me=ie[fe];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(le,me.key,me)}}return function(le,ie,fe){return ie&&ce(le.prototype,ie),fe&&ce(le,fe),le}}(),q=W(c(2)),S=W(c(20)),_=W(c(0)),C=W(c(13)),A=W(c(24)),x=c(4),V=W(x),L=W(c(16)),J=W(c(21)),X=W(c(11)),H=W(c(3));function W(ce){return ce&&ce.__esModule?ce:{default:ce}}var Y=/^[ -~]*$/,de=function(){function ce(le){(function te(ce,le){if(!(ce instanceof le))throw new TypeError("Cannot call a class as a function")})(this,ce),this.scroll=le,this.delta=this.getDelta()}return K(ce,[{key:"applyDelta",value:function(ie){var fe=this,me=!1;this.scroll.update();var _e=this.scroll.length();return this.scroll.batchStart(),(ie=function be(ce){return ce.reduce(function(le,ie){if(1===ie.insert){var fe=(0,J.default)(ie.attributes);return delete fe.image,le.insert({image:ie.attributes.image},fe)}if(null!=ie.attributes&&(!0===ie.attributes.list||!0===ie.attributes.bullet)&&((ie=(0,J.default)(ie)).attributes.list?ie.attributes.list="ordered":(ie.attributes.list="bullet",delete ie.attributes.bullet)),"string"==typeof ie.insert){var me=ie.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return le.insert(me,ie.attributes)}return le.push(ie)},new q.default)}(ie)).reduce(function(xe,he){var De=he.retain||he.delete||he.insert.length||1,ke=he.attributes||{};if(null!=he.insert){if("string"==typeof he.insert){var Re=he.insert;Re.endsWith("\n")&&me&&(me=!1,Re=Re.slice(0,-1)),xe>=_e&&!Re.endsWith("\n")&&(me=!0),fe.scroll.insertAt(xe,Re);var Be=fe.scroll.line(xe),Qe=F(Be,2),wt=Qe[0],It=Qe[1],Mt=(0,H.default)({},(0,x.bubbleFormats)(wt));if(wt instanceof V.default){var Bt=wt.descendant(_.default.Leaf,It),In=F(Bt,1);Mt=(0,H.default)(Mt,(0,x.bubbleFormats)(In[0]))}ke=S.default.attributes.diff(Mt,ke)||{}}else if("object"===ee(he.insert)){var je=Object.keys(he.insert)[0];if(null==je)return xe;fe.scroll.insertAt(xe,je,he.insert[je])}_e+=De}return Object.keys(ke).forEach(function(qe){fe.scroll.formatAt(xe,De,qe,ke[qe])}),xe+De},0),ie.reduce(function(xe,he){return"number"==typeof he.delete?(fe.scroll.deleteAt(xe,he.delete),xe):xe+(he.retain||he.insert.length||1)},0),this.scroll.batchEnd(),this.update(ie)}},{key:"deleteText",value:function(ie,fe){return this.scroll.deleteAt(ie,fe),this.update((new q.default).retain(ie).delete(fe))}},{key:"formatLine",value:function(ie,fe){var me=this,_e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(_e).forEach(function(xe){if(null==me.scroll.whitelist||me.scroll.whitelist[xe]){var he=me.scroll.lines(ie,Math.max(fe,1)),De=fe;he.forEach(function(ke){var Re=ke.length();if(ke instanceof C.default){var Be=ie-ke.offset(me.scroll),Qe=ke.newlineIndex(Be+De)-Be+1;ke.formatAt(Be,Qe,xe,_e[xe])}else ke.format(xe,_e[xe]);De-=Re})}}),this.scroll.optimize(),this.update((new q.default).retain(ie).retain(fe,(0,J.default)(_e)))}},{key:"formatText",value:function(ie,fe){var me=this,_e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(_e).forEach(function(xe){me.scroll.formatAt(ie,fe,xe,_e[xe])}),this.update((new q.default).retain(ie).retain(fe,(0,J.default)(_e)))}},{key:"getContents",value:function(ie,fe){return this.delta.slice(ie,ie+fe)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(ie,fe){return ie.concat(fe.delta())},new q.default)}},{key:"getFormat",value:function(ie){var fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,me=[],_e=[];0===fe?this.scroll.path(ie).forEach(function(he){var ke=F(he,1)[0];ke instanceof V.default?me.push(ke):ke instanceof _.default.Leaf&&_e.push(ke)}):(me=this.scroll.lines(ie,fe),_e=this.scroll.descendants(_.default.Leaf,ie,fe));var xe=[me,_e].map(function(he){if(0===he.length)return{};for(var De=(0,x.bubbleFormats)(he.shift());Object.keys(De).length>0;){var ke=he.shift();if(null==ke)return De;De=ue((0,x.bubbleFormats)(ke),De)}return De});return H.default.apply(H.default,xe)}},{key:"getText",value:function(ie,fe){return this.getContents(ie,fe).filter(function(me){return"string"==typeof me.insert}).map(function(me){return me.insert}).join("")}},{key:"insertEmbed",value:function(ie,fe,me){return this.scroll.insertAt(ie,fe,me),this.update((new q.default).retain(ie).insert(function B(ce,le,ie){return le in ce?Object.defineProperty(ce,le,{value:ie,enumerable:!0,configurable:!0,writable:!0}):ce[le]=ie,ce}({},fe,me)))}},{key:"insertText",value:function(ie,fe){var me=this,_e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return fe=fe.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(ie,fe),Object.keys(_e).forEach(function(xe){me.scroll.formatAt(ie,fe.length,xe,_e[xe])}),this.update((new q.default).retain(ie).insert(fe,(0,J.default)(_e)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var ie=this.scroll.children.head;return!(ie.statics.blotName!==V.default.blotName||ie.children.length>1)&&ie.children.head instanceof L.default}},{key:"removeFormat",value:function(ie,fe){var me=this.getText(ie,fe),_e=this.scroll.line(ie+fe),xe=F(_e,2),he=xe[0],De=xe[1],ke=0,Re=new q.default;null!=he&&(ke=he instanceof C.default?he.newlineIndex(De)-De+1:he.length()-De,Re=he.delta().slice(De,De+ke-1).insert("\n"));var Qe=this.getContents(ie,fe+ke).diff((new q.default).insert(me).concat(Re)),wt=(new q.default).retain(ie).concat(Qe);return this.applyDelta(wt)}},{key:"update",value:function(ie){var fe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],me=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,_e=this.delta;if(1===fe.length&&"characterData"===fe[0].type&&fe[0].target.data.match(Y)&&_.default.find(fe[0].target)){var xe=_.default.find(fe[0].target),he=(0,x.bubbleFormats)(xe),De=xe.offset(this.scroll),ke=fe[0].oldValue.replace(A.default.CONTENTS,""),Re=(new q.default).insert(ke),Be=(new q.default).insert(xe.value());ie=(new q.default).retain(De).concat(Re.diff(Be,me)).reduce(function(wt,It){return It.insert?wt.insert(It.insert,he):wt.push(It)},new q.default),this.delta=_e.compose(ie)}else this.delta=this.getDelta(),(!ie||!(0,X.default)(_e.compose(ie),this.delta))&&(ie=_e.diff(this.delta,me));return ie}}]),ce}();function ue(ce,le){return Object.keys(le).reduce(function(ie,fe){return null==ce[fe]||(le[fe]===ce[fe]?ie[fe]=le[fe]:Array.isArray(le[fe])?le[fe].indexOf(ce[fe])<0&&(ie[fe]=le[fe].concat([ce[fe]])):ie[fe]=[le[fe],ce[fe]]),ie},{})}M.default=de},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.Range=void 0;var ee=function(X,$){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return function Z(X,$){var H=[],W=!0,B=!1,te=void 0;try{for(var de,Y=X[Symbol.iterator]();!(W=(de=Y.next()).done)&&(H.push(de.value),!$||H.length!==$);W=!0);}catch(ue){B=!0,te=ue}finally{try{!W&&Y.return&&Y.return()}finally{if(B)throw te}}return H}(X,$);throw new TypeError("Invalid attempt to destructure non-iterable instance")},F=function(){function Z(X,$){for(var H=0;H<$.length;H++){var W=$[H];W.enumerable=W.enumerable||!1,W.configurable=!0,"value"in W&&(W.writable=!0),Object.defineProperty(X,W.key,W)}}return function(X,$,H){return $&&Z(X.prototype,$),H&&Z(X,H),X}}(),j=A(c(0)),R=A(c(21)),E=A(c(11)),T=A(c(8));function A(Z){return Z&&Z.__esModule?Z:{default:Z}}function x(Z){if(Array.isArray(Z)){for(var X=0,$=Array(Z.length);X<Z.length;X++)$[X]=Z[X];return $}return Array.from(Z)}function V(Z,X){if(!(Z instanceof X))throw new TypeError("Cannot call a class as a function")}var I=(0,A(c(10)).default)("quill:selection"),L=function Z(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;V(this,Z),this.index=X,this.length=$},ne=function(){function Z(X,$){var H=this;V(this,Z),this.emitter=$,this.scroll=X,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=j.default.create("cursor",this),this.lastRange=this.savedRange=new L(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){H.mouseDown||setTimeout(H.update.bind(H,T.default.sources.USER),1)}),this.emitter.on(T.default.events.EDITOR_CHANGE,function(W,B){W===T.default.events.TEXT_CHANGE&&B.length()>0&&H.update(T.default.sources.SILENT)}),this.emitter.on(T.default.events.SCROLL_BEFORE_UPDATE,function(){if(H.hasFocus()){var W=H.getNativeRange();null!=W&&W.start.node!==H.cursor.textNode&&H.emitter.once(T.default.events.SCROLL_UPDATE,function(){try{H.setNativeRange(W.start.node,W.start.offset,W.end.node,W.end.offset)}catch(B){}})}}),this.emitter.on(T.default.events.SCROLL_OPTIMIZE,function(W,B){if(B.range){var te=B.range;H.setNativeRange(te.startNode,te.startOffset,te.endNode,te.endOffset)}}),this.update(T.default.sources.SILENT)}return F(Z,[{key:"handleComposition",value:function(){var $=this;this.root.addEventListener("compositionstart",function(){$.composing=!0}),this.root.addEventListener("compositionend",function(){if($.composing=!1,$.cursor.parent){var H=$.cursor.restore();if(!H)return;setTimeout(function(){$.setNativeRange(H.startNode,H.startOffset,H.endNode,H.endOffset)},1)}})}},{key:"handleDragging",value:function(){var $=this;this.emitter.listenDOM("mousedown",document.body,function(){$.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){$.mouseDown=!1,$.update(T.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function($,H){if(null==this.scroll.whitelist||this.scroll.whitelist[$]){this.scroll.update();var W=this.getNativeRange();if(null!=W&&W.native.collapsed&&!j.default.query($,j.default.Scope.BLOCK)){if(W.start.node!==this.cursor.textNode){var B=j.default.find(W.start.node,!1);if(null==B)return;if(B instanceof j.default.Leaf){var te=B.split(W.start.offset);B.parent.insertBefore(this.cursor,te)}else B.insertBefore(this.cursor,W.start.node);this.cursor.attach()}this.cursor.format($,H),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function($){var H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,W=this.scroll.length();$=Math.min($,W-1),H=Math.min($+H,W-1)-$;var B=void 0,te=this.scroll.leaf($),Y=ee(te,2),de=Y[0],ue=Y[1];if(null==de)return null;var be=de.position(ue,!0),ce=ee(be,2);B=ce[0],ue=ce[1];var le=document.createRange();if(H>0){le.setStart(B,ue);var ie=this.scroll.leaf($+H),fe=ee(ie,2);if(null==(de=fe[0]))return null;var me=de.position(ue=fe[1],!0),_e=ee(me,2);return le.setEnd(B=_e[0],ue=_e[1]),le.getBoundingClientRect()}var xe="left",he=void 0;return B instanceof Text?(ue<B.data.length?(le.setStart(B,ue),le.setEnd(B,ue+1)):(le.setStart(B,ue-1),le.setEnd(B,ue),xe="right"),he=le.getBoundingClientRect()):(he=de.domNode.getBoundingClientRect(),ue>0&&(xe="right")),{bottom:he.top+he.height,height:he.height,left:he[xe],right:he[xe],top:he.top,width:0}}},{key:"getNativeRange",value:function(){var $=document.getSelection();if(null==$||$.rangeCount<=0)return null;var H=$.getRangeAt(0);if(null==H)return null;var W=this.normalizeNative(H);return I.info("getNativeRange",W),W}},{key:"getRange",value:function(){var $=this.getNativeRange();return null==$?[null,null]:[this.normalizedToRange($),$]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function($){var H=this,W=[[$.start.node,$.start.offset]];$.native.collapsed||W.push([$.end.node,$.end.offset]);var B=W.map(function(de){var ue=ee(de,2),be=ue[0],ce=ue[1],le=j.default.find(be,!0),ie=le.offset(H.scroll);return 0===ce?ie:le instanceof j.default.Container?ie+le.length():ie+le.index(be,ce)}),te=Math.min(Math.max.apply(Math,x(B)),this.scroll.length()-1),Y=Math.min.apply(Math,[te].concat(x(B)));return new L(Y,te-Y)}},{key:"normalizeNative",value:function($){if(!J(this.root,$.startContainer)||!$.collapsed&&!J(this.root,$.endContainer))return null;var H={start:{node:$.startContainer,offset:$.startOffset},end:{node:$.endContainer,offset:$.endOffset},native:$};return[H.start,H.end].forEach(function(W){for(var B=W.node,te=W.offset;!(B instanceof Text)&&B.childNodes.length>0;)if(B.childNodes.length>te)B=B.childNodes[te],te=0;else{if(B.childNodes.length!==te)break;te=(B=B.lastChild)instanceof Text?B.data.length:B.childNodes.length+1}W.node=B,W.offset=te}),H}},{key:"rangeToNative",value:function($){var H=this,W=$.collapsed?[$.index]:[$.index,$.index+$.length],B=[],te=this.scroll.length();return W.forEach(function(Y,de){Y=Math.min(te-1,Y);var be=H.scroll.leaf(Y),ce=ee(be,2),ie=ce[1],fe=ce[0].position(ie,0!==de),me=ee(fe,2);B.push(me[0],ie=me[1])}),B.length<2&&(B=B.concat(B)),B}},{key:"scrollIntoView",value:function($){var H=this.lastRange;if(null!=H){var W=this.getBounds(H.index,H.length);if(null!=W){var B=this.scroll.length()-1,te=this.scroll.line(Math.min(H.index,B)),de=ee(te,1)[0],ue=de;if(H.length>0){var be=this.scroll.line(Math.min(H.index+H.length,B));ue=ee(be,1)[0]}if(null!=de&&null!=ue){var le=$.getBoundingClientRect();W.top<le.top?$.scrollTop-=le.top-W.top:W.bottom>le.bottom&&($.scrollTop+=W.bottom-le.bottom)}}}}},{key:"setNativeRange",value:function($,H){var W=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$,B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:H,te=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(I.info("setNativeRange",$,H,W,B),null==$||null!=this.root.parentNode&&null!=$.parentNode&&null!=W.parentNode){var Y=document.getSelection();if(null!=Y)if(null!=$){this.hasFocus()||this.root.focus();var de=(this.getNativeRange()||{}).native;if(null==de||te||$!==de.startContainer||H!==de.startOffset||W!==de.endContainer||B!==de.endOffset){"BR"==$.tagName&&(H=[].indexOf.call($.parentNode.childNodes,$),$=$.parentNode),"BR"==W.tagName&&(B=[].indexOf.call(W.parentNode.childNodes,W),W=W.parentNode);var ue=document.createRange();ue.setStart($,H),ue.setEnd(W,B),Y.removeAllRanges(),Y.addRange(ue)}}else Y.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function($){var H=arguments.length>1&&void 0!==arguments[1]&&arguments[1],W=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T.default.sources.API;if("string"==typeof H&&(W=H,H=!1),I.info("setRange",$),null!=$){var B=this.rangeToNative($);this.setNativeRange.apply(this,x(B).concat([H]))}else this.setNativeRange(null);this.update(W)}},{key:"update",value:function(){var $=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T.default.sources.USER,H=this.lastRange,W=this.getRange(),B=ee(W,2),Y=B[1];if(this.lastRange=B[0],null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,E.default)(H,this.lastRange)){var de;!this.composing&&null!=Y&&Y.native.collapsed&&Y.start.node!==this.cursor.textNode&&this.cursor.restore();var be,ue=[T.default.events.SELECTION_CHANGE,(0,R.default)(this.lastRange),(0,R.default)(H),$];(de=this.emitter).emit.apply(de,[T.default.events.EDITOR_CHANGE].concat(ue)),$!==T.default.sources.SILENT&&(be=this.emitter).emit.apply(be,ue)}}}]),Z}();function J(Z,X){return X instanceof Text&&(X=X.parentNode),Z.contains(X)}M.Range=L,M.default=ne},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function T(C,k){for(var A=0;A<k.length;A++){var x=k[A];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(C,x.key,x)}}return function(C,k,A){return k&&T(C.prototype,k),A&&T(C,A),C}}(),F=function T(C,k,A){null===C&&(C=Function.prototype);var x=Object.getOwnPropertyDescriptor(C,k);if(void 0===x){var V=Object.getPrototypeOf(C);return null===V?void 0:T(V,k,A)}if("value"in x)return x.value;var I=x.get;return void 0===I?void 0:I.call(A)};function R(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")}function S(T,C){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||"object"!=typeof C&&"function"!=typeof C?T:C}var _=function(T){function C(){return R(this,C),S(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return function E(T,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function, not "+typeof C);T.prototype=Object.create(C&&C.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(T,C):T.__proto__=C)}(C,T),ee(C,[{key:"insertInto",value:function(A,x){0===A.children.length?F(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertInto",this).call(this,A,x):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),C}(function q(T){return T&&T.__esModule?T:{default:T}}(c(0)).default.Embed);_.blotName="break",_.tagName="BR",M.default=_},function(ge,M,c){"use strict";var S,ee=this&&this.__extends||(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,_){E.__proto__=_}||function(E,_){for(var T in _)_.hasOwnProperty(T)&&(E[T]=_[T])},function(E,_){function T(){this.constructor=E}S(E,_),E.prototype=null===_?Object.create(_):(T.prototype=_.prototype,new T)});Object.defineProperty(M,"__esModule",{value:!0});var F=c(44),K=c(30),j=c(1),q=function(S){function E(_){var T=S.call(this,_)||this;return T.build(),T}return ee(E,S),E.prototype.appendChild=function(_){this.insertBefore(_)},E.prototype.attach=function(){S.prototype.attach.call(this),this.children.forEach(function(_){_.attach()})},E.prototype.build=function(){var _=this;this.children=new F.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(T){try{var C=R(T);_.insertBefore(C,_.children.head||void 0)}catch(k){if(k instanceof j.ParchmentError)return;throw k}})},E.prototype.deleteAt=function(_,T){if(0===_&&T===this.length())return this.remove();this.children.forEachAt(_,T,function(C,k,A){C.deleteAt(k,A)})},E.prototype.descendant=function(_,T){var C=this.children.find(T),k=C[0],A=C[1];return null==_.blotName&&_(k)||null!=_.blotName&&k instanceof _?[k,A]:k instanceof E?k.descendant(_,A):[null,-1]},E.prototype.descendants=function(_,T,C){void 0===T&&(T=0),void 0===C&&(C=Number.MAX_VALUE);var k=[],A=C;return this.children.forEachAt(T,C,function(x,V,I){(null==_.blotName&&_(x)||null!=_.blotName&&x instanceof _)&&k.push(x),x instanceof E&&(k=k.concat(x.descendants(_,V,A))),A-=I}),k},E.prototype.detach=function(){this.children.forEach(function(_){_.detach()}),S.prototype.detach.call(this)},E.prototype.formatAt=function(_,T,C,k){this.children.forEachAt(_,T,function(A,x,V){A.formatAt(x,V,C,k)})},E.prototype.insertAt=function(_,T,C){var k=this.children.find(_),A=k[0];if(A)A.insertAt(k[1],T,C);else{var V=null==C?j.create("text",T):j.create(T,C);this.appendChild(V)}},E.prototype.insertBefore=function(_,T){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(C){return _ instanceof C}))throw new j.ParchmentError("Cannot insert "+_.statics.blotName+" into "+this.statics.blotName);_.insertInto(this,T)},E.prototype.length=function(){return this.children.reduce(function(_,T){return _+T.length()},0)},E.prototype.moveChildren=function(_,T){this.children.forEach(function(C){_.insertBefore(C,T)})},E.prototype.optimize=function(_){if(S.prototype.optimize.call(this,_),0===this.children.length)if(null!=this.statics.defaultChild){var T=j.create(this.statics.defaultChild);this.appendChild(T),T.optimize(_)}else this.remove()},E.prototype.path=function(_,T){void 0===T&&(T=!1);var C=this.children.find(_,T),k=C[0],A=C[1],x=[[this,_]];return k instanceof E?x.concat(k.path(A,T)):(null!=k&&x.push([k,A]),x)},E.prototype.removeChild=function(_){this.children.remove(_)},E.prototype.replace=function(_){_ instanceof E&&_.moveChildren(this),S.prototype.replace.call(this,_)},E.prototype.split=function(_,T){if(void 0===T&&(T=!1),!T){if(0===_)return this;if(_===this.length())return this.next}var C=this.clone();return this.parent.insertBefore(C,this.next),this.children.forEachAt(_,this.length(),function(k,A,x){k=k.split(A,T),C.appendChild(k)}),C},E.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},E.prototype.update=function(_,T){var C=this,k=[],A=[];_.forEach(function(x){x.target===C.domNode&&"childList"===x.type&&(k.push.apply(k,x.addedNodes),A.push.apply(A,x.removedNodes))}),A.forEach(function(x){if(!(null!=x.parentNode&&"IFRAME"!==x.tagName&&document.body.compareDocumentPosition(x)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var V=j.find(x);null!=V&&(null==V.domNode.parentNode||V.domNode.parentNode===C.domNode)&&V.detach()}}),k.filter(function(x){return x.parentNode==C.domNode}).sort(function(x,V){return x===V?0:x.compareDocumentPosition(V)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(x){var V=null;null!=x.nextSibling&&(V=j.find(x.nextSibling));var I=R(x);(I.next!=V||null==I.next)&&(null!=I.parent&&I.parent.removeChild(C),C.insertBefore(I,V||void 0))})},E}(K.default);function R(S){var E=j.find(S);if(null==E)try{E=j.create(S)}catch(_){E=j.create(j.Scope.INLINE),[].slice.call(S.childNodes).forEach(function(T){E.domNode.appendChild(T)}),S.parentNode&&S.parentNode.replaceChild(E.domNode,S),E.attach()}return E}M.default=q},function(ge,M,c){"use strict";var S,ee=this&&this.__extends||(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,_){E.__proto__=_}||function(E,_){for(var T in _)_.hasOwnProperty(T)&&(E[T]=_[T])},function(E,_){function T(){this.constructor=E}S(E,_),E.prototype=null===_?Object.create(_):(T.prototype=_.prototype,new T)});Object.defineProperty(M,"__esModule",{value:!0});var F=c(12),K=c(31),j=c(17),q=c(1),R=function(S){function E(_){var T=S.call(this,_)||this;return T.attributes=new K.default(T.domNode),T}return ee(E,S),E.formats=function(_){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?_.tagName.toLowerCase():void 0)},E.prototype.format=function(_,T){var C=q.query(_);C instanceof F.default?this.attributes.attribute(C,T):T&&null!=C&&(_!==this.statics.blotName||this.formats()[_]!==T)&&this.replaceWith(_,T)},E.prototype.formats=function(){var _=this.attributes.values(),T=this.statics.formats(this.domNode);return null!=T&&(_[this.statics.blotName]=T),_},E.prototype.replaceWith=function(_,T){var C=S.prototype.replaceWith.call(this,_,T);return this.attributes.copy(C),C},E.prototype.update=function(_,T){var C=this;S.prototype.update.call(this,_,T),_.some(function(k){return k.target===C.domNode&&"attributes"===k.type})&&this.attributes.build()},E.prototype.wrap=function(_,T){var C=S.prototype.wrap.call(this,_,T);return C instanceof E&&C.statics.scope===this.statics.scope&&this.attributes.move(C),C},E}(j.default);M.default=R},function(ge,M,c){"use strict";var q,ee=this&&this.__extends||(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,S){R.__proto__=S}||function(R,S){for(var E in S)S.hasOwnProperty(E)&&(R[E]=S[E])},function(R,S){function E(){this.constructor=R}q(R,S),R.prototype=null===S?Object.create(S):(E.prototype=S.prototype,new E)});Object.defineProperty(M,"__esModule",{value:!0});var F=c(30),K=c(1),j=function(q){function R(){return null!==q&&q.apply(this,arguments)||this}return ee(R,q),R.value=function(S){return!0},R.prototype.index=function(S,E){return this.domNode===S||this.domNode.compareDocumentPosition(S)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(E,1):-1},R.prototype.position=function(S,E){var _=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return S>0&&(_+=1),[this.parent.domNode,_]},R.prototype.value=function(){var S;return(S={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,S},R.scope=K.Scope.INLINE_BLOT,R}(F.default);M.default=j},function(ge,M,c){var ee=c(11),F=c(3),K={attributes:{compose:function(q,R,S){"object"!=typeof q&&(q={}),"object"!=typeof R&&(R={});var E=F(!0,{},R);for(var _ in S||(E=Object.keys(E).reduce(function(T,C){return null!=E[C]&&(T[C]=E[C]),T},{})),q)void 0!==q[_]&&void 0===R[_]&&(E[_]=q[_]);return Object.keys(E).length>0?E:void 0},diff:function(q,R){"object"!=typeof q&&(q={}),"object"!=typeof R&&(R={});var S=Object.keys(q).concat(Object.keys(R)).reduce(function(E,_){return ee(q[_],R[_])||(E[_]=void 0===R[_]?null:R[_]),E},{});return Object.keys(S).length>0?S:void 0},transform:function(q,R,S){if("object"!=typeof q)return R;if("object"==typeof R){if(!S)return R;var E=Object.keys(R).reduce(function(_,T){return void 0===q[T]&&(_[T]=R[T]),_},{});return Object.keys(E).length>0?E:void 0}}},iterator:function(q){return new j(q)},length:function(q){return"number"==typeof q.delete?q.delete:"number"==typeof q.retain?q.retain:"string"==typeof q.insert?q.insert.length:1}};function j(q){this.ops=q,this.index=0,this.offset=0}j.prototype.hasNext=function(){return this.peekLength()<1/0},j.prototype.next=function(q){q||(q=1/0);var R=this.ops[this.index];if(R){var S=this.offset,E=K.length(R);if(q>=E-S?(q=E-S,this.index+=1,this.offset=0):this.offset+=q,"number"==typeof R.delete)return{delete:q};var _={};return R.attributes&&(_.attributes=R.attributes),"number"==typeof R.retain?_.retain=q:_.insert="string"==typeof R.insert?R.insert.substr(S,q):R.insert,_}return{retain:1/0}},j.prototype.peek=function(){return this.ops[this.index]},j.prototype.peekLength=function(){return this.ops[this.index]?K.length(this.ops[this.index])-this.offset:1/0},j.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},j.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var q=this.offset,R=this.index,S=this.next(),E=this.ops.slice(this.index);return this.offset=q,this.index=R,[S].concat(E)}return[]},ge.exports=K},function(ge,M){var c=function(){"use strict";function ee(C,k){return null!=k&&C instanceof k}var F,K,j;try{F=Map}catch(C){F=function(){}}try{K=Set}catch(C){K=function(){}}try{j=Promise}catch(C){j=function(){}}function q(C,k,A,x,V){"object"==typeof k&&(A=k.depth,x=k.prototype,V=k.includeNonEnumerable,k=k.circular);var I=[],L=[],ne="undefined"!=typeof Buffer;return void 0===k&&(k=!0),void 0===A&&(A=1/0),function J(Z,X){if(null===Z)return null;if(0===X)return Z;var $,H;if("object"!=typeof Z)return Z;if(ee(Z,F))$=new F;else if(ee(Z,K))$=new K;else if(ee(Z,j))$=new j(function(le,ie){Z.then(function(fe){le(J(fe,X-1))},function(fe){ie(J(fe,X-1))})});else if(q.__isArray(Z))$=[];else if(q.__isRegExp(Z))$=new RegExp(Z.source,T(Z)),Z.lastIndex&&($.lastIndex=Z.lastIndex);else if(q.__isDate(Z))$=new Date(Z.getTime());else{if(ne&&Buffer.isBuffer(Z))return $=Buffer.allocUnsafe?Buffer.allocUnsafe(Z.length):new Buffer(Z.length),Z.copy($),$;ee(Z,Error)?$=Object.create(Z):void 0===x?(H=Object.getPrototypeOf(Z),$=Object.create(H)):($=Object.create(x),H=x)}if(k){var W=I.indexOf(Z);if(-1!=W)return L[W];I.push(Z),L.push($)}for(var B in ee(Z,F)&&Z.forEach(function(le,ie){var fe=J(ie,X-1),me=J(le,X-1);$.set(fe,me)}),ee(Z,K)&&Z.forEach(function(le){var ie=J(le,X-1);$.add(ie)}),Z){var te;H&&(te=Object.getOwnPropertyDescriptor(H,B)),(!te||null!=te.set)&&($[B]=J(Z[B],X-1))}if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(Z);for(B=0;B<Y.length;B++){var de=Y[B];(ue=Object.getOwnPropertyDescriptor(Z,de))&&!ue.enumerable&&!V||($[de]=J(Z[de],X-1),ue.enumerable||Object.defineProperty($,de,{enumerable:!1}))}}if(V){var be=Object.getOwnPropertyNames(Z);for(B=0;B<be.length;B++){var ue,ce=be[B];(ue=Object.getOwnPropertyDescriptor(Z,ce))&&ue.enumerable||($[ce]=J(Z[ce],X-1),Object.defineProperty($,ce,{enumerable:!1}))}}return $}(C,A)}function R(C){return Object.prototype.toString.call(C)}function T(C){var k="";return C.global&&(k+="g"),C.ignoreCase&&(k+="i"),C.multiline&&(k+="m"),k}return q.clonePrototype=function(k){if(null===k)return null;var A=function(){};return A.prototype=k,new A},q.__objToStr=R,q.__isDate=function S(C){return"object"==typeof C&&"[object Date]"===R(C)},q.__isArray=function E(C){return"object"==typeof C&&"[object Array]"===R(C)},q.__isRegExp=function _(C){return"object"==typeof C&&"[object RegExp]"===R(C)},q.__getRegExpFlags=T,q}();"object"==typeof ge&&ge.exports&&(ge.exports=c)},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(H,W){if(Array.isArray(H))return H;if(Symbol.iterator in Object(H))return function $(H,W){var B=[],te=!0,Y=!1,de=void 0;try{for(var be,ue=H[Symbol.iterator]();!(te=(be=ue.next()).done)&&(B.push(be.value),!W||B.length!==W);te=!0);}catch(ce){Y=!0,de=ce}finally{try{!te&&ue.return&&ue.return()}finally{if(Y)throw de}}return B}(H,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")},F=function(){function $(H,W){for(var B=0;B<W.length;B++){var te=W[B];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(H,te.key,te)}}return function(H,W,B){return W&&$(H.prototype,W),B&&$(H,B),H}}(),K=function $(H,W,B){null===H&&(H=Function.prototype);var te=Object.getOwnPropertyDescriptor(H,W);if(void 0===te){var Y=Object.getPrototypeOf(H);return null===Y?void 0:$(Y,W,B)}if("value"in te)return te.value;var de=te.get;return void 0===de?void 0:de.call(B)},q=I(c(0)),S=I(c(8)),E=c(4),_=I(E),C=I(c(16)),A=I(c(13)),V=I(c(25));function I($){return $&&$.__esModule?$:{default:$}}function Z($){return $ instanceof _.default||$ instanceof E.BlockEmbed}var X=function($){function H(W,B){!function L($,H){if(!($ instanceof H))throw new TypeError("Cannot call a class as a function")}(this,H);var te=function ne($,H){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!H||"object"!=typeof H&&"function"!=typeof H?$:H}(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,W));return te.emitter=B.emitter,Array.isArray(B.whitelist)&&(te.whitelist=B.whitelist.reduce(function(Y,de){return Y[de]=!0,Y},{})),te.domNode.addEventListener("DOMNodeInserted",function(){}),te.optimize(),te.enable(),te}return function J($,H){if("function"!=typeof H&&null!==H)throw new TypeError("Super expression must either be null or a function, not "+typeof H);$.prototype=Object.create(H&&H.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf($,H):$.__proto__=H)}(H,$),F(H,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(B,te){var Y=this.line(B),de=ee(Y,2),ue=de[0],be=de[1],ce=this.line(B+te),ie=ee(ce,1)[0];if(K(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"deleteAt",this).call(this,B,te),null!=ie&&ue!==ie&&be>0){if(ue instanceof E.BlockEmbed||ie instanceof E.BlockEmbed)return void this.optimize();if(ue instanceof A.default){var fe=ue.newlineIndex(ue.length(),!0);if(fe>-1&&(ue=ue.split(fe+1))===ie)return void this.optimize()}else if(ie instanceof A.default){var me=ie.newlineIndex(0);me>-1&&ie.split(me+1)}ue.moveChildren(ie,ie.children.head instanceof C.default?null:ie.children.head),ue.remove()}this.optimize()}},{key:"enable",value:function(){this.domNode.setAttribute("contenteditable",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])}},{key:"formatAt",value:function(B,te,Y,de){null!=this.whitelist&&!this.whitelist[Y]||(K(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"formatAt",this).call(this,B,te,Y,de),this.optimize())}},{key:"insertAt",value:function(B,te,Y){if(null==Y||null==this.whitelist||this.whitelist[te]){if(B>=this.length())if(null==Y||null==q.default.query(te,q.default.Scope.BLOCK)){var de=q.default.create(this.statics.defaultChild);this.appendChild(de),null==Y&&te.endsWith("\n")&&(te=te.slice(0,-1)),de.insertAt(0,te,Y)}else{var ue=q.default.create(te,Y);this.appendChild(ue)}else K(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"insertAt",this).call(this,B,te,Y);this.optimize()}}},{key:"insertBefore",value:function(B,te){if(B.statics.scope===q.default.Scope.INLINE_BLOT){var Y=q.default.create(this.statics.defaultChild);Y.appendChild(B),B=Y}K(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"insertBefore",this).call(this,B,te)}},{key:"leaf",value:function(B){return this.path(B).pop()||[null,-1]}},{key:"line",value:function(B){return B===this.length()?this.line(B-1):this.descendant(Z,B)}},{key:"lines",value:function(){return function de(ue,be,ce){var le=[],ie=ce;return ue.children.forEachAt(be,ce,function(fe,me,_e){Z(fe)?le.push(fe):fe instanceof q.default.Container&&(le=le.concat(de(fe,me,ie))),ie-=_e}),le}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],te=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(K(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"optimize",this).call(this,B,te),B.length>0&&this.emitter.emit(S.default.events.SCROLL_OPTIMIZE,B,te))}},{key:"path",value:function(B){return K(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"path",this).call(this,B).slice(1)}},{key:"update",value:function(B){if(!0!==this.batch){var te=S.default.sources.USER;"string"==typeof B&&(te=B),Array.isArray(B)||(B=this.observer.takeRecords()),B.length>0&&this.emitter.emit(S.default.events.SCROLL_BEFORE_UPDATE,te,B),K(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"update",this).call(this,B.concat([])),B.length>0&&this.emitter.emit(S.default.events.SCROLL_UPDATE,te,B)}}}]),H}(q.default.Scroll);X.blotName="scroll",X.className="ql-editor",X.tagName="DIV",X.defaultChild="block",X.allowedChildren=[_.default,E.BlockEmbed,V.default],M.default=X},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.SHORTKEY=M.default=void 0;var ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(he){return typeof he}:function(he){return he&&"function"==typeof Symbol&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he},F=function(De,ke){if(Array.isArray(De))return De;if(Symbol.iterator in Object(De))return function he(De,ke){var Re=[],Be=!0,Qe=!1,wt=void 0;try{for(var Mt,It=De[Symbol.iterator]();!(Be=(Mt=It.next()).done)&&(Re.push(Mt.value),!ke||Re.length!==ke);Be=!0);}catch(Bt){Qe=!0,wt=Bt}finally{try{!Be&&It.return&&It.return()}finally{if(Qe)throw wt}}return Re}(De,ke);throw new TypeError("Invalid attempt to destructure non-iterable instance")},K=function(){function he(De,ke){for(var Re=0;Re<ke.length;Re++){var Be=ke[Re];Be.enumerable=Be.enumerable||!1,Be.configurable=!0,"value"in Be&&(Be.writable=!0),Object.defineProperty(De,Be.key,Be)}}return function(De,ke,Re){return ke&&he(De.prototype,ke),Re&&he(De,Re),De}}(),q=$(c(21)),S=$(c(11)),_=$(c(3)),C=$(c(2)),A=$(c(20)),V=$(c(0)),L=$(c(5)),J=$(c(10)),X=$(c(9));function $(he){return he&&he.__esModule?he:{default:he}}function H(he,De,ke){return De in he?Object.defineProperty(he,De,{value:ke,enumerable:!0,configurable:!0,writable:!0}):he[De]=ke,he}var Y=(0,J.default)("quill:keyboard"),de=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",ue=function(he){function De(ke,Re){!function W(he,De){if(!(he instanceof De))throw new TypeError("Cannot call a class as a function")}(this,De);var Be=function B(he,De){if(!he)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!De||"object"!=typeof De&&"function"!=typeof De?he:De}(this,(De.__proto__||Object.getPrototypeOf(De)).call(this,ke,Re));return Be.bindings={},Object.keys(Be.options.bindings).forEach(function(Qe){"list autofill"===Qe&&null!=ke.scroll.whitelist&&!ke.scroll.whitelist.list||Be.options.bindings[Qe]&&Be.addBinding(Be.options.bindings[Qe])}),Be.addBinding({key:De.keys.ENTER,shiftKey:null},fe),Be.addBinding({key:De.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(Be.addBinding({key:De.keys.BACKSPACE},{collapsed:!0},ce),Be.addBinding({key:De.keys.DELETE},{collapsed:!0},le)):(Be.addBinding({key:De.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},ce),Be.addBinding({key:De.keys.DELETE},{collapsed:!0,suffix:/^.?$/},le)),Be.addBinding({key:De.keys.BACKSPACE},{collapsed:!1},ie),Be.addBinding({key:De.keys.DELETE},{collapsed:!1},ie),Be.addBinding({key:De.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},ce),Be.listen(),Be}return function te(he,De){if("function"!=typeof De&&null!==De)throw new TypeError("Super expression must either be null or a function, not "+typeof De);he.prototype=Object.create(De&&De.prototype,{constructor:{value:he,enumerable:!1,writable:!0,configurable:!0}}),De&&(Object.setPrototypeOf?Object.setPrototypeOf(he,De):he.__proto__=De)}(De,he),K(De,null,[{key:"match",value:function(Re,Be){return Be=xe(Be),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(Qe){return!!Be[Qe]!==Re[Qe]&&null!==Be[Qe]})&&Be.key===(Re.which||Re.keyCode)}}]),K(De,[{key:"addBinding",value:function(Re){var Be=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Qe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},wt=xe(Re);if(null==wt||null==wt.key)return Y.warn("Attempted to add invalid keyboard binding",wt);"function"==typeof Be&&(Be={handler:Be}),"function"==typeof Qe&&(Qe={handler:Qe}),wt=(0,_.default)(wt,Be,Qe),this.bindings[wt.key]=this.bindings[wt.key]||[],this.bindings[wt.key].push(wt)}},{key:"listen",value:function(){var Re=this;this.quill.root.addEventListener("keydown",function(Be){if(!Be.defaultPrevented){var wt=(Re.bindings[Be.which||Be.keyCode]||[]).filter(function(St){return De.match(Be,St)});if(0!==wt.length){var It=Re.quill.getSelection();if(null!=It&&Re.quill.hasFocus()){var Mt=Re.quill.getLine(It.index),Bt=F(Mt,2),In=Bt[0],yn=Bt[1],je=Re.quill.getLeaf(It.index),qe=F(je,2),He=qe[0],it=qe[1],ze=0===It.length?[He,it]:Re.quill.getLeaf(It.index+It.length),vt=F(ze,2),Rt=vt[0],Pt=vt[1],sn=He instanceof V.default.Text?He.value().slice(0,it):"",fn=Rt instanceof V.default.Text?Rt.value().slice(Pt):"",en={collapsed:0===It.length,empty:0===It.length&&In.length()<=1,format:Re.quill.getFormat(It),offset:yn,prefix:sn,suffix:fn};wt.some(function(St){if(null!=St.collapsed&&St.collapsed!==en.collapsed||null!=St.empty&&St.empty!==en.empty||null!=St.offset&&St.offset!==en.offset)return!1;if(Array.isArray(St.format)){if(St.format.every(function(ft){return null==en.format[ft]}))return!1}else if("object"===ee(St.format)&&!Object.keys(St.format).every(function(ft){return!0===St.format[ft]?null!=en.format[ft]:!1===St.format[ft]?null==en.format[ft]:(0,S.default)(St.format[ft],en.format[ft])}))return!1;return!(null!=St.prefix&&!St.prefix.test(en.prefix)||null!=St.suffix&&!St.suffix.test(en.suffix))&&!0!==St.handler.call(Re,It,en)})&&Be.preventDefault()}}}})}}]),De}(X.default);function be(he,De){var ke;return H(ke={key:he,shiftKey:De,altKey:null},he===ue.keys.LEFT?"prefix":"suffix",/^$/),H(ke,"handler",function(Qe){var wt=Qe.index;he===ue.keys.RIGHT&&(wt+=Qe.length+1);var It=this.quill.getLeaf(wt);return!(F(It,1)[0]instanceof V.default.Embed&&(he===ue.keys.LEFT?De?this.quill.setSelection(Qe.index-1,Qe.length+1,L.default.sources.USER):this.quill.setSelection(Qe.index-1,L.default.sources.USER):De?this.quill.setSelection(Qe.index,Qe.length+1,L.default.sources.USER):this.quill.setSelection(Qe.index+Qe.length+1,L.default.sources.USER),1))}),ke}function ce(he,De){if(!(0===he.index||this.quill.getLength()<=1)){var ke=this.quill.getLine(he.index),Be=F(ke,1)[0],Qe={};if(0===De.offset){var wt=this.quill.getLine(he.index-1),Mt=F(wt,1)[0];if(null!=Mt&&Mt.length()>1){var Bt=Be.formats(),In=this.quill.getFormat(he.index-1,1);Qe=A.default.attributes.diff(Bt,In)||{}}}var yn=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(De.prefix)?2:1;this.quill.deleteText(he.index-yn,yn,L.default.sources.USER),Object.keys(Qe).length>0&&this.quill.formatLine(he.index-yn,yn,Qe,L.default.sources.USER),this.quill.focus()}}function le(he,De){var ke=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(De.suffix)?2:1;if(!(he.index>=this.quill.getLength()-ke)){var Re={},Be=0,Qe=this.quill.getLine(he.index),It=F(Qe,1)[0];if(De.offset>=It.length()-1){var Mt=this.quill.getLine(he.index+1),In=F(Mt,1)[0];if(In){var yn=It.formats(),je=this.quill.getFormat(he.index,1);Re=A.default.attributes.diff(yn,je)||{},Be=In.length()}}this.quill.deleteText(he.index,ke,L.default.sources.USER),Object.keys(Re).length>0&&this.quill.formatLine(he.index+Be-1,ke,Re,L.default.sources.USER)}}function ie(he){var De=this.quill.getLines(he),ke={};if(De.length>1){var Re=De[0].formats(),Be=De[De.length-1].formats();ke=A.default.attributes.diff(Be,Re)||{}}this.quill.deleteText(he,L.default.sources.USER),Object.keys(ke).length>0&&this.quill.formatLine(he.index,1,ke,L.default.sources.USER),this.quill.setSelection(he.index,L.default.sources.SILENT),this.quill.focus()}function fe(he,De){var ke=this;he.length>0&&this.quill.scroll.deleteAt(he.index,he.length);var Re=Object.keys(De.format).reduce(function(Be,Qe){return V.default.query(Qe,V.default.Scope.BLOCK)&&!Array.isArray(De.format[Qe])&&(Be[Qe]=De.format[Qe]),Be},{});this.quill.insertText(he.index,"\n",Re,L.default.sources.USER),this.quill.setSelection(he.index+1,L.default.sources.SILENT),this.quill.focus(),Object.keys(De.format).forEach(function(Be){null==Re[Be]&&(Array.isArray(De.format[Be])||"link"!==Be&&ke.quill.format(Be,De.format[Be],L.default.sources.USER))})}function me(he){return{key:ue.keys.TAB,shiftKey:!he,format:{"code-block":!0},handler:function(ke){var Re=V.default.query("code-block"),Be=ke.index,Qe=ke.length,wt=this.quill.scroll.descendant(Re,Be),It=F(wt,2),Mt=It[0],Bt=It[1];if(null!=Mt){var In=this.quill.getIndex(Mt),yn=Mt.newlineIndex(Bt,!0)+1,je=Mt.newlineIndex(In+Bt+Qe),qe=Mt.domNode.textContent.slice(yn,je).split("\n");Bt=0,qe.forEach(function(He,it){he?(Mt.insertAt(yn+Bt,Re.TAB),Bt+=Re.TAB.length,0===it?Be+=Re.TAB.length:Qe+=Re.TAB.length):He.startsWith(Re.TAB)&&(Mt.deleteAt(yn+Bt,Re.TAB.length),Bt-=Re.TAB.length,0===it?Be-=Re.TAB.length:Qe-=Re.TAB.length),Bt+=He.length+1}),this.quill.update(L.default.sources.USER),this.quill.setSelection(Be,Qe,L.default.sources.SILENT)}}}}function _e(he){return{key:he[0].toUpperCase(),shortKey:!0,handler:function(ke,Re){this.quill.format(he,!Re.format[he],L.default.sources.USER)}}}function xe(he){if("string"==typeof he||"number"==typeof he)return xe({key:he});if("object"===(void 0===he?"undefined":ee(he))&&(he=(0,q.default)(he,!1)),"string"==typeof he.key)if(null!=ue.keys[he.key.toUpperCase()])he.key=ue.keys[he.key.toUpperCase()];else{if(1!==he.key.length)return null;he.key=he.key.toUpperCase().charCodeAt(0)}return he.shortKey&&(he[de]=he.shortKey,delete he.shortKey),he}ue.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},ue.DEFAULTS={bindings:{bold:_e("bold"),italic:_e("italic"),underline:_e("underline"),indent:{key:ue.keys.TAB,format:["blockquote","indent","list"],handler:function(De,ke){if(ke.collapsed&&0!==ke.offset)return!0;this.quill.format("indent","+1",L.default.sources.USER)}},outdent:{key:ue.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(De,ke){if(ke.collapsed&&0!==ke.offset)return!0;this.quill.format("indent","-1",L.default.sources.USER)}},"outdent backspace":{key:ue.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(De,ke){null!=ke.format.indent?this.quill.format("indent","-1",L.default.sources.USER):null!=ke.format.list&&this.quill.format("list",!1,L.default.sources.USER)}},"indent code-block":me(!0),"outdent code-block":me(!1),"remove tab":{key:ue.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(De){this.quill.deleteText(De.index-1,1,L.default.sources.USER)}},tab:{key:ue.keys.TAB,handler:function(De){this.quill.history.cutoff();var ke=(new C.default).retain(De.index).delete(De.length).insert("\t");this.quill.updateContents(ke,L.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(De.index+1,L.default.sources.SILENT)}},"list empty enter":{key:ue.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(De,ke){this.quill.format("list",!1,L.default.sources.USER),ke.format.indent&&this.quill.format("indent",!1,L.default.sources.USER)}},"checklist enter":{key:ue.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(De){var ke=this.quill.getLine(De.index),Re=F(ke,2),Be=Re[0],Qe=Re[1],wt=(0,_.default)({},Be.formats(),{list:"checked"}),It=(new C.default).retain(De.index).insert("\n",wt).retain(Be.length()-Qe-1).retain(1,{list:"unchecked"});this.quill.updateContents(It,L.default.sources.USER),this.quill.setSelection(De.index+1,L.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:ue.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(De,ke){var Re=this.quill.getLine(De.index),Be=F(Re,2),Qe=Be[0],wt=Be[1],It=(new C.default).retain(De.index).insert("\n",ke.format).retain(Qe.length()-wt-1).retain(1,{header:null});this.quill.updateContents(It,L.default.sources.USER),this.quill.setSelection(De.index+1,L.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(De,ke){var Re=ke.prefix.length,Be=this.quill.getLine(De.index),Qe=F(Be,2),wt=Qe[0],It=Qe[1];if(It>Re)return!0;var Mt=void 0;switch(ke.prefix.trim()){case"[]":case"[ ]":Mt="unchecked";break;case"[x]":Mt="checked";break;case"-":case"*":Mt="bullet";break;default:Mt="ordered"}this.quill.insertText(De.index," ",L.default.sources.USER),this.quill.history.cutoff();var Bt=(new C.default).retain(De.index-It).delete(Re+1).retain(wt.length()-2-It).retain(1,{list:Mt});this.quill.updateContents(Bt,L.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(De.index-Re,L.default.sources.SILENT)}},"code exit":{key:ue.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(De){var ke=this.quill.getLine(De.index),Re=F(ke,2),Be=Re[0],Qe=Re[1],wt=(new C.default).retain(De.index+Be.length()-Qe-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(wt,L.default.sources.USER)}},"embed left":be(ue.keys.LEFT,!1),"embed left shift":be(ue.keys.LEFT,!0),"embed right":be(ue.keys.RIGHT,!1),"embed right shift":be(ue.keys.RIGHT,!0)}},M.default=ue,M.SHORTKEY=de},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(x,V){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return function A(x,V){var I=[],L=!0,ne=!1,J=void 0;try{for(var X,Z=x[Symbol.iterator]();!(L=(X=Z.next()).done)&&(I.push(X.value),!V||I.length!==V);L=!0);}catch($){ne=!0,J=$}finally{try{!L&&Z.return&&Z.return()}finally{if(ne)throw J}}return I}(x,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")},F=function A(x,V,I){null===x&&(x=Function.prototype);var L=Object.getOwnPropertyDescriptor(x,V);if(void 0===L){var ne=Object.getPrototypeOf(x);return null===ne?void 0:A(ne,V,I)}if("value"in L)return L.value;var J=L.get;return void 0===J?void 0:J.call(I)},K=function(){function A(x,V){for(var I=0;I<V.length;I++){var L=V[I];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(x,L.key,L)}}return function(x,V,I){return V&&A(x.prototype,V),I&&A(x,I),x}}(),q=E(c(0)),S=E(c(7));function E(A){return A&&A.__esModule?A:{default:A}}var k=function(A){function x(V,I){!function _(A,x){if(!(A instanceof x))throw new TypeError("Cannot call a class as a function")}(this,x);var L=function T(A,x){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!x||"object"!=typeof x&&"function"!=typeof x?A:x}(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,V));return L.selection=I,L.textNode=document.createTextNode(x.CONTENTS),L.domNode.appendChild(L.textNode),L._length=0,L}return function C(A,x){if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function, not "+typeof x);A.prototype=Object.create(x&&x.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(A,x):A.__proto__=x)}(x,A),K(x,null,[{key:"value",value:function(){}}]),K(x,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(I,L){if(0!==this._length)return F(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"format",this).call(this,I,L);for(var ne=this,J=0;null!=ne&&ne.statics.scope!==q.default.Scope.BLOCK_BLOT;)J+=ne.offset(ne.parent),ne=ne.parent;null!=ne&&(this._length=x.CONTENTS.length,ne.optimize(),ne.formatAt(J,x.CONTENTS.length,I,L),this._length=0)}},{key:"index",value:function(I,L){return I===this.textNode?0:F(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"index",this).call(this,I,L)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){F(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var I=this.textNode,L=this.selection.getNativeRange(),ne=void 0,J=void 0,Z=void 0;if(null!=L&&L.start.node===I&&L.end.node===I){var X=[I,L.start.offset,L.end.offset];ne=X[0],J=X[1],Z=X[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==x.CONTENTS){var $=this.textNode.data.split(x.CONTENTS).join("");this.next instanceof S.default?(ne=this.next.domNode,this.next.insertAt(0,$),this.textNode.data=x.CONTENTS):(this.textNode.data=$,this.parent.insertBefore(q.default.create(this.textNode),this),this.textNode=document.createTextNode(x.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=J){var H=[J,Z].map(function(B){return Math.max(0,Math.min(ne.data.length,B-1))}),W=ee(H,2);return{startNode:ne,startOffset:J=W[0],endNode:ne,endOffset:Z=W[1]}}}}},{key:"update",value:function(I,L){var ne=this;if(I.some(function(Z){return"characterData"===Z.type&&Z.target===ne.textNode})){var J=this.restore();J&&(L.range=J)}}},{key:"value",value:function(){return""}}]),x}(q.default.Embed);k.blotName="cursor",k.className="ql-cursor",k.tagName="span",k.CONTENTS="\ufeff",M.default=k},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var F=q(c(0)),K=c(4),j=q(K);function q(T){return T&&T.__esModule?T:{default:T}}function R(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")}function S(T,C){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||"object"!=typeof C&&"function"!=typeof C?T:C}var _=function(T){function C(){return R(this,C),S(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return function E(T,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function, not "+typeof C);T.prototype=Object.create(C&&C.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(T,C):T.__proto__=C)}(C,T),C}(F.default.Container);_.allowedChildren=[j.default,K.BlockEmbed,_],M.default=_},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.ColorStyle=M.ColorClass=M.ColorAttributor=void 0;var ee=function(){function k(A,x){for(var V=0;V<x.length;V++){var I=x[V];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(A,I.key,I)}}return function(A,x,V){return x&&k(A.prototype,x),V&&k(A,V),A}}(),F=function k(A,x,V){null===A&&(A=Function.prototype);var I=Object.getOwnPropertyDescriptor(A,x);if(void 0===I){var L=Object.getPrototypeOf(A);return null===L?void 0:k(L,x,V)}if("value"in I)return I.value;var ne=I.get;return void 0===ne?void 0:ne.call(V)},j=function q(k){return k&&k.__esModule?k:{default:k}}(c(0));function R(k,A){if(!(k instanceof A))throw new TypeError("Cannot call a class as a function")}function S(k,A){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!=typeof A&&"function"!=typeof A?k:A}var _=function(k){function A(){return R(this,A),S(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return function E(k,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);k.prototype=Object.create(A&&A.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(k,A):k.__proto__=A)}(A,k),ee(A,[{key:"value",value:function(V){var I=F(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"value",this).call(this,V);return I.startsWith("rgb(")?"#"+(I=I.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(function(L){return("00"+parseInt(L).toString(16)).slice(-2)}).join(""):I}}]),A}(j.default.Attributor.Style),T=new j.default.Attributor.Class("color","ql-color",{scope:j.default.Scope.INLINE}),C=new _("color","color",{scope:j.default.Scope.INLINE});M.ColorAttributor=_,M.ColorClass=T,M.ColorStyle=C},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.sanitize=M.default=void 0;var ee=function(){function C(k,A){for(var x=0;x<A.length;x++){var V=A[x];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}return function(k,A,x){return A&&C(k.prototype,A),x&&C(k,x),k}}(),F=function C(k,A,x){null===k&&(k=Function.prototype);var V=Object.getOwnPropertyDescriptor(k,A);if(void 0===V){var I=Object.getPrototypeOf(k);return null===I?void 0:C(I,A,x)}if("value"in V)return V.value;var L=V.get;return void 0===L?void 0:L.call(x)};function R(C,k){if(!(C instanceof k))throw new TypeError("Cannot call a class as a function")}function S(C,k){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!k||"object"!=typeof k&&"function"!=typeof k?C:k}var _=function(C){function k(){return R(this,k),S(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return function E(C,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function, not "+typeof k);C.prototype=Object.create(k&&k.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(C,k):C.__proto__=k)}(k,C),ee(k,[{key:"format",value:function(x,V){if(x!==this.statics.blotName||!V)return F(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,x,V);V=this.constructor.sanitize(V),this.domNode.setAttribute("href",V)}}],[{key:"create",value:function(x){var V=F(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,x);return x=this.sanitize(x),V.setAttribute("href",x),V.setAttribute("rel","noopener noreferrer"),V.setAttribute("target","_blank"),V}},{key:"formats",value:function(x){return x.getAttribute("href")}},{key:"sanitize",value:function(x){return T(x,this.PROTOCOL_WHITELIST)?x:this.SANITIZED_URL}}]),k}(function q(C){return C&&C.__esModule?C:{default:C}}(c(6)).default);function T(C,k){var A=document.createElement("a");A.href=C;var x=A.href.slice(0,A.href.indexOf(":"));return k.indexOf(x)>-1}_.blotName="link",_.tagName="A",_.SANITIZED_URL="about:blank",_.PROTOCOL_WHITELIST=["http","https","mailto","tel"],M.default=_,M.sanitize=T},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},F=function(){function k(A,x){for(var V=0;V<x.length;V++){var I=x[V];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(A,I.key,I)}}return function(A,x,V){return x&&k(A.prototype,x),V&&k(A,V),A}}(),j=S(c(23)),R=S(c(107));function S(k){return k&&k.__esModule?k:{default:k}}var _=0;function T(k,A){k.setAttribute(A,"true"!==k.getAttribute(A))}var C=function(){function k(A){var x=this;(function E(k,A){if(!(k instanceof A))throw new TypeError("Cannot call a class as a function")})(this,k),this.select=A,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){x.togglePicker()}),this.label.addEventListener("keydown",function(V){switch(V.keyCode){case j.default.keys.ENTER:x.togglePicker();break;case j.default.keys.ESCAPE:x.escape(),V.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return F(k,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),T(this.label,"aria-expanded"),T(this.options,"aria-hidden")}},{key:"buildItem",value:function(x){var V=this,I=document.createElement("span");return I.tabIndex="0",I.setAttribute("role","button"),I.classList.add("ql-picker-item"),x.hasAttribute("value")&&I.setAttribute("data-value",x.getAttribute("value")),x.textContent&&I.setAttribute("data-label",x.textContent),I.addEventListener("click",function(){V.selectItem(I,!0)}),I.addEventListener("keydown",function(L){switch(L.keyCode){case j.default.keys.ENTER:V.selectItem(I,!0),L.preventDefault();break;case j.default.keys.ESCAPE:V.escape(),L.preventDefault()}}),I}},{key:"buildLabel",value:function(){var x=document.createElement("span");return x.classList.add("ql-picker-label"),x.innerHTML=R.default,x.tabIndex="0",x.setAttribute("role","button"),x.setAttribute("aria-expanded","false"),this.container.appendChild(x),x}},{key:"buildOptions",value:function(){var x=this,V=document.createElement("span");V.classList.add("ql-picker-options"),V.setAttribute("aria-hidden","true"),V.tabIndex="-1",V.id="ql-picker-options-"+_,_+=1,this.label.setAttribute("aria-controls",V.id),this.options=V,[].slice.call(this.select.options).forEach(function(I){var L=x.buildItem(I);V.appendChild(L),!0===I.selected&&x.selectItem(L)}),this.container.appendChild(V)}},{key:"buildPicker",value:function(){var x=this;[].slice.call(this.select.attributes).forEach(function(V){x.container.setAttribute(V.name,V.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var x=this;this.close(),setTimeout(function(){return x.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(x){var V=arguments.length>1&&void 0!==arguments[1]&&arguments[1],I=this.container.querySelector(".ql-selected");if(x!==I&&(null!=I&&I.classList.remove("ql-selected"),null!=x&&(x.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(x.parentNode.children,x),x.hasAttribute("data-value")?this.label.setAttribute("data-value",x.getAttribute("data-value")):this.label.removeAttribute("data-value"),x.hasAttribute("data-label")?this.label.setAttribute("data-label",x.getAttribute("data-label")):this.label.removeAttribute("data-label"),V))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":ee(Event))){var L=document.createEvent("Event");L.initEvent("change",!0,!0),this.select.dispatchEvent(L)}this.close()}}},{key:"update",value:function(){var x=void 0;if(this.select.selectedIndex>-1){var V=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];x=this.select.options[this.select.selectedIndex],this.selectItem(V)}else this.selectItem(null);var I=null!=x&&x!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",I)}}]),k}();M.default=C},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var F=Y(c(0)),j=Y(c(5)),q=c(4),R=Y(q),E=Y(c(16)),T=Y(c(25)),k=Y(c(24)),x=Y(c(35)),I=Y(c(6)),ne=Y(c(22)),Z=Y(c(7)),$=Y(c(55)),W=Y(c(42)),te=Y(c(23));function Y(de){return de&&de.__esModule?de:{default:de}}j.default.register({"blots/block":R.default,"blots/block/embed":q.BlockEmbed,"blots/break":E.default,"blots/container":T.default,"blots/cursor":k.default,"blots/embed":x.default,"blots/inline":I.default,"blots/scroll":ne.default,"blots/text":Z.default,"modules/clipboard":$.default,"modules/history":W.default,"modules/keyboard":te.default}),F.default.register(R.default,E.default,k.default,I.default,ne.default,Z.default),M.default=j.default},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=c(1),F=function(){function K(j){this.domNode=j,this.domNode[ee.DATA_KEY]={blot:this}}return Object.defineProperty(K.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),K.create=function(j){if(null==this.tagName)throw new ee.ParchmentError("Blot definition missing tagName");var q;return Array.isArray(this.tagName)?("string"==typeof j&&(j=j.toUpperCase(),parseInt(j).toString()===j&&(j=parseInt(j))),q="number"==typeof j?document.createElement(this.tagName[j-1]):this.tagName.indexOf(j)>-1?document.createElement(j):document.createElement(this.tagName[0])):q=document.createElement(this.tagName),this.className&&q.classList.add(this.className),q},K.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},K.prototype.clone=function(){var j=this.domNode.cloneNode(!1);return ee.create(j)},K.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[ee.DATA_KEY]},K.prototype.deleteAt=function(j,q){this.isolate(j,q).remove()},K.prototype.formatAt=function(j,q,R,S){var E=this.isolate(j,q);if(null!=ee.query(R,ee.Scope.BLOT)&&S)E.wrap(R,S);else if(null!=ee.query(R,ee.Scope.ATTRIBUTE)){var _=ee.create(this.statics.scope);E.wrap(_),_.format(R,S)}},K.prototype.insertAt=function(j,q,R){var S=null==R?ee.create("text",q):ee.create(q,R),E=this.split(j);this.parent.insertBefore(S,E)},K.prototype.insertInto=function(j,q){void 0===q&&(q=null),null!=this.parent&&this.parent.children.remove(this);var R=null;j.children.insertBefore(this,q),null!=q&&(R=q.domNode),(this.domNode.parentNode!=j.domNode||this.domNode.nextSibling!=R)&&j.domNode.insertBefore(this.domNode,R),this.parent=j,this.attach()},K.prototype.isolate=function(j,q){var R=this.split(j);return R.split(q),R},K.prototype.length=function(){return 1},K.prototype.offset=function(j){return void 0===j&&(j=this.parent),null==this.parent||this==j?0:this.parent.children.offset(this)+this.parent.offset(j)},K.prototype.optimize=function(j){null!=this.domNode[ee.DATA_KEY]&&delete this.domNode[ee.DATA_KEY].mutations},K.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},K.prototype.replace=function(j){null!=j.parent&&(j.parent.insertBefore(this,j.next),j.remove())},K.prototype.replaceWith=function(j,q){var R="string"==typeof j?ee.create(j,q):j;return R.replace(this),R},K.prototype.split=function(j,q){return 0===j?this:this.next},K.prototype.update=function(j,q){},K.prototype.wrap=function(j,q){var R="string"==typeof j?ee.create(j,q):j;return null!=this.parent&&this.parent.insertBefore(R,this.next),R.appendChild(this),R},K.blotName="abstract",K}();M.default=F},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=c(12),F=c(32),K=c(33),j=c(1),q=function(){function R(S){this.attributes={},this.domNode=S,this.build()}return R.prototype.attribute=function(S,E){E?S.add(this.domNode,E)&&(null!=S.value(this.domNode)?this.attributes[S.attrName]=S:delete this.attributes[S.attrName]):(S.remove(this.domNode),delete this.attributes[S.attrName])},R.prototype.build=function(){var S=this;this.attributes={};var E=ee.default.keys(this.domNode),_=F.default.keys(this.domNode),T=K.default.keys(this.domNode);E.concat(_).concat(T).forEach(function(C){var k=j.query(C,j.Scope.ATTRIBUTE);k instanceof ee.default&&(S.attributes[k.attrName]=k)})},R.prototype.copy=function(S){var E=this;Object.keys(this.attributes).forEach(function(_){var T=E.attributes[_].value(E.domNode);S.format(_,T)})},R.prototype.move=function(S){var E=this;this.copy(S),Object.keys(this.attributes).forEach(function(_){E.attributes[_].remove(E.domNode)}),this.attributes={}},R.prototype.values=function(){var S=this;return Object.keys(this.attributes).reduce(function(E,_){return E[_]=S.attributes[_].value(S.domNode),E},{})},R}();M.default=q},function(ge,M,c){"use strict";var q,ee=this&&this.__extends||(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,S){R.__proto__=S}||function(R,S){for(var E in S)S.hasOwnProperty(E)&&(R[E]=S[E])},function(R,S){function E(){this.constructor=R}q(R,S),R.prototype=null===S?Object.create(S):(E.prototype=S.prototype,new E)});function K(q,R){return(q.getAttribute("class")||"").split(/\s+/).filter(function(E){return 0===E.indexOf(R+"-")})}Object.defineProperty(M,"__esModule",{value:!0});var j=function(q){function R(){return null!==q&&q.apply(this,arguments)||this}return ee(R,q),R.keys=function(S){return(S.getAttribute("class")||"").split(/\s+/).map(function(E){return E.split("-").slice(0,-1).join("-")})},R.prototype.add=function(S,E){return!!this.canAdd(S,E)&&(this.remove(S),S.classList.add(this.keyName+"-"+E),!0)},R.prototype.remove=function(S){K(S,this.keyName).forEach(function(_){S.classList.remove(_)}),0===S.classList.length&&S.removeAttribute("class")},R.prototype.value=function(S){var _=(K(S,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(S,_)?_:""},R}(c(12).default);M.default=j},function(ge,M,c){"use strict";var q,ee=this&&this.__extends||(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,S){R.__proto__=S}||function(R,S){for(var E in S)S.hasOwnProperty(E)&&(R[E]=S[E])},function(R,S){function E(){this.constructor=R}q(R,S),R.prototype=null===S?Object.create(S):(E.prototype=S.prototype,new E)});function K(q){var R=q.split("-"),S=R.slice(1).map(function(E){return E[0].toUpperCase()+E.slice(1)}).join("");return R[0]+S}Object.defineProperty(M,"__esModule",{value:!0});var j=function(q){function R(){return null!==q&&q.apply(this,arguments)||this}return ee(R,q),R.keys=function(S){return(S.getAttribute("style")||"").split(";").map(function(E){return E.split(":")[0].trim()})},R.prototype.add=function(S,E){return!!this.canAdd(S,E)&&(S.style[K(this.keyName)]=E,!0)},R.prototype.remove=function(S){S.style[K(this.keyName)]="",S.getAttribute("style")||S.removeAttribute("style")},R.prototype.value=function(S){var E=S.style[K(this.keyName)];return this.canAdd(S,E)?E:""},R}(c(12).default);M.default=j},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function j(q,R){for(var S=0;S<R.length;S++){var E=R[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(q,E.key,E)}}return function(q,R,S){return R&&j(q.prototype,R),S&&j(q,S),q}}();var K=function(){function j(q,R){(function F(j,q){if(!(j instanceof q))throw new TypeError("Cannot call a class as a function")})(this,j),this.quill=q,this.options=R,this.modules={}}return ee(j,[{key:"init",value:function(){var R=this;Object.keys(this.options.modules).forEach(function(S){null==R.modules[S]&&R.addModule(S)})}},{key:"addModule",value:function(R){var S=this.quill.constructor.import("modules/"+R);return this.modules[R]=new S(this.quill,this.options.modules[R]||{}),this.modules[R]}}]),j}();K.DEFAULTS={modules:{}},K.themes={default:K},M.default=K},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function A(x,V){for(var I=0;I<V.length;I++){var L=V[I];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(x,L.key,L)}}return function(x,V,I){return V&&A(x.prototype,V),I&&A(x,I),x}}(),F=function A(x,V,I){null===x&&(x=Function.prototype);var L=Object.getOwnPropertyDescriptor(x,V);if(void 0===L){var ne=Object.getPrototypeOf(x);return null===ne?void 0:A(ne,V,I)}if("value"in L)return L.value;var J=L.get;return void 0===J?void 0:J.call(I)},j=S(c(0)),R=S(c(7));function S(A){return A&&A.__esModule?A:{default:A}}var C="\ufeff",k=function(A){function x(V){!function E(A,x){if(!(A instanceof x))throw new TypeError("Cannot call a class as a function")}(this,x);var I=function _(A,x){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!x||"object"!=typeof x&&"function"!=typeof x?A:x}(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,V));return I.contentNode=document.createElement("span"),I.contentNode.setAttribute("contenteditable",!1),[].slice.call(I.domNode.childNodes).forEach(function(L){I.contentNode.appendChild(L)}),I.leftGuard=document.createTextNode(C),I.rightGuard=document.createTextNode(C),I.domNode.appendChild(I.leftGuard),I.domNode.appendChild(I.contentNode),I.domNode.appendChild(I.rightGuard),I}return function T(A,x){if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function, not "+typeof x);A.prototype=Object.create(x&&x.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(A,x):A.__proto__=x)}(x,A),ee(x,[{key:"index",value:function(I,L){return I===this.leftGuard?0:I===this.rightGuard?1:F(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"index",this).call(this,I,L)}},{key:"restore",value:function(I){var L=void 0,ne=void 0,J=I.data.split(C).join("");if(I===this.leftGuard)if(this.prev instanceof R.default){var Z=this.prev.length();this.prev.insertAt(Z,J),L={startNode:this.prev.domNode,startOffset:Z+J.length}}else ne=document.createTextNode(J),this.parent.insertBefore(j.default.create(ne),this),L={startNode:ne,startOffset:J.length};else I===this.rightGuard&&(this.next instanceof R.default?(this.next.insertAt(0,J),L={startNode:this.next.domNode,startOffset:J.length}):(ne=document.createTextNode(J),this.parent.insertBefore(j.default.create(ne),this.next),L={startNode:ne,startOffset:J.length}));return I.data=C,L}},{key:"update",value:function(I,L){var ne=this;I.forEach(function(J){if("characterData"===J.type&&(J.target===ne.leftGuard||J.target===ne.rightGuard)){var Z=ne.restore(J.target);Z&&(L.range=Z)}})}}]),x}(j.default.Embed);M.default=k},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.AlignStyle=M.AlignClass=M.AlignAttribute=void 0;var F=function K(E){return E&&E.__esModule?E:{default:E}}(c(0));var j={scope:F.default.Scope.BLOCK,whitelist:["right","center","justify"]},q=new F.default.Attributor.Attribute("align","align",j),R=new F.default.Attributor.Class("align","ql-align",j),S=new F.default.Attributor.Style("align","text-align",j);M.AlignAttribute=q,M.AlignClass=R,M.AlignStyle=S},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.BackgroundStyle=M.BackgroundClass=void 0;var F=function j(S){return S&&S.__esModule?S:{default:S}}(c(0)),K=c(26);var q=new F.default.Attributor.Class("background","ql-bg",{scope:F.default.Scope.INLINE}),R=new K.ColorAttributor("background","background-color",{scope:F.default.Scope.INLINE});M.BackgroundClass=q,M.BackgroundStyle=R},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.DirectionStyle=M.DirectionClass=M.DirectionAttribute=void 0;var F=function K(E){return E&&E.__esModule?E:{default:E}}(c(0));var j={scope:F.default.Scope.BLOCK,whitelist:["rtl"]},q=new F.default.Attributor.Attribute("direction","dir",j),R=new F.default.Attributor.Class("direction","ql-direction",j),S=new F.default.Attributor.Style("direction","direction",j);M.DirectionAttribute=q,M.DirectionClass=R,M.DirectionStyle=S},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.FontClass=M.FontStyle=void 0;var ee=function(){function A(x,V){for(var I=0;I<V.length;I++){var L=V[I];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(x,L.key,L)}}return function(x,V,I){return V&&A(x.prototype,V),I&&A(x,I),x}}(),F=function A(x,V,I){null===x&&(x=Function.prototype);var L=Object.getOwnPropertyDescriptor(x,V);if(void 0===L){var ne=Object.getPrototypeOf(x);return null===ne?void 0:A(ne,V,I)}if("value"in L)return L.value;var J=L.get;return void 0===J?void 0:J.call(I)},j=function q(A){return A&&A.__esModule?A:{default:A}}(c(0));function R(A,x){if(!(A instanceof x))throw new TypeError("Cannot call a class as a function")}function S(A,x){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!x||"object"!=typeof x&&"function"!=typeof x?A:x}var _={scope:j.default.Scope.INLINE,whitelist:["serif","monospace"]},T=new j.default.Attributor.Class("font","ql-font",_),C=function(A){function x(){return R(this,x),S(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return function E(A,x){if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function, not "+typeof x);A.prototype=Object.create(x&&x.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(A,x):A.__proto__=x)}(x,A),ee(x,[{key:"value",value:function(I){return F(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"value",this).call(this,I).replace(/["']/g,"")}}]),x}(j.default.Attributor.Style),k=new C("font","font-family",_);M.FontStyle=k,M.FontClass=T},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.SizeStyle=M.SizeClass=void 0;var F=function K(R){return R&&R.__esModule?R:{default:R}}(c(0));var j=new F.default.Attributor.Class("size","ql-size",{scope:F.default.Scope.INLINE,whitelist:["small","large","huge"]}),q=new F.default.Attributor.Style("size","font-size",{scope:F.default.Scope.INLINE,whitelist:["10px","18px","32px"]});M.SizeClass=j,M.SizeStyle=q},function(ge,M,c){"use strict";ge.exports={align:{"":c(76),center:c(77),right:c(78),justify:c(79)},background:c(80),blockquote:c(81),bold:c(82),clean:c(83),code:c(58),"code-block":c(58),color:c(84),direction:{"":c(85),rtl:c(86)},float:{center:c(87),full:c(88),left:c(89),right:c(90)},formula:c(91),header:{1:c(92),2:c(93)},italic:c(94),image:c(95),indent:{"+1":c(96),"-1":c(97)},link:c(98),list:{ordered:c(99),bullet:c(100),check:c(101)},script:{sub:c(102),super:c(103)},strike:c(104),underline:c(105),video:c(106)}},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.getLastChangeIndex=M.default=void 0;var ee=function(){function V(I,L){for(var ne=0;ne<L.length;ne++){var J=L[ne];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(I,J.key,J)}}return function(I,L,ne){return L&&V(I.prototype,L),ne&&V(I,ne),I}}(),K=E(c(0)),q=E(c(5));function E(V){return V&&V.__esModule?V:{default:V}}var k=function(V){function I(L,ne){!function _(V,I){if(!(V instanceof I))throw new TypeError("Cannot call a class as a function")}(this,I);var J=function T(V,I){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!I||"object"!=typeof I&&"function"!=typeof I?V:I}(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,L,ne));return J.lastRecorded=0,J.ignoreChange=!1,J.clear(),J.quill.on(q.default.events.EDITOR_CHANGE,function(Z,X,$,H){Z!==q.default.events.TEXT_CHANGE||J.ignoreChange||(J.options.userOnly&&H!==q.default.sources.USER?J.transform(X):J.record(X,$))}),J.quill.keyboard.addBinding({key:"Z",shortKey:!0},J.undo.bind(J)),J.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},J.redo.bind(J)),/Win/i.test(navigator.platform)&&J.quill.keyboard.addBinding({key:"Y",shortKey:!0},J.redo.bind(J)),J}return function C(V,I){if("function"!=typeof I&&null!==I)throw new TypeError("Super expression must either be null or a function, not "+typeof I);V.prototype=Object.create(I&&I.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(V,I):V.__proto__=I)}(I,V),ee(I,[{key:"change",value:function(ne,J){if(0!==this.stack[ne].length){var Z=this.stack[ne].pop();this.stack[J].push(Z),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(Z[ne],q.default.sources.USER),this.ignoreChange=!1;var X=x(Z[ne]);this.quill.setSelection(X)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(ne,J){if(0!==ne.ops.length){this.stack.redo=[];var Z=this.quill.getContents().diff(J),X=Date.now();if(this.lastRecorded+this.options.delay>X&&this.stack.undo.length>0){var $=this.stack.undo.pop();Z=Z.compose($.undo),ne=$.redo.compose(ne)}else this.lastRecorded=X;this.stack.undo.push({redo:ne,undo:Z}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(ne){this.stack.undo.forEach(function(J){J.undo=ne.transform(J.undo,!0),J.redo=ne.transform(J.redo,!0)}),this.stack.redo.forEach(function(J){J.undo=ne.transform(J.undo,!0),J.redo=ne.transform(J.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),I}(E(c(9)).default);function x(V){var I=V.reduce(function(ne,J){return ne+(J.delete||0)},0),L=V.length()-I;return function A(V){var I=V.ops[V.ops.length-1];return null!=I&&(null!=I.insert?"string"==typeof I.insert&&I.insert.endsWith("\n"):null!=I.attributes&&Object.keys(I.attributes).some(function(L){return null!=K.default.query(L,K.default.Scope.BLOCK)}))}(V)&&(L-=1),L}k.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},M.default=k,M.getLastChangeIndex=x},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.BaseTooltip=void 0;var ee=function(){function fe(me,_e){for(var xe=0;xe<_e.length;xe++){var he=_e[xe];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(me,he.key,he)}}return function(me,_e,xe){return _e&&fe(me.prototype,_e),xe&&fe(me,xe),me}}(),F=function fe(me,_e,xe){null===me&&(me=Function.prototype);var he=Object.getOwnPropertyDescriptor(me,_e);if(void 0===he){var De=Object.getPrototypeOf(me);return null===De?void 0:fe(De,_e,xe)}if("value"in he)return he.value;var ke=he.get;return void 0===ke?void 0:ke.call(xe)},j=X(c(3)),R=X(c(2)),E=X(c(8)),T=X(c(23)),k=X(c(34)),x=X(c(59)),I=X(c(60)),ne=X(c(28)),Z=X(c(61));function X(fe){return fe&&fe.__esModule?fe:{default:fe}}function $(fe,me){if(!(fe instanceof me))throw new TypeError("Cannot call a class as a function")}function H(fe,me){if(!fe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!me||"object"!=typeof me&&"function"!=typeof me?fe:me}function W(fe,me){if("function"!=typeof me&&null!==me)throw new TypeError("Super expression must either be null or a function, not "+typeof me);fe.prototype=Object.create(me&&me.prototype,{constructor:{value:fe,enumerable:!1,writable:!0,configurable:!0}}),me&&(Object.setPrototypeOf?Object.setPrototypeOf(fe,me):fe.__proto__=me)}var B=[!1,"center","right","justify"],te=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Y=[!1,"serif","monospace"],de=["1","2","3",!1],ue=["small",!1,"large","huge"],be=function(fe){function me(_e,xe){$(this,me);var he=H(this,(me.__proto__||Object.getPrototypeOf(me)).call(this,_e,xe));return _e.emitter.listenDOM("click",document.body,function ke(Re){if(!document.body.contains(_e.root))return document.body.removeEventListener("click",ke);null!=he.tooltip&&!he.tooltip.root.contains(Re.target)&&document.activeElement!==he.tooltip.textbox&&!he.quill.hasFocus()&&he.tooltip.hide(),null!=he.pickers&&he.pickers.forEach(function(Be){Be.container.contains(Re.target)||Be.close()})}),he}return W(me,fe),ee(me,[{key:"addModule",value:function(xe){var he=F(me.prototype.__proto__||Object.getPrototypeOf(me.prototype),"addModule",this).call(this,xe);return"toolbar"===xe&&this.extendToolbar(he),he}},{key:"buildButtons",value:function(xe,he){xe.forEach(function(De){(De.getAttribute("class")||"").split(/\s+/).forEach(function(Re){if(Re.startsWith("ql-")&&(Re=Re.slice(3),null!=he[Re]))if("direction"===Re)De.innerHTML=he[Re][""]+he[Re].rtl;else if("string"==typeof he[Re])De.innerHTML=he[Re];else{var Be=De.value||"";null!=Be&&he[Re][Be]&&(De.innerHTML=he[Re][Be])}})})}},{key:"buildPickers",value:function(xe,he){var De=this;this.pickers=xe.map(function(Re){if(Re.classList.contains("ql-align"))return null==Re.querySelector("option")&&ie(Re,B),new I.default(Re,he.align);if(Re.classList.contains("ql-background")||Re.classList.contains("ql-color")){var Be=Re.classList.contains("ql-background")?"background":"color";return null==Re.querySelector("option")&&ie(Re,te,"background"===Be?"#ffffff":"#000000"),new x.default(Re,he[Be])}return null==Re.querySelector("option")&&(Re.classList.contains("ql-font")?ie(Re,Y):Re.classList.contains("ql-header")?ie(Re,de):Re.classList.contains("ql-size")&&ie(Re,ue)),new ne.default(Re)}),this.quill.on(E.default.events.EDITOR_CHANGE,function(){De.pickers.forEach(function(Be){Be.update()})})}}]),me}(k.default);be.DEFAULTS=(0,j.default)(!0,{},k.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var me=this,_e=this.container.querySelector("input.ql-image[type=file]");null==_e&&((_e=document.createElement("input")).setAttribute("type","file"),_e.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),_e.classList.add("ql-image"),_e.addEventListener("change",function(){if(null!=_e.files&&null!=_e.files[0]){var xe=new FileReader;xe.onload=function(he){var De=me.quill.getSelection(!0);me.quill.updateContents((new R.default).retain(De.index).delete(De.length).insert({image:he.target.result}),E.default.sources.USER),me.quill.setSelection(De.index+1,E.default.sources.SILENT),_e.value=""},xe.readAsDataURL(_e.files[0])}}),this.container.appendChild(_e)),_e.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var ce=function(fe){function me(_e,xe){$(this,me);var he=H(this,(me.__proto__||Object.getPrototypeOf(me)).call(this,_e,xe));return he.textbox=he.root.querySelector('input[type="text"]'),he.listen(),he}return W(me,fe),ee(me,[{key:"listen",value:function(){var xe=this;this.textbox.addEventListener("keydown",function(he){T.default.match(he,"enter")?(xe.save(),he.preventDefault()):T.default.match(he,"escape")&&(xe.cancel(),he.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var xe=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",he=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=he?this.textbox.value=he:xe!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+xe)||""),this.root.setAttribute("data-mode",xe)}},{key:"restoreFocus",value:function(){var xe=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=xe}},{key:"save",value:function(){var xe=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var he=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",xe,E.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",xe,E.default.sources.USER)),this.quill.root.scrollTop=he;break;case"video":xe=function le(fe){var me=fe.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||fe.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return me?(me[1]||"https")+"://www.youtube.com/embed/"+me[2]+"?showinfo=0":(me=fe.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(me[1]||"https")+"://player.vimeo.com/video/"+me[2]+"/":fe}(xe);case"formula":if(!xe)break;var De=this.quill.getSelection(!0);if(null!=De){var ke=De.index+De.length;this.quill.insertEmbed(ke,this.root.getAttribute("data-mode"),xe,E.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(ke+1," ",E.default.sources.USER),this.quill.setSelection(ke+2,E.default.sources.USER)}}this.textbox.value="",this.hide()}}]),me}(Z.default);function ie(fe,me){var _e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];me.forEach(function(xe){var he=document.createElement("option");xe===_e?he.setAttribute("selected","selected"):he.setAttribute("value",xe),fe.appendChild(he)})}M.BaseTooltip=ce,M.default=be},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function F(){this.head=this.tail=null,this.length=0}return F.prototype.append=function(){for(var K=[],j=0;j<arguments.length;j++)K[j]=arguments[j];this.insertBefore(K[0],null),K.length>1&&this.append.apply(this,K.slice(1))},F.prototype.contains=function(K){for(var j,q=this.iterator();j=q();)if(j===K)return!0;return!1},F.prototype.insertBefore=function(K,j){!K||(K.next=j,null!=j?(K.prev=j.prev,null!=j.prev&&(j.prev.next=K),j.prev=K,j===this.head&&(this.head=K)):null!=this.tail?(this.tail.next=K,K.prev=this.tail,this.tail=K):(K.prev=null,this.head=this.tail=K),this.length+=1)},F.prototype.offset=function(K){for(var j=0,q=this.head;null!=q;){if(q===K)return j;j+=q.length(),q=q.next}return-1},F.prototype.remove=function(K){!this.contains(K)||(null!=K.prev&&(K.prev.next=K.next),null!=K.next&&(K.next.prev=K.prev),K===this.head&&(this.head=K.next),K===this.tail&&(this.tail=K.prev),this.length-=1)},F.prototype.iterator=function(K){return void 0===K&&(K=this.head),function(){var j=K;return null!=K&&(K=K.next),j}},F.prototype.find=function(K,j){void 0===j&&(j=!1);for(var q,R=this.iterator();q=R();){var S=q.length();if(K<S||j&&K===S&&(null==q.next||0!==q.next.length()))return[q,K];K-=S}return[null,0]},F.prototype.forEach=function(K){for(var j,q=this.iterator();j=q();)K(j)},F.prototype.forEachAt=function(K,j,q){if(!(j<=0))for(var _,R=this.find(K),T=K-R[1],C=this.iterator(R[0]);(_=C())&&T<K+j;){var k=_.length();K>T?q(_,K-T,Math.min(j,T+k-K)):q(_,0,Math.min(k,K+j-T)),T+=k}},F.prototype.map=function(K){return this.reduce(function(j,q){return j.push(K(q)),j},[])},F.prototype.reduce=function(K,j){for(var q,R=this.iterator();q=R();)j=K(j,q);return j},F}();M.default=ee},function(ge,M,c){"use strict";var S,ee=this&&this.__extends||(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,_){E.__proto__=_}||function(E,_){for(var T in _)_.hasOwnProperty(T)&&(E[T]=_[T])},function(E,_){function T(){this.constructor=E}S(E,_),E.prototype=null===_?Object.create(_):(T.prototype=_.prototype,new T)});Object.defineProperty(M,"__esModule",{value:!0});var F=c(17),K=c(1),j={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},R=function(S){function E(_){var T=S.call(this,_)||this;return T.scroll=T,T.observer=new MutationObserver(function(C){T.update(C)}),T.observer.observe(T.domNode,j),T.attach(),T}return ee(E,S),E.prototype.detach=function(){S.prototype.detach.call(this),this.observer.disconnect()},E.prototype.deleteAt=function(_,T){this.update(),0===_&&T===this.length()?this.children.forEach(function(C){C.remove()}):S.prototype.deleteAt.call(this,_,T)},E.prototype.formatAt=function(_,T,C,k){this.update(),S.prototype.formatAt.call(this,_,T,C,k)},E.prototype.insertAt=function(_,T,C){this.update(),S.prototype.insertAt.call(this,_,T,C)},E.prototype.optimize=function(_,T){var C=this;void 0===_&&(_=[]),void 0===T&&(T={}),S.prototype.optimize.call(this,T);for(var k=[].slice.call(this.observer.takeRecords());k.length>0;)_.push(k.pop());for(var A=function(L,ne){void 0===ne&&(ne=!0),null!=L&&L!==C&&null!=L.domNode.parentNode&&(null==L.domNode[K.DATA_KEY].mutations&&(L.domNode[K.DATA_KEY].mutations=[]),ne&&A(L.parent))},x=function(L){null==L.domNode[K.DATA_KEY]||null==L.domNode[K.DATA_KEY].mutations||(L instanceof F.default&&L.children.forEach(x),L.optimize(T))},V=_,I=0;V.length>0;I+=1){if(I>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(V.forEach(function(L){var ne=K.find(L.target,!0);null!=ne&&(ne.domNode===L.target&&("childList"===L.type?(A(K.find(L.previousSibling,!1)),[].forEach.call(L.addedNodes,function(J){var Z=K.find(J,!1);A(Z,!1),Z instanceof F.default&&Z.children.forEach(function(X){A(X,!1)})})):"attributes"===L.type&&A(ne.prev)),A(ne))}),this.children.forEach(x),k=(V=[].slice.call(this.observer.takeRecords())).slice();k.length>0;)_.push(k.pop())}},E.prototype.update=function(_,T){var C=this;void 0===T&&(T={}),(_=_||this.observer.takeRecords()).map(function(k){var A=K.find(k.target,!0);return null==A?null:null==A.domNode[K.DATA_KEY].mutations?(A.domNode[K.DATA_KEY].mutations=[k],A):(A.domNode[K.DATA_KEY].mutations.push(k),null)}).forEach(function(k){null==k||k===C||null==k.domNode[K.DATA_KEY]||k.update(k.domNode[K.DATA_KEY].mutations||[],T)}),null!=this.domNode[K.DATA_KEY].mutations&&S.prototype.update.call(this,this.domNode[K.DATA_KEY].mutations,T),this.optimize(_,T)},E.blotName="scroll",E.defaultChild="block",E.scope=K.Scope.BLOCK_BLOT,E.tagName="DIV",E}(F.default);M.default=R},function(ge,M,c){"use strict";var R,ee=this&&this.__extends||(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,E){S.__proto__=E}||function(S,E){for(var _ in E)E.hasOwnProperty(_)&&(S[_]=E[_])},function(S,E){function _(){this.constructor=S}R(S,E),S.prototype=null===E?Object.create(E):(_.prototype=E.prototype,new _)});Object.defineProperty(M,"__esModule",{value:!0});var F=c(18),K=c(1);var q=function(R){function S(){return null!==R&&R.apply(this,arguments)||this}return ee(S,R),S.formats=function(E){if(E.tagName!==S.tagName)return R.formats.call(this,E)},S.prototype.format=function(E,_){var T=this;E!==this.statics.blotName||_?R.prototype.format.call(this,E,_):(this.children.forEach(function(C){C instanceof F.default||(C=C.wrap(S.blotName,!0)),T.attributes.copy(C)}),this.unwrap())},S.prototype.formatAt=function(E,_,T,C){null!=this.formats()[T]||K.query(T,K.Scope.ATTRIBUTE)?this.isolate(E,_).format(T,C):R.prototype.formatAt.call(this,E,_,T,C)},S.prototype.optimize=function(E){R.prototype.optimize.call(this,E);var _=this.formats();if(0===Object.keys(_).length)return this.unwrap();var T=this.next;T instanceof S&&T.prev===this&&function j(R,S){if(Object.keys(R).length!==Object.keys(S).length)return!1;for(var E in R)if(R[E]!==S[E])return!1;return!0}(_,T.formats())&&(T.moveChildren(this),T.remove())},S.blotName="inline",S.scope=K.Scope.INLINE_BLOT,S.tagName="SPAN",S}(F.default);M.default=q},function(ge,M,c){"use strict";var q,ee=this&&this.__extends||(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,S){R.__proto__=S}||function(R,S){for(var E in S)S.hasOwnProperty(E)&&(R[E]=S[E])},function(R,S){function E(){this.constructor=R}q(R,S),R.prototype=null===S?Object.create(S):(E.prototype=S.prototype,new E)});Object.defineProperty(M,"__esModule",{value:!0});var F=c(18),K=c(1),j=function(q){function R(){return null!==q&&q.apply(this,arguments)||this}return ee(R,q),R.formats=function(S){var E=K.query(R.blotName).tagName;if(S.tagName!==E)return q.formats.call(this,S)},R.prototype.format=function(S,E){null!=K.query(S,K.Scope.BLOCK)&&(S!==this.statics.blotName||E?q.prototype.format.call(this,S,E):this.replaceWith(R.blotName))},R.prototype.formatAt=function(S,E,_,T){null!=K.query(_,K.Scope.BLOCK)?this.format(_,T):q.prototype.formatAt.call(this,S,E,_,T)},R.prototype.insertAt=function(S,E,_){if(null==_||null!=K.query(E,K.Scope.INLINE))q.prototype.insertAt.call(this,S,E,_);else{var T=this.split(S),C=K.create(E,_);T.parent.insertBefore(C,T)}},R.prototype.update=function(S,E){navigator.userAgent.match(/Trident/)?this.build():q.prototype.update.call(this,S,E)},R.blotName="block",R.scope=K.Scope.BLOCK_BLOT,R.tagName="P",R}(F.default);M.default=j},function(ge,M,c){"use strict";var j,ee=this&&this.__extends||(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,R){q.__proto__=R}||function(q,R){for(var S in R)R.hasOwnProperty(S)&&(q[S]=R[S])},function(q,R){function S(){this.constructor=q}j(q,R),q.prototype=null===R?Object.create(R):(S.prototype=R.prototype,new S)});Object.defineProperty(M,"__esModule",{value:!0});var K=function(j){function q(){return null!==j&&j.apply(this,arguments)||this}return ee(q,j),q.formats=function(R){},q.prototype.format=function(R,S){j.prototype.formatAt.call(this,0,this.length(),R,S)},q.prototype.formatAt=function(R,S,E,_){0===R&&S===this.length()?this.format(E,_):j.prototype.formatAt.call(this,R,S,E,_)},q.prototype.formats=function(){return this.statics.formats(this.domNode)},q}(c(19).default);M.default=K},function(ge,M,c){"use strict";var q,ee=this&&this.__extends||(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,S){R.__proto__=S}||function(R,S){for(var E in S)S.hasOwnProperty(E)&&(R[E]=S[E])},function(R,S){function E(){this.constructor=R}q(R,S),R.prototype=null===S?Object.create(S):(E.prototype=S.prototype,new E)});Object.defineProperty(M,"__esModule",{value:!0});var F=c(19),K=c(1),j=function(q){function R(S){var E=q.call(this,S)||this;return E.text=E.statics.value(E.domNode),E}return ee(R,q),R.create=function(S){return document.createTextNode(S)},R.value=function(S){var E=S.data;return E.normalize&&(E=E.normalize()),E},R.prototype.deleteAt=function(S,E){this.domNode.data=this.text=this.text.slice(0,S)+this.text.slice(S+E)},R.prototype.index=function(S,E){return this.domNode===S?E:-1},R.prototype.insertAt=function(S,E,_){null==_?(this.text=this.text.slice(0,S)+E+this.text.slice(S),this.domNode.data=this.text):q.prototype.insertAt.call(this,S,E,_)},R.prototype.length=function(){return this.text.length},R.prototype.optimize=function(S){q.prototype.optimize.call(this,S),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof R&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},R.prototype.position=function(S,E){return void 0===E&&(E=!1),[this.domNode,S]},R.prototype.split=function(S,E){if(void 0===E&&(E=!1),!E){if(0===S)return this;if(S===this.length())return this.next}var _=K.create(this.domNode.splitText(S));return this.parent.insertBefore(_,this.next),this.text=this.statics.value(this.domNode),_},R.prototype.update=function(S,E){var _=this;S.some(function(T){return"characterData"===T.type&&T.target===_.domNode})&&(this.text=this.statics.value(this.domNode))},R.prototype.value=function(){return this.text},R.blotName="text",R.scope=K.Scope.INLINE_BLOT,R}(F.default);M.default=j},function(ge,M,c){"use strict";var ee=document.createElement("div");if(ee.classList.toggle("test-class",!1),ee.classList.contains("test-class")){var F=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(K,j){return arguments.length>1&&!this.contains(K)==!j?j:F.call(this,K)}}String.prototype.startsWith||(String.prototype.startsWith=function(K,j){return this.substr(j=j||0,K.length)===K}),String.prototype.endsWith||(String.prototype.endsWith=function(K,j){var q=this.toString();("number"!=typeof j||!isFinite(j)||Math.floor(j)!==j||j>q.length)&&(j=q.length);var R=q.indexOf(K,j-=K.length);return-1!==R&&R===j}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(j){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof j)throw new TypeError("predicate must be a function");for(var E,q=Object(this),R=q.length>>>0,S=arguments[1],_=0;_<R;_++)if(j.call(S,E=q[_],_,q))return E}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(ge,M){var c=-1;function K(I,L,ne){if(I==L)return I?[[0,I]]:[];(ne<0||I.length<ne)&&(ne=null);var J=S(I,L),Z=I.substring(0,J);J=E(I=I.substring(J),L=L.substring(J));var X=I.substring(I.length-J),$=function j(I,L){var ne;if(!I)return[[1,L]];if(!L)return[[c,I]];var J=I.length>L.length?I:L,Z=I.length>L.length?L:I,X=J.indexOf(Z);if(-1!=X)return ne=[[1,J.substring(0,X)],[0,Z],[1,J.substring(X+Z.length)]],I.length>L.length&&(ne[0][0]=ne[2][0]=c),ne;if(1==Z.length)return[[c,I],[1,L]];var $=function _(I,L){var ne=I.length>L.length?I:L,J=I.length>L.length?L:I;if(ne.length<4||2*J.length<ne.length)return null;function Z(ue,be,ce){for(var me,_e,xe,he,le=ue.substring(ce,ce+Math.floor(ue.length/4)),ie=-1,fe="";-1!=(ie=be.indexOf(le,ie+1));){var De=S(ue.substring(ce),be.substring(ie)),ke=E(ue.substring(0,ce),be.substring(0,ie));fe.length<ke+De&&(fe=be.substring(ie-ke,ie)+be.substring(ie,ie+De),me=ue.substring(0,ce-ke),_e=ue.substring(ce+De),xe=be.substring(0,ie-ke),he=be.substring(ie+De))}return 2*fe.length>=ue.length?[me,_e,xe,he,fe]:null}var H,W,B,te,Y,X=Z(ne,J,Math.ceil(ne.length/4)),$=Z(ne,J,Math.ceil(ne.length/2));return X||$?(H=$?X&&X[4].length>$[4].length?X:$:X,I.length>L.length?(W=H[0],B=H[1],te=H[2],Y=H[3]):(te=H[0],Y=H[1],W=H[2],B=H[3]),[W,B,te,Y,H[4]]):null}(I,L);if($){var W=$[1],te=$[3],Y=$[4],de=K($[0],$[2]),ue=K(W,te);return de.concat([[0,Y]],ue)}return function q(I,L){for(var ne=I.length,J=L.length,Z=Math.ceil((ne+J)/2),X=Z,$=2*Z,H=new Array($),W=new Array($),B=0;B<$;B++)H[B]=-1,W[B]=-1;H[X+1]=0,W[X+1]=0;for(var te=ne-J,Y=te%2!=0,de=0,ue=0,be=0,ce=0,le=0;le<Z;le++){for(var ie=-le+de;ie<=le-ue;ie+=2){for(var fe=X+ie,_e=(me=ie==-le||ie!=le&&H[fe-1]<H[fe+1]?H[fe+1]:H[fe-1]+1)-ie;me<ne&&_e<J&&I.charAt(me)==L.charAt(_e);)me++,_e++;if(H[fe]=me,me>ne)ue+=2;else if(_e>J)de+=2;else if(Y&&(xe=X+te-ie)>=0&&xe<$&&-1!=W[xe]&&me>=(he=ne-W[xe]))return R(I,L,me,_e)}for(var De=-le+be;De<=le-ce;De+=2){for(var he,xe=X+De,ke=(he=De==-le||De!=le&&W[xe-1]<W[xe+1]?W[xe+1]:W[xe-1]+1)-De;he<ne&&ke<J&&I.charAt(ne-he-1)==L.charAt(J-ke-1);)he++,ke++;if(W[xe]=he,he>ne)ce+=2;else if(ke>J)be+=2;else if(!Y){var me;if((fe=X+te-De)>=0&&fe<$&&-1!=H[fe]&&(_e=X+(me=H[fe])-fe,me>=(he=ne-he)))return R(I,L,me,_e)}}}return[[c,I],[1,L]]}(I,L)}(I=I.substring(0,I.length-J),L=L.substring(0,L.length-J));return Z&&$.unshift([0,Z]),X&&$.push([0,X]),T($),null!=ne&&($=function A(I,L){var ne=function k(I,L){if(0===L)return[0,I];for(var ne=0,J=0;J<I.length;J++){var Z=I[J];if(Z[0]===c||0===Z[0]){var X=ne+Z[1].length;if(L===X)return[J+1,I];if(L<X){I=I.slice();var $=L-ne,H=[Z[0],Z[1].slice(0,$)],W=[Z[0],Z[1].slice($)];return I.splice(J,1,H,W),[J+1,I]}ne=X}}throw new Error("cursor_pos is out of bounds!")}(I,L),J=ne[1],Z=ne[0],X=J[Z],$=J[Z+1];if(null==X)return I;if(0!==X[0])return I;if(null!=$&&X[1]+$[1]===$[1]+X[1])return J.splice(Z,2,$,X),V(J,Z,2);if(null!=$&&0===$[1].indexOf(X[1])){J.splice(Z,2,[$[0],X[1]],[0,X[1]]);var H=$[1].slice(X[1].length);return H.length>0&&J.splice(Z+2,0,[$[0],H]),V(J,Z,3)}return I}($,ne)),function x(I){for(var L=!1,ne=function($){return $.charCodeAt(0)>=56320&&$.charCodeAt(0)<=57343},J=function($){return $.charCodeAt($.length-1)>=55296&&$.charCodeAt($.length-1)<=56319},Z=2;Z<I.length;Z+=1)0===I[Z-2][0]&&J(I[Z-2][1])&&I[Z-1][0]===c&&ne(I[Z-1][1])&&1===I[Z][0]&&ne(I[Z][1])&&(L=!0,I[Z-1][1]=I[Z-2][1].slice(-1)+I[Z-1][1],I[Z][1]=I[Z-2][1].slice(-1)+I[Z][1],I[Z-2][1]=I[Z-2][1].slice(0,-1));if(!L)return I;var X=[];for(Z=0;Z<I.length;Z+=1)I[Z][1].length>0&&X.push(I[Z]);return X}($)}function R(I,L,ne,J){var Z=I.substring(0,ne),X=L.substring(0,J),$=I.substring(ne),H=L.substring(J),W=K(Z,X),B=K($,H);return W.concat(B)}function S(I,L){if(!I||!L||I.charAt(0)!=L.charAt(0))return 0;for(var ne=0,J=Math.min(I.length,L.length),Z=J,X=0;ne<Z;)I.substring(X,Z)==L.substring(X,Z)?X=ne=Z:J=Z,Z=Math.floor((J-ne)/2+ne);return Z}function E(I,L){if(!I||!L||I.charAt(I.length-1)!=L.charAt(L.length-1))return 0;for(var ne=0,J=Math.min(I.length,L.length),Z=J,X=0;ne<Z;)I.substring(I.length-Z,I.length-X)==L.substring(L.length-Z,L.length-X)?X=ne=Z:J=Z,Z=Math.floor((J-ne)/2+ne);return Z}function T(I){I.push([0,""]);for(var $,L=0,ne=0,J=0,Z="",X="";L<I.length;)switch(I[L][0]){case 1:J++,X+=I[L][1],L++;break;case c:ne++,Z+=I[L][1],L++;break;case 0:ne+J>1?(0!==ne&&0!==J&&(0!==($=S(X,Z))&&(L-ne-J>0&&0==I[L-ne-J-1][0]?I[L-ne-J-1][1]+=X.substring(0,$):(I.splice(0,0,[0,X.substring(0,$)]),L++),X=X.substring($),Z=Z.substring($)),0!==($=E(X,Z))&&(I[L][1]=X.substring(X.length-$)+I[L][1],X=X.substring(0,X.length-$),Z=Z.substring(0,Z.length-$))),0===ne?I.splice(L-J,ne+J,[1,X]):0===J?I.splice(L-ne,ne+J,[c,Z]):I.splice(L-ne-J,ne+J,[c,Z],[1,X]),L=L-ne-J+(ne?1:0)+(J?1:0)+1):0!==L&&0==I[L-1][0]?(I[L-1][1]+=I[L][1],I.splice(L,1)):L++,J=0,ne=0,Z="",X=""}""===I[I.length-1][1]&&I.pop();var H=!1;for(L=1;L<I.length-1;)0==I[L-1][0]&&0==I[L+1][0]&&(I[L][1].substring(I[L][1].length-I[L-1][1].length)==I[L-1][1]?(I[L][1]=I[L-1][1]+I[L][1].substring(0,I[L][1].length-I[L-1][1].length),I[L+1][1]=I[L-1][1]+I[L+1][1],I.splice(L-1,1),H=!0):I[L][1].substring(0,I[L+1][1].length)==I[L+1][1]&&(I[L-1][1]+=I[L+1][1],I[L][1]=I[L][1].substring(I[L+1][1].length)+I[L+1][1],I.splice(L+1,1),H=!0)),L++;H&&T(I)}var C=K;function V(I,L,ne){for(var J=L+ne-1;J>=0&&J>=L-1;J--)if(J+1<I.length){var Z=I[J],X=I[J+1];Z[0]===X[1]&&I.splice(J,2,[Z[0],Z[1]+X[1]])}return I}C.INSERT=1,C.DELETE=c,C.EQUAL=0,ge.exports=C},function(ge,M){function c(ee){var F=[];for(var K in ee)F.push(K);return F}(ge.exports="function"==typeof Object.keys?Object.keys:c).shim=c},function(ge,M){var c="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function ee(K){return"[object Arguments]"==Object.prototype.toString.call(K)}function F(K){return K&&"object"==typeof K&&"number"==typeof K.length&&Object.prototype.hasOwnProperty.call(K,"callee")&&!Object.prototype.propertyIsEnumerable.call(K,"callee")||!1}(M=ge.exports=c?ee:F).supported=ee,M.unsupported=F},function(ge,M){"use strict";var c=Object.prototype.hasOwnProperty,ee="~";function F(){}function K(q,R,S){this.fn=q,this.context=R,this.once=S||!1}function j(){this._events=new F,this._eventsCount=0}Object.create&&(F.prototype=Object.create(null),(new F).__proto__||(ee=!1)),j.prototype.eventNames=function(){var S,E,R=[];if(0===this._eventsCount)return R;for(E in S=this._events)c.call(S,E)&&R.push(ee?E.slice(1):E);return Object.getOwnPropertySymbols?R.concat(Object.getOwnPropertySymbols(S)):R},j.prototype.listeners=function(R,S){var _=this._events[ee?ee+R:R];if(S)return!!_;if(!_)return[];if(_.fn)return[_.fn];for(var T=0,C=_.length,k=new Array(C);T<C;T++)k[T]=_[T].fn;return k},j.prototype.emit=function(R,S,E,_,T,C){var k=ee?ee+R:R;if(!this._events[k])return!1;var V,I,A=this._events[k],x=arguments.length;if(A.fn){switch(A.once&&this.removeListener(R,A.fn,void 0,!0),x){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,S),!0;case 3:return A.fn.call(A.context,S,E),!0;case 4:return A.fn.call(A.context,S,E,_),!0;case 5:return A.fn.call(A.context,S,E,_,T),!0;case 6:return A.fn.call(A.context,S,E,_,T,C),!0}for(I=1,V=new Array(x-1);I<x;I++)V[I-1]=arguments[I];A.fn.apply(A.context,V)}else{var ne,L=A.length;for(I=0;I<L;I++)switch(A[I].once&&this.removeListener(R,A[I].fn,void 0,!0),x){case 1:A[I].fn.call(A[I].context);break;case 2:A[I].fn.call(A[I].context,S);break;case 3:A[I].fn.call(A[I].context,S,E);break;case 4:A[I].fn.call(A[I].context,S,E,_);break;default:if(!V)for(ne=1,V=new Array(x-1);ne<x;ne++)V[ne-1]=arguments[ne];A[I].fn.apply(A[I].context,V)}}return!0},j.prototype.on=function(R,S,E){var _=new K(S,E||this),T=ee?ee+R:R;return this._events[T]?this._events[T].fn?this._events[T]=[this._events[T],_]:this._events[T].push(_):(this._events[T]=_,this._eventsCount++),this},j.prototype.once=function(R,S,E){var _=new K(S,E||this,!0),T=ee?ee+R:R;return this._events[T]?this._events[T].fn?this._events[T]=[this._events[T],_]:this._events[T].push(_):(this._events[T]=_,this._eventsCount++),this},j.prototype.removeListener=function(R,S,E,_){var T=ee?ee+R:R;if(!this._events[T])return this;if(!S)return 0==--this._eventsCount?this._events=new F:delete this._events[T],this;var C=this._events[T];if(C.fn)C.fn===S&&(!_||C.once)&&(!E||C.context===E)&&(0==--this._eventsCount?this._events=new F:delete this._events[T]);else{for(var k=0,A=[],x=C.length;k<x;k++)(C[k].fn!==S||_&&!C[k].once||E&&C[k].context!==E)&&A.push(C[k]);A.length?this._events[T]=1===A.length?A[0]:A:0==--this._eventsCount?this._events=new F:delete this._events[T]}return this},j.prototype.removeAllListeners=function(R){var S;return R?this._events[S=ee?ee+R:R]&&(0==--this._eventsCount?this._events=new F:delete this._events[S]):(this._events=new F,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prototype.setMaxListeners=function(){return this},j.prefixed=ee,j.EventEmitter=j,void 0!==ge&&(ge.exports=j)},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.matchText=M.matchSpacing=M.matchNewline=M.matchBlot=M.matchAttributor=M.default=void 0;var ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(je){return typeof je}:function(je){return je&&"function"==typeof Symbol&&je.constructor===Symbol&&je!==Symbol.prototype?"symbol":typeof je},F=function(qe,He){if(Array.isArray(qe))return qe;if(Symbol.iterator in Object(qe))return function je(qe,He){var it=[],ze=!0,vt=!1,Rt=void 0;try{for(var sn,Pt=qe[Symbol.iterator]();!(ze=(sn=Pt.next()).done)&&(it.push(sn.value),!He||it.length!==He);ze=!0);}catch(fn){vt=!0,Rt=fn}finally{try{!ze&&Pt.return&&Pt.return()}finally{if(vt)throw Rt}}return it}(qe,He);throw new TypeError("Invalid attempt to destructure non-iterable instance")},K=function(){function je(qe,He){for(var it=0;it<He.length;it++){var ze=He[it];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(qe,ze.key,ze)}}return function(qe,He,it){return He&&je(qe.prototype,He),it&&je(qe,it),qe}}(),q=W(c(3)),S=W(c(2)),_=W(c(0)),C=W(c(5)),A=W(c(10)),V=W(c(9)),I=c(36),L=c(37),J=W(c(13)),Z=c(26),X=c(38),$=c(39),H=c(40);function W(je){return je&&je.__esModule?je:{default:je}}function B(je,qe,He){return qe in je?Object.defineProperty(je,qe,{value:He,enumerable:!0,configurable:!0,writable:!0}):je[qe]=He,je}var ue=(0,A.default)("quill:clipboard"),be="__ql-matcher",ce=[[Node.TEXT_NODE,yn],[Node.TEXT_NODE,Mt],["br",function Qe(je,qe){return xe(qe,"\n")||qe.insert("\n"),qe}],[Node.ELEMENT_NODE,Mt],[Node.ELEMENT_NODE,Be],[Node.ELEMENT_NODE,Bt],[Node.ELEMENT_NODE,Re],[Node.ELEMENT_NODE,function In(je,qe){var He={},it=je.style||{};return it.fontStyle&&"italic"===_e(je).fontStyle&&(He.italic=!0),it.fontWeight&&(_e(je).fontWeight.startsWith("bold")||parseInt(_e(je).fontWeight)>=700)&&(He.bold=!0),Object.keys(He).length>0&&(qe=me(qe,He)),parseFloat(it.textIndent||0)>0&&(qe=(new S.default).insert("\t").concat(qe)),qe}],["li",function It(je,qe){var He=_.default.query(je);if(null==He||"list-item"!==He.blotName||!xe(qe,"\n"))return qe;for(var it=-1,ze=je.parentNode;!ze.classList.contains("ql-clipboard");)"list"===(_.default.query(ze)||{}).blotName&&(it+=1),ze=ze.parentNode;return it<=0?qe:qe.compose((new S.default).retain(qe.length()-1).retain(1,{indent:it}))}],["b",ke.bind(ke,"bold")],["i",ke.bind(ke,"italic")],["style",function wt(){return new S.default}]],le=[I.AlignAttribute,X.DirectionAttribute].reduce(function(je,qe){return je[qe.keyName]=qe,je},{}),ie=[I.AlignStyle,L.BackgroundStyle,Z.ColorStyle,X.DirectionStyle,$.FontStyle,H.SizeStyle].reduce(function(je,qe){return je[qe.keyName]=qe,je},{}),fe=function(je){function qe(He,it){!function te(je,qe){if(!(je instanceof qe))throw new TypeError("Cannot call a class as a function")}(this,qe);var ze=function Y(je,qe){if(!je)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!qe||"object"!=typeof qe&&"function"!=typeof qe?je:qe}(this,(qe.__proto__||Object.getPrototypeOf(qe)).call(this,He,it));return ze.quill.root.addEventListener("paste",ze.onPaste.bind(ze)),ze.container=ze.quill.addContainer("ql-clipboard"),ze.container.setAttribute("contenteditable",!0),ze.container.setAttribute("tabindex",-1),ze.matchers=[],ce.concat(ze.options.matchers).forEach(function(vt){var Rt=F(vt,2),sn=Rt[1];!it.matchVisual&&sn===Bt||ze.addMatcher(Rt[0],sn)}),ze}return function de(je,qe){if("function"!=typeof qe&&null!==qe)throw new TypeError("Super expression must either be null or a function, not "+typeof qe);je.prototype=Object.create(qe&&qe.prototype,{constructor:{value:je,enumerable:!1,writable:!0,configurable:!0}}),qe&&(Object.setPrototypeOf?Object.setPrototypeOf(je,qe):je.__proto__=qe)}(qe,je),K(qe,[{key:"addMatcher",value:function(it,ze){this.matchers.push([it,ze])}},{key:"convert",value:function(it){if("string"==typeof it)return this.container.innerHTML=it.replace(/\>\r?\n +\</g,"><"),this.convert();var ze=this.quill.getFormat(this.quill.selection.savedRange.index);if(ze[J.default.blotName]){var vt=this.container.innerText;return this.container.innerHTML="",(new S.default).insert(vt,B({},J.default.blotName,ze[J.default.blotName]))}var Rt=this.prepareMatching(),Pt=F(Rt,2),en=De(this.container,Pt[0],Pt[1]);return xe(en,"\n")&&null==en.ops[en.ops.length-1].attributes&&(en=en.compose((new S.default).retain(en.length()-1).delete(1))),ue.log("convert",this.container.innerHTML,en),this.container.innerHTML="",en}},{key:"dangerouslyPasteHTML",value:function(it,ze){var vt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.default.sources.API;if("string"==typeof it)this.quill.setContents(this.convert(it),ze),this.quill.setSelection(0,C.default.sources.SILENT);else{var Rt=this.convert(ze);this.quill.updateContents((new S.default).retain(it).concat(Rt),vt),this.quill.setSelection(it+Rt.length(),C.default.sources.SILENT)}}},{key:"onPaste",value:function(it){var ze=this;if(!it.defaultPrevented&&this.quill.isEnabled()){var vt=this.quill.getSelection(),Rt=(new S.default).retain(vt.index),Pt=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(C.default.sources.SILENT),setTimeout(function(){Rt=Rt.concat(ze.convert()).delete(vt.length),ze.quill.updateContents(Rt,C.default.sources.USER),ze.quill.setSelection(Rt.length()-vt.length,C.default.sources.SILENT),ze.quill.scrollingContainer.scrollTop=Pt,ze.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var it=this,ze=[],vt=[];return this.matchers.forEach(function(Rt){var Pt=F(Rt,2),sn=Pt[0],fn=Pt[1];switch(sn){case Node.TEXT_NODE:vt.push(fn);break;case Node.ELEMENT_NODE:ze.push(fn);break;default:[].forEach.call(it.container.querySelectorAll(sn),function(en){en[be]=en[be]||[],en[be].push(fn)})}}),[ze,vt]}}]),qe}(V.default);function me(je,qe,He){return"object"===(void 0===qe?"undefined":ee(qe))?Object.keys(qe).reduce(function(it,ze){return me(it,ze,qe[ze])},je):je.reduce(function(it,ze){return ze.attributes&&ze.attributes[qe]?it.push(ze):it.insert(ze.insert,(0,q.default)({},B({},qe,He),ze.attributes))},new S.default)}function _e(je){if(je.nodeType!==Node.ELEMENT_NODE)return{};var qe="__ql-computed-style";return je[qe]||(je[qe]=window.getComputedStyle(je))}function xe(je,qe){for(var He="",it=je.ops.length-1;it>=0&&He.length<qe.length;--it){var ze=je.ops[it];if("string"!=typeof ze.insert)break;He=ze.insert+He}return He.slice(-1*qe.length)===qe}function he(je){if(0===je.childNodes.length)return!1;var qe=_e(je);return["block","list-item"].indexOf(qe.display)>-1}function De(je,qe,He){return je.nodeType===je.TEXT_NODE?He.reduce(function(it,ze){return ze(je,it)},new S.default):je.nodeType===je.ELEMENT_NODE?[].reduce.call(je.childNodes||[],function(it,ze){var vt=De(ze,qe,He);return ze.nodeType===je.ELEMENT_NODE&&(vt=qe.reduce(function(Rt,Pt){return Pt(ze,Rt)},vt),vt=(ze[be]||[]).reduce(function(Rt,Pt){return Pt(ze,Rt)},vt)),it.concat(vt)},new S.default):new S.default}function ke(je,qe,He){return me(He,je,!0)}function Re(je,qe){var He=_.default.Attributor.Attribute.keys(je),it=_.default.Attributor.Class.keys(je),ze=_.default.Attributor.Style.keys(je),vt={};return He.concat(it).concat(ze).forEach(function(Rt){var Pt=_.default.query(Rt,_.default.Scope.ATTRIBUTE);null!=Pt&&(vt[Pt.attrName]=Pt.value(je),vt[Pt.attrName])||(null!=(Pt=le[Rt])&&(Pt.attrName===Rt||Pt.keyName===Rt)&&(vt[Pt.attrName]=Pt.value(je)||void 0),null!=(Pt=ie[Rt])&&(Pt.attrName===Rt||Pt.keyName===Rt)&&(vt[(Pt=ie[Rt]).attrName]=Pt.value(je)||void 0))}),Object.keys(vt).length>0&&(qe=me(qe,vt)),qe}function Be(je,qe){var He=_.default.query(je);if(null==He)return qe;if(He.prototype instanceof _.default.Embed){var it={},ze=He.value(je);null!=ze&&(it[He.blotName]=ze,qe=(new S.default).insert(it,He.formats(je)))}else"function"==typeof He.formats&&(qe=me(qe,He.blotName,He.formats(je)));return qe}function Mt(je,qe){return xe(qe,"\n")||(he(je)||qe.length()>0&&je.nextSibling&&he(je.nextSibling))&&qe.insert("\n"),qe}function Bt(je,qe){if(he(je)&&null!=je.nextElementSibling&&!xe(qe,"\n\n")){var He=je.offsetHeight+parseFloat(_e(je).marginTop)+parseFloat(_e(je).marginBottom);je.nextElementSibling.offsetTop>je.offsetTop+1.5*He&&qe.insert("\n")}return qe}function yn(je,qe){var He=je.data;if("O:P"===je.parentNode.tagName)return qe.insert(He.trim());if(0===He.trim().length&&je.parentNode.classList.contains("ql-clipboard"))return qe;if(!_e(je.parentNode).whiteSpace.startsWith("pre")){var it=function(vt,Rt){return(Rt=Rt.replace(/[^\u00a0]/g,"")).length<1&&vt?" ":Rt};He=(He=He.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,it.bind(it,!0)),(null==je.previousSibling&&he(je.parentNode)||null!=je.previousSibling&&he(je.previousSibling))&&(He=He.replace(/^\s+/,it.bind(it,!1))),(null==je.nextSibling&&he(je.parentNode)||null!=je.nextSibling&&he(je.nextSibling))&&(He=He.replace(/\s+$/,it.bind(it,!1)))}return qe.insert(He)}fe.DEFAULTS={matchers:[],matchVisual:!0},M.default=fe,M.matchAttributor=Re,M.matchBlot=Be,M.matchNewline=Mt,M.matchSpacing=Bt,M.matchText=yn},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function T(C,k){for(var A=0;A<k.length;A++){var x=k[A];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(C,x.key,x)}}return function(C,k,A){return k&&T(C.prototype,k),A&&T(C,A),C}}(),F=function T(C,k,A){null===C&&(C=Function.prototype);var x=Object.getOwnPropertyDescriptor(C,k);if(void 0===x){var V=Object.getPrototypeOf(C);return null===V?void 0:T(V,k,A)}if("value"in x)return x.value;var I=x.get;return void 0===I?void 0:I.call(A)};function R(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")}function S(T,C){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||"object"!=typeof C&&"function"!=typeof C?T:C}var _=function(T){function C(){return R(this,C),S(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return function E(T,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function, not "+typeof C);T.prototype=Object.create(C&&C.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(T,C):T.__proto__=C)}(C,T),ee(C,[{key:"optimize",value:function(A){F(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,A),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return F(C.__proto__||Object.getPrototypeOf(C),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),C}(function q(T){return T&&T.__esModule?T:{default:T}}(c(6)).default);_.blotName="bold",_.tagName=["STRONG","B"],M.default=_},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.addControls=M.default=void 0;var ee=function(W,B){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return function H(W,B){var te=[],Y=!0,de=!1,ue=void 0;try{for(var ce,be=W[Symbol.iterator]();!(Y=(ce=be.next()).done)&&(te.push(ce.value),!B||te.length!==B);Y=!0);}catch(le){de=!0,ue=le}finally{try{!Y&&be.return&&be.return()}finally{if(de)throw ue}}return te}(W,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")},F=function(){function H(W,B){for(var te=0;te<B.length;te++){var Y=B[te];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(W,Y.key,Y)}}return function(W,B,te){return B&&H(W.prototype,B),te&&H(W,te),W}}(),j=A(c(2)),R=A(c(0)),E=A(c(5)),T=A(c(10)),k=A(c(9));function A(H){return H&&H.__esModule?H:{default:H}}function I(H,W){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!W||"object"!=typeof W&&"function"!=typeof W?H:W}var ne=(0,T.default)("quill:toolbar"),J=function(H){function W(B,te){!function V(H,W){if(!(H instanceof W))throw new TypeError("Cannot call a class as a function")}(this,W);var ue,Y=I(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,B,te));if(Array.isArray(Y.options.container)){var de=document.createElement("div");X(de,Y.options.container),B.container.parentNode.insertBefore(de,B.container),Y.container=de}else Y.container="string"==typeof Y.options.container?document.querySelector(Y.options.container):Y.options.container;return Y.container instanceof HTMLElement?(Y.container.classList.add("ql-toolbar"),Y.controls=[],Y.handlers={},Object.keys(Y.options.handlers).forEach(function(be){Y.addHandler(be,Y.options.handlers[be])}),[].forEach.call(Y.container.querySelectorAll("button, select"),function(be){Y.attach(be)}),Y.quill.on(E.default.events.EDITOR_CHANGE,function(be,ce){be===E.default.events.SELECTION_CHANGE&&Y.update(ce)}),Y.quill.on(E.default.events.SCROLL_OPTIMIZE,function(){var be=Y.quill.selection.getRange(),ce=ee(be,1);Y.update(ce[0])}),Y):(ue=ne.error("Container required for toolbar",Y.options),I(Y,ue))}return function L(H,W){if("function"!=typeof W&&null!==W)throw new TypeError("Super expression must either be null or a function, not "+typeof W);H.prototype=Object.create(W&&W.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(H,W):H.__proto__=W)}(W,H),F(W,[{key:"addHandler",value:function(te,Y){this.handlers[te]=Y}},{key:"attach",value:function(te){var Y=this,de=[].find.call(te.classList,function(be){return 0===be.indexOf("ql-")});if(de){if(de=de.slice(3),"BUTTON"===te.tagName&&te.setAttribute("type","button"),null==this.handlers[de]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[de])return void ne.warn("ignoring attaching to disabled format",de,te);if(null==R.default.query(de))return void ne.warn("ignoring attaching to nonexistent format",de,te)}te.addEventListener("SELECT"===te.tagName?"change":"click",function(be){var ce=void 0;if("SELECT"===te.tagName){if(te.selectedIndex<0)return;var le=te.options[te.selectedIndex];ce=!le.hasAttribute("selected")&&(le.value||!1)}else ce=!te.classList.contains("ql-active")&&(te.value||!te.hasAttribute("value")),be.preventDefault();Y.quill.focus();var ie=Y.quill.selection.getRange(),me=ee(ie,1)[0];if(null!=Y.handlers[de])Y.handlers[de].call(Y,ce);else if(R.default.query(de).prototype instanceof R.default.Embed){if(!(ce=prompt("Enter "+de)))return;Y.quill.updateContents((new j.default).retain(me.index).delete(me.length).insert(function x(H,W,B){return W in H?Object.defineProperty(H,W,{value:B,enumerable:!0,configurable:!0,writable:!0}):H[W]=B,H}({},de,ce)),E.default.sources.USER)}else Y.quill.format(de,ce,E.default.sources.USER);Y.update(me)}),this.controls.push([de,te])}}},{key:"update",value:function(te){var Y=null==te?{}:this.quill.getFormat(te);this.controls.forEach(function(de){var ue=ee(de,2),be=ue[0],ce=ue[1];if("SELECT"===ce.tagName){var le=void 0;if(null==te)le=null;else if(null==Y[be])le=ce.querySelector("option[selected]");else if(!Array.isArray(Y[be])){var ie=Y[be];"string"==typeof ie&&(ie=ie.replace(/\"/g,'\\"')),le=ce.querySelector('option[value="'+ie+'"]')}null==le?(ce.value="",ce.selectedIndex=-1):le.selected=!0}else if(null==te)ce.classList.remove("ql-active");else if(ce.hasAttribute("value")){var fe=Y[be]===ce.getAttribute("value")||null!=Y[be]&&Y[be].toString()===ce.getAttribute("value")||null==Y[be]&&!ce.getAttribute("value");ce.classList.toggle("ql-active",fe)}else ce.classList.toggle("ql-active",null!=Y[be])})}}]),W}(k.default);function Z(H,W,B){var te=document.createElement("button");te.setAttribute("type","button"),te.classList.add("ql-"+W),null!=B&&(te.value=B),H.appendChild(te)}function X(H,W){Array.isArray(W[0])||(W=[W]),W.forEach(function(B){var te=document.createElement("span");te.classList.add("ql-formats"),B.forEach(function(Y){if("string"==typeof Y)Z(te,Y);else{var de=Object.keys(Y)[0],ue=Y[de];Array.isArray(ue)?function $(H,W,B){var te=document.createElement("select");te.classList.add("ql-"+W),B.forEach(function(Y){var de=document.createElement("option");!1!==Y?de.setAttribute("value",Y):de.setAttribute("selected","selected"),te.appendChild(de)}),H.appendChild(te)}(te,de,ue):Z(te,de,ue)}}),H.appendChild(te)})}J.DEFAULTS={},J.DEFAULTS={container:null,handlers:{clean:function(){var W=this,B=this.quill.getSelection();if(null!=B)if(0==B.length){var te=this.quill.getFormat();Object.keys(te).forEach(function(Y){null!=R.default.query(Y,R.default.Scope.INLINE)&&W.quill.format(Y,!1)})}else this.quill.removeFormat(B,E.default.sources.USER)},direction:function(W){var B=this.quill.getFormat().align;"rtl"===W&&null==B?this.quill.format("align","right",E.default.sources.USER):!W&&"right"===B&&this.quill.format("align",!1,E.default.sources.USER),this.quill.format("direction",W,E.default.sources.USER)},indent:function(W){var B=this.quill.getSelection(),te=this.quill.getFormat(B),Y=parseInt(te.indent||0);if("+1"===W||"-1"===W){var de="+1"===W?1:-1;"rtl"===te.direction&&(de*=-1),this.quill.format("indent",Y+de,E.default.sources.USER)}},link:function(W){!0===W&&(W=prompt("Enter link URL:")),this.quill.format("link",W,E.default.sources.USER)},list:function(W){var B=this.quill.getSelection(),te=this.quill.getFormat(B);this.quill.format("list","check"===W?"checked"!==te.list&&"unchecked"!==te.list&&"unchecked":W,E.default.sources.USER)}}},M.default=J,M.addControls=X},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function T(C,k){for(var A=0;A<k.length;A++){var x=k[A];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(C,x.key,x)}}return function(C,k,A){return k&&T(C.prototype,k),A&&T(C,A),C}}(),F=function T(C,k,A){null===C&&(C=Function.prototype);var x=Object.getOwnPropertyDescriptor(C,k);if(void 0===x){var V=Object.getPrototypeOf(C);return null===V?void 0:T(V,k,A)}if("value"in x)return x.value;var I=x.get;return void 0===I?void 0:I.call(A)};var _=function(T){function C(k,A){!function R(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")}(this,C);var x=function S(T,C){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||"object"!=typeof C&&"function"!=typeof C?T:C}(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,k));return x.label.innerHTML=A,x.container.classList.add("ql-color-picker"),[].slice.call(x.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(V){V.classList.add("ql-primary")}),x}return function E(T,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function, not "+typeof C);T.prototype=Object.create(C&&C.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(T,C):T.__proto__=C)}(C,T),ee(C,[{key:"buildItem",value:function(A){var x=F(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"buildItem",this).call(this,A);return x.style.backgroundColor=A.getAttribute("value")||"",x}},{key:"selectItem",value:function(A,x){F(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"selectItem",this).call(this,A,x);var V=this.label.querySelector(".ql-color-label"),I=A&&A.getAttribute("data-value")||"";V&&("line"===V.tagName?V.style.stroke=I:V.style.fill=I)}}]),C}(function q(T){return T&&T.__esModule?T:{default:T}}(c(28)).default);M.default=_},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function T(C,k){for(var A=0;A<k.length;A++){var x=k[A];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(C,x.key,x)}}return function(C,k,A){return k&&T(C.prototype,k),A&&T(C,A),C}}(),F=function T(C,k,A){null===C&&(C=Function.prototype);var x=Object.getOwnPropertyDescriptor(C,k);if(void 0===x){var V=Object.getPrototypeOf(C);return null===V?void 0:T(V,k,A)}if("value"in x)return x.value;var I=x.get;return void 0===I?void 0:I.call(A)};var _=function(T){function C(k,A){!function R(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")}(this,C);var x=function S(T,C){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||"object"!=typeof C&&"function"!=typeof C?T:C}(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,k));return x.container.classList.add("ql-icon-picker"),[].forEach.call(x.container.querySelectorAll(".ql-picker-item"),function(V){V.innerHTML=A[V.getAttribute("data-value")||""]}),x.defaultItem=x.container.querySelector(".ql-selected"),x.selectItem(x.defaultItem),x}return function E(T,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function, not "+typeof C);T.prototype=Object.create(C&&C.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(T,C):T.__proto__=C)}(C,T),ee(C,[{key:"selectItem",value:function(A,x){F(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"selectItem",this).call(this,A,x),this.label.innerHTML=(A=A||this.defaultItem).innerHTML}}]),C}(function q(T){return T&&T.__esModule?T:{default:T}}(c(28)).default);M.default=_},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function j(q,R){for(var S=0;S<R.length;S++){var E=R[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(q,E.key,E)}}return function(q,R,S){return R&&j(q.prototype,R),S&&j(q,S),q}}();var K=function(){function j(q,R){var S=this;(function F(j,q){if(!(j instanceof q))throw new TypeError("Cannot call a class as a function")})(this,j),this.quill=q,this.boundsContainer=R||document.body,this.root=q.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){S.root.style.marginTop=-1*S.quill.root.scrollTop+"px"}),this.hide()}return ee(j,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(R){var S=R.left+R.width/2-this.root.offsetWidth/2,E=R.bottom+this.quill.root.scrollTop;this.root.style.left=S+"px",this.root.style.top=E+"px",this.root.classList.remove("ql-flip");var _=this.boundsContainer.getBoundingClientRect(),T=this.root.getBoundingClientRect(),C=0;return T.right>_.right&&(this.root.style.left=S+(C=_.right-T.right)+"px"),T.left<_.left&&(this.root.style.left=S+(C=_.left-T.left)+"px"),T.bottom>_.bottom&&(this.root.style.top=E-(R.bottom-R.top+(T.bottom-T.top))+"px",this.root.classList.add("ql-flip")),C}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),j}();M.default=K},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(H,W){if(Array.isArray(H))return H;if(Symbol.iterator in Object(H))return function $(H,W){var B=[],te=!0,Y=!1,de=void 0;try{for(var be,ue=H[Symbol.iterator]();!(te=(be=ue.next()).done)&&(B.push(be.value),!W||B.length!==W);te=!0);}catch(ce){Y=!0,de=ce}finally{try{!te&&ue.return&&ue.return()}finally{if(Y)throw de}}return B}(H,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")},F=function $(H,W,B){null===H&&(H=Function.prototype);var te=Object.getOwnPropertyDescriptor(H,W);if(void 0===te){var Y=Object.getPrototypeOf(H);return null===Y?void 0:$(Y,W,B)}if("value"in te)return te.value;var de=te.get;return void 0===de?void 0:de.call(B)},K=function(){function $(H,W){for(var B=0;B<W.length;B++){var te=W[B];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(H,te.key,te)}}return function(H,W,B){return W&&$(H.prototype,W),B&&$(H,B),H}}(),q=V(c(3)),S=V(c(8)),E=c(43),_=V(E),C=V(c(27)),k=c(15),x=V(c(41));function V($){return $&&$.__esModule?$:{default:$}}function I($,H){if(!($ instanceof H))throw new TypeError("Cannot call a class as a function")}function L($,H){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!H||"object"!=typeof H&&"function"!=typeof H?$:H}function ne($,H){if("function"!=typeof H&&null!==H)throw new TypeError("Super expression must either be null or a function, not "+typeof H);$.prototype=Object.create(H&&H.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf($,H):$.__proto__=H)}var J=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],Z=function($){function H(W,B){I(this,H),null!=B.modules.toolbar&&null==B.modules.toolbar.container&&(B.modules.toolbar.container=J);var te=L(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,W,B));return te.quill.container.classList.add("ql-snow"),te}return ne(H,$),K(H,[{key:"extendToolbar",value:function(B){B.container.classList.add("ql-snow"),this.buildButtons([].slice.call(B.container.querySelectorAll("button")),x.default),this.buildPickers([].slice.call(B.container.querySelectorAll("select")),x.default),this.tooltip=new X(this.quill,this.options.bounds),B.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(te,Y){B.handlers.link.call(B,!Y.format.link)})}}]),H}(_.default);Z.DEFAULTS=(0,q.default)(!0,{},_.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(H){if(H){var W=this.quill.getSelection();if(null==W||0==W.length)return;var B=this.quill.getText(W);/^\S+@\S+\.\S+$/.test(B)&&0!==B.indexOf("mailto:")&&(B="mailto:"+B),this.quill.theme.tooltip.edit("link",B)}else this.quill.format("link",!1)}}}}});var X=function($){function H(W,B){I(this,H);var te=L(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,W,B));return te.preview=te.root.querySelector("a.ql-preview"),te}return ne(H,$),K(H,[{key:"listen",value:function(){var B=this;F(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(te){B.root.classList.contains("ql-editing")?B.save():B.edit("link",B.preview.textContent),te.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(te){if(null!=B.linkRange){var Y=B.linkRange;B.restoreFocus(),B.quill.formatText(Y,"link",!1,S.default.sources.USER),delete B.linkRange}te.preventDefault(),B.hide()}),this.quill.on(S.default.events.SELECTION_CHANGE,function(te,Y,de){if(null!=te){if(0===te.length&&de===S.default.sources.USER){var ue=B.quill.scroll.descendant(C.default,te.index),be=ee(ue,2),ce=be[0];if(null!=ce){B.linkRange=new k.Range(te.index-be[1],ce.length());var ie=C.default.formats(ce.domNode);return B.preview.textContent=ie,B.preview.setAttribute("href",ie),B.show(),void B.position(B.quill.getBounds(B.linkRange))}}else delete B.linkRange;B.hide()}})}},{key:"show",value:function(){F(H.prototype.__proto__||Object.getPrototypeOf(H.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),H}(E.BaseTooltip);X.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),M.default=Z},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var F=ze(c(29)),K=c(36),j=c(38),q=c(64),S=ze(c(65)),_=ze(c(66)),T=c(67),C=ze(T),k=c(37),A=c(26),x=c(39),V=c(40),L=ze(c(56)),J=ze(c(68)),X=ze(c(27)),H=ze(c(69)),B=ze(c(70)),Y=ze(c(71)),ue=ze(c(72)),ce=ze(c(73)),le=c(13),ie=ze(le),me=ze(c(74)),xe=ze(c(75)),De=ze(c(57)),Re=ze(c(41)),Qe=ze(c(28)),It=ze(c(59)),Bt=ze(c(60)),yn=ze(c(61)),qe=ze(c(108)),it=ze(c(62));function ze(vt){return vt&&vt.__esModule?vt:{default:vt}}F.default.register({"attributors/attribute/direction":j.DirectionAttribute,"attributors/class/align":K.AlignClass,"attributors/class/background":k.BackgroundClass,"attributors/class/color":A.ColorClass,"attributors/class/direction":j.DirectionClass,"attributors/class/font":x.FontClass,"attributors/class/size":V.SizeClass,"attributors/style/align":K.AlignStyle,"attributors/style/background":k.BackgroundStyle,"attributors/style/color":A.ColorStyle,"attributors/style/direction":j.DirectionStyle,"attributors/style/font":x.FontStyle,"attributors/style/size":V.SizeStyle},!0),F.default.register({"formats/align":K.AlignClass,"formats/direction":j.DirectionClass,"formats/indent":q.IndentClass,"formats/background":k.BackgroundStyle,"formats/color":A.ColorStyle,"formats/font":x.FontClass,"formats/size":V.SizeClass,"formats/blockquote":S.default,"formats/code-block":ie.default,"formats/header":_.default,"formats/list":C.default,"formats/bold":L.default,"formats/code":le.Code,"formats/italic":J.default,"formats/link":X.default,"formats/script":H.default,"formats/strike":B.default,"formats/underline":Y.default,"formats/image":ue.default,"formats/video":ce.default,"formats/list/item":T.ListItem,"modules/formula":me.default,"modules/syntax":xe.default,"modules/toolbar":De.default,"themes/bubble":qe.default,"themes/snow":it.default,"ui/icons":Re.default,"ui/picker":Qe.default,"ui/icon-picker":Bt.default,"ui/color-picker":It.default,"ui/tooltip":yn.default},!0),M.default=F.default},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.IndentClass=void 0;var ee=function(){function C(k,A){for(var x=0;x<A.length;x++){var V=A[x];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(k,V.key,V)}}return function(k,A,x){return A&&C(k.prototype,A),x&&C(k,x),k}}(),F=function C(k,A,x){null===k&&(k=Function.prototype);var V=Object.getOwnPropertyDescriptor(k,A);if(void 0===V){var I=Object.getPrototypeOf(k);return null===I?void 0:C(I,A,x)}if("value"in V)return V.value;var L=V.get;return void 0===L?void 0:L.call(x)},j=function q(C){return C&&C.__esModule?C:{default:C}}(c(0));function R(C,k){if(!(C instanceof k))throw new TypeError("Cannot call a class as a function")}function S(C,k){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!k||"object"!=typeof k&&"function"!=typeof k?C:k}var _=function(C){function k(){return R(this,k),S(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return function E(C,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function, not "+typeof k);C.prototype=Object.create(k&&k.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(C,k):C.__proto__=k)}(k,C),ee(k,[{key:"add",value:function(x,V){if("+1"===V||"-1"===V){var I=this.value(x)||0;V="+1"===V?I+1:I-1}return 0===V?(this.remove(x),!0):F(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"add",this).call(this,x,V)}},{key:"canAdd",value:function(x,V){return F(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"canAdd",this).call(this,x,V)||F(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"canAdd",this).call(this,x,parseInt(V))}},{key:"value",value:function(x){return parseInt(F(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"value",this).call(this,x))||void 0}}]),k}(j.default.Attributor.Class),T=new _("indent","ql-indent",{scope:j.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});M.IndentClass=T},function(ge,M,c){"use strict";function j(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function q(E,_){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?E:_}Object.defineProperty(M,"__esModule",{value:!0});var S=function(E){function _(){return j(this,_),q(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return function R(E,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(E,_):E.__proto__=_)}(_,E),_}(function K(E){return E&&E.__esModule?E:{default:E}}(c(4)).default);S.blotName="blockquote",S.tagName="blockquote",M.default=S},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function _(T,C){for(var k=0;k<C.length;k++){var A=C[k];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(T,A.key,A)}}return function(T,C,k){return C&&_(T.prototype,C),k&&_(T,k),T}}();function q(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}function R(_,T){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!T||"object"!=typeof T&&"function"!=typeof T?_:T}var E=function(_){function T(){return q(this,T),R(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return function S(_,T){if("function"!=typeof T&&null!==T)throw new TypeError("Super expression must either be null or a function, not "+typeof T);_.prototype=Object.create(T&&T.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(_,T):_.__proto__=T)}(T,_),ee(T,null,[{key:"formats",value:function(k){return this.tagName.indexOf(k.tagName)+1}}]),T}(function j(_){return _&&_.__esModule?_:{default:_}}(c(4)).default);E.blotName="header",E.tagName=["H1","H2","H3","H4","H5","H6"],M.default=E},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.ListItem=void 0;var ee=function(){function I(L,ne){for(var J=0;J<ne.length;J++){var Z=ne[J];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(L,Z.key,Z)}}return function(L,ne,J){return ne&&I(L.prototype,ne),J&&I(L,J),L}}(),F=function I(L,ne,J){null===L&&(L=Function.prototype);var Z=Object.getOwnPropertyDescriptor(L,ne);if(void 0===Z){var X=Object.getPrototypeOf(L);return null===X?void 0:I(X,ne,J)}if("value"in Z)return Z.value;var $=Z.get;return void 0===$?void 0:$.call(J)},j=_(c(0)),R=_(c(4)),E=_(c(25));function _(I){return I&&I.__esModule?I:{default:I}}function C(I,L){if(!(I instanceof L))throw new TypeError("Cannot call a class as a function")}function k(I,L){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!L||"object"!=typeof L&&"function"!=typeof L?I:L}function A(I,L){if("function"!=typeof L&&null!==L)throw new TypeError("Super expression must either be null or a function, not "+typeof L);I.prototype=Object.create(L&&L.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),L&&(Object.setPrototypeOf?Object.setPrototypeOf(I,L):I.__proto__=L)}var x=function(I){function L(){return C(this,L),k(this,(L.__proto__||Object.getPrototypeOf(L)).apply(this,arguments))}return A(L,I),ee(L,[{key:"format",value:function(J,Z){J!==V.blotName||Z?F(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"format",this).call(this,J,Z):this.replaceWith(j.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():F(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(J,Z){return this.parent.isolate(this.offset(this.parent),this.length()),J===this.parent.statics.blotName?(this.parent.replaceWith(J,Z),this):(this.parent.unwrap(),F(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"replaceWith",this).call(this,J,Z))}}],[{key:"formats",value:function(J){return J.tagName===this.tagName?void 0:F(L.__proto__||Object.getPrototypeOf(L),"formats",this).call(this,J)}}]),L}(R.default);x.blotName="list-item",x.tagName="LI";var V=function(I){function L(ne){C(this,L);var J=k(this,(L.__proto__||Object.getPrototypeOf(L)).call(this,ne)),Z=function($){if($.target.parentNode===ne){var H=J.statics.formats(ne),W=j.default.find($.target);"checked"===H?W.format("list","unchecked"):"unchecked"===H&&W.format("list","checked")}};return ne.addEventListener("touchstart",Z),ne.addEventListener("mousedown",Z),J}return A(L,I),ee(L,null,[{key:"create",value:function(J){var Z="ordered"===J?"OL":"UL",X=F(L.__proto__||Object.getPrototypeOf(L),"create",this).call(this,Z);return("checked"===J||"unchecked"===J)&&X.setAttribute("data-checked","checked"===J),X}},{key:"formats",value:function(J){return"OL"===J.tagName?"ordered":"UL"===J.tagName?J.hasAttribute("data-checked")?"true"===J.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),ee(L,[{key:"format",value:function(J,Z){this.children.length>0&&this.children.tail.format(J,Z)}},{key:"formats",value:function(){return function T(I,L,ne){return L in I?Object.defineProperty(I,L,{value:ne,enumerable:!0,configurable:!0,writable:!0}):I[L]=ne,I}({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(J,Z){if(J instanceof x)F(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"insertBefore",this).call(this,J,Z);else{var X=null==Z?this.length():Z.offset(this),$=this.split(X);$.parent.insertBefore(J,$)}}},{key:"optimize",value:function(J){F(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"optimize",this).call(this,J);var Z=this.next;null!=Z&&Z.prev===this&&Z.statics.blotName===this.statics.blotName&&Z.domNode.tagName===this.domNode.tagName&&Z.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(Z.moveChildren(this),Z.remove())}},{key:"replace",value:function(J){if(J.statics.blotName!==this.statics.blotName){var Z=j.default.create(this.statics.defaultChild);J.moveChildren(Z),this.appendChild(Z)}F(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"replace",this).call(this,J)}}]),L}(E.default);V.blotName="list",V.scope=j.default.Scope.BLOCK_BLOT,V.tagName=["OL","UL"],V.defaultChild="list-item",V.allowedChildren=[x],M.ListItem=x,M.default=V},function(ge,M,c){"use strict";function j(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function q(E,_){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?E:_}Object.defineProperty(M,"__esModule",{value:!0});var S=function(E){function _(){return j(this,_),q(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return function R(E,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(E,_):E.__proto__=_)}(_,E),_}(function K(E){return E&&E.__esModule?E:{default:E}}(c(56)).default);S.blotName="italic",S.tagName=["EM","I"],M.default=S},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function T(C,k){for(var A=0;A<k.length;A++){var x=k[A];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(C,x.key,x)}}return function(C,k,A){return k&&T(C.prototype,k),A&&T(C,A),C}}(),F=function T(C,k,A){null===C&&(C=Function.prototype);var x=Object.getOwnPropertyDescriptor(C,k);if(void 0===x){var V=Object.getPrototypeOf(C);return null===V?void 0:T(V,k,A)}if("value"in x)return x.value;var I=x.get;return void 0===I?void 0:I.call(A)};function R(T,C){if(!(T instanceof C))throw new TypeError("Cannot call a class as a function")}function S(T,C){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||"object"!=typeof C&&"function"!=typeof C?T:C}var _=function(T){function C(){return R(this,C),S(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return function E(T,C){if("function"!=typeof C&&null!==C)throw new TypeError("Super expression must either be null or a function, not "+typeof C);T.prototype=Object.create(C&&C.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(T,C):T.__proto__=C)}(C,T),ee(C,null,[{key:"create",value:function(A){return"super"===A?document.createElement("sup"):"sub"===A?document.createElement("sub"):F(C.__proto__||Object.getPrototypeOf(C),"create",this).call(this,A)}},{key:"formats",value:function(A){return"SUB"===A.tagName?"sub":"SUP"===A.tagName?"super":void 0}}]),C}(function q(T){return T&&T.__esModule?T:{default:T}}(c(6)).default);_.blotName="script",_.tagName=["SUB","SUP"],M.default=_},function(ge,M,c){"use strict";function j(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function q(E,_){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?E:_}Object.defineProperty(M,"__esModule",{value:!0});var S=function(E){function _(){return j(this,_),q(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return function R(E,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(E,_):E.__proto__=_)}(_,E),_}(function K(E){return E&&E.__esModule?E:{default:E}}(c(6)).default);S.blotName="strike",S.tagName="S",M.default=S},function(ge,M,c){"use strict";function j(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}function q(E,_){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?E:_}Object.defineProperty(M,"__esModule",{value:!0});var S=function(E){function _(){return j(this,_),q(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return function R(E,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);E.prototype=Object.create(_&&_.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(E,_):E.__proto__=_)}(_,E),_}(function K(E){return E&&E.__esModule?E:{default:E}}(c(6)).default);S.blotName="underline",S.tagName="U",M.default=S},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function k(A,x){for(var V=0;V<x.length;V++){var I=x[V];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(A,I.key,I)}}return function(A,x,V){return x&&k(A.prototype,x),V&&k(A,V),A}}(),F=function k(A,x,V){null===A&&(A=Function.prototype);var I=Object.getOwnPropertyDescriptor(A,x);if(void 0===I){var L=Object.getPrototypeOf(A);return null===L?void 0:k(L,x,V)}if("value"in I)return I.value;var ne=I.get;return void 0===ne?void 0:ne.call(V)},j=function R(k){return k&&k.__esModule?k:{default:k}}(c(0)),q=c(27);function S(k,A){if(!(k instanceof A))throw new TypeError("Cannot call a class as a function")}function E(k,A){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!=typeof A&&"function"!=typeof A?k:A}var T=["alt","height","width"],C=function(k){function A(){return S(this,A),E(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return function _(k,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);k.prototype=Object.create(A&&A.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(k,A):k.__proto__=A)}(A,k),ee(A,[{key:"format",value:function(V,I){T.indexOf(V)>-1?I?this.domNode.setAttribute(V,I):this.domNode.removeAttribute(V):F(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,V,I)}}],[{key:"create",value:function(V){var I=F(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,V);return"string"==typeof V&&I.setAttribute("src",this.sanitize(V)),I}},{key:"formats",value:function(V){return T.reduce(function(I,L){return V.hasAttribute(L)&&(I[L]=V.getAttribute(L)),I},{})}},{key:"match",value:function(V){return/\.(jpe?g|gif|png)$/.test(V)||/^data:image\/.+;base64/.test(V)}},{key:"sanitize",value:function(V){return(0,q.sanitize)(V,["http","https","data"])?V:"//:0"}},{key:"value",value:function(V){return V.getAttribute("src")}}]),A}(j.default.Embed);C.blotName="image",C.tagName="IMG",M.default=C},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0});var ee=function(){function k(A,x){for(var V=0;V<x.length;V++){var I=x[V];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(A,I.key,I)}}return function(A,x,V){return x&&k(A.prototype,x),V&&k(A,V),A}}(),F=function k(A,x,V){null===A&&(A=Function.prototype);var I=Object.getOwnPropertyDescriptor(A,x);if(void 0===I){var L=Object.getPrototypeOf(A);return null===L?void 0:k(L,x,V)}if("value"in I)return I.value;var ne=I.get;return void 0===ne?void 0:ne.call(V)},K=c(4),q=function R(k){return k&&k.__esModule?k:{default:k}}(c(27));function S(k,A){if(!(k instanceof A))throw new TypeError("Cannot call a class as a function")}function E(k,A){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!A||"object"!=typeof A&&"function"!=typeof A?k:A}var T=["height","width"],C=function(k){function A(){return S(this,A),E(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return function _(k,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function, not "+typeof A);k.prototype=Object.create(A&&A.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(k,A):k.__proto__=A)}(A,k),ee(A,[{key:"format",value:function(V,I){T.indexOf(V)>-1?I?this.domNode.setAttribute(V,I):this.domNode.removeAttribute(V):F(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"format",this).call(this,V,I)}}],[{key:"create",value:function(V){var I=F(A.__proto__||Object.getPrototypeOf(A),"create",this).call(this,V);return I.setAttribute("frameborder","0"),I.setAttribute("allowfullscreen",!0),I.setAttribute("src",this.sanitize(V)),I}},{key:"formats",value:function(V){return T.reduce(function(I,L){return V.hasAttribute(L)&&(I[L]=V.getAttribute(L)),I},{})}},{key:"sanitize",value:function(V){return q.default.sanitize(V)}},{key:"value",value:function(V){return V.getAttribute("src")}}]),A}(K.BlockEmbed);C.blotName="video",C.className="ql-video",C.tagName="IFRAME",M.default=C},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.FormulaBlot=void 0;var ee=function(){function V(I,L){for(var ne=0;ne<L.length;ne++){var J=L[ne];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(I,J.key,J)}}return function(I,L,ne){return L&&V(I.prototype,L),ne&&V(I,ne),I}}(),F=function V(I,L,ne){null===I&&(I=Function.prototype);var J=Object.getOwnPropertyDescriptor(I,L);if(void 0===J){var Z=Object.getPrototypeOf(I);return null===Z?void 0:V(Z,L,ne)}if("value"in J)return J.value;var X=J.get;return void 0===X?void 0:X.call(ne)},j=_(c(35)),R=_(c(5)),E=_(c(9));function _(V){return V&&V.__esModule?V:{default:V}}function T(V,I){if(!(V instanceof I))throw new TypeError("Cannot call a class as a function")}function C(V,I){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!I||"object"!=typeof I&&"function"!=typeof I?V:I}function k(V,I){if("function"!=typeof I&&null!==I)throw new TypeError("Super expression must either be null or a function, not "+typeof I);V.prototype=Object.create(I&&I.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(V,I):V.__proto__=I)}var A=function(V){function I(){return T(this,I),C(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return k(I,V),ee(I,null,[{key:"create",value:function(ne){var J=F(I.__proto__||Object.getPrototypeOf(I),"create",this).call(this,ne);return"string"==typeof ne&&(window.katex.render(ne,J,{throwOnError:!1,errorColor:"#f00"}),J.setAttribute("data-value",ne)),J}},{key:"value",value:function(ne){return ne.getAttribute("data-value")}}]),I}(j.default);A.blotName="formula",A.className="ql-formula",A.tagName="SPAN";var x=function(V){function I(){T(this,I);var L=C(this,(I.__proto__||Object.getPrototypeOf(I)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return L}return k(I,V),ee(I,null,[{key:"register",value:function(){R.default.register(A,!0)}}]),I}(E.default);M.FormulaBlot=A,M.default=x},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.CodeToken=M.CodeBlock=void 0;var ee=function(){function ne(J,Z){for(var X=0;X<Z.length;X++){var $=Z[X];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(J,$.key,$)}}return function(J,Z,X){return Z&&ne(J.prototype,Z),X&&ne(J,X),J}}(),F=function ne(J,Z,X){null===J&&(J=Function.prototype);var $=Object.getOwnPropertyDescriptor(J,Z);if(void 0===$){var H=Object.getPrototypeOf(J);return null===H?void 0:ne(H,Z,X)}if("value"in $)return $.value;var W=$.get;return void 0===W?void 0:W.call(X)},j=C(c(0)),R=C(c(5)),E=C(c(9));function C(ne){return ne&&ne.__esModule?ne:{default:ne}}function k(ne,J){if(!(ne instanceof J))throw new TypeError("Cannot call a class as a function")}function A(ne,J){if(!ne)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!J||"object"!=typeof J&&"function"!=typeof J?ne:J}function x(ne,J){if("function"!=typeof J&&null!==J)throw new TypeError("Super expression must either be null or a function, not "+typeof J);ne.prototype=Object.create(J&&J.prototype,{constructor:{value:ne,enumerable:!1,writable:!0,configurable:!0}}),J&&(Object.setPrototypeOf?Object.setPrototypeOf(ne,J):ne.__proto__=J)}var V=function(ne){function J(){return k(this,J),A(this,(J.__proto__||Object.getPrototypeOf(J)).apply(this,arguments))}return x(J,ne),ee(J,[{key:"replaceWith",value:function(X){this.domNode.textContent=this.domNode.textContent,this.attach(),F(J.prototype.__proto__||Object.getPrototypeOf(J.prototype),"replaceWith",this).call(this,X)}},{key:"highlight",value:function(X){var $=this.domNode.textContent;this.cachedText!==$&&(($.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=X($),this.domNode.normalize(),this.attach()),this.cachedText=$)}}]),J}(C(c(13)).default);V.className="ql-syntax";var I=new j.default.Attributor.Class("token","hljs",{scope:j.default.Scope.INLINE}),L=function(ne){function J(Z,X){k(this,J);var $=A(this,(J.__proto__||Object.getPrototypeOf(J)).call(this,Z,X));if("function"!=typeof $.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var H=null;return $.quill.on(R.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(H),H=setTimeout(function(){$.highlight(),H=null},$.options.interval)}),$.highlight(),$}return x(J,ne),ee(J,null,[{key:"register",value:function(){R.default.register(I,!0),R.default.register(V,!0)}}]),ee(J,[{key:"highlight",value:function(){var X=this;if(!this.quill.selection.composing){this.quill.update(R.default.sources.USER);var $=this.quill.getSelection();this.quill.scroll.descendants(V).forEach(function(H){H.highlight(X.options.highlight)}),this.quill.update(R.default.sources.SILENT),null!=$&&this.quill.setSelection($,R.default.sources.SILENT)}}}]),J}(E.default);L.DEFAULTS={highlight:null==window.hljs?null:function(ne){return window.hljs.highlightAuto(ne).value},interval:1e3},M.CodeBlock=V,M.CodeToken=I,M.default=L},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(ge,M){ge.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(ge,M){ge.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(ge,M){ge.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(ge,M){ge.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(ge,M){ge.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(ge,M,c){"use strict";Object.defineProperty(M,"__esModule",{value:!0}),M.default=M.BubbleTooltip=void 0;var ee=function J(Z,X,$){null===Z&&(Z=Function.prototype);var H=Object.getOwnPropertyDescriptor(Z,X);if(void 0===H){var W=Object.getPrototypeOf(Z);return null===W?void 0:J(W,X,$)}if("value"in H)return H.value;var B=H.get;return void 0===B?void 0:B.call($)},F=function(){function J(Z,X){for(var $=0;$<X.length;$++){var H=X[$];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(Z,H.key,H)}}return function(Z,X,$){return X&&J(Z.prototype,X),$&&J(Z,$),Z}}(),j=k(c(3)),R=k(c(8)),S=c(43),E=k(S),_=c(15),C=k(c(41));function k(J){return J&&J.__esModule?J:{default:J}}function A(J,Z){if(!(J instanceof Z))throw new TypeError("Cannot call a class as a function")}function x(J,Z){if(!J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Z||"object"!=typeof Z&&"function"!=typeof Z?J:Z}function V(J,Z){if("function"!=typeof Z&&null!==Z)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);J.prototype=Object.create(Z&&Z.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(J,Z):J.__proto__=Z)}var I=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],L=function(J){function Z(X,$){A(this,Z),null!=$.modules.toolbar&&null==$.modules.toolbar.container&&($.modules.toolbar.container=I);var H=x(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,X,$));return H.quill.container.classList.add("ql-bubble"),H}return V(Z,J),F(Z,[{key:"extendToolbar",value:function($){this.tooltip=new ne(this.quill,this.options.bounds),this.tooltip.root.appendChild($.container),this.buildButtons([].slice.call($.container.querySelectorAll("button")),C.default),this.buildPickers([].slice.call($.container.querySelectorAll("select")),C.default)}}]),Z}(E.default);L.DEFAULTS=(0,j.default)(!0,{},E.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(Z){Z?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var ne=function(J){function Z(X,$){A(this,Z);var H=x(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,X,$));return H.quill.on(R.default.events.EDITOR_CHANGE,function(W,B,te,Y){if(W===R.default.events.SELECTION_CHANGE)if(null!=B&&B.length>0&&Y===R.default.sources.USER){H.show(),H.root.style.left="0px",H.root.style.width="",H.root.style.width=H.root.offsetWidth+"px";var de=H.quill.getLines(B.index,B.length);if(1===de.length)H.position(H.quill.getBounds(B));else{var ue=de[de.length-1],be=H.quill.getIndex(ue),ce=Math.min(ue.length()-1,B.index+B.length-be),le=H.quill.getBounds(new _.Range(be,ce));H.position(le)}}else document.activeElement!==H.textbox&&H.quill.hasFocus()&&H.hide()}),H}return V(Z,J),F(Z,[{key:"listen",value:function(){var $=this;ee(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){$.root.classList.remove("ql-editing")}),this.quill.on(R.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!$.root.classList.contains("ql-hidden")){var H=$.quill.getSelection();null!=H&&$.position($.quill.getBounds(H))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function($){var H=ee(Z.prototype.__proto__||Object.getPrototypeOf(Z.prototype),"position",this).call(this,$),W=this.root.querySelector(".ql-tooltip-arrow");if(W.style.marginLeft="",0===H)return H;W.style.marginLeft=-1*H-W.offsetWidth/2+"px"}}]),Z}(S.BaseTooltip);ne.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),M.BubbleTooltip=ne,M.default=L},function(ge,M,c){ge.exports=c(63)}]).default},8306:(ht,ge,M)=>{"use strict";M.d(ge,{y:()=>_});var c=M(2961),ee=M(727),F=M(8822),K=M(4671);var R=M(2416),S=M(576),E=M(2806);let _=(()=>{class A{constructor(V){V&&(this._subscribe=V)}lift(V){const I=new A;return I.source=this,I.operator=V,I}subscribe(V,I,L){const ne=function k(A){return A&&A instanceof c.Lv||function C(A){return A&&(0,S.m)(A.next)&&(0,S.m)(A.error)&&(0,S.m)(A.complete)}(A)&&(0,ee.Nn)(A)}(V)?V:new c.Hp(V,I,L);return(0,E.x)(()=>{const{operator:J,source:Z}=this;ne.add(J?J.call(ne,Z):Z?this._subscribe(ne):this._trySubscribe(ne))}),ne}_trySubscribe(V){try{return this._subscribe(V)}catch(I){V.error(I)}}forEach(V,I){return new(I=T(I))((L,ne)=>{const J=new c.Hp({next:Z=>{try{V(Z)}catch(X){ne(X),J.unsubscribe()}},error:ne,complete:L});this.subscribe(J)})}_subscribe(V){var I;return null===(I=this.source)||void 0===I?void 0:I.subscribe(V)}[F.L](){return this}pipe(...V){return function q(A){return 0===A.length?K.y:1===A.length?A[0]:function(V){return A.reduce((I,L)=>L(I),V)}}(V)(this)}toPromise(V){return new(V=T(V))((I,L)=>{let ne;this.subscribe(J=>ne=J,J=>L(J),()=>I(ne))})}}return A.create=x=>new A(x),A})();function T(A){var x;return null!==(x=null!=A?A:R.v.Promise)&&void 0!==x?x:Promise}},7579:(ht,ge,M)=>{"use strict";M.d(ge,{x:()=>R});var c=M(8306),ee=M(727);const K=(0,M(3888).d)(E=>function(){E(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var j=M(8737),q=M(2806);let R=(()=>{class E extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(T){const C=new S(this,this);return C.operator=T,C}_throwIfClosed(){if(this.closed)throw new K}next(T){(0,q.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const C of this.currentObservers)C.next(T)}})}error(T){(0,q.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=T;const{observers:C}=this;for(;C.length;)C.shift().error(T)}})}complete(){(0,q.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:T}=this;for(;T.length;)T.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var T;return(null===(T=this.observers)||void 0===T?void 0:T.length)>0}_trySubscribe(T){return this._throwIfClosed(),super._trySubscribe(T)}_subscribe(T){return this._throwIfClosed(),this._checkFinalizedStatuses(T),this._innerSubscribe(T)}_innerSubscribe(T){const{hasError:C,isStopped:k,observers:A}=this;return C||k?ee.Lc:(this.currentObservers=null,A.push(T),new ee.w0(()=>{this.currentObservers=null,(0,j.P)(A,T)}))}_checkFinalizedStatuses(T){const{hasError:C,thrownError:k,isStopped:A}=this;C?T.error(k):A&&T.complete()}asObservable(){const T=new c.y;return T.source=this,T}}return E.create=(_,T)=>new S(_,T),E})();class S extends R{constructor(_,T){super(),this.destination=_,this.source=T}next(_){var T,C;null===(C=null===(T=this.destination)||void 0===T?void 0:T.next)||void 0===C||C.call(T,_)}error(_){var T,C;null===(C=null===(T=this.destination)||void 0===T?void 0:T.error)||void 0===C||C.call(T,_)}complete(){var _,T;null===(T=null===(_=this.destination)||void 0===_?void 0:_.complete)||void 0===T||T.call(_)}_subscribe(_){var T,C;return null!==(C=null===(T=this.source)||void 0===T?void 0:T.subscribe(_))&&void 0!==C?C:ee.Lc}}},2961:(ht,ge,M)=>{"use strict";M.d(ge,{Hp:()=>V,Lv:()=>C});var c=M(576),ee=M(727),F=M(2416),K=M(7849);function j(){}const q=E("C",void 0,void 0);function E(Z,X,$){return{kind:Z,value:X,error:$}}var _=M(3410),T=M(2806);class C extends ee.w0{constructor(X){super(),this.isStopped=!1,X?(this.destination=X,(0,ee.Nn)(X)&&X.add(this)):this.destination=J}static create(X,$,H){return new V(X,$,H)}next(X){this.isStopped?ne(function S(Z){return E("N",Z,void 0)}(X),this):this._next(X)}error(X){this.isStopped?ne(function R(Z){return E("E",void 0,Z)}(X),this):(this.isStopped=!0,this._error(X))}complete(){this.isStopped?ne(q,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(X){this.destination.next(X)}_error(X){try{this.destination.error(X)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const k=Function.prototype.bind;function A(Z,X){return k.call(Z,X)}class x{constructor(X){this.partialObserver=X}next(X){const{partialObserver:$}=this;if($.next)try{$.next(X)}catch(H){I(H)}}error(X){const{partialObserver:$}=this;if($.error)try{$.error(X)}catch(H){I(H)}else I(X)}complete(){const{partialObserver:X}=this;if(X.complete)try{X.complete()}catch($){I($)}}}class V extends C{constructor(X,$,H){let W;if(super(),(0,c.m)(X)||!X)W={next:null!=X?X:void 0,error:null!=$?$:void 0,complete:null!=H?H:void 0};else{let B;this&&F.v.useDeprecatedNextContext?(B=Object.create(X),B.unsubscribe=()=>this.unsubscribe(),W={next:X.next&&A(X.next,B),error:X.error&&A(X.error,B),complete:X.complete&&A(X.complete,B)}):W=X}this.destination=new x(W)}}function I(Z){F.v.useDeprecatedSynchronousErrorHandling?(0,T.O)(Z):(0,K.h)(Z)}function ne(Z,X){const{onStoppedNotification:$}=F.v;$&&_.z.setTimeout(()=>$(Z,X))}const J={closed:!0,next:j,error:function L(Z){throw Z},complete:j}},727:(ht,ge,M)=>{"use strict";M.d(ge,{Lc:()=>q,w0:()=>j,Nn:()=>R});var c=M(576);const F=(0,M(3888).d)(E=>function(T){E(this),this.message=T?`${T.length} errors occurred during unsubscription:\n${T.map((C,k)=>`${k+1}) ${C.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=T});var K=M(8737);class j{constructor(_){this.initialTeardown=_,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let _;if(!this.closed){this.closed=!0;const{_parentage:T}=this;if(T)if(this._parentage=null,Array.isArray(T))for(const A of T)A.remove(this);else T.remove(this);const{initialTeardown:C}=this;if((0,c.m)(C))try{C()}catch(A){_=A instanceof F?A.errors:[A]}const{_finalizers:k}=this;if(k){this._finalizers=null;for(const A of k)try{S(A)}catch(x){_=null!=_?_:[],x instanceof F?_=[..._,...x.errors]:_.push(x)}}if(_)throw new F(_)}}add(_){var T;if(_&&_!==this)if(this.closed)S(_);else{if(_ instanceof j){if(_.closed||_._hasParent(this))return;_._addParent(this)}(this._finalizers=null!==(T=this._finalizers)&&void 0!==T?T:[]).push(_)}}_hasParent(_){const{_parentage:T}=this;return T===_||Array.isArray(T)&&T.includes(_)}_addParent(_){const{_parentage:T}=this;this._parentage=Array.isArray(T)?(T.push(_),T):T?[T,_]:_}_removeParent(_){const{_parentage:T}=this;T===_?this._parentage=null:Array.isArray(T)&&(0,K.P)(T,_)}remove(_){const{_finalizers:T}=this;T&&(0,K.P)(T,_),_ instanceof j&&_._removeParent(this)}}j.EMPTY=(()=>{const E=new j;return E.closed=!0,E})();const q=j.EMPTY;function R(E){return E instanceof j||E&&"closed"in E&&(0,c.m)(E.remove)&&(0,c.m)(E.add)&&(0,c.m)(E.unsubscribe)}function S(E){(0,c.m)(E)?E():E.unsubscribe()}},2416:(ht,ge,M)=>{"use strict";M.d(ge,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ht,ge,M)=>{"use strict";M.d(ge,{E:()=>ee});const ee=new(M(8306).y)(j=>j.complete())},8996:(ht,ge,M)=>{"use strict";M.d(ge,{D:()=>X});var c=M(8421),ee=M(5363),F=M(9468),q=M(8306),S=M(2202),E=M(576),_=M(9672);function C($,H){if(!$)throw new Error("Iterable cannot be null");return new q.y(W=>{(0,_.f)(W,H,()=>{const B=$[Symbol.asyncIterator]();(0,_.f)(W,H,()=>{B.next().then(te=>{te.done?W.complete():W.next(te.value)})},0,!0)})})}var k=M(3670),A=M(8239),x=M(1144),V=M(6495),I=M(2206),L=M(4532),ne=M(3260);function X($,H){return H?function Z($,H){if(null!=$){if((0,k.c)($))return function K($,H){return(0,c.Xf)($).pipe((0,F.R)(H),(0,ee.Q)(H))}($,H);if((0,x.z)($))return function R($,H){return new q.y(W=>{let B=0;return H.schedule(function(){B===$.length?W.complete():(W.next($[B++]),W.closed||this.schedule())})})}($,H);if((0,A.t)($))return function j($,H){return(0,c.Xf)($).pipe((0,F.R)(H),(0,ee.Q)(H))}($,H);if((0,I.D)($))return C($,H);if((0,V.T)($))return function T($,H){return new q.y(W=>{let B;return(0,_.f)(W,H,()=>{B=$[S.h](),(0,_.f)(W,H,()=>{let te,Y;try{({value:te,done:Y}=B.next())}catch(de){return void W.error(de)}Y?W.complete():W.next(te)},0,!0)}),()=>(0,E.m)(null==B?void 0:B.return)&&B.return()})}($,H);if((0,ne.L)($))return function J($,H){return C((0,ne.Q)($),H)}($,H)}throw(0,L.z)($)}($,H):(0,c.Xf)($)}},8421:(ht,ge,M)=>{"use strict";M.d(ge,{Xf:()=>k});var c=M(655),ee=M(1144),F=M(8239),K=M(8306),j=M(3670),q=M(2206),R=M(4532),S=M(6495),E=M(3260),_=M(576),T=M(7849),C=M(8822);function k(Z){if(Z instanceof K.y)return Z;if(null!=Z){if((0,j.c)(Z))return function A(Z){return new K.y(X=>{const $=Z[C.L]();if((0,_.m)($.subscribe))return $.subscribe(X);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Z);if((0,ee.z)(Z))return function x(Z){return new K.y(X=>{for(let $=0;$<Z.length&&!X.closed;$++)X.next(Z[$]);X.complete()})}(Z);if((0,F.t)(Z))return function V(Z){return new K.y(X=>{Z.then($=>{X.closed||(X.next($),X.complete())},$=>X.error($)).then(null,T.h)})}(Z);if((0,q.D)(Z))return L(Z);if((0,S.T)(Z))return function I(Z){return new K.y(X=>{for(const $ of Z)if(X.next($),X.closed)return;X.complete()})}(Z);if((0,E.L)(Z))return function ne(Z){return L((0,E.Q)(Z))}(Z)}throw(0,R.z)(Z)}function L(Z){return new K.y(X=>{(function J(Z,X){var $,H,W,B;return(0,c.mG)(this,void 0,void 0,function*(){try{for($=(0,c.KL)(Z);!(H=yield $.next()).done;)if(X.next(H.value),X.closed)return}catch(te){W={error:te}}finally{try{H&&!H.done&&(B=$.return)&&(yield B.call($))}finally{if(W)throw W.error}}X.complete()})})(Z,X).catch($=>X.error($))})}},6451:(ht,ge,M)=>{"use strict";M.d(ge,{T:()=>q});var c=M(8189),ee=M(8421),F=M(515),K=M(7669),j=M(8996);function q(...R){const S=(0,K.yG)(R),E=(0,K._6)(R,1/0),_=R;return _.length?1===_.length?(0,ee.Xf)(_[0]):(0,c.J)(E)((0,j.D)(_,S)):F.E}},5403:(ht,ge,M)=>{"use strict";M.d(ge,{x:()=>ee});var c=M(2961);function ee(K,j,q,R,S){return new F(K,j,q,R,S)}class F extends c.Lv{constructor(j,q,R,S,E,_){super(j),this.onFinalize=E,this.shouldUnsubscribe=_,this._next=q?function(T){try{q(T)}catch(C){j.error(C)}}:super._next,this._error=S?function(T){try{S(T)}catch(C){j.error(C)}finally{this.unsubscribe()}}:super._error,this._complete=R?function(){try{R()}catch(T){j.error(T)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var j;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:q}=this;super.unsubscribe(),!q&&(null===(j=this.onFinalize)||void 0===j||j.call(this))}}}},4004:(ht,ge,M)=>{"use strict";M.d(ge,{U:()=>F});var c=M(4482),ee=M(5403);function F(K,j){return(0,c.e)((q,R)=>{let S=0;q.subscribe((0,ee.x)(R,E=>{R.next(K.call(j,E,S++))}))})}},8189:(ht,ge,M)=>{"use strict";M.d(ge,{J:()=>F});var c=M(5577),ee=M(4671);function F(K=1/0){return(0,c.z)(ee.y,K)}},5577:(ht,ge,M)=>{"use strict";M.d(ge,{z:()=>S});var c=M(4004),ee=M(8421),F=M(4482),K=M(9672),j=M(5403),R=M(576);function S(E,_,T=1/0){return(0,R.m)(_)?S((C,k)=>(0,c.U)((A,x)=>_(C,A,k,x))((0,ee.Xf)(E(C,k))),T):("number"==typeof _&&(T=_),(0,F.e)((C,k)=>function q(E,_,T,C,k,A,x,V){const I=[];let L=0,ne=0,J=!1;const Z=()=>{J&&!I.length&&!L&&_.complete()},X=H=>L<C?$(H):I.push(H),$=H=>{A&&_.next(H),L++;let W=!1;(0,ee.Xf)(T(H,ne++)).subscribe((0,j.x)(_,B=>{null==k||k(B),A?X(B):_.next(B)},()=>{W=!0},void 0,()=>{if(W)try{for(L--;I.length&&L<C;){const B=I.shift();x?(0,K.f)(_,x,()=>$(B)):$(B)}Z()}catch(B){_.error(B)}}))};return E.subscribe((0,j.x)(_,X,()=>{J=!0,Z()})),()=>{null==V||V()}}(C,k,E,T)))}},5363:(ht,ge,M)=>{"use strict";M.d(ge,{Q:()=>K});var c=M(9672),ee=M(4482),F=M(5403);function K(j,q=0){return(0,ee.e)((R,S)=>{R.subscribe((0,F.x)(S,E=>(0,c.f)(S,j,()=>S.next(E),q),()=>(0,c.f)(S,j,()=>S.complete(),q),E=>(0,c.f)(S,j,()=>S.error(E),q)))})}},3099:(ht,ge,M)=>{"use strict";M.d(ge,{B:()=>j});var c=M(8421),ee=M(7579),F=M(2961),K=M(4482);function j(R={}){const{connector:S=(()=>new ee.x),resetOnError:E=!0,resetOnComplete:_=!0,resetOnRefCountZero:T=!0}=R;return C=>{let k,A,x,V=0,I=!1,L=!1;const ne=()=>{null==A||A.unsubscribe(),A=void 0},J=()=>{ne(),k=x=void 0,I=L=!1},Z=()=>{const X=k;J(),null==X||X.unsubscribe()};return(0,K.e)((X,$)=>{V++,!L&&!I&&ne();const H=x=null!=x?x:S();$.add(()=>{V--,0===V&&!L&&!I&&(A=q(Z,T))}),H.subscribe($),!k&&V>0&&(k=new F.Hp({next:W=>H.next(W),error:W=>{L=!0,ne(),A=q(J,E,W),H.error(W)},complete:()=>{I=!0,ne(),A=q(J,_),H.complete()}}),(0,c.Xf)(X).subscribe(k))})(C)}}function q(R,S,...E){if(!0===S)return void R();if(!1===S)return;const _=new F.Hp({next:()=>{_.unsubscribe(),R()}});return S(...E).subscribe(_)}},9468:(ht,ge,M)=>{"use strict";M.d(ge,{R:()=>ee});var c=M(4482);function ee(F,K=0){return(0,c.e)((j,q)=>{q.add(F.schedule(()=>j.subscribe(q),K))})}},8505:(ht,ge,M)=>{"use strict";M.d(ge,{b:()=>j});var c=M(576),ee=M(4482),F=M(5403),K=M(4671);function j(q,R,S){const E=(0,c.m)(q)||R||S?{next:q,error:R,complete:S}:q;return E?(0,ee.e)((_,T)=>{var C;null===(C=E.subscribe)||void 0===C||C.call(E);let k=!0;_.subscribe((0,F.x)(T,A=>{var x;null===(x=E.next)||void 0===x||x.call(E,A),T.next(A)},()=>{var A;k=!1,null===(A=E.complete)||void 0===A||A.call(E),T.complete()},A=>{var x;k=!1,null===(x=E.error)||void 0===x||x.call(E,A),T.error(A)},()=>{var A,x;k&&(null===(A=E.unsubscribe)||void 0===A||A.call(E)),null===(x=E.finalize)||void 0===x||x.call(E)}))}):K.y}},4408:(ht,ge,M)=>{"use strict";M.d(ge,{o:()=>j});var c=M(727);class ee extends c.w0{constructor(R,S){super()}schedule(R,S=0){return this}}const F={setInterval(q,R,...S){const{delegate:E}=F;return(null==E?void 0:E.setInterval)?E.setInterval(q,R,...S):setInterval(q,R,...S)},clearInterval(q){const{delegate:R}=F;return((null==R?void 0:R.clearInterval)||clearInterval)(q)},delegate:void 0};var K=M(8737);class j extends ee{constructor(R,S){super(R,S),this.scheduler=R,this.work=S,this.pending=!1}schedule(R,S=0){if(this.closed)return this;this.state=R;const E=this.id,_=this.scheduler;return null!=E&&(this.id=this.recycleAsyncId(_,E,S)),this.pending=!0,this.delay=S,this.id=this.id||this.requestAsyncId(_,this.id,S),this}requestAsyncId(R,S,E=0){return F.setInterval(R.flush.bind(R,this),E)}recycleAsyncId(R,S,E=0){if(null!=E&&this.delay===E&&!1===this.pending)return S;F.clearInterval(S)}execute(R,S){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const E=this._execute(R,S);if(E)return E;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(R,S){let _,E=!1;try{this.work(R)}catch(T){E=!0,_=T||new Error("Scheduled action threw falsy error")}if(E)return this.unsubscribe(),_}unsubscribe(){if(!this.closed){const{id:R,scheduler:S}=this,{actions:E}=S;this.work=this.state=this.scheduler=null,this.pending=!1,(0,K.P)(E,this),null!=R&&(this.id=this.recycleAsyncId(S,R,null)),this.delay=null,super.unsubscribe()}}}},7565:(ht,ge,M)=>{"use strict";M.d(ge,{v:()=>F});var c=M(6063);class ee{constructor(j,q=ee.now){this.schedulerActionCtor=j,this.now=q}schedule(j,q=0,R){return new this.schedulerActionCtor(this,j).schedule(R,q)}}ee.now=c.l.now;class F extends ee{constructor(j,q=ee.now){super(j,q),this.actions=[],this._active=!1,this._scheduled=void 0}flush(j){const{actions:q}=this;if(this._active)return void q.push(j);let R;this._active=!0;do{if(R=j.execute(j.state,j.delay))break}while(j=q.shift());if(this._active=!1,R){for(;j=q.shift();)j.unsubscribe();throw R}}}},4986:(ht,ge,M)=>{"use strict";M.d(ge,{z:()=>F});var c=M(4408);const F=new(M(7565).v)(c.o)},6063:(ht,ge,M)=>{"use strict";M.d(ge,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(ht,ge,M)=>{"use strict";M.d(ge,{z:()=>c});const c={setTimeout(ee,F,...K){const{delegate:j}=c;return(null==j?void 0:j.setTimeout)?j.setTimeout(ee,F,...K):setTimeout(ee,F,...K)},clearTimeout(ee){const{delegate:F}=c;return((null==F?void 0:F.clearTimeout)||clearTimeout)(ee)},delegate:void 0}},2202:(ht,ge,M)=>{"use strict";M.d(ge,{h:()=>ee});const ee=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ht,ge,M)=>{"use strict";M.d(ge,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ht,ge,M)=>{"use strict";M.d(ge,{_6:()=>q,jO:()=>K,yG:()=>j});var c=M(576);function F(R){return R[R.length-1]}function K(R){return(0,c.m)(F(R))?R.pop():void 0}function j(R){return function ee(R){return R&&(0,c.m)(R.schedule)}(F(R))?R.pop():void 0}function q(R,S){return"number"==typeof F(R)?R.pop():S}},8737:(ht,ge,M)=>{"use strict";function c(ee,F){if(ee){const K=ee.indexOf(F);0<=K&&ee.splice(K,1)}}M.d(ge,{P:()=>c})},3888:(ht,ge,M)=>{"use strict";function c(ee){const K=ee(j=>{Error.call(j),j.stack=(new Error).stack});return K.prototype=Object.create(Error.prototype),K.prototype.constructor=K,K}M.d(ge,{d:()=>c})},2806:(ht,ge,M)=>{"use strict";M.d(ge,{x:()=>F,O:()=>K});var c=M(2416);let ee=null;function F(j){if(c.v.useDeprecatedSynchronousErrorHandling){const q=!ee;if(q&&(ee={errorThrown:!1,error:null}),j(),q){const{errorThrown:R,error:S}=ee;if(ee=null,R)throw S}}else j()}function K(j){c.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=j)}},9672:(ht,ge,M)=>{"use strict";function c(ee,F,K,j=0,q=!1){const R=F.schedule(function(){K(),q?ee.add(this.schedule(null,j)):this.unsubscribe()},j);if(ee.add(R),!q)return R}M.d(ge,{f:()=>c})},4671:(ht,ge,M)=>{"use strict";function c(ee){return ee}M.d(ge,{y:()=>c})},1144:(ht,ge,M)=>{"use strict";M.d(ge,{z:()=>c});const c=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(ht,ge,M)=>{"use strict";M.d(ge,{D:()=>ee});var c=M(576);function ee(F){return Symbol.asyncIterator&&(0,c.m)(null==F?void 0:F[Symbol.asyncIterator])}},576:(ht,ge,M)=>{"use strict";function c(ee){return"function"==typeof ee}M.d(ge,{m:()=>c})},3670:(ht,ge,M)=>{"use strict";M.d(ge,{c:()=>F});var c=M(8822),ee=M(576);function F(K){return(0,ee.m)(K[c.L])}},6495:(ht,ge,M)=>{"use strict";M.d(ge,{T:()=>F});var c=M(2202),ee=M(576);function F(K){return(0,ee.m)(null==K?void 0:K[c.h])}},8239:(ht,ge,M)=>{"use strict";M.d(ge,{t:()=>ee});var c=M(576);function ee(F){return(0,c.m)(null==F?void 0:F.then)}},3260:(ht,ge,M)=>{"use strict";M.d(ge,{Q:()=>F,L:()=>K});var c=M(655),ee=M(576);function F(j){return(0,c.FC)(this,arguments,function*(){const R=j.getReader();try{for(;;){const{value:S,done:E}=yield(0,c.qq)(R.read());if(E)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(S)}}finally{R.releaseLock()}})}function K(j){return(0,ee.m)(null==j?void 0:j.getReader)}},4482:(ht,ge,M)=>{"use strict";M.d(ge,{A:()=>ee,e:()=>F});var c=M(576);function ee(K){return(0,c.m)(null==K?void 0:K.lift)}function F(K){return j=>{if(ee(j))return j.lift(function(q){try{return K(q,this)}catch(R){this.error(R)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(ht,ge,M)=>{"use strict";M.d(ge,{h:()=>F});var c=M(2416),ee=M(3410);function F(K){ee.z.setTimeout(()=>{const{onUnhandledError:j}=c.v;if(!j)throw K;j(K)})}},4532:(ht,ge,M)=>{"use strict";function c(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(ge,{z:()=>c})},655:(ht,ge,M)=>{"use strict";function K(Y,de){var ue={};for(var be in Y)Object.prototype.hasOwnProperty.call(Y,be)&&de.indexOf(be)<0&&(ue[be]=Y[be]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var ce=0;for(be=Object.getOwnPropertySymbols(Y);ce<be.length;ce++)de.indexOf(be[ce])<0&&Object.prototype.propertyIsEnumerable.call(Y,be[ce])&&(ue[be[ce]]=Y[be[ce]])}return ue}function S(Y,de,ue,be){return new(ue||(ue=Promise))(function(le,ie){function fe(xe){try{_e(be.next(xe))}catch(he){ie(he)}}function me(xe){try{_e(be.throw(xe))}catch(he){ie(he)}}function _e(xe){xe.done?le(xe.value):function ce(le){return le instanceof ue?le:new ue(function(ie){ie(le)})}(xe.value).then(fe,me)}_e((be=be.apply(Y,de||[])).next())})}function I(Y){return this instanceof I?(this.v=Y,this):new I(Y)}function L(Y,de,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,be=ue.apply(Y,de||[]),le=[];return ce={},ie("next"),ie("throw"),ie("return"),ce[Symbol.asyncIterator]=function(){return this},ce;function ie(De){be[De]&&(ce[De]=function(ke){return new Promise(function(Re,Be){le.push([De,ke,Re,Be])>1||fe(De,ke)})})}function fe(De,ke){try{!function me(De){De.value instanceof I?Promise.resolve(De.value.v).then(_e,xe):he(le[0][2],De)}(be[De](ke))}catch(Re){he(le[0][3],Re)}}function _e(De){fe("next",De)}function xe(De){fe("throw",De)}function he(De,ke){De(ke),le.shift(),le.length&&fe(le[0][0],le[0][1])}}function J(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,de=Y[Symbol.asyncIterator];return de?de.call(Y):(Y=function C(Y){var de="function"==typeof Symbol&&Symbol.iterator,ue=de&&Y[de],be=0;if(ue)return ue.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&be>=Y.length&&(Y=void 0),{value:Y&&Y[be++],done:!Y}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),ue={},be("next"),be("throw"),be("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function be(le){ue[le]=Y[le]&&function(ie){return new Promise(function(fe,me){!function ce(le,ie,fe,me){Promise.resolve(me).then(function(_e){le({value:_e,done:fe})},ie)}(fe,me,(ie=Y[le](ie)).done,ie.value)})}}}M.d(ge,{_T:()=>K,mG:()=>S,qq:()=>I,FC:()=>L,KL:()=>J})},5e3:(ht,ge,M)=>{"use strict";M.d(ge,{deG:()=>Mh,tb:()=>yi,AFp:()=>Dc,ip1:()=>ow,CZH:()=>O_,hGG:()=>JD,z2F:()=>ey,sBO:()=>GD,Sil:()=>LD,_Vd:()=>nl,EJc:()=>Jm,SBq:()=>tu,qLn:()=>md,vpe:()=>Ji,tBr:()=>Ot,XFs:()=>He,OlP:()=>Sn,zs3:()=>Es,ZZ4:()=>K_,aQg:()=>oy,soG:()=>Qm,YKP:()=>Ur,h0i:()=>yc,PXZ:()=>hw,R0b:()=>Ss,FiY:()=>Ft,Lbi:()=>N_,g9A:()=>sw,Qsj:()=>Rm,FYo:()=>nu,JOm:()=>G,q3G:()=>an,tp0:()=>Mn,Rgc:()=>bc,dDg:()=>V_,q4F:()=>d_,GfV:()=>ru,s_b:()=>ap,ifc:()=>St,eFA:()=>al,G48:()=>HD,Gpc:()=>T,X6Q:()=>Sc,_c5:()=>Tw,VLi:()=>jr,c2e:()=>k_,zSh:()=>qg,wAp:()=>kt,vHH:()=>x,EiD:()=>pd,mCW:()=>fo,qzn:()=>ho,JVY:()=>Ll,pB0:()=>Fl,eBb:()=>Uh,L6k:()=>Kp,LAX:()=>Ty,cg1:()=>wm,kL8:()=>e_,yhl:()=>Nu,dqk:()=>tn,sIi:()=>bf,CqO:()=>Ov,QGY:()=>xv,F4k:()=>Yu,RDi:()=>ml,AaK:()=>S,z3N:()=>ys,qOj:()=>Md,TTD:()=>Li,_Bn:()=>_r,xp6:()=>rf,uIk:()=>wf,ekj:()=>Is,Suo:()=>WE,Xpm:()=>rt,lG2:()=>Os,Yz7:()=>ke,cJS:()=>Be,oAB:()=>Yt,Yjl:()=>ca,Y36:()=>Zu,_UZ:()=>nm,qZA:()=>Sf,TgZ:()=>Ku,EpF:()=>Gb,n5z:()=>$i,LFG:()=>U,$8M:()=>Gs,$Z:()=>em,NdJ:()=>Vd,CRH:()=>b_,oxw:()=>Ud,Hsn:()=>sm,F$t:()=>kv,Q6J:()=>Af,MGl:()=>Of,iGM:()=>zE,CHM:()=>fu,oJD:()=>zh,LSH:()=>Lu,kYT:()=>Hr,Akn:()=>Zi,YNc:()=>Kg,_uU:()=>nE,Oqu:()=>qv,hij:()=>Bf});var c=M(7579),ee=M(727),F=M(8306),K=M(6451),j=M(3099);function q(i){for(let o in i)if(i[o]===q)return o;throw Error("Could not find renamed property on target object.")}function R(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function S(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(S).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function E(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const _=q({__forward_ref__:q});function T(i){return i.__forward_ref__=T,i.toString=function(){return S(this())},i}function C(i){return k(i)?i():i}function k(i){return"function"==typeof i&&i.hasOwnProperty(_)&&i.__forward_ref__===T}class x extends Error{constructor(o,a){super(function V(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function I(i){return"string"==typeof i?i:null==i?"":String(i)}function L(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():I(i)}function X(i,o){const a=o?` in ${o}`:"";throw new x(-201,`No provider for ${L(i)} found${a}`)}function me(i,o){null==i&&function _e(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function ke(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Be(i){return{providers:i.providers||[],imports:i.imports||[]}}function Qe(i){return wt(i,In)||wt(i,je)}function wt(i,o){return i.hasOwnProperty(o)?i[o]:null}function Bt(i){return i&&(i.hasOwnProperty(yn)||i.hasOwnProperty(qe))?i[yn]:null}const In=q({\u0275prov:q}),yn=q({\u0275inj:q}),je=q({ngInjectableDef:q}),qe=q({ngInjectorDef:q});var He=(()=>((He=He||{})[He.Default=0]="Default",He[He.Host=1]="Host",He[He.Self=2]="Self",He[He.SkipSelf=4]="SkipSelf",He[He.Optional=8]="Optional",He))();let it;function vt(i){const o=it;return it=i,o}function Rt(i,o,a){const l=Qe(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&He.Optional?null:void 0!==o?o:void X(S(i),"Injector")}function sn(i){return{toString:i}.toString()}var fn=(()=>((fn=fn||{})[fn.OnPush=0]="OnPush",fn[fn.Default=1]="Default",fn))(),St=(()=>{return(i=St||(St={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",St;var i})();const ft="undefined"!=typeof globalThis&&globalThis,Lt="undefined"!=typeof window&&window,Er="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,tn=ft||"undefined"!=typeof global&&global||Lt||Er,Mr={},Ct=[],To=q({\u0275cmp:q}),Ee=q({\u0275dir:q}),Ae=q({\u0275pipe:q}),ve=q({\u0275mod:q}),Te=q({\u0275fac:q}),Ce=q({__NG_ELEMENT_ID__:q});let Ke=0;function rt(i){return sn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===fn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||Ct,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||St.Emulated,id:"c",styles:i.styles||Ct,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,p=i.features,v=i.pipes;return l.id+=Ke++,l.inputs=Oi(i.inputs,a),l.outputs=Oi(i.outputs),p&&p.forEach(D=>D(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(vn):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(un):null,l})}function vn(i){return Qn(i)||function Nr(i){return i[Ee]||null}(i)}function un(i){return function no(i){return i[Ae]||null}(i)}const or={};function Yt(i){return sn(()=>{const o={type:i.type,bootstrap:i.bootstrap||Ct,declarations:i.declarations||Ct,imports:i.imports||Ct,exports:i.exports||Ct,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(or[i.id]=i.type),o})}function Hr(i,o){return sn(()=>{const a=Jn(i,!0);a.declarations=o.declarations||Ct,a.imports=o.imports||Ct,a.exports=o.exports||Ct})}function Oi(i,o){if(null==i)return Mr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,o&&(o[d]=p)}return a}const Os=rt;function ca(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Qn(i){return i[To]||null}function Jn(i,o){const a=i[ve]||null;if(!a&&!0===o)throw new Error(`Type ${S(i)} does not have '\u0275mod' property.`);return a}function Wr(i){return Array.isArray(i)&&"object"==typeof i[1]}function ki(i){return Array.isArray(i)&&!0===i[1]}function lu(i){return 0!=(8&i.flags)}function Lc(i){return 2==(2&i.flags)}function Ri(i){return 1==(1&i.flags)}function Pi(i){return null!==i.template}function hl(i){return 0!=(512&i[2])}function Dr(i,o){return i.hasOwnProperty(Te)?i[Te]:null}class Qo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Li(){return ks}function ks(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ch),$c}function $c(){const i=Jo(this),o=null==i?void 0:i.current;if(o){const a=i.previous;if(a===Mr)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Ch(i,o,a,l){const d=Jo(i)||function Rs(i,o){return i[Gc]=o}(i,{previous:Mr,current:null}),p=d.current||(d.current={}),v=d.previous,D=this.declaredInputs[a],N=v[D];p[D]=new Qo(N&&N.currentValue,o,v===Mr),i[l]=o}Li.ngInherit=!0;const Gc="__ngSimpleChanges__";function Jo(i){return i[Gc]||null}let Ps;function ml(i){Ps=i}function Fi(){return void 0!==Ps?Ps:"undefined"!=typeof document?document:void 0}function En(i){return!!i.listen}const ga={createRenderer:(i,o)=>Fi()};function pn(i){for(;Array.isArray(i);)i=i[0];return i}function No(i,o){return pn(o[i])}function fr(i,o){return pn(o[i.index])}function On(i,o){return i.data[o]}function pr(i,o){const a=o[i];return Wr(a)?a:a[0]}function ts(i){return 4==(4&i[2])}function io(i){return 128==(128&i[2])}function Ei(i,o){return null==o?null:i[o]}function Ui(i){i[18]=0}function Ls(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const xt={lFrame:Zc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function _a(){return xt.bindingsEnabled}function Ze(){return xt.lFrame.lView}function Qt(){return xt.lFrame.tView}function fu(i){return xt.lFrame.contextLView=i,i[8]}function An(){let i=Vs();for(;null!==i&&64===i.type;)i=i.parent;return i}function Vs(){return xt.lFrame.currentTNode}function oi(i,o){const a=xt.lFrame;a.currentTNode=i,a.isParent=o}function ba(){return xt.lFrame.isParent}function El(){xt.lFrame.isParent=!1}function Ea(){return xt.isInCheckNoChangesMode}function gu(i){xt.isInCheckNoChangesMode=i}function ko(){return xt.lFrame.bindingIndex++}function wi(i){const o=xt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function Il(i,o){const a=xt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ia(o)}function Ia(i){xt.lFrame.currentDirectiveIndex=i}function Dl(){return xt.lFrame.currentQueryIndex}function Ta(i){xt.lFrame.currentQueryIndex=i}function Up(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function Tl(i,o,a){if(a&He.SkipSelf){let d=o,p=i;for(;!(d=d.parent,null!==d||a&He.Host||(d=Up(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,i=p}const l=xt.lFrame=Ca();return l.currentTNode=o,l.lView=i,!0}function Us(i){const o=Ca(),a=i[1];xt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Ca(){const i=xt.lFrame,o=null===i?null:i.child;return null===o?Zc(i):o}function Zc(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Bs(){const i=xt.lFrame;return xt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Kc=Bs;function js(){const i=Bs();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function ar(){return xt.lFrame.selectedIndex}function ji(i){xt.lFrame.selectedIndex=i}function kn(){const i=xt.lFrame;return On(i.tView,i.selectedIndex)}function Qc(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:D,ngAfterViewInit:N,ngAfterViewChecked:z,ngOnDestroy:re}=p;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),D&&((i.contentHooks||(i.contentHooks=[])).push(a,D),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,D)),N&&(i.viewHooks||(i.viewHooks=[])).push(-a,N),z&&((i.viewHooks||(i.viewHooks=[])).push(a,z),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,z)),null!=re&&(i.destroyHooks||(i.destroyHooks=[])).push(a,re)}}function Aa(i,o,a){ur(i,o,3,a)}function so(i,o,a,l){(3&i[2])===a&&ur(i,o,a,l)}function qs(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function ur(i,o,a,l){const p=null!=l?l:-1,v=o.length-1;let D=0;for(let N=void 0!==l?65535&i[18]:0;N<v;N++)if("number"==typeof o[N+1]){if(D=o[N],null!=l&&D>=l)break}else o[N]<0&&(i[18]+=65536),(D<p||-1==p)&&(Oh(i,a,o,N),i[18]=(4294901760&i[18])+N+2),N++}function Oh(i,o,a,l){const d=a[l]<0,p=a[l+1],D=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(D)}finally{}}}else try{p.call(D)}finally{}}class vu{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function yt(i,o,a){const l=En(i);let d=0;for(;d<a.length;){const p=a[d];if("number"==typeof p){if(0!==p)break;d++;const v=a[d++],D=a[d++],N=a[d++];l?i.setAttribute(o,D,N,v):o.setAttributeNS(v,D,N)}else{const v=p,D=a[++d];ai(v)?l&&i.setProperty(o,v,D):l?i.setAttribute(o,v,D):o.setAttribute(v,D),d++}}return d}function si(i){return 3===i||4===i||6===i}function ai(i){return 64===i.charCodeAt(0)}function zn(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Al(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function Al(i,o,a,l,d){let p=0,v=i.length;if(-1===o)v=-1;else for(;p<i.length;){const D=i[p++];if("number"==typeof D){if(D===o){v=-1;break}if(D>o){v=p-1;break}}}for(;p<i.length;){const D=i[p];if("number"==typeof D)break;if(D===a){if(null===l)return void(null!==d&&(i[p+1]=d));if(l===i[p+1])return void(i[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==v&&(i.splice(v,0,o),p=v+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==d&&i.splice(p++,0,d)}function Xc(i){return-1!==i}function qi(i){return 32767&i}function Dn(i,o){let a=function Sl(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let xa=!0;function Ii(i){const o=xa;return xa=i,o}let td=0;function Wn(i,o){const a=Eu(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,Po(l.data,i),Po(o,null),Po(l.blueprint,null));const d=Hi(i,o),p=i.injectorIndex;if(Xc(d)){const v=qi(d),D=Dn(d,o),N=D[1].data;for(let z=0;z<8;z++)o[p+z]=D[v+z]|N[v+z]}return o[p+8]=d,p}function Po(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Eu(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Hi(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const p=d[1],v=p.type;if(l=2===v?p.declTNode:1===v?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Lo(i,o,a){!function Oa(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Ce)&&(l=a[Ce]),null==l&&(l=a[Ce]=td++);const d=255&l;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function is(i,o,a){if(a&He.Optional)return i;X(o,"NodeInjector")}function Na(i,o,a,l){if(a&He.Optional&&void 0===l&&(l=null),0==(a&(He.Self|He.Host))){const d=i[9],p=vt(void 0);try{return d?d.get(o,l,a&He.Optional):Rt(o,l,a&He.Optional)}finally{vt(p)}}return is(l,o,a)}function os(i,o,a,l=He.Default,d){if(null!==i){const p=function Vo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Ce)?i[Ce]:void 0;return"number"==typeof o?o>=0?255&o:ka:o}(a);if("function"==typeof p){if(!Tl(o,i,l))return l&He.Host?is(d,a,l):Na(o,a,l,d);try{const v=p(l);if(null!=v||l&He.Optional)return v;X(a)}finally{Kc()}}else if("number"==typeof p){let v=null,D=Eu(i,o),N=-1,z=l&He.Host?o[16][6]:null;for((-1===D||l&He.SkipSelf)&&(N=-1===D?Hi(i,o):o[D+8],-1!==N&&lr(l,!1)?(v=o[1],D=qi(N),o=Dn(N,o)):D=-1);-1!==D;){const re=o[1];if(Uo(p,D,re.data)){const pe=Ra(D,o,a,v,l,z);if(pe!==ss)return pe}N=o[D+8],-1!==N&&lr(l,o[1].data[D+8]===z)&&Uo(p,D,o)?(v=re,D=qi(N),o=Dn(N,o)):D=-1}}}return Na(o,a,l,d)}const ss={};function ka(){return new as(An(),Ze())}function Ra(i,o,a,l,d,p){const v=o[1],D=v.data[i+8],re=Fo(D,v,a,null==l?Lc(D)&&xa:l!=v&&0!=(3&D.type),d&He.Host&&p===D);return null!==re?$s(o,v,re,D):ss}function Fo(i,o,a,l,d){const p=i.providerIndexes,v=o.data,D=1048575&p,N=i.directiveStart,re=p>>20,we=d?D+re:i.directiveEnd;for(let Ne=l?D:D+re;Ne<we;Ne++){const $e=v[Ne];if(Ne<N&&a===$e||Ne>=N&&$e.type===a)return Ne}if(d){const Ne=v[N];if(Ne&&Pi(Ne)&&Ne.type===a)return N}return null}function $s(i,o,a,l){let d=i[a];const p=o.data;if(function Jc(i){return i instanceof vu}(d)){const v=d;v.resolving&&function ne(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new x(-200,`Circular dependency in DI detected for ${i}${a}`)}(L(p[a]));const D=Ii(v.canSeeViewProviders);v.resolving=!0;const N=v.injectImpl?vt(v.injectImpl):null;Tl(i,l,He.Default);try{d=i[a]=v.factory(void 0,p,i,l),o.firstCreatePass&&a>=l.directiveStart&&function Bp(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const v=ks(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==N&&vt(N),Ii(D),v.resolving=!1,Kc()}}return d}function Uo(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function lr(i,o){return!(i&He.Self||i&He.Host&&o)}class as{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return os(this._tNode,this._lView,o,l,a)}}function $i(i){return sn(()=>{const o=i.prototype.constructor,a=o[Te]||Bn(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const p=d[Te]||Bn(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Bn(i){return k(i)?()=>{const o=Bn(C(i));return o&&o()}:Dr(i)}function Gs(i){return function Ma(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(si(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(An(),i)}const Bo="__parameters__";function jn(i,o,a){return sn(()=>{const l=function Tr(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const v=new d(...p);return D.annotation=v,D;function D(N,z,re){const pe=N.hasOwnProperty(Bo)?N[Bo]:Object.defineProperty(N,Bo,{value:[]})[Bo];for(;pe.length<=re;)pe.push(null);return(pe[re]=pe[re]||[]).push(v),N}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Sn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=ke({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Mh=new Sn("AnalyzeForEntryComponents");function ui(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),ui(l,o)):o!==i&&o.push(l)}return o}function li(i,o){i.forEach(a=>Array.isArray(a)?li(a,o):o(a))}function Ws(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function ls(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Tu(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}function qn(i,o,a){let l=Ci(i,o);return l>=0?i[1|l]=a:(l=~l,function cs(i,o,a,l){let d=i.length;if(d==o)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function qo(i,o){const a=Ci(i,o);if(a>=0)return i[1|a]}function Ci(i,o){return function Su(i,o,a){let l=0,d=i.length>>a;for(;d!==l;){const p=l+(d-l>>1),v=i[p<<a];if(o===v)return p<<a;v>o?d=p:l=p+1}return~(d<<a)}(i,o,1)}const Va={},ci="__NG_DI_FLAG__",ds="ngTempTokenPath",Rh=/\n/gm,Ua="__source",Rl=q({provide:String,useValue:q});let Ho;function hs(i){const o=Ho;return Ho=i,o}function O(i,o=He.Default){if(void 0===Ho)throw new x(203,"");return null===Ho?Rt(i,void 0,o):Ho.get(i,o&He.Optional?null:void 0,o)}function U(i,o=He.Default){return(function ze(){return it}()||O)(C(i),o)}const ye=U;function Oe(i){const o=[];for(let a=0;a<i.length;a++){const l=C(i[a]);if(Array.isArray(l)){if(0===l.length)throw new x(900,"");let d,p=He.Default;for(let v=0;v<l.length;v++){const D=l[v],N=Ye(D);"number"==typeof N?-1===N?d=D.token:p|=N:d=D}o.push(U(d,p))}else o.push(U(l))}return o}function Pe(i,o){return i[ci]=o,i.prototype[ci]=o,i}function Ye(i){return i[ci]}const Ot=Pe(jn("Inject",i=>({token:i})),-1),Ft=Pe(jn("Optional"),8),Mn=Pe(jn("SkipSelf"),4);let gs,ud;function Ba(i){var o;return(null===(o=function ad(){if(void 0===gs&&(gs=null,tn.trustedTypes))try{gs=tn.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return gs}())||void 0===o?void 0:o.createHTML(i))||i}function Lh(i){var o;return(null===(o=function Zs(){if(void 0===ud&&(ud=null,tn.trustedTypes))try{ud=tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return ud}())||void 0===o?void 0:o.createHTML(i))||i}class ms{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Vh extends ms{getTypeName(){return"HTML"}}class Zp extends ms{getTypeName(){return"Style"}}class Pl extends ms{getTypeName(){return"Script"}}class Iy extends ms{getTypeName(){return"URL"}}class Dy extends ms{getTypeName(){return"ResourceURL"}}function ys(i){return i instanceof ms?i.changingThisBreaksApplicationSecurity:i}function ho(i,o){const a=Nu(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}function Nu(i){return i instanceof ms&&i.getTypeName()||null}function Ll(i){return new Vh(i)}function Kp(i){return new Zp(i)}function Uh(i){return new Pl(i)}function Ty(i){return new Iy(i)}function Fl(i){return new Dy(i)}class Qp{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(Ba(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class Jp{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Ba(o),a;const l=this.inertDocument.createElement("body");return l.innerHTML=Ba(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(o){const a=o.attributes;for(let d=a.length-1;0<d;d--){const v=a.item(d).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&o.removeAttribute(v)}let l=o.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const cd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,eg=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function fo(i){return(i=String(i)).match(cd)||i.match(eg)?i:"unsafe:"+i}function po(i){const o={};for(const a of i.split(","))o[a]=!0;return o}function qa(...i){const o={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(o[l]=!0);return o}const tg=po("area,br,col,hr,img,wbr"),dd=po("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),hd=po("rp,rt"),jh=qa(tg,qa(dd,po("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),qa(hd,po("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),qa(hd,dd)),Vl=po("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),qh=po("srcset"),Ru=qa(Vl,qh,po("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),po("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Cy=po("script,style,template");class Pu{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!jh.hasOwnProperty(a))return this.sanitizedSomething=!0,!Cy.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=o.attributes;for(let d=0;d<l.length;d++){const p=l.item(d),v=p.name,D=v.toLowerCase();if(!Ru.hasOwnProperty(D)){this.sanitizedSomething=!0;continue}let N=p.value;Vl[D]&&(N=fo(N)),qh[D]&&(i=N,N=(i=String(i)).split(",").map(o=>fo(o.trim())).join(", ")),this.buf.push(" ",v,'="',Hh(N),'"')}var i;return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();jh.hasOwnProperty(a)&&!tg.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(Hh(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const Ul=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ay=/([^\#-~ |!])/g;function Hh(i){return i.replace(/&/g,"&amp;").replace(Ul,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Ay,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $a;function pd(i,o){let a=null;try{$a=$a||function Yp(i){const o=new Jp(i);return function Xp(){try{return!!(new window.DOMParser).parseFromString(Ba(""),"text/html")}catch(i){return!1}}()?new Qp(o):o}(i);let l=o?String(o):"";a=$a.getInertBodyElement(l);let d=5,p=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=p,p=a.innerHTML,a=$a.getInertBodyElement(l)}while(l!==p);return Ba((new Pu).sanitizeChildren($h(a)||a))}finally{if(a){const l=$h(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function $h(i){return"content"in i&&function Gh(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var an=(()=>((an=an||{})[an.NONE=0]="NONE",an[an.HTML=1]="HTML",an[an.STYLE=2]="STYLE",an[an.SCRIPT=3]="SCRIPT",an[an.URL=4]="URL",an[an.RESOURCE_URL=5]="RESOURCE_URL",an))();function zh(i){const o=Ys();return o?Lh(o.sanitize(an.HTML,i)||""):ho(i,"HTML")?Lh(ys(i)):pd(Fi(),I(i))}function Lu(i){const o=Ys();return o?o.sanitize(an.URL,i)||"":ho(i,"URL")?ys(i):fo(I(i))}function Ys(){const i=Ze();return i&&i[12]}const Zh="__ngContext__";function gr(i,o){i[Zh]=o}function gd(i){const o=function za(i){return i[Zh]||null}(i);return o?Array.isArray(o)?o:o.lView:null}function hi(i){return i.ngOriginalError}function Py(i,...o){i.error(...o)}class md{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function lg(i){return i&&i.ngErrorLogger||Py}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&hi(o);for(;a&&hi(a);)a=hi(a);return a||null}}const Fy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(tn))();function go(i){return i instanceof Function?i():i}var G=(()=>((G=G||{})[G.Important=1]="Important",G[G.DashCase=2]="DashCase",G))();function Se(i,o){return undefined(i,o)}function dt(i){const o=i[3];return ki(o)?o[3]:o}function Ln(i){return ql(i[13])}function pi(i){return ql(i[4])}function ql(i){for(;null!==i&&!ki(i);)i=i[4];return i}function Qs(i,o,a,l,d){if(null!=l){let p,v=!1;ki(l)?p=l:Wr(l)&&(v=!0,l=l[0]);const D=pn(l);0===i&&null!==a?null==d?Hy(o,a,D):mo(o,a,D,d||null,!0):1===i&&null!==a?mo(o,a,D,d||null,!0):2===i?function Wy(i,o,a){const l=nf(i,o);l&&function tI(i,o,a,l){En(i)?i.removeChild(o,a,l):o.removeChild(a)}(i,l,o,a)}(o,D,v):3===i&&o.destroyNode(D),null!=p&&function S0(i,o,a,l,d){const p=a[7];p!==pn(a)&&Qs(o,i,l,p,d);for(let D=10;D<a.length;D++){const N=a[D];yg(N[1],N,i,o,l,p)}}(o,i,p,a,d)}}function _d(i,o,a){if(En(i))return i.createElement(o,a);{const l=null!==a?function gl(i){const o=i.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(o):i.createElementNS(l,o)}}function Uy(i,o){const a=i[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Ls(d,-1)),a.splice(l,1)}function By(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&Uy(d,l),o>0&&(i[a-1][4]=l[4]);const p=ls(i,10+o);!function Sr(i,o){yg(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=p[19];null!==v&&v.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function jy(i,o){if(!(256&o[2])){const a=o[11];En(a)&&a.destroyNode&&yg(i,o,a,3,null,null),function bd(i){let o=i[13];if(!o)return qy(i[1],i);for(;o;){let a=null;if(Wr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)Wr(o)&&qy(o[1],o),o=o[3];null===o&&(o=i),Wr(o)&&qy(o[1],o),a=o&&o[4]}o=a}}(o)}}function qy(i,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function E0(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof vu)){const p=a[l+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const D=d[p[v]],N=p[v+1];try{N.call(D)}finally{}}else try{p.call(d)}finally{}}}}(i,o),function b0(i,o){const a=i.cleanup,l=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const v=a[p+1],D="function"==typeof v?v(o):pn(o[v]),N=l[d=a[p+2]],z=a[p+3];"boolean"==typeof z?D.removeEventListener(a[p],N,z):z>=0?l[d=z]():l[d=-z].unsubscribe(),p+=2}else{const v=l[d=a[p+1]];a[p].call(v)}if(null!==l){for(let p=d+1;p<l.length;p++)l[p]();o[7]=null}}(i,o),1===o[1].type&&En(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&ki(o[3])){a!==o[3]&&Uy(a,o);const l=o[19];null!==l&&l.detachView(i)}}}function gg(i,o,a){return function eI(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===St.None||d===St.Emulated)return null}return fr(l,a)}(i,o.parent,a)}function mo(i,o,a,l,d){En(i)?i.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function Hy(i,o,a){En(i)?i.appendChild(o,a):o.appendChild(a)}function w0(i,o,a,l,d){null!==l?mo(i,o,a,l,d):Hy(i,o,a)}function nf(i,o){return En(i)?i.parentNode(o):o.parentNode}function I0(i,o,a){return $y(i,o,a)}let $y=function D0(i,o,a){return 40&i.type?fr(i,a):null};function mg(i,o,a,l){const d=gg(i,l,o),p=o[11],D=I0(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let N=0;N<a.length;N++)w0(p,d,a[N],D,!1);else w0(p,d,a,D,!1)}function Ed(i,o){if(null!==o){const a=o.type;if(3&a)return fr(o,i);if(4&a)return zy(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return Ed(i,l);{const d=i[o.index];return ki(d)?zy(-1,d):pn(d)}}if(32&a)return Se(o,i)()||pn(i[o.index]);{const l=C0(i,o);return null!==l?Array.isArray(l)?l[0]:Ed(dt(i[16]),l):Ed(i,o.next)}}return null}function C0(i,o){return null!==o?i[16][6].projection[o.projection]:null}function zy(i,o){const a=10+i+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Ed(l,d)}return o[7]}function Zy(i,o,a,l,d,p,v){for(;null!=a;){const D=l[a.index],N=a.type;if(v&&0===o&&(D&&gr(pn(D),l),a.flags|=4),64!=(64&a.flags))if(8&N)Zy(i,o,a.child,l,d,p,!1),Qs(o,i,d,D,p);else if(32&N){const z=Se(a,l);let re;for(;re=z();)Qs(o,i,d,re,p);Qs(o,i,d,D,p)}else 16&N?A0(i,o,l,a,d,p):Qs(o,i,d,D,p);a=v?a.projectionNext:a.next}}function yg(i,o,a,l,d,p){Zy(a,l,i.firstChild,o,d,p,!1)}function A0(i,o,a,l,d,p){const v=a[16],N=v[6].projection[l.projection];if(Array.isArray(N))for(let z=0;z<N.length;z++)Qs(o,i,d,N[z],p);else Zy(i,o,N,v[3],d,p,!0)}function Go(i,o,a){En(i)?i.setAttribute(o,"style",a):o.style.cssText=a}function Ky(i,o,a){En(i)?""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a):o.className=a}function Yy(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||i.charCodeAt(d+p)<=32)return d}a=d+1}}const x0="ng-template";function iI(i,o,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==Yy(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function wd(i){return 4===i.type&&i.value!==x0}function ju(i,o,a){return o===(4!==i.type||a?i.value:x0)}function O0(i,o,a){let l=4;const d=i.attrs||[],p=function N0(i){for(let o=0;o<i.length;o++)if(si(i[o]))return o;return i.length}(d);let v=!1;for(let D=0;D<o.length;D++){const N=o[D];if("number"!=typeof N){if(!v)if(4&l){if(l=2|1&l,""!==N&&!ju(i,N,a)||""===N&&1===o.length){if(xn(l))return!1;v=!0}}else{const z=8&l?N:o[++D];if(8&l&&null!==i.attrs){if(!iI(i.attrs,z,a)){if(xn(l))return!1;v=!0}continue}const pe=qu(8&l?"class":N,d,wd(i),a);if(-1===pe){if(xn(l))return!1;v=!0;continue}if(""!==z){let we;we=pe>p?"":d[pe+1].toLowerCase();const Ne=8&l?we:null;if(Ne&&-1!==Yy(Ne,z,0)||2&l&&z!==we){if(xn(l))return!1;v=!0}}}}else{if(!v&&!xn(l)&&!xn(N))return!1;if(v&&xn(N))continue;v=!1,l=N|1&l}}return xn(l)||v}function xn(i){return 0==(1&i)}function qu(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let p=!1;for(;d<o.length;){const v=o[d];if(v===i)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let D=o[++d];for(;"string"==typeof D;)D=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function k0(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function M0(i,o,a=!1){for(let l=0;l<o.length;l++)if(O0(i,o[l],a))return!0;return!1}function R0(i,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(i.length===l.length){for(let d=0;d<i.length;d++)if(i[d]!==l[d])continue e;return!0}}return!1}function Qy(i,o){return i?":not("+o.trim()+")":o}function P0(i){let o=i[0],a=1,l=2,d="",p=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&l){const D=i[++a];d+="["+v+(D.length>0?'="'+D+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!xn(v)&&(o+=Qy(p,d),d=""),l=v,p=p||!xn(l);a++}return""!==d&&(o+=Qy(p,d)),o}const Ht={};function rf(i){Jy(Qt(),Ze(),ar()+i,Ea())}function Jy(i,o,a,l){if(!l)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&Aa(o,p,a)}else{const p=i.preOrderHooks;null!==p&&so(o,p,0,a)}ji(a)}function of(i,o){return i<<17|o<<2}function zo(i){return i>>17&32767}function vg(i){return 2|i}function _s(i){return(131068&i)>>2}function _g(i,o){return-131069&i|o<<2}function Eg(i){return 1|i}function Z0(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],p=a[l+1];if(-1!==p){const v=i.data[p];Ta(d),v.contentQueries(2,o[p],p)}}}function Gl(i,o,a,l,d,p,v,D,N,z){const re=o.blueprint.slice();return re[0]=d,re[2]=140|l,Ui(re),re[3]=re[15]=i,re[8]=a,re[10]=v||i&&i[10],re[11]=D||i&&i[11],re[12]=N||i&&i[12]||null,re[9]=z||i&&i[9]||null,re[6]=p,re[16]=2==o.type?i[16]:re,re}function Dd(i,o,a,l,d){let p=i.data[o];if(null===p)p=function Sg(i,o,a,l,d){const p=Vs(),v=ba(),N=i.data[o]=function Mg(i,o,a,l,d,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=N),null!==p&&(v?null==p.child&&null!==N.parent&&(p.child=N):null===p.next&&(p.next=N)),N}(i,o,a,l,d),function wl(){return xt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const v=function ns(){const i=xt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return oi(p,!0),p}function Hu(i,o,a,l){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function zl(i,o,a){Us(o);try{const l=i.viewQuery;null!==l&&Bg(1,l,a);const d=i.template;null!==d&&Td(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Z0(i,o),i.staticViewQueries&&Bg(2,i.viewQuery,a);const p=i.components;null!==p&&function eA(i,o){for(let a=0;a<o.length;a++)pI(i,o[a])}(o,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,js()}}function cf(i,o,a,l){const d=o[2];if(256==(256&d))return;Us(o);const p=Ea();try{Ui(o),function wa(i){return xt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Td(i,o,a,2,l);const v=3==(3&d);if(!p)if(v){const z=i.preOrderCheckHooks;null!==z&&Aa(o,z,null)}else{const z=i.preOrderHooks;null!==z&&so(o,z,0,null),qs(o,0)}if(function uv(i){for(let o=Ln(i);null!==o;o=pi(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],p=d[3];0==(1024&d[2])&&Ls(p,1),d[2]|=1024}}}(o),function cb(i){for(let o=Ln(i);null!==o;o=pi(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];io(l)&&cf(d,l,d.template,l[8])}}(o),null!==i.contentQueries&&Z0(i,o),!p)if(v){const z=i.contentCheckHooks;null!==z&&Aa(o,z)}else{const z=i.contentHooks;null!==z&&so(o,z,1),qs(o,1)}!function XC(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)ji(~d);else{const p=d,v=a[++l],D=a[++l];Il(v,p),D(2,o[p])}}}finally{ji(-1)}}(i,o);const D=i.components;null!==D&&function K0(i,o){for(let a=0;a<o.length;a++)fI(i,o[a])}(o,D);const N=i.viewQuery;if(null!==N&&Bg(2,N,l),!p)if(v){const z=i.viewCheckHooks;null!==z&&Aa(o,z)}else{const z=i.viewHooks;null!==z&&so(o,z,2),qs(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Ls(o[3],-1))}finally{js()}}function iv(i,o,a,l){const d=o[10],p=!Ea(),v=ts(o);try{p&&!v&&d.begin&&d.begin(),v&&zl(i,o,l),cf(i,o,a,l)}finally{p&&!v&&d.end&&d.end()}}function Td(i,o,a,l,d){const p=ar(),v=2&l;try{ji(-1),v&&o.length>20&&Jy(i,o,20,Ea()),a(l,d)}finally{ji(p)}}function $u(i,o,a){!_a()||(function nA(i,o,a,l){const d=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Wn(a,o),gr(l,o);const v=a.initialInputs;for(let D=d;D<p;D++){const N=i.data[D],z=Pi(N);z&&Lg(o,a,N);const re=$s(o,i,D,a);gr(re,o),null!==v&&ub(0,D-d,re,N,0,v),z&&(pr(a.index,o)[8]=re)}}(i,o,a,fr(a,o)),128==(128&a.flags)&&function rA(i,o,a){const l=a.directiveStart,d=a.directiveEnd,v=a.index,D=function yu(){return xt.lFrame.currentDirectiveIndex}();try{ji(v);for(let N=l;N<d;N++){const z=i.data[N],re=o[N];Ia(N),(null!==z.hostBindings||0!==z.hostVars||null!==z.hostAttrs)&&tb(z,re)}}finally{ji(-1),Ia(D)}}(i,o,a))}function Wl(i,o,a=fr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const v=l[p+1],D=-1===v?a(o,i):i[v];i[d++]=D}}}function Y0(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Cd(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function Cd(i,o,a,l,d,p,v,D,N,z){const re=20+l,pe=re+d,we=function Q0(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:Ht);return a}(re,pe),Ne="function"==typeof z?z():z;return we[1]={type:i,blueprint:we,template:a,queries:null,viewQuery:D,declTNode:o,data:we.slice().fill(null,re),bindingStartIndex:re,expandoStartIndex:pe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:N,consts:Ne,incompleteFirstPass:!1}}function Og(i,o,a,l){const d=jg(o);null===a?d.push(l):(d.push(a),i.firstCreatePass&&hb(i).push(l,d.length-1))}function ov(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function Wi(i,o,a,l,d,p,v,D){const N=fr(o,a);let re,z=o.inputs;!D&&null!=z&&(re=z[l])?(yI(i,a,re,l,d),Lc(o)&&function sv(i,o){const a=pr(o,i);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function X0(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=v?v(d,o.value||"",l):d,En(p)?p.setProperty(N,l,d):ai(l)||(N.setProperty?N.setProperty(l,d):N[l]=d))}function Pg(i,o,a,l){let d=!1;if(_a()){const p=function nb(i,o,a){const l=i.directiveRegistry;let d=null;if(l)for(let p=0;p<l.length;p++){const v=l[p];M0(a,v.selectors,!1)&&(d||(d=[]),Lo(Wn(a,o),i,v.type),Pi(v)?(rb(i,a),d.unshift(v)):d.push(v))}return d}(i,o,a),v=null===l?null:{"":-1};if(null!==p){d=!0,ff(a,i.data.length,p.length);for(let re=0;re<p.length;re++){const pe=p[re];pe.providersResolver&&pe.providersResolver(pe)}let D=!1,N=!1,z=Hu(i,o,p.length,null);for(let re=0;re<p.length;re++){const pe=p[re];a.mergedAttrs=zn(a.mergedAttrs,pe.hostAttrs),sb(i,a,o,z,pe),ob(z,pe,v),null!==pe.contentQueries&&(a.flags|=8),(null!==pe.hostBindings||null!==pe.hostAttrs||0!==pe.hostVars)&&(a.flags|=128);const we=pe.type.prototype;!D&&(we.ngOnChanges||we.ngOnInit||we.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),D=!0),!N&&(we.ngOnChanges||we.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),N=!0),z++}!function J0(i,o){const l=o.directiveEnd,d=i.data,p=o.attrs,v=[];let D=null,N=null;for(let z=o.directiveStart;z<l;z++){const re=d[z],pe=re.inputs,we=null===p||wd(o)?null:dI(pe,p);v.push(we),D=ov(pe,z,D),N=ov(re.outputs,z,N)}null!==D&&(D.hasOwnProperty("class")&&(o.flags|=16),D.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=D,o.outputs=N}(i,a)}v&&function ib(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new x(-301,!1);l.push(o[d],p)}}}(a,l,v)}return a.mergedAttrs=zn(a.mergedAttrs,a.attrs),d}function cI(i,o,a,l,d,p){const v=p.hostBindings;if(v){let D=i.hostBindingOpCodes;null===D&&(D=i.hostBindingOpCodes=[]);const N=~o.index;(function tA(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(D)!=N&&D.push(N),D.push(l,d,v)}}function tb(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function rb(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function ob(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;Pi(o)&&(a[""]=i)}}function ff(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function sb(i,o,a,l,d){i.data[l]=d;const p=d.factory||(d.factory=Dr(d.type)),v=new vu(p,Pi(d),null);i.blueprint[l]=v,a[l]=v,cI(i,o,0,l,Hu(i,a,d.hostVars,Ht),d)}function Lg(i,o,a){const l=fr(o,i),d=Y0(a),p=i[10],v=Vg(i,Gl(i,d,null,a.onPush?64:16,l,o,p,p.createRenderer(l,a),null,null));i[o.index]=v}function Xs(i,o,a,l,d,p){const v=fr(i,o);!function ab(i,o,a,l,d,p,v){if(null==p)En(i)?i.removeAttribute(o,d,a):o.removeAttribute(d);else{const D=null==v?I(p):v(p,l||"",d);En(i)?i.setAttribute(o,d,D,a):a?o.setAttributeNS(a,d,D):o.setAttribute(d,D)}}(o[11],v,p,i.value,a,l,d)}function ub(i,o,a,l,d,p){const v=p[o];if(null!==v){const D=l.setInput;for(let N=0;N<v.length;){const z=v[N++],re=v[N++],pe=v[N++];null!==D?l.setInput(a,pe,z,re):a[re]=pe}}}function dI(i,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function lb(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}function fI(i,o){const a=pr(o,i);if(io(a)){const l=a[1];80&a[2]?cf(l,a,l.template,a[8]):a[5]>0&&Fg(a)}}function Fg(i){for(let l=Ln(i);null!==l;l=pi(l))for(let d=10;d<l.length;d++){const p=l[d];if(1024&p[2]){const v=p[1];cf(v,p,v.template,p[8])}else p[5]>0&&Fg(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=pr(a[l],i);io(d)&&d[5]>0&&Fg(d)}}function pI(i,o){const a=pr(o,i),l=a[1];(function Ad(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),zl(l,a,a[8])}function Vg(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function pf(i){for(;i;){i[2]|=64;const o=dt(i);if(hl(i)&&!o)return i;i=o}return null}function Ug(i,o,a){const l=o[10];l.begin&&l.begin();try{cf(i,o,i.template,a)}catch(d){throw fb(o,d),d}finally{l.end&&l.end()}}function db(i){!function gf(i){for(let o=0;o<i.components.length;o++){const a=i.components[o],l=gd(a),d=l[1];iv(d,l,d.template,a)}}(i[8])}function Bg(i,o,a){Ta(0),o(i,a)}const yf=(()=>Promise.resolve(null))();function jg(i){return i[7]||(i[7]=[])}function hb(i){return i.cleanup||(i.cleanup=[])}function fb(i,o){const a=i[9],l=a?a.get(md,null):null;l&&l.handleError(o)}function yI(i,o,a,l,d){for(let p=0;p<a.length;){const v=a[p++],D=a[p++],N=o[v],z=i.data[v];null!==z.setInput?z.setInput(N,d,l,D):N[D]=d}}function bs(i,o,a){const l=No(o,i);!function vd(i,o,a){En(i)?i.setValue(o,a):o.textContent=a}(i[11],l,a)}function Sd(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const D=o[v];"number"==typeof D?p=D:1==p?d=E(d,D):2==p&&(l=E(l,D+": "+o[++v]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const Ya=new Sn("INJECTOR",-1);class gb{get(o,a=Va){if(a===Va){const l=new Error(`NullInjectorError: No provider for ${S(o)}!`);throw l.name="NullInjectorError",l}return a}}const qg=new Sn("Set Injector scope."),vf={},mb={};let cv;function yb(){return void 0===cv&&(cv=new gb),cv}function xd(i,o=null,a=null,l){const d=dv(i,o,a,l);return d._resolveInjectorDefTypes(),d}function dv(i,o=null,a=null,l){return new bI(i,a,o||yb(),l)}class bI{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&li(a,D=>this.processProvider(D,o,a)),li([o],D=>this.processInjectorType(D,[],p)),this.records.set(Ya,Zl(void 0,this));const v=this.records.get(qg);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:S(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Va,l=He.Default){this.assertNotDestroyed();const d=hs(this),p=vt(void 0);try{if(!(l&He.SkipSelf)){let D=this.records.get(o);if(void 0===D){const N=function Ib(i){return"function"==typeof i||"object"==typeof i&&i instanceof Sn}(o)&&Qe(o);D=N&&this.injectableDefInScope(N)?Zl(Hg(o),vf):null,this.records.set(o,D)}if(null!=D)return this.hydrate(o,D)}return(l&He.Self?yb():this.parent).get(o,a=l&He.Optional&&a===Va?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[ds]=v[ds]||[]).unshift(S(o)),d)throw v;return function st(i,o,a,l){const d=i[ds];throw o[Ua]&&d.unshift(o[Ua]),i.message=function _t(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=S(o);if(Array.isArray(o))d=o.map(S).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let D=o[v];p.push(v+":"+("string"==typeof D?JSON.stringify(D):S(D)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(Rh,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[ds]=null,i}(v,o,"R3InjectorError",this.source)}throw v}finally{vt(p),hs(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(S(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new x(205,!1)}processInjectorType(o,a,l){if(!(o=C(o)))return!1;let d=Bt(o);const p=null==d&&o.ngModule||void 0,v=void 0===p?o:p,D=-1!==l.indexOf(v);if(void 0!==p&&(d=Bt(p)),null==d)return!1;if(null!=d.imports&&!D){let re;l.push(v);try{li(d.imports,pe=>{this.processInjectorType(pe,a,l)&&(void 0===re&&(re=[]),re.push(pe))})}finally{}if(void 0!==re)for(let pe=0;pe<re.length;pe++){const{ngModule:we,providers:Ne}=re[pe];li(Ne,$e=>this.processProvider($e,we,Ne||Ct))}}this.injectorDefTypes.add(v);const N=Dr(v)||(()=>new v);this.records.set(v,Zl(N,vf));const z=d.providers;if(null!=z&&!D){const re=o;li(z,pe=>this.processProvider(pe,re,z))}return void 0!==p&&void 0!==o.providers}processProvider(o,a,l){let d=_f(o=C(o))?o:C(o&&o.provide);const p=function vb(i,o,a){return bb(i)?Zl(void 0,i.useValue):Zl(_b(i),vf)}(o);if(_f(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=Zl(void 0,vf,!0),v.factory=()=>Oe(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,p)}hydrate(o,a){return a.value===vf&&(a.value=mb,a.value=a.factory()),"object"==typeof a.value&&a.value&&function wI(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=C(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Hg(i){const o=Qe(i),a=null!==o?o.factory:Dr(i);if(null!==a)return a;if(i instanceof Sn)throw new x(204,!1);if(i instanceof Function)return function EI(i){const o=i.length;if(o>0)throw Tu(o,"?"),new x(204,!1);const a=function It(i){const o=i&&(i[In]||i[je]);if(o){const a=function Mt(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new x(204,!1)}function _b(i,o,a){let l;if(_f(i)){const d=C(i);return Dr(d)||Hg(d)}if(bb(i))l=()=>C(i.useValue);else if(function oA(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Oe(i.deps||[]));else if(function Eb(i){return!(!i||!i.useExisting)}(i))l=()=>U(C(i.useExisting));else{const d=C(i&&(i.useClass||i.provide));if(!function wb(i){return!!i.deps}(i))return Dr(d)||Hg(d);l=()=>new d(...Oe(i.deps))}return l}function Zl(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function bb(i){return null!==i&&"object"==typeof i&&Rl in i}function _f(i){return"function"==typeof i}let Es=(()=>{class i{static create(a,l){var d;if(Array.isArray(a))return xd({name:""},l,a,"");{const p=null!==(d=a.name)&&void 0!==d?d:"";return xd({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=Va,i.NULL=new gb,i.\u0275prov=ke({token:i,providedIn:"any",factory:()=>U(Ya)}),i.__NG_ELEMENT_ID__=-1,i})();function pt(i,o){Qc(gd(i)[1],An())}function Md(i){let o=function qt(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let d;if(Pi(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new x(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const v=i;v.inputs=Yl(i.inputs),v.declaredInputs=Yl(i.declaredInputs),v.outputs=Yl(i.outputs);const D=d.hostBindings;D&&xI(i,D);const N=d.viewQuery,z=d.contentQueries;if(N&&SI(i,N),z&&gv(i,z),R(i.inputs,d.inputs),R(i.declaredInputs,d.declaredInputs),R(i.outputs,d.outputs),Pi(d)&&d.data.animation){const re=i.data;re.animation=(re.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let v=0;v<p.length;v++){const D=p[v];D&&D.ngInherit&&D(i),D===Md&&(a=!1)}}o=Object.getPrototypeOf(o)}!function pv(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=zn(d.hostAttrs,a=zn(a,d.hostAttrs))}}(l)}function Yl(i){return i===Mr?{}:i===Ct?[]:i}function SI(i,o){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function gv(i,o){const a=i.contentQueries;i.contentQueries=a?(l,d,p)=>{o(l,d,p),a(l,d,p)}:o}function xI(i,o){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let Ql=null;function tr(){if(!Ql){const i=tn.Symbol;if(i&&i.iterator)Ql=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Ql=l)}}}return Ql}function bf(i){return!!zg(i)&&(Array.isArray(i)||!(i instanceof Map)&&tr()in i)}function zg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Lr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function wf(i,o,a,l){const d=Ze();return Lr(d,ko(),o)&&(Qt(),Xs(kn(),d,i,o,a,l)),wf}function Jl(i,o,a,l){return Lr(i,ko(),a)?o+I(a)+l:Ht}function Kg(i,o,a,l,d,p,v,D){const N=Ze(),z=Qt(),re=i+20,pe=z.firstCreatePass?function _v(i,o,a,l,d,p,v,D,N){const z=o.consts,re=Dd(o,i,4,v||null,Ei(z,D));Pg(o,a,re,Ei(z,N)),Qc(o,re);const pe=re.tViews=Cd(2,re,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,z);return null!==o.queries&&(o.queries.template(o,re),pe.queries=o.queries.embeddedTView(re)),re}(re,z,N,o,a,l,d,p,v):z.data[re];oi(pe,!1);const we=N[11].createComment("");mg(z,N,we,pe),gr(we,N),Vg(N,N[re]=lb(we,N,we,pe)),Ri(pe)&&$u(z,N,pe),null!=v&&Wl(N,pe,D)}function Zu(i,o=He.Default){const a=Ze();return null===a?U(i,o):os(An(),a,C(i),o)}function em(){throw new Error("invalid")}function Af(i,o,a){const l=Ze();return Lr(l,ko(),o)&&Wi(Qt(),kn(),l,i,o,l[11],a,!1),Af}function tm(i,o,a,l,d){const v=d?"class":"style";yI(i,a,o.inputs[v],v,l)}function Ku(i,o,a,l){const d=Ze(),p=Qt(),v=20+i,D=d[11],N=d[v]=_d(D,o,function Yc(){return xt.lFrame.currentNamespace}()),z=p.firstCreatePass?function qI(i,o,a,l,d,p,v){const D=o.consts,z=Dd(o,i,2,d,Ei(D,p));return Pg(o,a,z,Ei(D,v)),null!==z.attrs&&Sd(z,z.attrs,!1),null!==z.mergedAttrs&&Sd(z,z.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,z),z}(v,p,d,0,o,a,l):p.data[v];oi(z,!0);const re=z.mergedAttrs;null!==re&&yt(D,N,re);const pe=z.classes;null!==pe&&Ky(D,N,pe);const we=z.styles;return null!==we&&Go(D,N,we),64!=(64&z.flags)&&mg(p,d,N,z),0===function hu(){return xt.lFrame.elementDepthCount}()&&gr(N,d),function va(){xt.lFrame.elementDepthCount++}(),Ri(z)&&($u(p,d,z),function df(i,o,a){if(lu(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=i.data[p];v.contentQueries&&v.contentQueries(1,a[p],p)}}}(p,z,d)),null!==l&&Wl(d,z),Ku}function Sf(){let i=An();ba()?El():(i=i.parent,oi(i,!1));const o=i;!function vl(){xt.lFrame.elementDepthCount--}();const a=Qt();return a.firstCreatePass&&(Qc(a,i),lu(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Cl(i){return 0!=(16&i.flags)}(o)&&tm(a,o,Ze(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function jp(i){return 0!=(32&i.flags)}(o)&&tm(a,o,Ze(),o.stylesWithoutHost,!1),Sf}function nm(i,o,a,l){return Ku(i,o,a,l),Sf(),nm}function Gb(){return Ze()}function xv(i){return!!i&&"function"==typeof i.then}function Yu(i){return!!i&&"function"==typeof i.subscribe}const Ov=Yu;function Vd(i,o,a,l){const d=Ze(),p=Qt(),v=An();return function Nv(i,o,a,l,d,p,v,D){const N=Ri(l),re=i.firstCreatePass&&hb(i),pe=o[8],we=jg(o);let Ne=!0;if(3&l.type||D){const ot=fr(l,o),mt=D?D(ot):ot,We=we.length,Et=D?rn=>D(pn(rn[l.index])):l.index;if(En(a)){let rn=null;if(!D&&N&&(rn=function xf(i,o,a,l){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===a&&d[p+1]===l){const D=o[7],N=d[p+2];return D.length>N?D[N]:null}"string"==typeof v&&(p+=2)}return null}(i,o,d,l.index)),null!==rn)(rn.__ngLastListenerFn__||rn).__ngNextListenerFn__=p,rn.__ngLastListenerFn__=p,Ne=!1;else{p=im(l,o,pe,p,!1);const gn=a.listen(mt,d,p);we.push(p,gn),re&&re.push(d,Et,We,We+1)}}else p=im(l,o,pe,p,!0),mt.addEventListener(d,p,v),we.push(p),re&&re.push(d,Et,We,v)}else p=im(l,o,pe,p,!1);const $e=l.outputs;let nt;if(Ne&&null!==$e&&(nt=$e[d])){const ot=nt.length;if(ot)for(let mt=0;mt<ot;mt+=2){const eo=o[nt[mt]][nt[mt+1]].subscribe(p),ll=we.length;we.push(p,eo),re&&re.push(d,l.index,ll,-(ll+1))}}}(p,d,d[11],v,i,o,!!a,l),Vd}function mi(i,o,a,l){try{return!1!==a(l)}catch(d){return fb(i,d),!1}}function im(i,o,a,l,d){return function p(v){if(v===Function)return l;const D=2&i.flags?pr(i.index,o):o;0==(32&o[2])&&pf(D);let N=mi(o,0,l,v),z=p.__ngNextListenerFn__;for(;z;)N=mi(o,0,z,v)&&N,z=z.__ngNextListenerFn__;return d&&!1===N&&(v.preventDefault(),v.returnValue=!1),N}}function Ud(i=1){return function Bi(i){return(xt.lFrame.contextLView=function Sh(i,o){for(;i>0;)o=o[15],i--;return o}(i,xt.lFrame.contextLView))[8]}(i)}function om(i,o){let a=null;const l=function $C(i){const o=i.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(i);for(let d=0;d<o.length;d++){const p=o[d];if("*"!==p){if(null===l?M0(i,p,!0):R0(l,p))return d}else a=d}return a}function kv(i){const o=Ze()[16][6];if(!o.projection){const l=o.projection=Tu(i?i.length:1,null),d=l.slice();let p=o.child;for(;null!==p;){const v=i?om(p,i):0;null!==v&&(d[v]?d[v].projectionNext=p:l[v]=p,d[v]=p),p=p.next}}}function sm(i,o=0,a){const l=Ze(),d=Qt(),p=Dd(d,20+i,16,null,a||null);null===p.projection&&(p.projection=o),El(),64!=(64&p.flags)&&function rI(i,o,a){A0(o[11],0,o,a,gg(i,a,o),I0(a.parent||o[6],a,o))}(d,l,p)}function Of(i,o,a,l,d){const p=Ze(),v=Jl(p,o,a,l);return v!==Ht&&Wi(Qt(),kn(),p,i,v,p[11],d,!1),Of}function Fv(i,o,a,l,d){const p=i[a+1],v=null===o;let D=l?zo(p):_s(p),N=!1;for(;0!==D&&(!1===N||v);){const re=i[D+1];Zb(i[D],o)&&(N=!0,i[D+1]=l?Eg(re):vg(re)),D=l?zo(re):_s(re)}N&&(i[a+1]=l?vg(p):Eg(p))}function Zb(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Ci(i,o)>=0}const yr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Kb(i){return i.substring(yr.key,yr.keyEnd)}function Nf(i){return i.substring(yr.value,yr.valueEnd)}function Qu(i,o){const a=yr.textEnd;let l=yr.key=qd(i,o,a);return a===l?-1:(l=yr.keyEnd=function Hd(i,o,a){let l;for(;o<a&&(45===(l=i.charCodeAt(o))||95===l||(-33&l)>=65&&(-33&l)<=90||l>=48&&l<=57);)o++;return o}(i,l,a),l=hm(i,l,a),l=yr.value=qd(i,l,a),l=yr.valueEnd=function sc(i,o,a){let l=-1,d=-1,p=-1,v=o,D=v;for(;v<a;){const N=i.charCodeAt(v++);if(59===N)return D;34===N||39===N?D=v=Uv(i,N,v,a):o===v-4&&85===p&&82===d&&76===l&&40===N?D=v=Uv(i,41,v,a):N>32&&(D=v),p=d,d=l,l=-33&N}return D}(i,l,a),hm(i,l,a))}function qd(i,o,a){for(;o<a&&i.charCodeAt(o)<=32;)o++;return o}function hm(i,o,a,l){return(o=qd(i,o,a))<a&&o++,o}function Uv(i,o,a,l){let d=-1,p=a;for(;p<l;){const v=i.charCodeAt(p++);if(v==o&&92!==d)return p;d=92==v&&92===d?0:v}throw new Error}function Is(i,o){return function cn(i,o,a,l){const d=Ze(),p=Qt(),v=wi(2);p.firstUpdatePass&&Jb(p,i,v,l),o!==Ht&&Lr(d,v,o)&&Qa(p,p.data[ar()],d,d[11],i,d[v+1]=function tE(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=S(ys(i)))),i}(o,a),l,v)}(i,o,null,!0),Is}function Zi(i){!function Ki(i,o,a,l){const d=Qt(),p=wi(2);d.firstUpdatePass&&Jb(d,null,p,l);const v=Ze();if(a!==Ht&&Lr(v,p,a)){const D=d.data[ar()];if(ac(D,l)&&!Qb(d,p)){let N=l?D.classesWithoutHost:D.stylesWithoutHost;null!==N&&(a=E(N,a||"")),tm(d,D,v,a,l)}else!function Vf(i,o,a,l,d,p,v,D){d===Ht&&(d=Ct);let N=0,z=0,re=0<d.length?d[0]:null,pe=0<p.length?p[0]:null;for(;null!==re||null!==pe;){const we=N<d.length?d[N+1]:void 0,Ne=z<p.length?p[z+1]:void 0;let nt,$e=null;re===pe?(N+=2,z+=2,we!==Ne&&($e=pe,nt=Ne)):null===pe||null!==re&&re<pe?(N+=2,$e=re):(z+=2,$e=pe,nt=Ne),null!==$e&&Qa(i,o,a,l,$e,nt,v,D),re=N<d.length?d[N]:null,pe=z<p.length?p[z]:null}}(d,D,v,v[11],v[p+1],v[p+1]=function GI(i,o,a){if(null==a||""===a)return Ct;const l=[],d=ys(a);if(Array.isArray(d))for(let p=0;p<d.length;p++)i(l,d[p],!0);else if("object"==typeof d)for(const p in d)d.hasOwnProperty(p)&&i(l,p,d[p]);else"string"==typeof d&&o(l,d);return l}(i,o,a),l,p)}}(eE,fm,i,!1)}function fm(i,o){for(let a=function Rf(i){return function dm(i){yr.key=0,yr.keyEnd=0,yr.value=0,yr.valueEnd=0,yr.textEnd=i.length}(i),Qu(i,qd(i,0,yr.textEnd))}(o);a>=0;a=Qu(o,a))eE(i,Kb(o),Nf(o))}function Qb(i,o){return o>=i.expandoStartIndex}function Jb(i,o,a,l){const d=i.data;if(null===d[a+1]){const p=d[ar()],v=Qb(i,a);ac(p,l)&&null===o&&!v&&(o=!1),o=function Pf(i,o,a,l){const d=function Da(i){const o=xt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=Ff(a=Bv(null,i,o,a,l),o.attrs,l),p=null);else{const v=o.directiveStylingLast;if(-1===v||i[v]!==d)if(a=Bv(d,i,o,a,l),null===p){let N=function Lf(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==_s(l))return i[zo(l)]}(i,o,l);void 0!==N&&Array.isArray(N)&&(N=Bv(null,i,o,N[1],l),N=Ff(N,o.attrs,l),function $I(i,o,a,l){i[zo(a?o.classBindings:o.styleBindings)]=l}(i,o,l,N))}else p=function Xb(i,o,a){let l;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)l=Ff(l,i[p].hostAttrs,a);return Ff(l,o.attrs,a)}(i,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,l),function cm(i,o,a,l,d,p){let v=p?o.classBindings:o.styleBindings,D=zo(v),N=_s(v);i[l]=a;let re,z=!1;if(Array.isArray(a)){const pe=a;re=pe[1],(null===re||Ci(pe,re)>0)&&(z=!0)}else re=a;if(d)if(0!==N){const we=zo(i[D+1]);i[l+1]=of(we,D),0!==we&&(i[we+1]=_g(i[we+1],l)),i[D+1]=function U0(i,o){return 131071&i|o<<17}(i[D+1],l)}else i[l+1]=of(D,0),0!==D&&(i[D+1]=_g(i[D+1],l)),D=l;else i[l+1]=of(N,0),0===D?D=l:i[N+1]=_g(i[N+1],l),N=l;z&&(i[l+1]=vg(i[l+1])),Fv(i,re,l,!0),Fv(i,re,l,!1),function Lv(i,o,a,l,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&Ci(p,o)>=0&&(a[l+1]=Eg(a[l+1]))}(o,re,i,l,p),v=of(D,N),p?o.classBindings=v:o.styleBindings=v}(d,p,o,a,v,l)}}function Bv(i,o,a,l,d){let p=null;const v=a.directiveEnd;let D=a.directiveStylingLast;for(-1===D?D=a.directiveStart:D++;D<v&&(p=o[D],l=Ff(l,p.hostAttrs,d),p!==i);)D++;return null!==i&&(a.directiveStylingLast=D),l}function Ff(i,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?d=v:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),qn(i,v,!!a||o[++p]))}return void 0===i?null:i}function eE(i,o,a){qn(i,o,ys(a))}function Qa(i,o,a,l,d,p,v,D){if(!(3&o.type))return;const N=i.data,z=N[D+1];Uf(function bg(i){return 1==(1&i)}(z)?jv(N,o,a,d,_s(z),v):void 0)||(Uf(p)||function V0(i){return 2==(2&i)}(z)&&(p=jv(N,null,a,d,D,v)),function Hl(i,o,a,l,d){const p=En(i);if(o)d?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:G.DashCase;if(null==d)p?i.removeStyle(a,l,v):a.style.removeProperty(l);else{const D="string"==typeof d&&d.endsWith("!important");D&&(d=d.slice(0,-10),v|=G.Important),p?i.setStyle(a,l,d,v):a.style.setProperty(l,d,D?"important":"")}}}(l,v,No(ar(),a),d,p))}function jv(i,o,a,l,d,p){const v=null===o;let D;for(;d>0;){const N=i[d],z=Array.isArray(N),re=z?N[1]:N,pe=null===re;let we=a[d+1];we===Ht&&(we=pe?Ct:void 0);let Ne=pe?qo(we,l):re===l?we:void 0;if(z&&!Uf(Ne)&&(Ne=qo(N,l)),Uf(Ne)&&(D=Ne,v))return D;const $e=i[d+1];d=v?zo($e):_s($e)}if(null!==o){let N=p?o.residualClasses:o.residualStyles;null!=N&&(D=qo(N,l))}return D}function Uf(i){return void 0!==i}function ac(i,o){return 0!=(i.flags&(o?16:32))}function nE(i,o=""){const a=Ze(),l=Qt(),d=i+20,p=l.firstCreatePass?Dd(l,d,1,o,null):l.data[d],v=a[d]=function yd(i,o){return En(i)?i.createText(o):i.createTextNode(o)}(a[11],o);mg(l,a,v,p),oi(p,!1)}function qv(i){return Bf("",i,""),qv}function Bf(i,o,a){const l=Ze(),d=Jl(l,i,o,a);return d!==Ht&&bs(l,ar(),d),Bf}const ia=void 0;var Xv=["en",[["a","p"],["AM","PM"],ia],[["AM","PM"],ia,ia],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ia,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ia,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ia,"{1} 'at' {0}",ia],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function uE(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Ja={};function wm(i){const o=function cE(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=t_(o);if(a)return a;const l=o.split("-")[0];if(a=t_(l),a)return a;if("en"===l)return Xv;throw new Error(`Missing locale data for the locale "${i}".`)}function e_(i){return wm(i)[kt.PluralCase]}function t_(i){return i in Ja||(Ja[i]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[i]),Ja[i]}var kt=(()=>((kt=kt||{})[kt.LocaleId=0]="LocaleId",kt[kt.DayPeriodsFormat=1]="DayPeriodsFormat",kt[kt.DayPeriodsStandalone=2]="DayPeriodsStandalone",kt[kt.DaysFormat=3]="DaysFormat",kt[kt.DaysStandalone=4]="DaysStandalone",kt[kt.MonthsFormat=5]="MonthsFormat",kt[kt.MonthsStandalone=6]="MonthsStandalone",kt[kt.Eras=7]="Eras",kt[kt.FirstDayOfWeek=8]="FirstDayOfWeek",kt[kt.WeekendRange=9]="WeekendRange",kt[kt.DateFormat=10]="DateFormat",kt[kt.TimeFormat=11]="TimeFormat",kt[kt.DateTimeFormat=12]="DateTimeFormat",kt[kt.NumberSymbols=13]="NumberSymbols",kt[kt.NumberFormats=14]="NumberFormats",kt[kt.CurrencyCode=15]="CurrencyCode",kt[kt.CurrencySymbol=16]="CurrencySymbol",kt[kt.CurrencyName=17]="CurrencyName",kt[kt.Currencies=18]="Currencies",kt[kt.Directionality=19]="Directionality",kt[kt.PluralCase=20]="PluralCase",kt[kt.ExtraData=21]="ExtraData",kt))();const Gf="en-US";let Zf=Gf;function $n(i,o,a,l,d){if(i=C(i),Array.isArray(i))for(let p=0;p<i.length;p++)$n(i[p],o,a,l,d);else{const p=Qt(),v=Ze();let D=_f(i)?i:C(i.provide),N=_b(i);const z=An(),re=1048575&z.providerIndexes,pe=z.directiveStart,we=z.providerIndexes>>20;if(_f(i)||!i.multi){const Ne=new vu(N,d,Zu),$e=wn(D,o,d?re:re+we,pe);-1===$e?(Lo(Wn(z,v),p,D),Zd(p,i,o.length),o.push(D),z.directiveStart++,z.directiveEnd++,d&&(z.providerIndexes+=1048576),a.push(Ne),v.push(Ne)):(a[$e]=Ne,v[$e]=Ne)}else{const Ne=wn(D,o,re+we,pe),$e=wn(D,o,re,re+we),nt=Ne>=0&&a[Ne],ot=$e>=0&&a[$e];if(d&&!ot||!d&&!nt){Lo(Wn(z,v),p,D);const mt=function hD(i,o,a,l,d){const p=new vu(i,a,Zu);return p.multi=[],p.index=o,p.componentProviders=0,Vr(p,d,l&&!a),p}(d?Kd:DE,a.length,d,l,N);!d&&ot&&(a[$e].providerFactory=mt),Zd(p,i,o.length,0),o.push(D),z.directiveStart++,z.directiveEnd++,d&&(z.providerIndexes+=1048576),a.push(mt),v.push(mt)}else Zd(p,i,Ne>-1?Ne:$e,Vr(a[d?$e:Ne],N,!d&&l));!d&&l&&ot&&a[$e].componentProviders++}}}function Zd(i,o,a,l){const d=_f(o),p=function sA(i){return!!i.useClass}(o);if(d||p){const N=(p?C(o.useClass):o).prototype.ngOnDestroy;if(N){const z=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const re=z.indexOf(a);-1===re?z.push(a,[l,N]):z[re+1].push(l,N)}else z.push(a,N)}}}function Vr(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function wn(i,o,a,l){for(let d=a;d<l;d++)if(o[d]===i)return d;return-1}function DE(i,o,a,l){return xi(this.multi,[])}function Kd(i,o,a,l){const d=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,D=$s(a,a[1],this.providerFactory.index,l);p=D.slice(0,v),xi(d,p);for(let N=v;N<D.length;N++)p.push(D[N])}else p=[],xi(d,p);return p}function xi(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function _r(i,o=[]){return a=>{a.providersResolver=(l,d)=>function IE(i,o,a){const l=Qt();if(l.firstCreatePass){const d=Pi(i);$n(a,l.data,l.blueprint,d,!0),$n(o,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,o)}}class eu{}class CE{resolveComponentFactory(o){throw function rr(i){const o=Error(`No component factory found for ${S(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let nl=(()=>{class i{}return i.NULL=new CE,i})();function pD(){return Yi(An(),Ze())}function Yi(i,o){return new tu(fr(i,o))}let tu=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=pD,i})();function tp(i){return i instanceof tu?i.nativeElement:i}class nu{}let Rm=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function oa(){const i=Ze(),a=pr(An().index,i);return function gc(i){return i[11]}(Wr(a)?a:i)}(),i})(),np=(()=>{class i{}return i.\u0275prov=ke({token:i,providedIn:"root",factory:()=>null}),i})();class ru{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const d_=new ru("13.2.7"),rl={};function Yd(i,o,a,l,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(pn(p)),ki(p))for(let D=10;D<p.length;D++){const N=p[D],z=N[1].firstChild;null!==z&&Yd(N[1],N,z,l)}const v=a.type;if(8&v)Yd(i,o,a.child,l);else if(32&v){const D=Se(a,o);let N;for(;N=D();)l.push(N)}else if(16&v){const D=C0(o,a);if(Array.isArray(D))l.push(...D);else{const N=dt(o[16]);Yd(N[1],N,D,l,!0)}}a=d?a.projectionNext:a.next}return l}class Cs{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Yd(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ki(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(By(o,l),ls(a,l))}this._attachedToViewContainer=!1}jy(this._lView[1],this._lView)}onDestroy(o){Og(this._lView[1],this._lView,null,o)}markForCheck(){pf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ug(this._lView[1],this._lView,this.context)}checkNoChanges(){!function mf(i,o,a){gu(!0);try{Ug(i,o,a)}finally{gu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new x(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function tf(i,o){yg(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new x(902,"");this._appRef=o}}class h_ extends Cs{constructor(o){super(o),this._view=o}detectChanges(){db(this._view)}checkNoChanges(){!function mI(i){gu(!0);try{db(i)}finally{gu(!1)}}(this._view)}get context(){return null}}class Qd extends nl{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Qn(o);return new mc(a,this.ngModule)}}function f_(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class mc extends eu{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function L0(i){return i.map(P0).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return f_(this.componentDef.inputs)}get outputs(){return f_(this.componentDef.outputs)}create(o,a,l,d){const p=(d=d||this.ngModule)?function Pm(i,o){return{get:(a,l,d)=>{const p=i.get(a,rl,d);return p!==rl||l===rl?p:o.get(a,l,d)}}}(o,d.injector):o,v=p.get(nu,ga),D=p.get(np,null),N=v.createRenderer(null,this.componentDef),z=this.componentDef.selectors[0][0]||"div",re=l?function hf(i,o,a){if(En(i))return i.selectRootElement(o,a===St.ShadowDom);let l="string"==typeof o?i.querySelector(o):o;return l.textContent="",l}(N,l,this.componentDef.encapsulation):_d(v.createRenderer(null,this.componentDef),z,function AE(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(z)),pe=this.componentDef.onPush?576:528,we=function ea(i,o){return{components:[],scheduler:i||Fy,clean:yf,playerHandler:o||null,flags:0}}(),Ne=Cd(0,null,null,1,0,null,null,null,null,null),$e=Gl(null,Ne,we,pe,null,null,v,N,D,p);let nt,ot;Us($e);try{const mt=function nn(i,o,a,l,d,p){const v=a[1];a[20]=i;const N=Dd(v,20,2,"#host",null),z=N.mergedAttrs=o.hostAttrs;null!==z&&(Sd(N,z,!0),null!==i&&(yt(d,i,z),null!==N.classes&&Ky(d,i,N.classes),null!==N.styles&&Go(d,i,N.styles)));const re=l.createRenderer(i,o),pe=Gl(a,Y0(o),null,o.onPush?64:16,a[20],N,l,re,p||null,null);return v.firstCreatePass&&(Lo(Wn(N,a),v,o.type),rb(v,N),ff(N,a.length,1)),Vg(a,pe),a[20]=pe}(re,this.componentDef,$e,v,N);if(re)if(l)yt(N,re,["ng-version",d_.full]);else{const{attrs:We,classes:Et}=function F0(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===d?""!==p&&o.push(p,i[++l]):8===d&&a.push(p);else{if(!xn(d))break;d=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);We&&yt(N,re,We),Et&&Et.length>0&&Ky(N,re,Et.join(" "))}if(ot=On(Ne,20),void 0!==a){const We=ot.projection=[];for(let Et=0;Et<this.ngContentSelectors.length;Et++){const rn=a[Et];We.push(null!=rn?Array.from(rn):null)}}nt=function Mb(i,o,a,l,d){const p=a[1],v=function av(i,o,a){const l=An();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),sb(i,l,o,Hu(i,o,1,null),a));const d=$s(o,i,l.directiveStart,l);gr(d,o);const p=fr(l,o);return p&&gr(p,o),d}(p,a,o);if(l.components.push(v),i[8]=v,d&&d.forEach(N=>N(v,o)),o.contentQueries){const N=An();o.contentQueries(1,v,N.directiveStart)}const D=An();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ji(D.index),cI(a[1],D,0,D.directiveStart,D.directiveEnd,o),tb(o,v)),v}(mt,this.componentDef,$e,we,[pt]),zl(Ne,$e,null)}finally{js()}return new mD(this.componentType,nt,Yi(ot,$e),$e,ot)}}class mD extends class fD{}{constructor(o,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new h_(d),this.componentType=o}get injector(){return new as(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class yc{}class Ur{}const vc=new Map;class rp extends yc{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Qd(this);const l=Jn(o);this._bootstrapComponents=go(l.bootstrap),this._r3Injector=dv(o,a,[{provide:yc,useValue:this},{provide:nl,useValue:this.componentFactoryResolver}],S(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=Es.THROW_IF_NOT_FOUND,l=He.Default){return o===Es||o===yc||o===Ya?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Xd extends Ur{constructor(o){super(),this.moduleType=o,null!==Jn(o)&&function ME(i){const o=new Set;!function a(l){const d=Jn(l,!0),p=d.id;null!==p&&(function OE(i,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${i} - ${S(o)} vs ${S(o.name)}`)}(p,vc.get(p),l),vc.set(p,l));const v=go(d.imports);for(const D of v)o.has(D)||(o.add(D),a(D))}(i)}(o)}create(o){return new rp(this.moduleType,o)}}function th(i){return o=>{setTimeout(i,void 0,o)}}const Ji=class Qi extends c.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,p,v;let D=o,N=a||(()=>null),z=l;if(o&&"object"==typeof o){const pe=o;D=null===(d=pe.next)||void 0===d?void 0:d.bind(pe),N=null===(p=pe.error)||void 0===p?void 0:p.bind(pe),z=null===(v=pe.complete)||void 0===v?void 0:v.bind(pe)}this.__isAsync&&(N=th(N),D&&(D=th(D)),z&&(z=th(z)));const re=super.subscribe({next:D,error:N,complete:z});return o instanceof ee.w0&&o.add(re),re}};function UE(){return this._results[tr()]()}class op{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=tr(),l=op.prototype;l[a]||(l[a]=UE)}get changes(){return this._changes||(this._changes=new Ji)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=ui(o);(this._changesDetected=!function Ol(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],p=o[l];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let bc=(()=>{class i{}return i.__NG_ELEMENT_ID__=ID,i})();const BE=bc,jE=class extends BE{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=Gl(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),zl(a,l,o),new Cs(l)}};function ID(){return sp(An(),Ze())}function sp(i,o){return 4&i.type?new jE(o,i,Yi(i,o)):null}let ap=(()=>{class i{}return i.__NG_ELEMENT_ID__=qE,i})();function qE(){return Ec(An(),Ze())}const Fm=ap,HE=class extends Fm{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Yi(this._hostTNode,this._hostLView)}get injector(){return new as(this._hostTNode,this._hostLView)}get parentInjector(){const o=Hi(this._hostTNode,this._hostLView);if(Xc(o)){const a=Dn(o,this._hostLView),l=qi(o);return new as(a[1].data[l+8],a)}return new as(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=$E(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,p){const v=o&&!function jo(i){return"function"==typeof i}(o);let D;if(v)D=a;else{const pe=a||{};D=pe.index,l=pe.injector,d=pe.projectableNodes,p=pe.ngModuleRef}const N=v?o:new mc(Qn(o)),z=l||this.parentInjector;if(!p&&null==N.ngModule){const we=(v?z:this.parentInjector).get(yc,null);we&&(p=we)}const re=N.create(z,d,void 0,p);return this.insert(re.hostView,D),re}insert(o,a){const l=o._lView,d=l[1];if(function ya(i){return ki(i[3])}(l)){const re=this.indexOf(o);if(-1!==re)this.detach(re);else{const pe=l[3],we=new HE(pe,pe[6],pe[3]);we.detach(we.indexOf(o))}}const p=this._adjustIndex(a),v=this._lContainer;!function Uu(i,o,a,l){const d=10+l,p=a.length;l>0&&(a[d-1][4]=o),l<p-10?(o[4]=a[d],Ws(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function Bu(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(v,o);const D=o[19];null!==D&&D.insertView(i),o[2]|=128}(d,l,v,p);const D=zy(p,v),N=l[11],z=nf(N,v[7]);return null!==z&&function ef(i,o,a,l,d,p){l[0]=d,l[6]=o,yg(i,l,a,1,d,p)}(d,v[6],N,l,z,D),o.attachToViewContainerRef(),Ws(Vm(v),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=$E(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=By(this._lContainer,a);l&&(ls(Vm(this._lContainer),a),jy(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=By(this._lContainer,a);return l&&null!=ls(Vm(this._lContainer),a)?new Cs(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function $E(i){return i[8]}function Vm(i){return i[8]||(i[8]=[])}function Ec(i,o){let a;const l=o[i.index];if(ki(l))a=l;else{let d;if(8&i.type)d=pn(l);else{const p=o[11];d=p.createComment("");const v=fr(i,o);mo(p,nf(p,v),d,function nI(i,o){return En(i)?i.nextSibling(o):o.nextSibling}(p,v),!1)}o[i.index]=a=lb(l,o,d,i),Vg(o,a)}return new HE(a,i,o)}class Um{constructor(o){this.queryList=o,this.matches=null}clone(){return new Um(this.queryList)}setDirty(){this.queryList.setDirty()}}class il{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<l;p++){const v=a.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new il(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==w_(o,a).matches&&this.queries[a].setDirty()}}class __{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Bm{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new Bm(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Ic{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Ic(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,a,DD(a,p)),this.matchTNodeWithReadOption(o,a,Fo(a,o,p,!1,!1))}else l===bc?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Fo(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===tu||d===ap||d===bc&&4&a.type)this.addMatch(a.index,-2);else{const p=Fo(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function DD(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function Kn(i,o,a,l){return-1===a?function TD(i,o){return 11&i.type?Yi(i,o):4&i.type?sp(i,o):null}(o,i):-2===a?function jm(i,o,a){return a===tu?Yi(o,i):a===bc?sp(o,i):a===ap?Ec(o,i):void 0}(i,o,l):$s(i,i[1],a,o)}function up(i,o,a,l){const d=o[19].queries[l];if(null===d.matches){const p=i.data,v=a.matches,D=[];for(let N=0;N<v.length;N+=2){const z=v[N];D.push(z<0?null:Kn(o,p[z],v[N+1],a.metadata.read))}d.matches=D}return d.matches}function qm(i,o,a,l){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const v=up(i,o,d,a);for(let D=0;D<p.length;D+=2){const N=p[D];if(N>0)l.push(v[D/2]);else{const z=p[D+1],re=o[-N];for(let pe=10;pe<re.length;pe++){const we=re[pe];we[17]===we[3]&&qm(we[1],we,z,l)}if(null!==re[9]){const pe=re[9];for(let we=0;we<pe.length;we++){const Ne=pe[we];qm(Ne[1],Ne,z,l)}}}}}return l}function zE(i){const o=Ze(),a=Qt(),l=Dl();Ta(l+1);const d=w_(a,l);if(i.dirty&&ts(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?qm(a,o,l,[]):up(a,o,d,l);i.reset(p,tp),i.notifyOnChanges()}return!0}return!1}function WE(i,o,a,l){const d=Qt();if(d.firstCreatePass){const p=An();(function E_(i,o,a){null===i.queries&&(i.queries=new Bm),i.queries.track(new Ic(o,a))})(d,new __(o,a,l),p.index),function ZE(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function aa(i,o,a){const l=new op(4==(4&a));Og(i,o,l,l.destroy),null===o[19]&&(o[19]=new il),o[19].queries.push(new Um(l))}(d,Ze(),a)}function b_(){return function rh(i,o){return i[19].queries[o].queryList}(Ze(),Dl())}function w_(i,o){return i.queries.getByIndex(o)}function Ym(...i){}const ow=new Sn("Application Initializer");let O_=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Ym,this.reject=Ym,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(xv(p))a.push(p);else if(Ov(p)){const v=new Promise((D,N)=>{p.subscribe({complete:D,error:N})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(U(ow,8))},i.\u0275prov=ke({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Dc=new Sn("AppId",{providedIn:"root",factory:function Tc(){return`${M_()}${M_()}${M_()}`}});function M_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const sw=new Sn("Platform Initializer"),N_=new Sn("Platform ID"),yi=new Sn("appBootstrapListener");let k_=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ke({token:i,factory:i.\u0275fac}),i})();const Qm=new Sn("LocaleId",{providedIn:"root",factory:()=>ye(Qm,He.Optional|He.SkipSelf)||function ua(){return"undefined"!=typeof $localize&&$localize.locale||Gf}()}),Jm=new Sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class PD{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let LD=(()=>{class i{compileModuleSync(a){return new Xd(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=go(Jn(a).declarations).reduce((v,D)=>{const N=Qn(D);return N&&v.push(new mc(N)),v},[]);return new PD(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ke({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const VD=(()=>Promise.resolve(0))();function R_(i){"undefined"==typeof Zone?VD.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ss{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ji(!1),this.onMicrotaskEmpty=new Ji(!1),this.onStable=new Ji(!1),this.onError=new Ji(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function UD(){let i=tn.requestAnimationFrame,o=tn.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function qD(i){const o=()=>{!function jD(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(tn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,L_(i),i.isCheckStableRunning=!0,P_(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),L_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,v,D)=>{try{return F_(i),a.invokeTask(d,p,v,D)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),aw(i)}},onInvoke:(a,l,d,p,v,D,N)=>{try{return F_(i),a.invoke(d,p,v,D,N)}finally{i.shouldCoalesceRunChangeDetection&&o(),aw(i)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,L_(i),P_(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ss.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ss.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,BD,Ym,Ym);try{return p.runTask(v,a,l)}finally{p.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const BD={};function P_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function L_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function F_(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function aw(i){i._nesting--,P_(i)}class uw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ji,this.onMicrotaskEmpty=new Ji,this.onStable=new Ji,this.onError=new Ji}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let V_=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ss.assertNotInAngularZone(),R_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())R_(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(U(Ss))},i.\u0275prov=ke({token:i,factory:i.\u0275fac}),i})(),lw=(()=>{class i{constructor(){this._applications=new Map,fp.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return fp.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=ke({token:i,factory:i.\u0275fac}),i})();class U_{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function jr(i){fp=i}let _o,fp=new U_;const dw=new Sn("AllowMultipleToken");class hw{constructor(o,a){this.name=o,this.token=a}}function al(i,o,a=[]){const l=`Platform: ${o}`,d=new Sn(l);return(p=[])=>{let v=hh();if(!v||v.injector.get(dw,!1))if(i)i(a.concat(p).concat({provide:d,useValue:!0}));else{const D=a.concat(p).concat({provide:d,useValue:!0},{provide:qg,useValue:"platform"});!function Xm(i){if(_o&&!_o.destroyed&&!_o.injector.get(dw,!1))throw new x(400,"");_o=i.get(j_);const o=i.get(sw,null);o&&o.forEach(a=>a())}(Es.create({providers:D,name:l}))}return function Ac(i){const o=hh();if(!o)throw new x(401,"");return o}()}}function hh(){return _o&&!_o.destroyed?_o:null}let j_=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const D=function q_(i,o){let a;return a="noop"===i?new uw:("zone.js"===i?void 0:i)||new Ss({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),N=[{provide:Ss,useValue:D}];return D.run(()=>{const z=Es.create({providers:N,parent:this.injector,name:a.moduleType.name}),re=a.create(z),pe=re.injector.get(md,null);if(!pe)throw new x(402,"");return D.runOutsideAngular(()=>{const we=D.onError.subscribe({next:Ne=>{pe.handleError(Ne)}});re.onDestroy(()=>{G_(this._modules,re),we.unsubscribe()})}),function H_(i,o,a){try{const l=a();return xv(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(pe,D,()=>{const we=re.injector.get(O_);return we.runInitializers(),we.donePromise.then(()=>(function yo(i){me(i,"Expected localeId to be defined"),"string"==typeof i&&(Zf=i.toLowerCase().replace(/_/g,"-"))}(re.injector.get(Qm,Gf)||Gf),this._moduleDoBootstrap(re),re))})})}bootstrapModule(a,l=[]){const d=$_({},l);return function B_(i,o,a){const l=new Xd(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get(ey);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new x(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new x(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(U(Es))},i.\u0275prov=ke({token:i,factory:i.\u0275fac}),i})();function $_(i,o){return Array.isArray(o)?o.reduce($_,i):Object.assign(Object.assign({},i),o)}let ey=(()=>{class i{constructor(a,l,d,p,v){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const D=new F.y(z=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{z.next(this._stable),z.complete()})}),N=new F.y(z=>{let re;this._zone.runOutsideAngular(()=>{re=this._zone.onStable.subscribe(()=>{Ss.assertNotInAngularZone(),R_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,z.next(!0))})})});const pe=this._zone.onUnstable.subscribe(()=>{Ss.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{z.next(!1)}))});return()=>{re.unsubscribe(),pe.unsubscribe()}});this.isStable=(0,K.T)(D,N.pipe((0,j.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new x(405,"");let d;d=a instanceof eu?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const p=function cw(i){return i.isBoundToModule}(d)?void 0:this._injector.get(yc),D=d.create(Es.NULL,[],l||d.selector,p),N=D.location.nativeElement,z=D.injector.get(V_,null),re=z&&D.injector.get(lw);return z&&re&&re.registerApplication(N,z),D.onDestroy(()=>{this.detachView(D.hostView),G_(this.components,D),re&&re.unregisterApplication(N)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new x(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;G_(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(yi,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(U(Ss),U(Es),U(md),U(nl),U(O_))},i.\u0275prov=ke({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function G_(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let pp=!0,fh=!1;function Sc(){return fh=!0,pp}function HD(){if(fh)throw new Error("Cannot enable prod mode after platform setup.");pp=!1}let GD=(()=>{class i{}return i.__NG_ELEMENT_ID__=gp,i})();function gp(i){return function xc(i,o,a){if(Lc(i)&&!a){const l=pr(i.index,o);return new Cs(l,l)}return 47&i.type?new Cs(o[16],o):null}(An(),Ze(),16==(16&i))}class vw{constructor(){}supports(o){return bf(o)}create(o){return new _w(o)}}const vh=(i,o)=>o;class _w{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||vh}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const v=!l||a&&a.currentIndex<ww(l,d,p)?a:l,D=ww(v,d,p),N=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{p||(p=[]);const z=D-d,re=N-d;if(z!=re){for(let we=0;we<z;we++){const Ne=we<p.length?p[we]:p[we]=0,$e=Ne+we;re<=$e&&$e<z&&(p[we]=Ne+1)}p[v.previousIndex]=re-z}}D!==N&&o(v,D,N)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!bf(o))throw new x(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let D=0;D<this.length;D++)p=o[D],v=this._trackByFn(D,p),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,p,v,D)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,v,D),l=!0),a=a._next}else d=0,function kb(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[tr()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,D=>{v=this._trackByFn(d,D),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,D,v,d)),Object.is(a.item,D)||this._addIdentityChange(a,D)):(a=this._mismatch(a,D,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new ul(a,l),p,d),o}_verifyReinsertion(o,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Ew),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ew),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ul{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bw{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Ew{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new bw,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ww(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class Iw{constructor(){}supports(o){return o instanceof Map||zg(o)}create(){return new ZD}}class ZD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||zg(o)))throw new x(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const l=new iy(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class iy{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Z_(){return new K_([new vw])}let K_=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Z_()),deps:[[i,new Mn,new Ft]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new x(901,"")}}return i.\u0275prov=ke({token:i,providedIn:"root",factory:Z_}),i})();function Dw(){return new oy([new Iw])}let oy=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Dw()),deps:[[i,new Mn,new Ft]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new x(901,"")}}return i.\u0275prov=ke({token:i,providedIn:"root",factory:Dw}),i})();const Tw=al(null,"core",[{provide:N_,useValue:"unknown"},{provide:j_,deps:[Es]},{provide:lw,deps:[]},{provide:k_,deps:[]}]);let JD=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(U(ey))},i.\u0275mod=Yt({type:i}),i.\u0275inj=Be({}),i})()},3942:(ht,ge,M)=>{"use strict";M.d(ge,{Z:()=>x});var c=M(2090),ee=M(4859),F=M(9681),K=M(1877);class j{constructor(I,L){this._delegate=I,this.firebase=L,(0,F._addComponent)(I,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=I.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(I){this._delegate.automaticDataCollectionEnabled=I}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(I=>{this._delegate.checkDestroyed(),I()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(I,L=F._DEFAULT_ENTRY_NAME){var ne;this._delegate.checkDestroyed();const J=this._delegate.container.getProvider(I);return!J.isInitialized()&&"EXPLICIT"===(null===(ne=J.getComponent())||void 0===ne?void 0:ne.instantiationMode)&&J.initialize(),J.getImmediate({identifier:L})}_removeServiceInstance(I,L=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(I).clearInstance(L)}_addComponent(I){(0,F._addComponent)(this._delegate,I)}_addOrOverwriteComponent(I){(0,F._addOrOverwriteComponent)(this._delegate,I)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const R=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),_=function E(){const V=function S(V){const I={},L={__esModule:!0,initializeApp:function Z(W,B={}){const te=F.initializeApp(W,B);if((0,c.r3)(I,te.name))return I[te.name];const Y=new V(te,L);return I[te.name]=Y,Y},app:J,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function $(W){const B=W.name,te=B.replace("-compat","");if(F._registerComponent(W)&&"PUBLIC"===W.type){const Y=(de=J())=>{if("function"!=typeof de[te])throw R.create("invalid-app-argument",{appName:B});return de[te]()};void 0!==W.serviceProps&&(0,c.ZB)(Y,W.serviceProps),L[te]=Y,V.prototype[te]=function(...de){return this._getService.bind(this,B).apply(this,W.multipleInstances?de:[])}}return"PUBLIC"===W.type?L[te]:null},removeApp:function ne(W){delete I[W]},useAsService:function H(W,B){return"serverAuth"===B?null:B},modularAPIs:F}};function J(W){if(!(0,c.r3)(I,W=W||F._DEFAULT_ENTRY_NAME))throw R.create("no-app",{appName:W});return I[W]}return L.default=L,Object.defineProperty(L,"apps",{get:function X(){return Object.keys(I).map(W=>I[W])}}),J.App=V,L}(j);return V.INTERNAL=Object.assign(Object.assign({},V.INTERNAL),{createFirebaseNamespace:E,extendNamespace:function I(L){(0,c.ZB)(V,L)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),V}(),T=new K.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){T.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const V=self.firebase.SDK_VERSION;V&&V.indexOf("LITE")>=0&&T.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const x=_;!function A(V){(0,F.registerVersion)("@firebase/app-compat","0.1.32",V)}()},9681:(ht,ge,M)=>{"use strict";M.r(ge),M.d(ge,{FirebaseError:()=>K.ZR,SDK_VERSION:()=>In,_DEFAULT_ENTRY_NAME:()=>me,_addComponent:()=>De,_addOrOverwriteComponent:()=>ke,_apps:()=>xe,_clearComponents:()=>wt,_components:()=>he,_getProvider:()=>Be,_registerComponent:()=>Re,_removeServiceInstance:()=>Qe,deleteApp:()=>He,getApp:()=>je,getApps:()=>qe,initializeApp:()=>yn,onLog:()=>vt,registerVersion:()=>ze,setLogLevel:()=>Rt});var c=M(5861),ee=M(4859),F=M(1877),K=M(2090),j=M(8766);class q{constructor(Te){this.container=Te}getPlatformInfoString(){return this.container.getProviders().map(Ce=>{if(function R(ve){const Te=ve.getComponent();return"VERSION"===(null==Te?void 0:Te.type)}(Ce)){const Ke=Ce.getImmediate();return`${Ke.library}/${Ke.version}`}return null}).filter(Ce=>Ce).join(" ")}}const S="@firebase/app",E="0.7.31",_=new F.Yd("@firebase/app"),me="[DEFAULT]",_e={[S]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},xe=new Map,he=new Map;function De(ve,Te){try{ve.container.addComponent(Te)}catch(Ce){_.debug(`Component ${Te.name} failed to register with FirebaseApp ${ve.name}`,Ce)}}function ke(ve,Te){ve.container.addOrOverwriteComponent(Te)}function Re(ve){const Te=ve.name;if(he.has(Te))return _.debug(`There were multiple attempts to register component ${Te}.`),!1;he.set(Te,ve);for(const Ce of xe.values())De(Ce,ve);return!0}function Be(ve,Te){const Ce=ve.container.getProvider("heartbeat").getImmediate({optional:!0});return Ce&&Ce.triggerHeartbeat(),ve.container.getProvider(Te)}function Qe(ve,Te,Ce=me){Be(ve,Te).clearInstance(Ce)}function wt(){he.clear()}const Mt=new K.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Bt{constructor(Te,Ce,Ke){this._isDeleted=!1,this._options=Object.assign({},Te),this._config=Object.assign({},Ce),this._name=Ce.name,this._automaticDataCollectionEnabled=Ce.automaticDataCollectionEnabled,this._container=Ke,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Te){this.checkDestroyed(),this._automaticDataCollectionEnabled=Te}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Te){this._isDeleted=Te}checkDestroyed(){if(this.isDeleted)throw Mt.create("app-deleted",{appName:this._name})}}const In="9.9.3";function yn(ve,Te={}){"object"!=typeof Te&&(Te={name:Te});const Ce=Object.assign({name:me,automaticDataCollectionEnabled:!1},Te),Ke=Ce.name;if("string"!=typeof Ke||!Ke)throw Mt.create("bad-app-name",{appName:String(Ke)});const rt=xe.get(Ke);if(rt){if((0,K.vZ)(ve,rt.options)&&(0,K.vZ)(Ce,rt.config))return rt;throw Mt.create("duplicate-app",{appName:Ke})}const Dt=new ee.H0(Ke);for(const un of he.values())Dt.addComponent(un);const vn=new Bt(ve,Ce,Dt);return xe.set(Ke,vn),vn}function je(ve=me){const Te=xe.get(ve);if(!Te)throw Mt.create("no-app",{appName:ve});return Te}function qe(){return Array.from(xe.values())}function He(ve){return it.apply(this,arguments)}function it(){return(it=(0,c.Z)(function*(ve){const Te=ve.name;xe.has(Te)&&(xe.delete(Te),yield Promise.all(ve.container.getProviders().map(Ce=>Ce.delete())),ve.isDeleted=!0)})).apply(this,arguments)}function ze(ve,Te,Ce){var Ke;let rt=null!==(Ke=_e[ve])&&void 0!==Ke?Ke:ve;Ce&&(rt+=`-${Ce}`);const Dt=rt.match(/\s|\//),vn=Te.match(/\s|\//);if(Dt||vn){const un=[`Unable to register library "${rt}" with version "${Te}":`];return Dt&&un.push(`library name "${rt}" contains illegal characters (whitespace or "/")`),Dt&&vn&&un.push("and"),vn&&un.push(`version name "${Te}" contains illegal characters (whitespace or "/")`),void _.warn(un.join(" "))}Re(new ee.wA(`${rt}-version`,()=>({library:rt,version:Te}),"VERSION"))}function vt(ve,Te){if(null!==ve&&"function"!=typeof ve)throw Mt.create("invalid-log-argument");(0,F.Am)(ve,Te)}function Rt(ve){(0,F.Ub)(ve)}const fn="firebase-heartbeat-store";let en=null;function Io(){return en||(en=(0,j.X3)("firebase-heartbeat-database",1,{upgrade:(ve,Te)=>{0===Te&&ve.createObjectStore(fn)}}).catch(ve=>{throw Mt.create("idb-open",{originalErrorMessage:ve.message})})),en}function ft(){return(ft=(0,c.Z)(function*(ve){var Te;try{return(yield Io()).transaction(fn).objectStore(fn).get(ri(ve))}catch(Ce){if(Ce instanceof K.ZR)_.warn(Ce.message);else{const Ke=Mt.create("idb-get",{originalErrorMessage:null===(Te=Ce)||void 0===Te?void 0:Te.message});_.warn(Ke.message)}}})).apply(this,arguments)}function Lt(ve,Te){return Er.apply(this,arguments)}function Er(){return(Er=(0,c.Z)(function*(ve,Te){var Ce;try{const rt=(yield Io()).transaction(fn,"readwrite");return yield rt.objectStore(fn).put(Te,ri(ve)),rt.done}catch(Ke){if(Ke instanceof K.ZR)_.warn(Ke.message);else{const rt=Mt.create("idb-set",{originalErrorMessage:null===(Ce=Ke)||void 0===Ce?void 0:Ce.message});_.warn(rt.message)}}})).apply(this,arguments)}function ri(ve){return`${ve.name}!${ve.options.appId}`}class wr{constructor(Te){this.container=Te,this._heartbeatsCache=null;const Ce=this.container.getProvider("app").getImmediate();this._storage=new To(Ce),this._heartbeatsCachePromise=this._storage.read().then(Ke=>(this._heartbeatsCache=Ke,Ke))}triggerHeartbeat(){var Te=this;return(0,c.Z)(function*(){const Ke=Te.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),rt=Mr();if(null===Te._heartbeatsCache&&(Te._heartbeatsCache=yield Te._heartbeatsCachePromise),Te._heartbeatsCache.lastSentHeartbeatDate!==rt&&!Te._heartbeatsCache.heartbeats.some(Dt=>Dt.date===rt))return Te._heartbeatsCache.heartbeats.push({date:rt,agent:Ke}),Te._heartbeatsCache.heartbeats=Te._heartbeatsCache.heartbeats.filter(Dt=>{const vn=new Date(Dt.date).valueOf();return Date.now()-vn<=2592e6}),Te._storage.overwrite(Te._heartbeatsCache)})()}getHeartbeatsHeader(){var Te=this;return(0,c.Z)(function*(){if(null===Te._heartbeatsCache&&(yield Te._heartbeatsCachePromise),null===Te._heartbeatsCache||0===Te._heartbeatsCache.heartbeats.length)return"";const Ce=Mr(),{heartbeatsToSend:Ke,unsentEntries:rt}=function Ct(ve,Te=1024){const Ce=[];let Ke=ve.slice();for(const rt of ve){const Dt=Ce.find(vn=>vn.agent===rt.agent);if(Dt){if(Dt.dates.push(rt.date),Ee(Ce)>Te){Dt.dates.pop();break}}else if(Ce.push({agent:rt.agent,dates:[rt.date]}),Ee(Ce)>Te){Ce.pop();break}Ke=Ke.slice(1)}return{heartbeatsToSend:Ce,unsentEntries:Ke}}(Te._heartbeatsCache.heartbeats),Dt=(0,K.L)(JSON.stringify({version:2,heartbeats:Ke}));return Te._heartbeatsCache.lastSentHeartbeatDate=Ce,rt.length>0?(Te._heartbeatsCache.heartbeats=rt,yield Te._storage.overwrite(Te._heartbeatsCache)):(Te._heartbeatsCache.heartbeats=[],Te._storage.overwrite(Te._heartbeatsCache)),Dt})()}}function Mr(){return(new Date).toISOString().substring(0,10)}class To{constructor(Te){this.app=Te,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,K.hl)()&&(0,K.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Te=this;return(0,c.Z)(function*(){return(yield Te._canUseIndexedDBPromise)&&(yield function St(ve){return ft.apply(this,arguments)}(Te.app))||{heartbeats:[]}})()}overwrite(Te){var Ce=this;return(0,c.Z)(function*(){var Ke;if(yield Ce._canUseIndexedDBPromise){const Dt=yield Ce.read();return Lt(Ce.app,{lastSentHeartbeatDate:null!==(Ke=Te.lastSentHeartbeatDate)&&void 0!==Ke?Ke:Dt.lastSentHeartbeatDate,heartbeats:Te.heartbeats})}})()}add(Te){var Ce=this;return(0,c.Z)(function*(){var Ke;if(yield Ce._canUseIndexedDBPromise){const Dt=yield Ce.read();return Lt(Ce.app,{lastSentHeartbeatDate:null!==(Ke=Te.lastSentHeartbeatDate)&&void 0!==Ke?Ke:Dt.lastSentHeartbeatDate,heartbeats:[...Dt.heartbeats,...Te.heartbeats]})}})()}}function Ee(ve){return(0,K.L)(JSON.stringify({version:2,heartbeats:ve})).length}!function Ae(ve){Re(new ee.wA("platform-logger",Te=>new q(Te),"PRIVATE")),Re(new ee.wA("heartbeat",Te=>new wr(Te),"PRIVATE")),ze(S,E,ve),ze(S,E,"esm2017"),ze("fire-js","")}("")},4859:(ht,ge,M)=>{"use strict";M.d(ge,{wA:()=>F,H0:()=>S});var c=M(5861),ee=M(2090);class F{constructor(_,T,C){this.name=_,this.instanceFactory=T,this.type=C,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(_){return this.instantiationMode=_,this}setMultipleInstances(_){return this.multipleInstances=_,this}setServiceProps(_){return this.serviceProps=_,this}setInstanceCreatedCallback(_){return this.onInstanceCreated=_,this}}const K="[DEFAULT]";class j{constructor(_,T){this.name=_,this.container=T,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(_){const T=this.normalizeInstanceIdentifier(_);if(!this.instancesDeferred.has(T)){const C=new ee.BH;if(this.instancesDeferred.set(T,C),this.isInitialized(T)||this.shouldAutoInitialize())try{const k=this.getOrInitializeService({instanceIdentifier:T});k&&C.resolve(k)}catch(k){}}return this.instancesDeferred.get(T).promise}getImmediate(_){var T;const C=this.normalizeInstanceIdentifier(null==_?void 0:_.identifier),k=null!==(T=null==_?void 0:_.optional)&&void 0!==T&&T;if(!this.isInitialized(C)&&!this.shouldAutoInitialize()){if(k)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:C})}catch(A){if(k)return null;throw A}}getComponent(){return this.component}setComponent(_){if(_.name!==this.name)throw Error(`Mismatching Component ${_.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=_,this.shouldAutoInitialize()){if(function R(E){return"EAGER"===E.instantiationMode}(_))try{this.getOrInitializeService({instanceIdentifier:K})}catch(T){}for(const[T,C]of this.instancesDeferred.entries()){const k=this.normalizeInstanceIdentifier(T);try{const A=this.getOrInitializeService({instanceIdentifier:k});C.resolve(A)}catch(A){}}}}clearInstance(_=K){this.instancesDeferred.delete(_),this.instancesOptions.delete(_),this.instances.delete(_)}delete(){var _=this;return(0,c.Z)(function*(){const T=Array.from(_.instances.values());yield Promise.all([...T.filter(C=>"INTERNAL"in C).map(C=>C.INTERNAL.delete()),...T.filter(C=>"_delete"in C).map(C=>C._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(_=K){return this.instances.has(_)}getOptions(_=K){return this.instancesOptions.get(_)||{}}initialize(_={}){const{options:T={}}=_,C=this.normalizeInstanceIdentifier(_.instanceIdentifier);if(this.isInitialized(C))throw Error(`${this.name}(${C}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const k=this.getOrInitializeService({instanceIdentifier:C,options:T});for(const[A,x]of this.instancesDeferred.entries())C===this.normalizeInstanceIdentifier(A)&&x.resolve(k);return k}onInit(_,T){var C;const k=this.normalizeInstanceIdentifier(T),A=null!==(C=this.onInitCallbacks.get(k))&&void 0!==C?C:new Set;A.add(_),this.onInitCallbacks.set(k,A);const x=this.instances.get(k);return x&&_(x,k),()=>{A.delete(_)}}invokeOnInitCallbacks(_,T){const C=this.onInitCallbacks.get(T);if(C)for(const k of C)try{k(_,T)}catch(A){}}getOrInitializeService({instanceIdentifier:_,options:T={}}){let C=this.instances.get(_);if(!C&&this.component&&(C=this.component.instanceFactory(this.container,{instanceIdentifier:(E=_,E===K?void 0:E),options:T}),this.instances.set(_,C),this.instancesOptions.set(_,T),this.invokeOnInitCallbacks(C,_),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,_,C)}catch(k){}var E;return C||null}normalizeInstanceIdentifier(_=K){return this.component?this.component.multipleInstances?_:K:_}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class S{constructor(_){this.name=_,this.providers=new Map}addComponent(_){const T=this.getProvider(_.name);if(T.isComponentSet())throw new Error(`Component ${_.name} has already been registered with ${this.name}`);T.setComponent(_)}addOrOverwriteComponent(_){this.getProvider(_.name).isComponentSet()&&this.providers.delete(_.name),this.addComponent(_)}getProvider(_){if(this.providers.has(_))return this.providers.get(_);const T=new j(_,this);return this.providers.set(_,T),T}getProviders(){return Array.from(this.providers.values())}}},1877:(ht,ge,M)=>{"use strict";M.d(ge,{in:()=>ee,Yd:()=>R,Ub:()=>S,Am:()=>E});const c=[];var ee=(()=>{return(_=ee||(ee={}))[_.DEBUG=0]="DEBUG",_[_.VERBOSE=1]="VERBOSE",_[_.INFO=2]="INFO",_[_.WARN=3]="WARN",_[_.ERROR=4]="ERROR",_[_.SILENT=5]="SILENT",ee;var _})();const F={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},K=ee.INFO,j={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},q=(_,T,...C)=>{if(T<_.logLevel)return;const k=(new Date).toISOString(),A=j[T];if(!A)throw new Error(`Attempted to log a message with an invalid logType (value: ${T})`);console[A](`[${k}]  ${_.name}:`,...C)};class R{constructor(T){this.name=T,this._logLevel=K,this._logHandler=q,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(T){if(!(T in ee))throw new TypeError(`Invalid value "${T}" assigned to \`logLevel\``);this._logLevel=T}setLogLevel(T){this._logLevel="string"==typeof T?F[T]:T}get logHandler(){return this._logHandler}set logHandler(T){if("function"!=typeof T)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=T}get userLogHandler(){return this._userLogHandler}set userLogHandler(T){this._userLogHandler=T}debug(...T){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...T),this._logHandler(this,ee.DEBUG,...T)}log(...T){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...T),this._logHandler(this,ee.VERBOSE,...T)}info(...T){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...T),this._logHandler(this,ee.INFO,...T)}warn(...T){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...T),this._logHandler(this,ee.WARN,...T)}error(...T){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...T),this._logHandler(this,ee.ERROR,...T)}}function S(_){c.forEach(T=>{T.setLogLevel(_)})}function E(_,T){for(const C of c){let k=null;T&&T.level&&(k=F[T.level]),C.userLogHandler=null===_?null:(A,x,...V)=>{const I=V.map(L=>{if(null==L)return null;if("string"==typeof L)return L;if("number"==typeof L||"boolean"==typeof L)return L.toString();if(L instanceof Error)return L.message;try{return JSON.stringify(L)}catch(ne){return null}}).filter(L=>L).join(" ");x>=(null!=k?k:A.logLevel)&&_({level:ee[x].toLowerCase(),message:I,args:V,type:A.name})}}}},8766:(ht,ge,M)=>{"use strict";M.d(ge,{Lj:()=>Z,X3:()=>J});var c=M(5861);let F,K;const R=new WeakMap,S=new WeakMap,E=new WeakMap,_=new WeakMap,T=new WeakMap;let A={get(B,te,Y){if(B instanceof IDBTransaction){if("done"===te)return S.get(B);if("objectStoreNames"===te)return B.objectStoreNames||E.get(B);if("store"===te)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return L(B[te])},set:(B,te,Y)=>(B[te]=Y,!0),has:(B,te)=>B instanceof IDBTransaction&&("done"===te||"store"===te)||te in B};function I(B){return"function"==typeof B?function V(B){return B!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function q(){return K||(K=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(B)?function(...te){return B.apply(ne(this),te),L(R.get(this))}:function(...te){return L(B.apply(ne(this),te))}:function(te,...Y){const de=B.call(ne(this),te,...Y);return E.set(de,te.sort?te.sort():[te]),L(de)}}(B):(B instanceof IDBTransaction&&function k(B){if(S.has(B))return;const te=new Promise((Y,de)=>{const ue=()=>{B.removeEventListener("complete",be),B.removeEventListener("error",ce),B.removeEventListener("abort",ce)},be=()=>{Y(),ue()},ce=()=>{de(B.error||new DOMException("AbortError","AbortError")),ue()};B.addEventListener("complete",be),B.addEventListener("error",ce),B.addEventListener("abort",ce)});S.set(B,te)}(B),((B,te)=>te.some(Y=>B instanceof Y))(B,function j(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(B,A):B)}function L(B){if(B instanceof IDBRequest)return function C(B){const te=new Promise((Y,de)=>{const ue=()=>{B.removeEventListener("success",be),B.removeEventListener("error",ce)},be=()=>{Y(L(B.result)),ue()},ce=()=>{de(B.error),ue()};B.addEventListener("success",be),B.addEventListener("error",ce)});return te.then(Y=>{Y instanceof IDBCursor&&R.set(Y,B)}).catch(()=>{}),T.set(te,B),te}(B);if(_.has(B))return _.get(B);const te=I(B);return te!==B&&(_.set(B,te),T.set(te,B)),te}const ne=B=>T.get(B);function J(B,te,{blocked:Y,upgrade:de,blocking:ue,terminated:be}={}){const ce=indexedDB.open(B,te),le=L(ce);return de&&ce.addEventListener("upgradeneeded",ie=>{de(L(ce.result),ie.oldVersion,ie.newVersion,L(ce.transaction))}),Y&&ce.addEventListener("blocked",()=>Y()),le.then(ie=>{be&&ie.addEventListener("close",()=>be()),ue&&ie.addEventListener("versionchange",()=>ue())}).catch(()=>{}),le}function Z(B,{blocked:te}={}){const Y=indexedDB.deleteDatabase(B);return te&&Y.addEventListener("blocked",()=>te()),L(Y).then(()=>{})}const X=["get","getKey","getAll","getAllKeys","count"],$=["put","add","delete","clear"],H=new Map;function W(B,te){if(!(B instanceof IDBDatabase)||te in B||"string"!=typeof te)return;if(H.get(te))return H.get(te);const Y=te.replace(/FromIndex$/,""),de=te!==Y,ue=$.includes(Y);if(!(Y in(de?IDBIndex:IDBObjectStore).prototype)||!ue&&!X.includes(Y))return;const be=function(){var ce=(0,c.Z)(function*(le,...ie){const fe=this.transaction(le,ue?"readwrite":"readonly");let me=fe.store;return de&&(me=me.index(ie.shift())),(yield Promise.all([me[Y](...ie),ue&&fe.done]))[0]});return function(ie){return ce.apply(this,arguments)}}();return H.set(te,be),be}!function x(B){A=B(A)}(B=>z1(G1({},B),{get:(te,Y,de)=>W(te,Y)||B.get(te,Y,de),has:(te,Y)=>!!W(te,Y)||B.has(te,Y)}))},5861:(ht,ge,M)=>{"use strict";function c(F,K,j,q,R,S,E){try{var _=F[S](E),T=_.value}catch(C){return void j(C)}_.done?K(T):Promise.resolve(T).then(q,R)}function ee(F){return function(){var K=this,j=arguments;return new Promise(function(q,R){var S=F.apply(K,j);function E(T){c(S,q,R,E,_,"next",T)}function _(T){c(S,q,R,E,_,"throw",T)}E(void 0)})}}M.d(ge,{Z:()=>ee})}},ht=>{ht(ht.s=6465)}]);